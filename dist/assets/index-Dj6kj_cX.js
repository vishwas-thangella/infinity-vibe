(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var um={exports:{}},lu={},cm={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hw;function LR(){if(Hw)return Oe;Hw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,R={};function x(z,ee,Pe){this.props=z,this.context=ee,this.refs=R,this.updater=Pe||T}x.prototype.isReactComponent={},x.prototype.setState=function(z,ee){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ee,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function D(){}D.prototype=x.prototype;function U(z,ee,Pe){this.props=z,this.context=ee,this.refs=R,this.updater=Pe||T}var O=U.prototype=new D;O.constructor=U,b(O,x.prototype),O.isPureReactComponent=!0;var K=Array.isArray,Y=Object.prototype.hasOwnProperty,Z={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(z,ee,Pe){var Ne,De={},Le=null,qe=null;if(ee!=null)for(Ne in ee.ref!==void 0&&(qe=ee.ref),ee.key!==void 0&&(Le=""+ee.key),ee)Y.call(ee,Ne)&&!P.hasOwnProperty(Ne)&&(De[Ne]=ee[Ne]);var Be=arguments.length-2;if(Be===1)De.children=Pe;else if(1<Be){for(var Je=Array(Be),an=0;an<Be;an++)Je[an]=arguments[an+2];De.children=Je}if(z&&z.defaultProps)for(Ne in Be=z.defaultProps,Be)De[Ne]===void 0&&(De[Ne]=Be[Ne]);return{$$typeof:n,type:z,key:Le,ref:qe,props:De,_owner:Z.current}}function C(z,ee){return{$$typeof:n,type:z.type,key:ee,ref:z.ref,props:z.props,_owner:z._owner}}function V(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function j(z){var ee={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Pe){return ee[Pe]})}var B=/\/+/g;function L(z,ee){return typeof z=="object"&&z!==null&&z.key!=null?j(""+z.key):ee.toString(36)}function Fe(z,ee,Pe,Ne,De){var Le=typeof z;(Le==="undefined"||Le==="boolean")&&(z=null);var qe=!1;if(z===null)qe=!0;else switch(Le){case"string":case"number":qe=!0;break;case"object":switch(z.$$typeof){case n:case e:qe=!0}}if(qe)return qe=z,De=De(qe),z=Ne===""?"."+L(qe,0):Ne,K(De)?(Pe="",z!=null&&(Pe=z.replace(B,"$&/")+"/"),Fe(De,ee,Pe,"",function(an){return an})):De!=null&&(V(De)&&(De=C(De,Pe+(!De.key||qe&&qe.key===De.key?"":(""+De.key).replace(B,"$&/")+"/")+z)),ee.push(De)),1;if(qe=0,Ne=Ne===""?".":Ne+":",K(z))for(var Be=0;Be<z.length;Be++){Le=z[Be];var Je=Ne+L(Le,Be);qe+=Fe(Le,ee,Pe,Je,De)}else if(Je=v(z),typeof Je=="function")for(z=Je.call(z),Be=0;!(Le=z.next()).done;)Le=Le.value,Je=Ne+L(Le,Be++),qe+=Fe(Le,ee,Pe,Je,De);else if(Le==="object")throw ee=String(z),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return qe}function mt(z,ee,Pe){if(z==null)return z;var Ne=[],De=0;return Fe(z,Ne,"","",function(Le){return ee.call(Pe,Le,De++)}),Ne}function jt(z){if(z._status===-1){var ee=z._result;ee=ee(),ee.then(function(Pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=Pe)},function(Pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=Pe)}),z._status===-1&&(z._status=0,z._result=ee)}if(z._status===1)return z._result.default;throw z._result}var Ce={current:null},se={transition:null},pe={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:se,ReactCurrentOwner:Z};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:mt,forEach:function(z,ee,Pe){mt(z,function(){ee.apply(this,arguments)},Pe)},count:function(z){var ee=0;return mt(z,function(){ee++}),ee},toArray:function(z){return mt(z,function(ee){return ee})||[]},only:function(z){if(!V(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Oe.Component=x,Oe.Fragment=t,Oe.Profiler=s,Oe.PureComponent=U,Oe.StrictMode=r,Oe.Suspense=h,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Oe.act=ae,Oe.cloneElement=function(z,ee,Pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ne=b({},z.props),De=z.key,Le=z.ref,qe=z._owner;if(ee!=null){if(ee.ref!==void 0&&(Le=ee.ref,qe=Z.current),ee.key!==void 0&&(De=""+ee.key),z.type&&z.type.defaultProps)var Be=z.type.defaultProps;for(Je in ee)Y.call(ee,Je)&&!P.hasOwnProperty(Je)&&(Ne[Je]=ee[Je]===void 0&&Be!==void 0?Be[Je]:ee[Je])}var Je=arguments.length-2;if(Je===1)Ne.children=Pe;else if(1<Je){Be=Array(Je);for(var an=0;an<Je;an++)Be[an]=arguments[an+2];Ne.children=Be}return{$$typeof:n,type:z.type,key:De,ref:Le,props:Ne,_owner:qe}},Oe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Oe.createElement=A,Oe.createFactory=function(z){var ee=A.bind(null,z);return ee.type=z,ee},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(z){return{$$typeof:c,render:z}},Oe.isValidElement=V,Oe.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:jt}},Oe.memo=function(z,ee){return{$$typeof:p,type:z,compare:ee===void 0?null:ee}},Oe.startTransition=function(z){var ee=se.transition;se.transition={};try{z()}finally{se.transition=ee}},Oe.unstable_act=ae,Oe.useCallback=function(z,ee){return Ce.current.useCallback(z,ee)},Oe.useContext=function(z){return Ce.current.useContext(z)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(z){return Ce.current.useDeferredValue(z)},Oe.useEffect=function(z,ee){return Ce.current.useEffect(z,ee)},Oe.useId=function(){return Ce.current.useId()},Oe.useImperativeHandle=function(z,ee,Pe){return Ce.current.useImperativeHandle(z,ee,Pe)},Oe.useInsertionEffect=function(z,ee){return Ce.current.useInsertionEffect(z,ee)},Oe.useLayoutEffect=function(z,ee){return Ce.current.useLayoutEffect(z,ee)},Oe.useMemo=function(z,ee){return Ce.current.useMemo(z,ee)},Oe.useReducer=function(z,ee,Pe){return Ce.current.useReducer(z,ee,Pe)},Oe.useRef=function(z){return Ce.current.useRef(z)},Oe.useState=function(z){return Ce.current.useState(z)},Oe.useSyncExternalStore=function(z,ee,Pe){return Ce.current.useSyncExternalStore(z,ee,Pe)},Oe.useTransition=function(){return Ce.current.useTransition()},Oe.version="18.3.1",Oe}var qw;function uy(){return qw||(qw=1,cm.exports=LR()),cm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw;function VR(){if(Kw)return lu;Kw=1;var n=uy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var m,y={},v=null,T=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(T=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:v,ref:T,props:y,_owner:s.current}}return lu.Fragment=t,lu.jsx=l,lu.jsxs=l,lu}var Gw;function MR(){return Gw||(Gw=1,um.exports=VR()),um.exports}var I=MR(),jh={},hm={exports:{}},vn={},dm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jw;function jR(){return Jw||(Jw=1,(function(n){function e(se,pe){var ae=se.length;se.push(pe);e:for(;0<ae;){var z=ae-1>>>1,ee=se[z];if(0<s(ee,pe))se[z]=pe,se[ae]=ee,ae=z;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var pe=se[0],ae=se.pop();if(ae!==pe){se[0]=ae;e:for(var z=0,ee=se.length,Pe=ee>>>1;z<Pe;){var Ne=2*(z+1)-1,De=se[Ne],Le=Ne+1,qe=se[Le];if(0>s(De,ae))Le<ee&&0>s(qe,De)?(se[z]=qe,se[Le]=ae,z=Le):(se[z]=De,se[Ne]=ae,z=Ne);else if(Le<ee&&0>s(qe,ae))se[z]=qe,se[Le]=ae,z=Le;else break e}}return pe}function s(se,pe){var ae=se.sortIndex-pe.sortIndex;return ae!==0?ae:se.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],m=1,y=null,v=3,T=!1,b=!1,R=!1,x=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(se){for(var pe=t(p);pe!==null;){if(pe.callback===null)r(p);else if(pe.startTime<=se)r(p),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(p)}}function K(se){if(R=!1,O(se),!b)if(t(h)!==null)b=!0,jt(Y);else{var pe=t(p);pe!==null&&Ce(K,pe.startTime-se)}}function Y(se,pe){b=!1,R&&(R=!1,D(A),A=-1),T=!0;var ae=v;try{for(O(pe),y=t(h);y!==null&&(!(y.expirationTime>pe)||se&&!j());){var z=y.callback;if(typeof z=="function"){y.callback=null,v=y.priorityLevel;var ee=z(y.expirationTime<=pe);pe=n.unstable_now(),typeof ee=="function"?y.callback=ee:y===t(h)&&r(h),O(pe)}else r(h);y=t(h)}if(y!==null)var Pe=!0;else{var Ne=t(p);Ne!==null&&Ce(K,Ne.startTime-pe),Pe=!1}return Pe}finally{y=null,v=ae,T=!1}}var Z=!1,P=null,A=-1,C=5,V=-1;function j(){return!(n.unstable_now()-V<C)}function B(){if(P!==null){var se=n.unstable_now();V=se;var pe=!0;try{pe=P(!0,se)}finally{pe?L():(Z=!1,P=null)}}else Z=!1}var L;if(typeof U=="function")L=function(){U(B)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,mt=Fe.port2;Fe.port1.onmessage=B,L=function(){mt.postMessage(null)}}else L=function(){x(B,0)};function jt(se){P=se,Z||(Z=!0,L())}function Ce(se,pe){A=x(function(){se(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){b||T||(b=!0,jt(Y))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(v){case 1:case 2:case 3:var pe=3;break;default:pe=v}var ae=v;v=pe;try{return se()}finally{v=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,pe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ae=v;v=se;try{return pe()}finally{v=ae}},n.unstable_scheduleCallback=function(se,pe,ae){var z=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?z+ae:z):ae=z,se){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ae+ee,se={id:m++,callback:pe,priorityLevel:se,startTime:ae,expirationTime:ee,sortIndex:-1},ae>z?(se.sortIndex=ae,e(p,se),t(h)===null&&se===t(p)&&(R?(D(A),A=-1):R=!0,Ce(K,ae-z))):(se.sortIndex=ee,e(h,se),b||T||(b=!0,jt(Y))),se},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(se){var pe=v;return function(){var ae=v;v=pe;try{return se.apply(this,arguments)}finally{v=ae}}}})(fm)),fm}var Yw;function UR(){return Yw||(Yw=1,dm.exports=jR()),dm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function FR(){if(Qw)return vn;Qw=1;var n=uy(),e=UR();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function v(i){return h.call(y,i)?!0:h.call(m,i)?!1:p.test(i)?y[i]=!0:(m[i]=!0,!1)}function T(i,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,a,u,f){if(a===null||typeof a>"u"||T(i,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function R(i,a,u,f,g,_,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=_,this.removeEmptyString=S}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new R(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];x[a]=new R(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new R(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new R(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new R(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new R(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new R(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new R(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new R(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,U);x[a]=new R(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,U);x[a]=new R(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,U);x[a]=new R(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new R(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new R(i,1,!1,i.toLowerCase(),null,!0,!0)});function O(i,a,u,f){var g=x.hasOwnProperty(a)?x[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,u,g,f)&&(u=null),f||g===null?v(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,a,u):i.setAttribute(a,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),Z=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),j=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),jt=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),se=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,z;function ee(i){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var Pe=!1;function Ne(i,a){if(!i||Pe)return"";Pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(G){var f=G}Reflect.construct(i,[],a)}else{try{a.call()}catch(G){f=G}i.call(a.prototype)}else{try{throw Error()}catch(G){f=G}i()}}catch(G){if(G&&f&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),_=f.stack.split(`
`),S=g.length-1,N=_.length-1;1<=S&&0<=N&&g[S]!==_[N];)N--;for(;1<=S&&0<=N;S--,N--)if(g[S]!==_[N]){if(S!==1||N!==1)do if(S--,N--,0>N||g[S]!==_[N]){var F=`
`+g[S].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=S&&0<=N);break}}}finally{Pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?ee(i):""}function De(i){switch(i.tag){case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return i=Ne(i.type,!1),i;case 11:return i=Ne(i.type.render,!1),i;case 1:return i=Ne(i.type,!0),i;default:return""}}function Le(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case Z:return"Portal";case C:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case Fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case j:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case mt:return a=i.displayName||null,a!==null?a:Le(i.type)||"Memo";case jt:a=i._payload,i=i._init;try{return Le(i(a))}catch{}}return null}function qe(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Je(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function an(i){var a=Je(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,_.call(this,S)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Co(i){i._valueTracker||(i._valueTracker=an(i))}function pl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return i&&(f=Je(i)?i.checked?"true":"false":i.value),i=f,i!==u?(a.setValue(i),!0):!1}function bs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Po(i,a){var u=a.checked;return ae({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Sc(i,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Be(a.value!=null?a.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function No(i,a){a=a.checked,a!=null&&O(i,"checked",a,!1)}function ki(i,a){No(i,a);var u=Be(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?wt(i,a.type,u):a.hasOwnProperty("defaultValue")&&wt(i,a.type,Be(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function ml(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function wt(i,a,u){(a!=="number"||bs(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var gt=Array.isArray;function Hn(i,a,u,f){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Be(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function gl(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function yl(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Be(u)}}function bc(i,a){var u=Be(a.value),f=Be(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function Is(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function vl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oo(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?vl(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var xs,Ic=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,u,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=xs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ri(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xc=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(i){xc.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),As[a]=As[i]})});function ks(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||As.hasOwnProperty(i)&&As[i]?(""+a).trim():a+"px"}function Do(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=ks(u,a[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var _l=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(i,a){if(a){if(_l[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Lo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rs=null;function Vo(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Kr=null,Gr=null,ht=null;function wl(i){if(i=Kl(i)){if(typeof Kr!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Zc(a),Kr(i.stateNode,i.type,a))}}function Cs(i){Gr?ht?ht.push(i):ht=[i]:Gr=i}function Ps(){if(Gr){var i=Gr,a=ht;if(ht=Gr=null,wl(i),a)for(i=0;i<a.length;i++)wl(a[i])}}function Ac(i,a){return i(a)}function kc(){}var pr=!1;function Rc(i,a,u){if(pr)return i(a,u);pr=!0;try{return Ac(i,a,u)}finally{pr=!1,(Gr!==null||ht!==null)&&(kc(),Ps())}}function Ci(i,a){var u=i.stateNode;if(u===null)return null;var f=Zc(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Ns=!1;if(c)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{Ns=!1}function Cc(i,a,u,f,g,_,S,N,F){var G=Array.prototype.slice.call(arguments,3);try{a.apply(u,G)}catch(ne){this.onError(ne)}}var Jr=!1,mr=null,Mo=!1,Pn=null,Pc={onError:function(i){Jr=!0,mr=i}};function Nc(i,a,u,f,g,_,S,N,F){Jr=!1,mr=null,Cc.apply(Pc,arguments)}function El(i,a,u,f,g,_,S,N,F){if(Nc.apply(this,arguments),Jr){if(Jr){var G=mr;Jr=!1,mr=null}else throw Error(t(198));Mo||(Mo=!0,Pn=G)}}function Kn(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function Tl(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Oc(i){if(Kn(i)!==i)throw Error(t(188))}function Dc(i){var a=i.alternate;if(!a){if(a=Kn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,f=a;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return Oc(g),i;if(_===f)return Oc(g),a;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=_;else{for(var S=!1,N=g.child;N;){if(N===u){S=!0,u=g,f=_;break}if(N===f){S=!0,f=g,u=_;break}N=N.sibling}if(!S){for(N=_.child;N;){if(N===u){S=!0,u=_,f=g;break}if(N===f){S=!0,f=_,u=g;break}N=N.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function Lc(i){return i=Dc(i),i!==null?Pi(i):null}function Pi(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Pi(i);if(a!==null)return a;i=i.sibling}return null}var Sl=e.unstable_scheduleCallback,jo=e.unstable_cancelCallback,Ni=e.unstable_shouldYield,Yr=e.unstable_requestPaint,tt=e.unstable_now,Ff=e.unstable_getCurrentPriorityLevel,Uo=e.unstable_ImmediatePriority,bl=e.unstable_UserBlockingPriority,Oi=e.unstable_NormalPriority,Il=e.unstable_LowPriority,Fo=e.unstable_IdlePriority,Di=null,wn=null;function Vc(i){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Di,i,void 0,(i.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:Li,gr=Math.log,Nn=Math.LN2;function Li(i){return i>>>=0,i===0?32:31-(gr(i)/Nn|0)|0}var yr=64,Ds=4194304;function He(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qr(i,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,_=i.pingedLanes,S=u&268435455;if(S!==0){var N=S&~g;N!==0?f=He(N):(_&=S,_!==0&&(f=He(_)))}else S=u&~g,S!==0?f=He(S):_!==0&&(f=He(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,_=a&-a,g>=_||g===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)u=31-En(a),g=1<<u,f|=i[u],a&=~g;return f}function Vi(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mi(i,a){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes;0<_;){var S=31-En(_),N=1<<S,F=g[S];F===-1?((N&u)===0||(N&f)!==0)&&(g[S]=Vi(N,a)):F<=a&&(i.expiredLanes|=N),_&=~N}}function xl(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Al(){var i=yr;return yr<<=1,(yr&4194240)===0&&(yr=64),i}function kl(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function ji(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-En(a),i[a]=u}function $f(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-En(u),_=1<<g;a[g]=0,f[g]=-1,i[g]=-1,u&=~_}}function Rl(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var f=31-En(u),g=1<<f;g&a|i[f]&a&&(i[f]|=a),u&=~g}}var Ue=0;function vr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Cl,$o,Pl,Nl,Ol,_r=!1,Bo=[],wr=null,Er=null,Ut=null,Ui=new Map,Xr=new Map,Tn=[],Mc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ls(i,a){switch(i){case"focusin":case"focusout":wr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Ut=null;break;case"pointerover":case"pointerout":Ui.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(a.pointerId)}}function Gn(i,a,u,f,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[g]},a!==null&&(a=Kl(a),a!==null&&$o(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function jc(i,a,u,f,g){switch(a){case"focusin":return wr=Gn(wr,i,a,u,f,g),!0;case"dragenter":return Er=Gn(Er,i,a,u,f,g),!0;case"mouseover":return Ut=Gn(Ut,i,a,u,f,g),!0;case"pointerover":var _=g.pointerId;return Ui.set(_,Gn(Ui.get(_)||null,i,a,u,f,g)),!0;case"gotpointercapture":return _=g.pointerId,Xr.set(_,Gn(Xr.get(_)||null,i,a,u,f,g)),!0}return!1}function zo(i){var a=zi(i.target);if(a!==null){var u=Kn(a);if(u!==null){if(a=u.tag,a===13){if(a=Tl(u),a!==null){i.blockedOn=a,Ol(i.priority,function(){Pl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ye(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Wo(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Rs=f,u.target.dispatchEvent(f),Rs=null}else return a=Kl(u),a!==null&&$o(a),i.blockedOn=u,!1;a.shift()}return!0}function Uc(i,a,u){Ye(i)&&u.delete(a)}function Bf(){_r=!1,wr!==null&&Ye(wr)&&(wr=null),Er!==null&&Ye(Er)&&(Er=null),Ut!==null&&Ye(Ut)&&(Ut=null),Ui.forEach(Uc),Xr.forEach(Uc)}function Vs(i,a){i.blockedOn===a&&(i.blockedOn=null,_r||(_r=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bf)))}function Ms(i){function a(g){return Vs(g,i)}if(0<Bo.length){Vs(Bo[0],i);for(var u=1;u<Bo.length;u++){var f=Bo[u];f.blockedOn===i&&(f.blockedOn=null)}}for(wr!==null&&Vs(wr,i),Er!==null&&Vs(Er,i),Ut!==null&&Vs(Ut,i),Ui.forEach(a),Xr.forEach(a),u=0;u<Tn.length;u++)f=Tn[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Tn.length&&(u=Tn[0],u.blockedOn===null);)zo(u),u.blockedOn===null&&Tn.shift()}var Zr=K.ReactCurrentBatchConfig,es=!0;function Tr(i,a,u,f){var g=Ue,_=Zr.transition;Zr.transition=null;try{Ue=1,Dl(i,a,u,f)}finally{Ue=g,Zr.transition=_}}function Fc(i,a,u,f){var g=Ue,_=Zr.transition;Zr.transition=null;try{Ue=4,Dl(i,a,u,f)}finally{Ue=g,Zr.transition=_}}function Dl(i,a,u,f){if(es){var g=Wo(i,a,u,f);if(g===null)Zf(i,a,f,Sr,u),Ls(i,f);else if(jc(g,i,a,u,f))f.stopPropagation();else if(Ls(i,f),a&4&&-1<Mc.indexOf(i)){for(;g!==null;){var _=Kl(g);if(_!==null&&Cl(_),_=Wo(i,a,u,f),_===null&&Zf(i,a,f,Sr,u),_===g)break;g=_}g!==null&&f.stopPropagation()}else Zf(i,a,f,null,u)}}var Sr=null;function Wo(i,a,u,f){if(Sr=null,i=Vo(f),i=zi(i),i!==null)if(a=Kn(i),a===null)i=null;else if(u=a.tag,u===13){if(i=Tl(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Sr=i,null}function Ho(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ff()){case Uo:return 1;case bl:return 4;case Oi:case Il:return 16;case Fo:return 536870912;default:return 16}default:return 16}}var Sn=null,qo=null,ts=null;function $c(){if(ts)return ts;var i,a=qo,u=a.length,f,g="value"in Sn?Sn.value:Sn.textContent,_=g.length;for(i=0;i<u&&a[i]===g[i];i++);var S=u-i;for(f=1;f<=S&&a[u-f]===g[_-f];f++);return ts=g.slice(i,1<f?1-f:void 0)}function Fi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function br(){return!0}function Ll(){return!1}function Jt(i){function a(u,f,g,_,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=_,this.target=S,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(_):_[N]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?br:Ll,this.isPropagationStopped=Ll,this}return ae(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),a}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=Jt(Ir),js=ae({},Ir,{view:0,detail:0}),Ko=Jt(js),Go,Jo,bn,Bi=ae({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ke,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bn&&(bn&&i.type==="mousemove"?(Go=i.screenX-bn.screenX,Jo=i.screenY-bn.screenY):Jo=Go=0,bn=i),Go)},movementY:function(i){return"movementY"in i?i.movementY:Jo}}),Vl=Jt(Bi),Bc=ae({},Bi,{dataTransfer:0}),zc=Jt(Bc),Yo=ae({},js,{relatedTarget:0}),Ft=Jt(Yo),Wc=ae({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Hc=Jt(Wc),Us=ae({},Ir,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),d=Jt(Us),w=ae({},Ir,{data:0}),E=Jt(w),k={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=J[i])?!!a[i]:!1}function ke(){return oe}var yt=ae({},js,{key:function(i){if(i.key){var a=k[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Fi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?H[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ke,charCode:function(i){return i.type==="keypress"?Fi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ge=Jt(yt),Et=ae({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),In=Jt(Et),ns=ae({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ke}),xr=Jt(ns),Ar=ae({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qo=Jt(Ar),Ml=ae({},Bi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Rk=Jt(Ml),Ck=[9,13,27,32],zf=c&&"CompositionEvent"in window,jl=null;c&&"documentMode"in document&&(jl=document.documentMode);var Pk=c&&"TextEvent"in window&&!jl,Mv=c&&(!zf||jl&&8<jl&&11>=jl),jv=" ",Uv=!1;function Fv(i,a){switch(i){case"keyup":return Ck.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $v(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Xo=!1;function Nk(i,a){switch(i){case"compositionend":return $v(a);case"keypress":return a.which!==32?null:(Uv=!0,jv);case"textInput":return i=a.data,i===jv&&Uv?null:i;default:return null}}function Ok(i,a){if(Xo)return i==="compositionend"||!zf&&Fv(i,a)?(i=$c(),ts=qo=Sn=null,Xo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Mv&&a.locale!=="ko"?null:a.data;default:return null}}var Dk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Dk[i.type]:a==="textarea"}function zv(i,a,u,f){Cs(f),a=Yc(a,"onChange"),0<a.length&&(u=new $i("onChange","change",null,u,f),i.push({event:u,listeners:a}))}var Ul=null,Fl=null;function Lk(i){a_(i,0)}function qc(i){var a=ra(i);if(pl(a))return i}function Vk(i,a){if(i==="change")return a}var Wv=!1;if(c){var Wf;if(c){var Hf="oninput"in document;if(!Hf){var Hv=document.createElement("div");Hv.setAttribute("oninput","return;"),Hf=typeof Hv.oninput=="function"}Wf=Hf}else Wf=!1;Wv=Wf&&(!document.documentMode||9<document.documentMode)}function qv(){Ul&&(Ul.detachEvent("onpropertychange",Kv),Fl=Ul=null)}function Kv(i){if(i.propertyName==="value"&&qc(Fl)){var a=[];zv(a,Fl,i,Vo(i)),Rc(Lk,a)}}function Mk(i,a,u){i==="focusin"?(qv(),Ul=a,Fl=u,Ul.attachEvent("onpropertychange",Kv)):i==="focusout"&&qv()}function jk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return qc(Fl)}function Uk(i,a){if(i==="click")return qc(a)}function Fk(i,a){if(i==="input"||i==="change")return qc(a)}function $k(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Jn=typeof Object.is=="function"?Object.is:$k;function $l(i,a){if(Jn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(a,g)||!Jn(i[g],a[g]))return!1}return!0}function Gv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Jv(i,a){var u=Gv(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=a&&f>=a)return{node:u,offset:a-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Gv(u)}}function Yv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Yv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Qv(){for(var i=window,a=bs();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=bs(i.document)}return a}function qf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function Bk(i){var a=Qv(),u=i.focusedElem,f=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&Yv(u.ownerDocument.documentElement,u)){if(f!==null&&qf(u)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,_=Math.min(f.start,g);f=f.end===void 0?_:Math.min(f.end,g),!i.extend&&_>f&&(g=f,f=_,_=g),g=Jv(u,_);var S=Jv(u,f);g&&S&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),_>f?(i.addRange(a),i.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var zk=c&&"documentMode"in document&&11>=document.documentMode,Zo=null,Kf=null,Bl=null,Gf=!1;function Xv(i,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Gf||Zo==null||Zo!==bs(f)||(f=Zo,"selectionStart"in f&&qf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Bl&&$l(Bl,f)||(Bl=f,f=Yc(Kf,"onSelect"),0<f.length&&(a=new $i("onSelect","select",null,a,u),i.push({event:a,listeners:f}),a.target=Zo)))}function Kc(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var ea={animationend:Kc("Animation","AnimationEnd"),animationiteration:Kc("Animation","AnimationIteration"),animationstart:Kc("Animation","AnimationStart"),transitionend:Kc("Transition","TransitionEnd")},Jf={},Zv={};c&&(Zv=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Gc(i){if(Jf[i])return Jf[i];if(!ea[i])return i;var a=ea[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Zv)return Jf[i]=a[u];return i}var e_=Gc("animationend"),t_=Gc("animationiteration"),n_=Gc("animationstart"),r_=Gc("transitionend"),s_=new Map,i_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(i,a){s_.set(i,a),o(a,[i])}for(var Yf=0;Yf<i_.length;Yf++){var Qf=i_[Yf],Wk=Qf.toLowerCase(),Hk=Qf[0].toUpperCase()+Qf.slice(1);Fs(Wk,"on"+Hk)}Fs(e_,"onAnimationEnd"),Fs(t_,"onAnimationIteration"),Fs(n_,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(r_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function o_(i,a,u){var f=i.type||"unknown-event";i.currentTarget=u,El(f,a,void 0,i),i.currentTarget=null}function a_(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var S=f.length-1;0<=S;S--){var N=f[S],F=N.instance,G=N.currentTarget;if(N=N.listener,F!==_&&g.isPropagationStopped())break e;o_(g,N,G),_=F}else for(S=0;S<f.length;S++){if(N=f[S],F=N.instance,G=N.currentTarget,N=N.listener,F!==_&&g.isPropagationStopped())break e;o_(g,N,G),_=F}}}if(Mo)throw i=Pn,Mo=!1,Pn=null,i}function nt(i,a){var u=a[ip];u===void 0&&(u=a[ip]=new Set);var f=i+"__bubble";u.has(f)||(l_(a,i,2,!1),u.add(f))}function Xf(i,a,u){var f=0;a&&(f|=4),l_(u,i,f,a)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function Wl(i){if(!i[Jc]){i[Jc]=!0,r.forEach(function(u){u!=="selectionchange"&&(qk.has(u)||Xf(u,!1,i),Xf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Jc]||(a[Jc]=!0,Xf("selectionchange",!1,a))}}function l_(i,a,u,f){switch(Ho(a)){case 1:var g=Tr;break;case 4:g=Fc;break;default:g=Dl}u=g.bind(null,a,u,i),g=void 0,!Ns||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function Zf(i,a,u,f,g){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;S=S.return}for(;N!==null;){if(S=zi(N),S===null)return;if(F=S.tag,F===5||F===6){f=_=S;continue e}N=N.parentNode}}f=f.return}Rc(function(){var G=_,ne=Vo(u),re=[];e:{var te=s_.get(i);if(te!==void 0){var le=$i,de=i;switch(i){case"keypress":if(Fi(u)===0)break e;case"keydown":case"keyup":le=Ge;break;case"focusin":de="focus",le=Ft;break;case"focusout":de="blur",le=Ft;break;case"beforeblur":case"afterblur":le=Ft;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=xr;break;case e_:case t_:case n_:le=Hc;break;case r_:le=Qo;break;case"scroll":le=Ko;break;case"wheel":le=Rk;break;case"copy":case"cut":case"paste":le=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=In}var me=(a&4)!==0,vt=!me&&i==="scroll",W=me?te!==null?te+"Capture":null:te;me=[];for(var $=G,q;$!==null;){q=$;var ie=q.stateNode;if(q.tag===5&&ie!==null&&(q=ie,W!==null&&(ie=Ci($,W),ie!=null&&me.push(Hl($,ie,q)))),vt)break;$=$.return}0<me.length&&(te=new le(te,de,null,u,ne),re.push({event:te,listeners:me}))}}if((a&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",te&&u!==Rs&&(de=u.relatedTarget||u.fromElement)&&(zi(de)||de[rs]))break e;if((le||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,le?(de=u.relatedTarget||u.toElement,le=G,de=de?zi(de):null,de!==null&&(vt=Kn(de),de!==vt||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=G),le!==de)){if(me=Vl,ie="onMouseLeave",W="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(me=In,ie="onPointerLeave",W="onPointerEnter",$="pointer"),vt=le==null?te:ra(le),q=de==null?te:ra(de),te=new me(ie,$+"leave",le,u,ne),te.target=vt,te.relatedTarget=q,ie=null,zi(ne)===G&&(me=new me(W,$+"enter",de,u,ne),me.target=q,me.relatedTarget=vt,ie=me),vt=ie,le&&de)t:{for(me=le,W=de,$=0,q=me;q;q=ta(q))$++;for(q=0,ie=W;ie;ie=ta(ie))q++;for(;0<$-q;)me=ta(me),$--;for(;0<q-$;)W=ta(W),q--;for(;$--;){if(me===W||W!==null&&me===W.alternate)break t;me=ta(me),W=ta(W)}me=null}else me=null;le!==null&&u_(re,te,le,me,!1),de!==null&&vt!==null&&u_(re,vt,de,me,!0)}}e:{if(te=G?ra(G):window,le=te.nodeName&&te.nodeName.toLowerCase(),le==="select"||le==="input"&&te.type==="file")var ge=Vk;else if(Bv(te))if(Wv)ge=Fk;else{ge=jk;var we=Mk}else(le=te.nodeName)&&le.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ge=Uk);if(ge&&(ge=ge(i,G))){zv(re,ge,u,ne);break e}we&&we(i,te,G),i==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&wt(te,"number",te.value)}switch(we=G?ra(G):window,i){case"focusin":(Bv(we)||we.contentEditable==="true")&&(Zo=we,Kf=G,Bl=null);break;case"focusout":Bl=Kf=Zo=null;break;case"mousedown":Gf=!0;break;case"contextmenu":case"mouseup":case"dragend":Gf=!1,Xv(re,u,ne);break;case"selectionchange":if(zk)break;case"keydown":case"keyup":Xv(re,u,ne)}var Ee;if(zf)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Xo?Fv(i,u)&&(xe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(xe="onCompositionStart");xe&&(Mv&&u.locale!=="ko"&&(Xo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Xo&&(Ee=$c()):(Sn=ne,qo="value"in Sn?Sn.value:Sn.textContent,Xo=!0)),we=Yc(G,xe),0<we.length&&(xe=new E(xe,i,null,u,ne),re.push({event:xe,listeners:we}),Ee?xe.data=Ee:(Ee=$v(u),Ee!==null&&(xe.data=Ee)))),(Ee=Pk?Nk(i,u):Ok(i,u))&&(G=Yc(G,"onBeforeInput"),0<G.length&&(ne=new E("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:G}),ne.data=Ee))}a_(re,a)})}function Hl(i,a,u){return{instance:i,listener:a,currentTarget:u}}function Yc(i,a){for(var u=a+"Capture",f=[];i!==null;){var g=i,_=g.stateNode;g.tag===5&&_!==null&&(g=_,_=Ci(i,u),_!=null&&f.unshift(Hl(i,_,g)),_=Ci(i,a),_!=null&&f.push(Hl(i,_,g))),i=i.return}return f}function ta(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function u_(i,a,u,f,g){for(var _=a._reactName,S=[];u!==null&&u!==f;){var N=u,F=N.alternate,G=N.stateNode;if(F!==null&&F===f)break;N.tag===5&&G!==null&&(N=G,g?(F=Ci(u,_),F!=null&&S.unshift(Hl(u,F,N))):g||(F=Ci(u,_),F!=null&&S.push(Hl(u,F,N)))),u=u.return}S.length!==0&&i.push({event:a,listeners:S})}var Kk=/\r\n?/g,Gk=/\u0000|\uFFFD/g;function c_(i){return(typeof i=="string"?i:""+i).replace(Kk,`
`).replace(Gk,"")}function Qc(i,a,u){if(a=c_(a),c_(i)!==a&&u)throw Error(t(425))}function Xc(){}var ep=null,tp=null;function np(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rp=typeof setTimeout=="function"?setTimeout:void 0,Jk=typeof clearTimeout=="function"?clearTimeout:void 0,h_=typeof Promise=="function"?Promise:void 0,Yk=typeof queueMicrotask=="function"?queueMicrotask:typeof h_<"u"?function(i){return h_.resolve(null).then(i).catch(Qk)}:rp;function Qk(i){setTimeout(function(){throw i})}function sp(i,a){var u=a,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Ms(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Ms(a)}function $s(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function d_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var na=Math.random().toString(36).slice(2),kr="__reactFiber$"+na,ql="__reactProps$"+na,rs="__reactContainer$"+na,ip="__reactEvents$"+na,Xk="__reactListeners$"+na,Zk="__reactHandles$"+na;function zi(i){var a=i[kr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[rs]||u[kr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=d_(i);i!==null;){if(u=i[kr])return u;i=d_(i)}return a}i=u,u=i.parentNode}return null}function Kl(i){return i=i[kr]||i[rs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ra(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Zc(i){return i[ql]||null}var op=[],sa=-1;function Bs(i){return{current:i}}function rt(i){0>sa||(i.current=op[sa],op[sa]=null,sa--)}function Qe(i,a){sa++,op[sa]=i.current,i.current=a}var zs={},Yt=Bs(zs),fn=Bs(!1),Wi=zs;function ia(i,a){var u=i.type.contextTypes;if(!u)return zs;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},_;for(_ in u)g[_]=a[_];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function pn(i){return i=i.childContextTypes,i!=null}function eh(){rt(fn),rt(Yt)}function f_(i,a,u){if(Yt.current!==zs)throw Error(t(168));Qe(Yt,a),Qe(fn,u)}function p_(i,a,u){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(t(108,qe(i)||"Unknown",g));return ae({},u,f)}function th(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||zs,Wi=Yt.current,Qe(Yt,i),Qe(fn,fn.current),!0}function m_(i,a,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=p_(i,a,Wi),f.__reactInternalMemoizedMergedChildContext=i,rt(fn),rt(Yt),Qe(Yt,i)):rt(fn),Qe(fn,u)}var ss=null,nh=!1,ap=!1;function g_(i){ss===null?ss=[i]:ss.push(i)}function eR(i){nh=!0,g_(i)}function Ws(){if(!ap&&ss!==null){ap=!0;var i=0,a=Ue;try{var u=ss;for(Ue=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}ss=null,nh=!1}catch(g){throw ss!==null&&(ss=ss.slice(i+1)),Sl(Uo,Ws),g}finally{Ue=a,ap=!1}}return null}var oa=[],aa=0,rh=null,sh=0,On=[],Dn=0,Hi=null,is=1,os="";function qi(i,a){oa[aa++]=sh,oa[aa++]=rh,rh=i,sh=a}function y_(i,a,u){On[Dn++]=is,On[Dn++]=os,On[Dn++]=Hi,Hi=i;var f=is;i=os;var g=32-En(f)-1;f&=~(1<<g),u+=1;var _=32-En(a)+g;if(30<_){var S=g-g%5;_=(f&(1<<S)-1).toString(32),f>>=S,g-=S,is=1<<32-En(a)+g|u<<g|f,os=_+i}else is=1<<_|u<<g|f,os=i}function lp(i){i.return!==null&&(qi(i,1),y_(i,1,0))}function up(i){for(;i===rh;)rh=oa[--aa],oa[aa]=null,sh=oa[--aa],oa[aa]=null;for(;i===Hi;)Hi=On[--Dn],On[Dn]=null,os=On[--Dn],On[Dn]=null,is=On[--Dn],On[Dn]=null}var xn=null,An=null,it=!1,Yn=null;function v_(i,a){var u=jn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function __(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,xn=i,An=$s(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,xn=i,An=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Hi!==null?{id:is,overflow:os}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=jn(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,xn=i,An=null,!0):!1;default:return!1}}function cp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function hp(i){if(it){var a=An;if(a){var u=a;if(!__(i,a)){if(cp(i))throw Error(t(418));a=$s(u.nextSibling);var f=xn;a&&__(i,a)?v_(f,u):(i.flags=i.flags&-4097|2,it=!1,xn=i)}}else{if(cp(i))throw Error(t(418));i.flags=i.flags&-4097|2,it=!1,xn=i}}}function w_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xn=i}function ih(i){if(i!==xn)return!1;if(!it)return w_(i),it=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!np(i.type,i.memoizedProps)),a&&(a=An)){if(cp(i))throw E_(),Error(t(418));for(;a;)v_(i,a),a=$s(a.nextSibling)}if(w_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){An=$s(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}An=null}}else An=xn?$s(i.stateNode.nextSibling):null;return!0}function E_(){for(var i=An;i;)i=$s(i.nextSibling)}function la(){An=xn=null,it=!1}function dp(i){Yn===null?Yn=[i]:Yn.push(i)}var tR=K.ReactCurrentBatchConfig;function Gl(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,_=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(S){var N=g.refs;S===null?delete N[_]:N[_]=S},a._stringRef=_,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function oh(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function T_(i){var a=i._init;return a(i._payload)}function S_(i){function a(W,$){if(i){var q=W.deletions;q===null?(W.deletions=[$],W.flags|=16):q.push($)}}function u(W,$){if(!i)return null;for(;$!==null;)a(W,$),$=$.sibling;return null}function f(W,$){for(W=new Map;$!==null;)$.key!==null?W.set($.key,$):W.set($.index,$),$=$.sibling;return W}function g(W,$){return W=Xs(W,$),W.index=0,W.sibling=null,W}function _(W,$,q){return W.index=q,i?(q=W.alternate,q!==null?(q=q.index,q<$?(W.flags|=2,$):q):(W.flags|=2,$)):(W.flags|=1048576,$)}function S(W){return i&&W.alternate===null&&(W.flags|=2),W}function N(W,$,q,ie){return $===null||$.tag!==6?($=rm(q,W.mode,ie),$.return=W,$):($=g($,q),$.return=W,$)}function F(W,$,q,ie){var ge=q.type;return ge===P?ne(W,$,q.props.children,ie,q.key):$!==null&&($.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===jt&&T_(ge)===$.type)?(ie=g($,q.props),ie.ref=Gl(W,$,q),ie.return=W,ie):(ie=Ch(q.type,q.key,q.props,null,W.mode,ie),ie.ref=Gl(W,$,q),ie.return=W,ie)}function G(W,$,q,ie){return $===null||$.tag!==4||$.stateNode.containerInfo!==q.containerInfo||$.stateNode.implementation!==q.implementation?($=sm(q,W.mode,ie),$.return=W,$):($=g($,q.children||[]),$.return=W,$)}function ne(W,$,q,ie,ge){return $===null||$.tag!==7?($=eo(q,W.mode,ie,ge),$.return=W,$):($=g($,q),$.return=W,$)}function re(W,$,q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=rm(""+$,W.mode,q),$.return=W,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Y:return q=Ch($.type,$.key,$.props,null,W.mode,q),q.ref=Gl(W,null,$),q.return=W,q;case Z:return $=sm($,W.mode,q),$.return=W,$;case jt:var ie=$._init;return re(W,ie($._payload),q)}if(gt($)||pe($))return $=eo($,W.mode,q,null),$.return=W,$;oh(W,$)}return null}function te(W,$,q,ie){var ge=$!==null?$.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ge!==null?null:N(W,$,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Y:return q.key===ge?F(W,$,q,ie):null;case Z:return q.key===ge?G(W,$,q,ie):null;case jt:return ge=q._init,te(W,$,ge(q._payload),ie)}if(gt(q)||pe(q))return ge!==null?null:ne(W,$,q,ie,null);oh(W,q)}return null}function le(W,$,q,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return W=W.get(q)||null,N($,W,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Y:return W=W.get(ie.key===null?q:ie.key)||null,F($,W,ie,ge);case Z:return W=W.get(ie.key===null?q:ie.key)||null,G($,W,ie,ge);case jt:var we=ie._init;return le(W,$,q,we(ie._payload),ge)}if(gt(ie)||pe(ie))return W=W.get(q)||null,ne($,W,ie,ge,null);oh($,ie)}return null}function de(W,$,q,ie){for(var ge=null,we=null,Ee=$,xe=$=0,Lt=null;Ee!==null&&xe<q.length;xe++){Ee.index>xe?(Lt=Ee,Ee=null):Lt=Ee.sibling;var We=te(W,Ee,q[xe],ie);if(We===null){Ee===null&&(Ee=Lt);break}i&&Ee&&We.alternate===null&&a(W,Ee),$=_(We,$,xe),we===null?ge=We:we.sibling=We,we=We,Ee=Lt}if(xe===q.length)return u(W,Ee),it&&qi(W,xe),ge;if(Ee===null){for(;xe<q.length;xe++)Ee=re(W,q[xe],ie),Ee!==null&&($=_(Ee,$,xe),we===null?ge=Ee:we.sibling=Ee,we=Ee);return it&&qi(W,xe),ge}for(Ee=f(W,Ee);xe<q.length;xe++)Lt=le(Ee,W,xe,q[xe],ie),Lt!==null&&(i&&Lt.alternate!==null&&Ee.delete(Lt.key===null?xe:Lt.key),$=_(Lt,$,xe),we===null?ge=Lt:we.sibling=Lt,we=Lt);return i&&Ee.forEach(function(Zs){return a(W,Zs)}),it&&qi(W,xe),ge}function me(W,$,q,ie){var ge=pe(q);if(typeof ge!="function")throw Error(t(150));if(q=ge.call(q),q==null)throw Error(t(151));for(var we=ge=null,Ee=$,xe=$=0,Lt=null,We=q.next();Ee!==null&&!We.done;xe++,We=q.next()){Ee.index>xe?(Lt=Ee,Ee=null):Lt=Ee.sibling;var Zs=te(W,Ee,We.value,ie);if(Zs===null){Ee===null&&(Ee=Lt);break}i&&Ee&&Zs.alternate===null&&a(W,Ee),$=_(Zs,$,xe),we===null?ge=Zs:we.sibling=Zs,we=Zs,Ee=Lt}if(We.done)return u(W,Ee),it&&qi(W,xe),ge;if(Ee===null){for(;!We.done;xe++,We=q.next())We=re(W,We.value,ie),We!==null&&($=_(We,$,xe),we===null?ge=We:we.sibling=We,we=We);return it&&qi(W,xe),ge}for(Ee=f(W,Ee);!We.done;xe++,We=q.next())We=le(Ee,W,xe,We.value,ie),We!==null&&(i&&We.alternate!==null&&Ee.delete(We.key===null?xe:We.key),$=_(We,$,xe),we===null?ge=We:we.sibling=We,we=We);return i&&Ee.forEach(function(DR){return a(W,DR)}),it&&qi(W,xe),ge}function vt(W,$,q,ie){if(typeof q=="object"&&q!==null&&q.type===P&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case Y:e:{for(var ge=q.key,we=$;we!==null;){if(we.key===ge){if(ge=q.type,ge===P){if(we.tag===7){u(W,we.sibling),$=g(we,q.props.children),$.return=W,W=$;break e}}else if(we.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===jt&&T_(ge)===we.type){u(W,we.sibling),$=g(we,q.props),$.ref=Gl(W,we,q),$.return=W,W=$;break e}u(W,we);break}else a(W,we);we=we.sibling}q.type===P?($=eo(q.props.children,W.mode,ie,q.key),$.return=W,W=$):(ie=Ch(q.type,q.key,q.props,null,W.mode,ie),ie.ref=Gl(W,$,q),ie.return=W,W=ie)}return S(W);case Z:e:{for(we=q.key;$!==null;){if($.key===we)if($.tag===4&&$.stateNode.containerInfo===q.containerInfo&&$.stateNode.implementation===q.implementation){u(W,$.sibling),$=g($,q.children||[]),$.return=W,W=$;break e}else{u(W,$);break}else a(W,$);$=$.sibling}$=sm(q,W.mode,ie),$.return=W,W=$}return S(W);case jt:return we=q._init,vt(W,$,we(q._payload),ie)}if(gt(q))return de(W,$,q,ie);if(pe(q))return me(W,$,q,ie);oh(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,$!==null&&$.tag===6?(u(W,$.sibling),$=g($,q),$.return=W,W=$):(u(W,$),$=rm(q,W.mode,ie),$.return=W,W=$),S(W)):u(W,$)}return vt}var ua=S_(!0),b_=S_(!1),ah=Bs(null),lh=null,ca=null,fp=null;function pp(){fp=ca=lh=null}function mp(i){var a=ah.current;rt(ah),i._currentValue=a}function gp(i,a,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===u)break;i=i.return}}function ha(i,a){lh=i,fp=ca=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(mn=!0),i.firstContext=null)}function Ln(i){var a=i._currentValue;if(fp!==i)if(i={context:i,memoizedValue:a,next:null},ca===null){if(lh===null)throw Error(t(308));ca=i,lh.dependencies={lanes:0,firstContext:i}}else ca=ca.next=i;return a}var Ki=null;function yp(i){Ki===null?Ki=[i]:Ki.push(i)}function I_(i,a,u,f){var g=a.interleaved;return g===null?(u.next=u,yp(a)):(u.next=g.next,g.next=u),a.interleaved=u,as(i,f)}function as(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Hs=!1;function vp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ls(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function qs(i,a,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(ze&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,as(i,u)}return g=f.interleaved,g===null?(a.next=a,yp(f)):(a.next=g.next,g.next=a),f.interleaved=a,as(i,u)}function uh(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Rl(i,u)}}function A_(i,a){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?g=_=S:_=_.next=S,u=u.next}while(u!==null);_===null?g=_=a:_=_.next=a}else g=_=a;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function ch(i,a,u,f){var g=i.updateQueue;Hs=!1;var _=g.firstBaseUpdate,S=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var F=N,G=F.next;F.next=null,S===null?_=G:S.next=G,S=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,N=ne.lastBaseUpdate,N!==S&&(N===null?ne.firstBaseUpdate=G:N.next=G,ne.lastBaseUpdate=F))}if(_!==null){var re=g.baseState;S=0,ne=G=F=null,N=_;do{var te=N.lane,le=N.eventTime;if((f&te)===te){ne!==null&&(ne=ne.next={eventTime:le,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var de=i,me=N;switch(te=a,le=u,me.tag){case 1:if(de=me.payload,typeof de=="function"){re=de.call(le,re,te);break e}re=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=me.payload,te=typeof de=="function"?de.call(le,re,te):de,te==null)break e;re=ae({},re,te);break e;case 2:Hs=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,te=g.effects,te===null?g.effects=[N]:te.push(N))}else le={eventTime:le,lane:te,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ne===null?(G=ne=le,F=re):ne=ne.next=le,S|=te;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;te=N,N=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);if(ne===null&&(F=re),g.baseState=F,g.firstBaseUpdate=G,g.lastBaseUpdate=ne,a=g.shared.interleaved,a!==null){g=a;do S|=g.lane,g=g.next;while(g!==a)}else _===null&&(g.shared.lanes=0);Yi|=S,i.lanes=S,i.memoizedState=re}}function k_(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var Jl={},Rr=Bs(Jl),Yl=Bs(Jl),Ql=Bs(Jl);function Gi(i){if(i===Jl)throw Error(t(174));return i}function _p(i,a){switch(Qe(Ql,a),Qe(Yl,i),Qe(Rr,Jl),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Oo(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Oo(a,i)}rt(Rr),Qe(Rr,a)}function da(){rt(Rr),rt(Yl),rt(Ql)}function R_(i){Gi(Ql.current);var a=Gi(Rr.current),u=Oo(a,i.type);a!==u&&(Qe(Yl,i),Qe(Rr,u))}function wp(i){Yl.current===i&&(rt(Rr),rt(Yl))}var ot=Bs(0);function hh(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ep=[];function Tp(){for(var i=0;i<Ep.length;i++)Ep[i]._workInProgressVersionPrimary=null;Ep.length=0}var dh=K.ReactCurrentDispatcher,Sp=K.ReactCurrentBatchConfig,Ji=0,at=null,kt=null,Ot=null,fh=!1,Xl=!1,Zl=0,nR=0;function Qt(){throw Error(t(321))}function bp(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Jn(i[u],a[u]))return!1;return!0}function Ip(i,a,u,f,g,_){if(Ji=_,at=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,dh.current=i===null||i.memoizedState===null?oR:aR,i=u(f,g),Xl){_=0;do{if(Xl=!1,Zl=0,25<=_)throw Error(t(301));_+=1,Ot=kt=null,a.updateQueue=null,dh.current=lR,i=u(f,g)}while(Xl)}if(dh.current=gh,a=kt!==null&&kt.next!==null,Ji=0,Ot=kt=at=null,fh=!1,a)throw Error(t(300));return i}function xp(){var i=Zl!==0;return Zl=0,i}function Cr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?at.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function Vn(){if(kt===null){var i=at.alternate;i=i!==null?i.memoizedState:null}else i=kt.next;var a=Ot===null?at.memoizedState:Ot.next;if(a!==null)Ot=a,kt=i;else{if(i===null)throw Error(t(310));kt=i,i={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ot===null?at.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function eu(i,a){return typeof a=="function"?a(i):a}function Ap(i){var a=Vn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=kt,g=f.baseQueue,_=u.pending;if(_!==null){if(g!==null){var S=g.next;g.next=_.next,_.next=S}f.baseQueue=g=_,u.pending=null}if(g!==null){_=g.next,f=f.baseState;var N=S=null,F=null,G=_;do{var ne=G.lane;if((Ji&ne)===ne)F!==null&&(F=F.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),f=G.hasEagerState?G.eagerState:i(f,G.action);else{var re={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};F===null?(N=F=re,S=f):F=F.next=re,at.lanes|=ne,Yi|=ne}G=G.next}while(G!==null&&G!==_);F===null?S=f:F.next=N,Jn(f,a.memoizedState)||(mn=!0),a.memoizedState=f,a.baseState=S,a.baseQueue=F,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do _=g.lane,at.lanes|=_,Yi|=_,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function kp(i){var a=Vn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,_=a.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do _=i(_,S.action),S=S.next;while(S!==g);Jn(_,a.memoizedState)||(mn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,f]}function C_(){}function P_(i,a){var u=at,f=Vn(),g=a(),_=!Jn(f.memoizedState,g);if(_&&(f.memoizedState=g,mn=!0),f=f.queue,Rp(D_.bind(null,u,f,i),[i]),f.getSnapshot!==a||_||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,tu(9,O_.bind(null,u,f,g,a),void 0,null),Dt===null)throw Error(t(349));(Ji&30)!==0||N_(u,a,g)}return g}function N_(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function O_(i,a,u,f){a.value=u,a.getSnapshot=f,L_(a)&&V_(i)}function D_(i,a,u){return u(function(){L_(a)&&V_(i)})}function L_(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Jn(i,u)}catch{return!0}}function V_(i){var a=as(i,1);a!==null&&er(a,i,1,-1)}function M_(i){var a=Cr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eu,lastRenderedState:i},a.queue=i,i=i.dispatch=iR.bind(null,at,i),[a.memoizedState,i]}function tu(i,a,u,f){return i={tag:i,create:a,destroy:u,deps:f,next:null},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,a.lastEffect=i)),i}function j_(){return Vn().memoizedState}function ph(i,a,u,f){var g=Cr();at.flags|=i,g.memoizedState=tu(1|a,u,void 0,f===void 0?null:f)}function mh(i,a,u,f){var g=Vn();f=f===void 0?null:f;var _=void 0;if(kt!==null){var S=kt.memoizedState;if(_=S.destroy,f!==null&&bp(f,S.deps)){g.memoizedState=tu(a,u,_,f);return}}at.flags|=i,g.memoizedState=tu(1|a,u,_,f)}function U_(i,a){return ph(8390656,8,i,a)}function Rp(i,a){return mh(2048,8,i,a)}function F_(i,a){return mh(4,2,i,a)}function $_(i,a){return mh(4,4,i,a)}function B_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function z_(i,a,u){return u=u!=null?u.concat([i]):null,mh(4,4,B_.bind(null,a,i),u)}function Cp(){}function W_(i,a){var u=Vn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&bp(a,f[1])?f[0]:(u.memoizedState=[i,a],i)}function H_(i,a){var u=Vn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&bp(a,f[1])?f[0]:(i=i(),u.memoizedState=[i,a],i)}function q_(i,a,u){return(Ji&21)===0?(i.baseState&&(i.baseState=!1,mn=!0),i.memoizedState=u):(Jn(u,a)||(u=Al(),at.lanes|=u,Yi|=u,i.baseState=!0),a)}function rR(i,a){var u=Ue;Ue=u!==0&&4>u?u:4,i(!0);var f=Sp.transition;Sp.transition={};try{i(!1),a()}finally{Ue=u,Sp.transition=f}}function K_(){return Vn().memoizedState}function sR(i,a,u){var f=Ys(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},G_(i))J_(a,u);else if(u=I_(i,a,u,f),u!==null){var g=un();er(u,i,f,g),Y_(u,a,f)}}function iR(i,a,u){var f=Ys(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(G_(i))J_(a,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var S=a.lastRenderedState,N=_(S,u);if(g.hasEagerState=!0,g.eagerState=N,Jn(N,S)){var F=a.interleaved;F===null?(g.next=g,yp(a)):(g.next=F.next,F.next=g),a.interleaved=g;return}}catch{}finally{}u=I_(i,a,g,f),u!==null&&(g=un(),er(u,i,f,g),Y_(u,a,f))}}function G_(i){var a=i.alternate;return i===at||a!==null&&a===at}function J_(i,a){Xl=fh=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function Y_(i,a,u){if((u&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Rl(i,u)}}var gh={readContext:Ln,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},oR={readContext:Ln,useCallback:function(i,a){return Cr().memoizedState=[i,a===void 0?null:a],i},useContext:Ln,useEffect:U_,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,ph(4194308,4,B_.bind(null,a,i),u)},useLayoutEffect:function(i,a){return ph(4194308,4,i,a)},useInsertionEffect:function(i,a){return ph(4,2,i,a)},useMemo:function(i,a){var u=Cr();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var f=Cr();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=sR.bind(null,at,i),[f.memoizedState,i]},useRef:function(i){var a=Cr();return i={current:i},a.memoizedState=i},useState:M_,useDebugValue:Cp,useDeferredValue:function(i){return Cr().memoizedState=i},useTransition:function(){var i=M_(!1),a=i[0];return i=rR.bind(null,i[1]),Cr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var f=at,g=Cr();if(it){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Dt===null)throw Error(t(349));(Ji&30)!==0||N_(f,a,u)}g.memoizedState=u;var _={value:u,getSnapshot:a};return g.queue=_,U_(D_.bind(null,f,_,i),[i]),f.flags|=2048,tu(9,O_.bind(null,f,_,u,a),void 0,null),u},useId:function(){var i=Cr(),a=Dt.identifierPrefix;if(it){var u=os,f=is;u=(f&~(1<<32-En(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Zl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=nR++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},aR={readContext:Ln,useCallback:W_,useContext:Ln,useEffect:Rp,useImperativeHandle:z_,useInsertionEffect:F_,useLayoutEffect:$_,useMemo:H_,useReducer:Ap,useRef:j_,useState:function(){return Ap(eu)},useDebugValue:Cp,useDeferredValue:function(i){var a=Vn();return q_(a,kt.memoizedState,i)},useTransition:function(){var i=Ap(eu)[0],a=Vn().memoizedState;return[i,a]},useMutableSource:C_,useSyncExternalStore:P_,useId:K_,unstable_isNewReconciler:!1},lR={readContext:Ln,useCallback:W_,useContext:Ln,useEffect:Rp,useImperativeHandle:z_,useInsertionEffect:F_,useLayoutEffect:$_,useMemo:H_,useReducer:kp,useRef:j_,useState:function(){return kp(eu)},useDebugValue:Cp,useDeferredValue:function(i){var a=Vn();return kt===null?a.memoizedState=i:q_(a,kt.memoizedState,i)},useTransition:function(){var i=kp(eu)[0],a=Vn().memoizedState;return[i,a]},useMutableSource:C_,useSyncExternalStore:P_,useId:K_,unstable_isNewReconciler:!1};function Qn(i,a){if(i&&i.defaultProps){a=ae({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function Pp(i,a,u,f){a=i.memoizedState,u=u(f,a),u=u==null?a:ae({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var yh={isMounted:function(i){return(i=i._reactInternals)?Kn(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var f=un(),g=Ys(i),_=ls(f,g);_.payload=a,u!=null&&(_.callback=u),a=qs(i,_,g),a!==null&&(er(a,i,g,f),uh(a,i,g))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var f=un(),g=Ys(i),_=ls(f,g);_.tag=1,_.payload=a,u!=null&&(_.callback=u),a=qs(i,_,g),a!==null&&(er(a,i,g,f),uh(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=un(),f=Ys(i),g=ls(u,f);g.tag=2,a!=null&&(g.callback=a),a=qs(i,g,f),a!==null&&(er(a,i,f,u),uh(a,i,f))}};function Q_(i,a,u,f,g,_,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,_,S):a.prototype&&a.prototype.isPureReactComponent?!$l(u,f)||!$l(g,_):!0}function X_(i,a,u){var f=!1,g=zs,_=a.contextType;return typeof _=="object"&&_!==null?_=Ln(_):(g=pn(a)?Wi:Yt.current,f=a.contextTypes,_=(f=f!=null)?ia(i,g):zs),a=new a(u,_),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=yh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=_),a}function Z_(i,a,u,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==i&&yh.enqueueReplaceState(a,a.state,null)}function Np(i,a,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},vp(i);var _=a.contextType;typeof _=="object"&&_!==null?g.context=Ln(_):(_=pn(a)?Wi:Yt.current,g.context=ia(i,_)),g.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Pp(i,a,_,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&yh.enqueueReplaceState(g,g.state,null),ch(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function fa(i,a){try{var u="",f=a;do u+=De(f),f=f.return;while(f);var g=u}catch(_){g=`
Error generating stack: `+_.message+`
`+_.stack}return{value:i,source:a,stack:g,digest:null}}function Op(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function Dp(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var uR=typeof WeakMap=="function"?WeakMap:Map;function ew(i,a,u){u=ls(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){bh||(bh=!0,Jp=f),Dp(i,a)},u}function tw(i,a,u){u=ls(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;u.payload=function(){return f(g)},u.callback=function(){Dp(i,a)}}var _=i.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Dp(i,a),typeof f!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function nw(i,a,u){var f=i.pingCache;if(f===null){f=i.pingCache=new uR;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(u)||(g.add(u),i=SR.bind(null,i,a,u),a.then(i,i))}function rw(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function sw(i,a,u,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ls(-1,1),a.tag=2,qs(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var cR=K.ReactCurrentOwner,mn=!1;function ln(i,a,u,f){a.child=i===null?b_(a,null,u,f):ua(a,i.child,u,f)}function iw(i,a,u,f,g){u=u.render;var _=a.ref;return ha(a,g),f=Ip(i,a,u,f,_,g),u=xp(),i!==null&&!mn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,us(i,a,g)):(it&&u&&lp(a),a.flags|=1,ln(i,a,f,g),a.child)}function ow(i,a,u,f,g){if(i===null){var _=u.type;return typeof _=="function"&&!nm(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=_,aw(i,a,_,f,g)):(i=Ch(u.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(_=i.child,(i.lanes&g)===0){var S=_.memoizedProps;if(u=u.compare,u=u!==null?u:$l,u(S,f)&&i.ref===a.ref)return us(i,a,g)}return a.flags|=1,i=Xs(_,f),i.ref=a.ref,i.return=a,a.child=i}function aw(i,a,u,f,g){if(i!==null){var _=i.memoizedProps;if($l(_,f)&&i.ref===a.ref)if(mn=!1,a.pendingProps=f=_,(i.lanes&g)!==0)(i.flags&131072)!==0&&(mn=!0);else return a.lanes=i.lanes,us(i,a,g)}return Lp(i,a,u,f,g)}function lw(i,a,u){var f=a.pendingProps,g=f.children,_=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ma,kn),kn|=u;else{if((u&1073741824)===0)return i=_!==null?_.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Qe(ma,kn),kn|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,Qe(ma,kn),kn|=f}else _!==null?(f=_.baseLanes|u,a.memoizedState=null):f=u,Qe(ma,kn),kn|=f;return ln(i,a,g,u),a.child}function uw(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Lp(i,a,u,f,g){var _=pn(u)?Wi:Yt.current;return _=ia(a,_),ha(a,g),u=Ip(i,a,u,f,_,g),f=xp(),i!==null&&!mn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,us(i,a,g)):(it&&f&&lp(a),a.flags|=1,ln(i,a,u,g),a.child)}function cw(i,a,u,f,g){if(pn(u)){var _=!0;th(a)}else _=!1;if(ha(a,g),a.stateNode===null)_h(i,a),X_(a,u,f),Np(a,u,f,g),f=!0;else if(i===null){var S=a.stateNode,N=a.memoizedProps;S.props=N;var F=S.context,G=u.contextType;typeof G=="object"&&G!==null?G=Ln(G):(G=pn(u)?Wi:Yt.current,G=ia(a,G));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==f||F!==G)&&Z_(a,S,f,G),Hs=!1;var te=a.memoizedState;S.state=te,ch(a,f,S,g),F=a.memoizedState,N!==f||te!==F||fn.current||Hs?(typeof ne=="function"&&(Pp(a,u,ne,f),F=a.memoizedState),(N=Hs||Q_(a,u,N,f,te,F,G))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),S.props=f,S.state=F,S.context=G,f=N):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{S=a.stateNode,x_(i,a),N=a.memoizedProps,G=a.type===a.elementType?N:Qn(a.type,N),S.props=G,re=a.pendingProps,te=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=Ln(F):(F=pn(u)?Wi:Yt.current,F=ia(a,F));var le=u.getDerivedStateFromProps;(ne=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==re||te!==F)&&Z_(a,S,f,F),Hs=!1,te=a.memoizedState,S.state=te,ch(a,f,S,g);var de=a.memoizedState;N!==re||te!==de||fn.current||Hs?(typeof le=="function"&&(Pp(a,u,le,f),de=a.memoizedState),(G=Hs||Q_(a,u,G,f,te,de,F)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,de,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,de,F)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=de),S.props=f,S.state=de,S.context=F,f=G):(typeof S.componentDidUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&te===i.memoizedState||(a.flags|=1024),f=!1)}return Vp(i,a,u,f,_,g)}function Vp(i,a,u,f,g,_){uw(i,a);var S=(a.flags&128)!==0;if(!f&&!S)return g&&m_(a,u,!1),us(i,a,_);f=a.stateNode,cR.current=a;var N=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&S?(a.child=ua(a,i.child,null,_),a.child=ua(a,null,N,_)):ln(i,a,N,_),a.memoizedState=f.state,g&&m_(a,u,!0),a.child}function hw(i){var a=i.stateNode;a.pendingContext?f_(i,a.pendingContext,a.pendingContext!==a.context):a.context&&f_(i,a.context,!1),_p(i,a.containerInfo)}function dw(i,a,u,f,g){return la(),dp(g),a.flags|=256,ln(i,a,u,f),a.child}var Mp={dehydrated:null,treeContext:null,retryLane:0};function jp(i){return{baseLanes:i,cachePool:null,transitions:null}}function fw(i,a,u){var f=a.pendingProps,g=ot.current,_=!1,S=(a.flags&128)!==0,N;if((N=S)||(N=i!==null&&i.memoizedState===null?!1:(g&2)!==0),N?(_=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Qe(ot,g&1),i===null)return hp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=f.children,i=f.fallback,_?(f=a.mode,_=a.child,S={mode:"hidden",children:S},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=S):_=Ph(S,f,0,null),i=eo(i,f,u,null),_.return=a,i.return=a,_.sibling=i,a.child=_,a.child.memoizedState=jp(u),a.memoizedState=Mp,i):Up(a,S));if(g=i.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return hR(i,a,S,f,N,g,u);if(_){_=f.fallback,S=a.mode,g=i.child,N=g.sibling;var F={mode:"hidden",children:f.children};return(S&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Xs(g,F),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?_=Xs(N,_):(_=eo(_,S,u,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,S=i.child.memoizedState,S=S===null?jp(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},_.memoizedState=S,_.childLanes=i.childLanes&~u,a.memoizedState=Mp,f}return _=i.child,i=_.sibling,f=Xs(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=f,a.memoizedState=null,f}function Up(i,a){return a=Ph({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function vh(i,a,u,f){return f!==null&&dp(f),ua(a,i.child,null,u),i=Up(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function hR(i,a,u,f,g,_,S){if(u)return a.flags&256?(a.flags&=-257,f=Op(Error(t(422))),vh(i,a,S,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(_=f.fallback,g=a.mode,f=Ph({mode:"visible",children:f.children},g,0,null),_=eo(_,g,S,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&ua(a,i.child,null,S),a.child.memoizedState=jp(S),a.memoizedState=Mp,_);if((a.mode&1)===0)return vh(i,a,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,_=Error(t(419)),f=Op(_,f,void 0),vh(i,a,S,f)}if(N=(S&i.childLanes)!==0,mn||N){if(f=Dt,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==_.retryLane&&(_.retryLane=g,as(i,g),er(f,i,g,-1))}return tm(),f=Op(Error(t(421))),vh(i,a,S,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=bR.bind(null,i),g._reactRetry=a,null):(i=_.treeContext,An=$s(g.nextSibling),xn=a,it=!0,Yn=null,i!==null&&(On[Dn++]=is,On[Dn++]=os,On[Dn++]=Hi,is=i.id,os=i.overflow,Hi=a),a=Up(a,f.children),a.flags|=4096,a)}function pw(i,a,u){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),gp(i.return,a,u)}function Fp(i,a,u,f,g){var _=i.memoizedState;_===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=g)}function mw(i,a,u){var f=a.pendingProps,g=f.revealOrder,_=f.tail;if(ln(i,a,f.children,u),f=ot.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&pw(i,u,a);else if(i.tag===19)pw(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Qe(ot,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&hh(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Fp(a,!1,g,u,_);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&hh(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Fp(a,!0,u,null,_);break;case"together":Fp(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function _h(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function us(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Yi|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Xs(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Xs(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function dR(i,a,u){switch(a.tag){case 3:hw(a),la();break;case 5:R_(a);break;case 1:pn(a.type)&&th(a);break;case 4:_p(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;Qe(ah,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Qe(ot,ot.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?fw(i,a,u):(Qe(ot,ot.current&1),i=us(i,a,u),i!==null?i.sibling:null);Qe(ot,ot.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(i.flags&128)!==0){if(f)return mw(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Qe(ot,ot.current),f)break;return null;case 22:case 23:return a.lanes=0,lw(i,a,u)}return us(i,a,u)}var gw,$p,yw,vw;gw=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},$p=function(){},yw=function(i,a,u,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,Gi(Rr.current);var _=null;switch(u){case"input":g=Po(i,g),f=Po(i,f),_=[];break;case"select":g=ae({},g,{value:void 0}),f=ae({},f,{value:void 0}),_=[];break;case"textarea":g=gl(i,g),f=gl(i,f),_=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Xc)}qn(u,f);var S;u=null;for(G in g)if(!f.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var N=g[G];for(S in N)N.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?_||(_=[]):(_=_||[]).push(G,null));for(G in f){var F=f[G];if(N=g!=null?g[G]:void 0,f.hasOwnProperty(G)&&F!==N&&(F!=null||N!=null))if(G==="style")if(N){for(S in N)!N.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&N[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(_||(_=[]),_.push(G,u)),u=F;else G==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,N=N?N.__html:void 0,F!=null&&N!==F&&(_=_||[]).push(G,F)):G==="children"?typeof F!="string"&&typeof F!="number"||(_=_||[]).push(G,""+F):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(F!=null&&G==="onScroll"&&nt("scroll",i),_||N===F||(_=[])):(_=_||[]).push(G,F))}u&&(_=_||[]).push("style",u);var G=_;(a.updateQueue=G)&&(a.flags|=4)}},vw=function(i,a,u,f){u!==f&&(a.flags|=4)};function nu(i,a){if(!it)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Xt(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,a}function fR(i,a,u){var f=a.pendingProps;switch(up(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(a),null;case 1:return pn(a.type)&&eh(),Xt(a),null;case 3:return f=a.stateNode,da(),rt(fn),rt(Yt),Tp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(ih(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yn!==null&&(Xp(Yn),Yn=null))),$p(i,a),Xt(a),null;case 5:wp(a);var g=Gi(Ql.current);if(u=a.type,i!==null&&a.stateNode!=null)yw(i,a,u,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Xt(a),null}if(i=Gi(Rr.current),ih(a)){f=a.stateNode,u=a.type;var _=a.memoizedProps;switch(f[kr]=a,f[ql]=_,i=(a.mode&1)!==0,u){case"dialog":nt("cancel",f),nt("close",f);break;case"iframe":case"object":case"embed":nt("load",f);break;case"video":case"audio":for(g=0;g<zl.length;g++)nt(zl[g],f);break;case"source":nt("error",f);break;case"img":case"image":case"link":nt("error",f),nt("load",f);break;case"details":nt("toggle",f);break;case"input":Sc(f,_),nt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},nt("invalid",f);break;case"textarea":yl(f,_),nt("invalid",f)}qn(u,_),g=null;for(var S in _)if(_.hasOwnProperty(S)){var N=_[S];S==="children"?typeof N=="string"?f.textContent!==N&&(_.suppressHydrationWarning!==!0&&Qc(f.textContent,N,i),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(_.suppressHydrationWarning!==!0&&Qc(f.textContent,N,i),g=["children",""+N]):s.hasOwnProperty(S)&&N!=null&&S==="onScroll"&&nt("scroll",f)}switch(u){case"input":Co(f),ml(f,_,!0);break;case"textarea":Co(f),Is(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=Xc)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=vl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=S.createElement(u,{is:f.is}):(i=S.createElement(u),u==="select"&&(S=i,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):i=S.createElementNS(i,u),i[kr]=a,i[ql]=f,gw(i,a,!1,!1),a.stateNode=i;e:{switch(S=Lo(u,f),u){case"dialog":nt("cancel",i),nt("close",i),g=f;break;case"iframe":case"object":case"embed":nt("load",i),g=f;break;case"video":case"audio":for(g=0;g<zl.length;g++)nt(zl[g],i);g=f;break;case"source":nt("error",i),g=f;break;case"img":case"image":case"link":nt("error",i),nt("load",i),g=f;break;case"details":nt("toggle",i),g=f;break;case"input":Sc(i,f),g=Po(i,f),nt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ae({},f,{value:void 0}),nt("invalid",i);break;case"textarea":yl(i,f),g=gl(i,f),nt("invalid",i);break;default:g=f}qn(u,g),N=g;for(_ in N)if(N.hasOwnProperty(_)){var F=N[_];_==="style"?Do(i,F):_==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Ic(i,F)):_==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&Ri(i,F):typeof F=="number"&&Ri(i,""+F):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?F!=null&&_==="onScroll"&&nt("scroll",i):F!=null&&O(i,_,F,S))}switch(u){case"input":Co(i),ml(i,f,!1);break;case"textarea":Co(i),Is(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Be(f.value));break;case"select":i.multiple=!!f.multiple,_=f.value,_!=null?Hn(i,!!f.multiple,_,!1):f.defaultValue!=null&&Hn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Xc)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Xt(a),null;case 6:if(i&&a.stateNode!=null)vw(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=Gi(Ql.current),Gi(Rr.current),ih(a)){if(f=a.stateNode,u=a.memoizedProps,f[kr]=a,(_=f.nodeValue!==u)&&(i=xn,i!==null))switch(i.tag){case 3:Qc(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Qc(f.nodeValue,u,(i.mode&1)!==0)}_&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[kr]=a,a.stateNode=f}return Xt(a),null;case 13:if(rt(ot),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(it&&An!==null&&(a.mode&1)!==0&&(a.flags&128)===0)E_(),la(),a.flags|=98560,_=!1;else if(_=ih(a),f!==null&&f.dehydrated!==null){if(i===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[kr]=a}else la(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Xt(a),_=!1}else Yn!==null&&(Xp(Yn),Yn=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(ot.current&1)!==0?Rt===0&&(Rt=3):tm())),a.updateQueue!==null&&(a.flags|=4),Xt(a),null);case 4:return da(),$p(i,a),i===null&&Wl(a.stateNode.containerInfo),Xt(a),null;case 10:return mp(a.type._context),Xt(a),null;case 17:return pn(a.type)&&eh(),Xt(a),null;case 19:if(rt(ot),_=a.memoizedState,_===null)return Xt(a),null;if(f=(a.flags&128)!==0,S=_.rendering,S===null)if(f)nu(_,!1);else{if(Rt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(S=hh(i),S!==null){for(a.flags|=128,nu(_,!1),f=S.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)_=u,i=f,_.flags&=14680066,S=_.alternate,S===null?(_.childLanes=0,_.lanes=i,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=S.childLanes,_.lanes=S.lanes,_.child=S.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=S.memoizedProps,_.memoizedState=S.memoizedState,_.updateQueue=S.updateQueue,_.type=S.type,i=S.dependencies,_.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Qe(ot,ot.current&1|2),a.child}i=i.sibling}_.tail!==null&&tt()>ga&&(a.flags|=128,f=!0,nu(_,!1),a.lanes=4194304)}else{if(!f)if(i=hh(S),i!==null){if(a.flags|=128,f=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),nu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!S.alternate&&!it)return Xt(a),null}else 2*tt()-_.renderingStartTime>ga&&u!==1073741824&&(a.flags|=128,f=!0,nu(_,!1),a.lanes=4194304);_.isBackwards?(S.sibling=a.child,a.child=S):(u=_.last,u!==null?u.sibling=S:a.child=S,_.last=S)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=tt(),a.sibling=null,u=ot.current,Qe(ot,f?u&1|2:u&1),a):(Xt(a),null);case 22:case 23:return em(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(kn&1073741824)!==0&&(Xt(a),a.subtreeFlags&6&&(a.flags|=8192)):Xt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function pR(i,a){switch(up(a),a.tag){case 1:return pn(a.type)&&eh(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return da(),rt(fn),rt(Yt),Tp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return wp(a),null;case 13:if(rt(ot),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));la()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return rt(ot),null;case 4:return da(),null;case 10:return mp(a.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var wh=!1,Zt=!1,mR=typeof WeakSet=="function"?WeakSet:Set,he=null;function pa(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){dt(i,a,f)}else u.current=null}function Bp(i,a,u){try{u()}catch(f){dt(i,a,f)}}var _w=!1;function gR(i,a){if(ep=es,i=Qv(),qf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var S=0,N=-1,F=-1,G=0,ne=0,re=i,te=null;t:for(;;){for(var le;re!==u||g!==0&&re.nodeType!==3||(N=S+g),re!==_||f!==0&&re.nodeType!==3||(F=S+f),re.nodeType===3&&(S+=re.nodeValue.length),(le=re.firstChild)!==null;)te=re,re=le;for(;;){if(re===i)break t;if(te===u&&++G===g&&(N=S),te===_&&++ne===f&&(F=S),(le=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=le}u=N===-1||F===-1?null:{start:N,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(tp={focusedElem:i,selectionRange:u},es=!1,he=a;he!==null;)if(a=he,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,he=i;else for(;he!==null;){a=he;try{var de=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var me=de.memoizedProps,vt=de.memoizedState,W=a.stateNode,$=W.getSnapshotBeforeUpdate(a.elementType===a.type?me:Qn(a.type,me),vt);W.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var q=a.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){dt(a,a.return,ie)}if(i=a.sibling,i!==null){i.return=a.return,he=i;break}he=a.return}return de=_w,_w=!1,de}function ru(i,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var _=g.destroy;g.destroy=void 0,_!==void 0&&Bp(a,u,_)}g=g.next}while(g!==f)}}function Eh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function zp(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function ww(i){var a=i.alternate;a!==null&&(i.alternate=null,ww(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[kr],delete a[ql],delete a[ip],delete a[Xk],delete a[Zk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Ew(i){return i.tag===5||i.tag===3||i.tag===4}function Tw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Ew(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Xc));else if(f!==4&&(i=i.child,i!==null))for(Wp(i,a,u),i=i.sibling;i!==null;)Wp(i,a,u),i=i.sibling}function Hp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(Hp(i,a,u),i=i.sibling;i!==null;)Hp(i,a,u),i=i.sibling}var $t=null,Xn=!1;function Ks(i,a,u){for(u=u.child;u!==null;)Sw(i,a,u),u=u.sibling}function Sw(i,a,u){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Di,u)}catch{}switch(u.tag){case 5:Zt||pa(u,a);case 6:var f=$t,g=Xn;$t=null,Ks(i,a,u),$t=f,Xn=g,$t!==null&&(Xn?(i=$t,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):$t.removeChild(u.stateNode));break;case 18:$t!==null&&(Xn?(i=$t,u=u.stateNode,i.nodeType===8?sp(i.parentNode,u):i.nodeType===1&&sp(i,u),Ms(i)):sp($t,u.stateNode));break;case 4:f=$t,g=Xn,$t=u.stateNode.containerInfo,Xn=!0,Ks(i,a,u),$t=f,Xn=g;break;case 0:case 11:case 14:case 15:if(!Zt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var _=g,S=_.destroy;_=_.tag,S!==void 0&&((_&2)!==0||(_&4)!==0)&&Bp(u,a,S),g=g.next}while(g!==f)}Ks(i,a,u);break;case 1:if(!Zt&&(pa(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){dt(u,a,N)}Ks(i,a,u);break;case 21:Ks(i,a,u);break;case 22:u.mode&1?(Zt=(f=Zt)||u.memoizedState!==null,Ks(i,a,u),Zt=f):Ks(i,a,u);break;default:Ks(i,a,u)}}function bw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new mR),a.forEach(function(f){var g=IR.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Zn(i,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var _=i,S=a,N=S;e:for(;N!==null;){switch(N.tag){case 5:$t=N.stateNode,Xn=!1;break e;case 3:$t=N.stateNode.containerInfo,Xn=!0;break e;case 4:$t=N.stateNode.containerInfo,Xn=!0;break e}N=N.return}if($t===null)throw Error(t(160));Sw(_,S,g),$t=null,Xn=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(G){dt(g,a,G)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Iw(a,i),a=a.sibling}function Iw(i,a){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Zn(a,i),Pr(i),f&4){try{ru(3,i,i.return),Eh(3,i)}catch(me){dt(i,i.return,me)}try{ru(5,i,i.return)}catch(me){dt(i,i.return,me)}}break;case 1:Zn(a,i),Pr(i),f&512&&u!==null&&pa(u,u.return);break;case 5:if(Zn(a,i),Pr(i),f&512&&u!==null&&pa(u,u.return),i.flags&32){var g=i.stateNode;try{Ri(g,"")}catch(me){dt(i,i.return,me)}}if(f&4&&(g=i.stateNode,g!=null)){var _=i.memoizedProps,S=u!==null?u.memoizedProps:_,N=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{N==="input"&&_.type==="radio"&&_.name!=null&&No(g,_),Lo(N,S);var G=Lo(N,_);for(S=0;S<F.length;S+=2){var ne=F[S],re=F[S+1];ne==="style"?Do(g,re):ne==="dangerouslySetInnerHTML"?Ic(g,re):ne==="children"?Ri(g,re):O(g,ne,re,G)}switch(N){case"input":ki(g,_);break;case"textarea":bc(g,_);break;case"select":var te=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!_.multiple;var le=_.value;le!=null?Hn(g,!!_.multiple,le,!1):te!==!!_.multiple&&(_.defaultValue!=null?Hn(g,!!_.multiple,_.defaultValue,!0):Hn(g,!!_.multiple,_.multiple?[]:"",!1))}g[ql]=_}catch(me){dt(i,i.return,me)}}break;case 6:if(Zn(a,i),Pr(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,_=i.memoizedProps;try{g.nodeValue=_}catch(me){dt(i,i.return,me)}}break;case 3:if(Zn(a,i),Pr(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ms(a.containerInfo)}catch(me){dt(i,i.return,me)}break;case 4:Zn(a,i),Pr(i);break;case 13:Zn(a,i),Pr(i),g=i.child,g.flags&8192&&(_=g.memoizedState!==null,g.stateNode.isHidden=_,!_||g.alternate!==null&&g.alternate.memoizedState!==null||(Gp=tt())),f&4&&bw(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(Zt=(G=Zt)||ne,Zn(a,i),Zt=G):Zn(a,i),Pr(i),f&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!ne&&(i.mode&1)!==0)for(he=i,ne=i.child;ne!==null;){for(re=he=ne;he!==null;){switch(te=he,le=te.child,te.tag){case 0:case 11:case 14:case 15:ru(4,te,te.return);break;case 1:pa(te,te.return);var de=te.stateNode;if(typeof de.componentWillUnmount=="function"){f=te,u=te.return;try{a=f,de.props=a.memoizedProps,de.state=a.memoizedState,de.componentWillUnmount()}catch(me){dt(f,u,me)}}break;case 5:pa(te,te.return);break;case 22:if(te.memoizedState!==null){kw(re);continue}}le!==null?(le.return=te,he=le):kw(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{g=re.stateNode,G?(_=g.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(N=re.stateNode,F=re.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,N.style.display=ks("display",S))}catch(me){dt(i,i.return,me)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=G?"":re.memoizedProps}catch(me){dt(i,i.return,me)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Zn(a,i),Pr(i),f&4&&bw(i);break;case 21:break;default:Zn(a,i),Pr(i)}}function Pr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(Ew(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Ri(g,""),f.flags&=-33);var _=Tw(i);Hp(i,_,g);break;case 3:case 4:var S=f.stateNode.containerInfo,N=Tw(i);Wp(i,N,S);break;default:throw Error(t(161))}}catch(F){dt(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function yR(i,a,u){he=i,xw(i)}function xw(i,a,u){for(var f=(i.mode&1)!==0;he!==null;){var g=he,_=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||wh;if(!S){var N=g.alternate,F=N!==null&&N.memoizedState!==null||Zt;N=wh;var G=Zt;if(wh=S,(Zt=F)&&!G)for(he=g;he!==null;)S=he,F=S.child,S.tag===22&&S.memoizedState!==null?Rw(g):F!==null?(F.return=S,he=F):Rw(g);for(;_!==null;)he=_,xw(_),_=_.sibling;he=g,wh=N,Zt=G}Aw(i)}else(g.subtreeFlags&8772)!==0&&_!==null?(_.return=g,he=_):Aw(i)}}function Aw(i){for(;he!==null;){var a=he;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Zt||Eh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Zt)if(u===null)f.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:Qn(a.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&k_(a,_,f);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}k_(a,S,u)}break;case 5:var N=a.stateNode;if(u===null&&a.flags&4){u=N;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var G=a.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Ms(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||a.flags&512&&zp(a)}catch(te){dt(a,a.return,te)}}if(a===i){he=null;break}if(u=a.sibling,u!==null){u.return=a.return,he=u;break}he=a.return}}function kw(i){for(;he!==null;){var a=he;if(a===i){he=null;break}var u=a.sibling;if(u!==null){u.return=a.return,he=u;break}he=a.return}}function Rw(i){for(;he!==null;){var a=he;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{Eh(4,a)}catch(F){dt(a,u,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(F){dt(a,g,F)}}var _=a.return;try{zp(a)}catch(F){dt(a,_,F)}break;case 5:var S=a.return;try{zp(a)}catch(F){dt(a,S,F)}}}catch(F){dt(a,a.return,F)}if(a===i){he=null;break}var N=a.sibling;if(N!==null){N.return=a.return,he=N;break}he=a.return}}var vR=Math.ceil,Th=K.ReactCurrentDispatcher,qp=K.ReactCurrentOwner,Mn=K.ReactCurrentBatchConfig,ze=0,Dt=null,Tt=null,Bt=0,kn=0,ma=Bs(0),Rt=0,su=null,Yi=0,Sh=0,Kp=0,iu=null,gn=null,Gp=0,ga=1/0,cs=null,bh=!1,Jp=null,Gs=null,Ih=!1,Js=null,xh=0,ou=0,Yp=null,Ah=-1,kh=0;function un(){return(ze&6)!==0?tt():Ah!==-1?Ah:Ah=tt()}function Ys(i){return(i.mode&1)===0?1:(ze&2)!==0&&Bt!==0?Bt&-Bt:tR.transition!==null?(kh===0&&(kh=Al()),kh):(i=Ue,i!==0||(i=window.event,i=i===void 0?16:Ho(i.type)),i)}function er(i,a,u,f){if(50<ou)throw ou=0,Yp=null,Error(t(185));ji(i,u,f),((ze&2)===0||i!==Dt)&&(i===Dt&&((ze&2)===0&&(Sh|=u),Rt===4&&Qs(i,Bt)),yn(i,f),u===1&&ze===0&&(a.mode&1)===0&&(ga=tt()+500,nh&&Ws()))}function yn(i,a){var u=i.callbackNode;Mi(i,a);var f=Qr(i,i===Dt?Bt:0);if(f===0)u!==null&&jo(u),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(u!=null&&jo(u),a===1)i.tag===0?eR(Pw.bind(null,i)):g_(Pw.bind(null,i)),Yk(function(){(ze&6)===0&&Ws()}),u=null;else{switch(vr(f)){case 1:u=Uo;break;case 4:u=bl;break;case 16:u=Oi;break;case 536870912:u=Fo;break;default:u=Oi}u=Uw(u,Cw.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function Cw(i,a){if(Ah=-1,kh=0,(ze&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ya()&&i.callbackNode!==u)return null;var f=Qr(i,i===Dt?Bt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Rh(i,f);else{a=f;var g=ze;ze|=2;var _=Ow();(Dt!==i||Bt!==a)&&(cs=null,ga=tt()+500,Xi(i,a));do try{ER();break}catch(N){Nw(i,N)}while(!0);pp(),Th.current=_,ze=g,Tt!==null?a=0:(Dt=null,Bt=0,a=Rt)}if(a!==0){if(a===2&&(g=xl(i),g!==0&&(f=g,a=Qp(i,g))),a===1)throw u=su,Xi(i,0),Qs(i,f),yn(i,tt()),u;if(a===6)Qs(i,f);else{if(g=i.current.alternate,(f&30)===0&&!_R(g)&&(a=Rh(i,f),a===2&&(_=xl(i),_!==0&&(f=_,a=Qp(i,_))),a===1))throw u=su,Xi(i,0),Qs(i,f),yn(i,tt()),u;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Zi(i,gn,cs);break;case 3:if(Qs(i,f),(f&130023424)===f&&(a=Gp+500-tt(),10<a)){if(Qr(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){un(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=rp(Zi.bind(null,i,gn,cs),a);break}Zi(i,gn,cs);break;case 4:if(Qs(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var S=31-En(f);_=1<<S,S=a[S],S>g&&(g=S),f&=~_}if(f=g,f=tt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*vR(f/1960))-f,10<f){i.timeoutHandle=rp(Zi.bind(null,i,gn,cs),f);break}Zi(i,gn,cs);break;case 5:Zi(i,gn,cs);break;default:throw Error(t(329))}}}return yn(i,tt()),i.callbackNode===u?Cw.bind(null,i):null}function Qp(i,a){var u=iu;return i.current.memoizedState.isDehydrated&&(Xi(i,a).flags|=256),i=Rh(i,a),i!==2&&(a=gn,gn=u,a!==null&&Xp(a)),i}function Xp(i){gn===null?gn=i:gn.push.apply(gn,i)}function _R(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],_=g.getSnapshot;g=g.value;try{if(!Jn(_(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qs(i,a){for(a&=~Kp,a&=~Sh,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-En(a),f=1<<u;i[u]=-1,a&=~f}}function Pw(i){if((ze&6)!==0)throw Error(t(327));ya();var a=Qr(i,0);if((a&1)===0)return yn(i,tt()),null;var u=Rh(i,a);if(i.tag!==0&&u===2){var f=xl(i);f!==0&&(a=f,u=Qp(i,f))}if(u===1)throw u=su,Xi(i,0),Qs(i,a),yn(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Zi(i,gn,cs),yn(i,tt()),null}function Zp(i,a){var u=ze;ze|=1;try{return i(a)}finally{ze=u,ze===0&&(ga=tt()+500,nh&&Ws())}}function Qi(i){Js!==null&&Js.tag===0&&(ze&6)===0&&ya();var a=ze;ze|=1;var u=Mn.transition,f=Ue;try{if(Mn.transition=null,Ue=1,i)return i()}finally{Ue=f,Mn.transition=u,ze=a,(ze&6)===0&&Ws()}}function em(){kn=ma.current,rt(ma)}function Xi(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Jk(u)),Tt!==null)for(u=Tt.return;u!==null;){var f=u;switch(up(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&eh();break;case 3:da(),rt(fn),rt(Yt),Tp();break;case 5:wp(f);break;case 4:da();break;case 13:rt(ot);break;case 19:rt(ot);break;case 10:mp(f.type._context);break;case 22:case 23:em()}u=u.return}if(Dt=i,Tt=i=Xs(i.current,null),Bt=kn=a,Rt=0,su=null,Kp=Sh=Yi=0,gn=iu=null,Ki!==null){for(a=0;a<Ki.length;a++)if(u=Ki[a],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,_=u.pending;if(_!==null){var S=_.next;_.next=g,f.next=S}u.pending=f}Ki=null}return i}function Nw(i,a){do{var u=Tt;try{if(pp(),dh.current=gh,fh){for(var f=at.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}fh=!1}if(Ji=0,Ot=kt=at=null,Xl=!1,Zl=0,qp.current=null,u===null||u.return===null){Rt=1,su=a,Tt=null;break}e:{var _=i,S=u.return,N=u,F=a;if(a=Bt,N.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var G=F,ne=N,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var le=rw(S);if(le!==null){le.flags&=-257,sw(le,S,N,_,a),le.mode&1&&nw(_,G,a),a=le,F=G;var de=a.updateQueue;if(de===null){var me=new Set;me.add(F),a.updateQueue=me}else de.add(F);break e}else{if((a&1)===0){nw(_,G,a),tm();break e}F=Error(t(426))}}else if(it&&N.mode&1){var vt=rw(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),sw(vt,S,N,_,a),dp(fa(F,N));break e}}_=F=fa(F,N),Rt!==4&&(Rt=2),iu===null?iu=[_]:iu.push(_),_=S;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var W=ew(_,F,a);A_(_,W);break e;case 1:N=F;var $=_.type,q=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Gs===null||!Gs.has(q)))){_.flags|=65536,a&=-a,_.lanes|=a;var ie=tw(_,N,a);A_(_,ie);break e}}_=_.return}while(_!==null)}Lw(u)}catch(ge){a=ge,Tt===u&&u!==null&&(Tt=u=u.return);continue}break}while(!0)}function Ow(){var i=Th.current;return Th.current=gh,i===null?gh:i}function tm(){(Rt===0||Rt===3||Rt===2)&&(Rt=4),Dt===null||(Yi&268435455)===0&&(Sh&268435455)===0||Qs(Dt,Bt)}function Rh(i,a){var u=ze;ze|=2;var f=Ow();(Dt!==i||Bt!==a)&&(cs=null,Xi(i,a));do try{wR();break}catch(g){Nw(i,g)}while(!0);if(pp(),ze=u,Th.current=f,Tt!==null)throw Error(t(261));return Dt=null,Bt=0,Rt}function wR(){for(;Tt!==null;)Dw(Tt)}function ER(){for(;Tt!==null&&!Ni();)Dw(Tt)}function Dw(i){var a=jw(i.alternate,i,kn);i.memoizedProps=i.pendingProps,a===null?Lw(i):Tt=a,qp.current=null}function Lw(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=fR(u,a,kn),u!==null){Tt=u;return}}else{if(u=pR(u,a),u!==null){u.flags&=32767,Tt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Rt=6,Tt=null;return}}if(a=a.sibling,a!==null){Tt=a;return}Tt=a=i}while(a!==null);Rt===0&&(Rt=5)}function Zi(i,a,u){var f=Ue,g=Mn.transition;try{Mn.transition=null,Ue=1,TR(i,a,u,f)}finally{Mn.transition=g,Ue=f}return null}function TR(i,a,u,f){do ya();while(Js!==null);if((ze&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var _=u.lanes|u.childLanes;if($f(i,_),i===Dt&&(Tt=Dt=null,Bt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Ih||(Ih=!0,Uw(Oi,function(){return ya(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Mn.transition,Mn.transition=null;var S=Ue;Ue=1;var N=ze;ze|=4,qp.current=null,gR(i,u),Iw(u,i),Bk(tp),es=!!ep,tp=ep=null,i.current=u,yR(u),Yr(),ze=N,Ue=S,Mn.transition=_}else i.current=u;if(Ih&&(Ih=!1,Js=i,xh=g),_=i.pendingLanes,_===0&&(Gs=null),Vc(u.stateNode),yn(i,tt()),a!==null)for(f=i.onRecoverableError,u=0;u<a.length;u++)g=a[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(bh)throw bh=!1,i=Jp,Jp=null,i;return(xh&1)!==0&&i.tag!==0&&ya(),_=i.pendingLanes,(_&1)!==0?i===Yp?ou++:(ou=0,Yp=i):ou=0,Ws(),null}function ya(){if(Js!==null){var i=vr(xh),a=Mn.transition,u=Ue;try{if(Mn.transition=null,Ue=16>i?16:i,Js===null)var f=!1;else{if(i=Js,Js=null,xh=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,he=i.current;he!==null;){var _=he,S=_.child;if((he.flags&16)!==0){var N=_.deletions;if(N!==null){for(var F=0;F<N.length;F++){var G=N[F];for(he=G;he!==null;){var ne=he;switch(ne.tag){case 0:case 11:case 15:ru(8,ne,_)}var re=ne.child;if(re!==null)re.return=ne,he=re;else for(;he!==null;){ne=he;var te=ne.sibling,le=ne.return;if(ww(ne),ne===G){he=null;break}if(te!==null){te.return=le,he=te;break}he=le}}}var de=_.alternate;if(de!==null){var me=de.child;if(me!==null){de.child=null;do{var vt=me.sibling;me.sibling=null,me=vt}while(me!==null)}}he=_}}if((_.subtreeFlags&2064)!==0&&S!==null)S.return=_,he=S;else e:for(;he!==null;){if(_=he,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:ru(9,_,_.return)}var W=_.sibling;if(W!==null){W.return=_.return,he=W;break e}he=_.return}}var $=i.current;for(he=$;he!==null;){S=he;var q=S.child;if((S.subtreeFlags&2064)!==0&&q!==null)q.return=S,he=q;else e:for(S=$;he!==null;){if(N=he,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:Eh(9,N)}}catch(ge){dt(N,N.return,ge)}if(N===S){he=null;break e}var ie=N.sibling;if(ie!==null){ie.return=N.return,he=ie;break e}he=N.return}}if(ze=g,Ws(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Di,i)}catch{}f=!0}return f}finally{Ue=u,Mn.transition=a}}return!1}function Vw(i,a,u){a=fa(u,a),a=ew(i,a,1),i=qs(i,a,1),a=un(),i!==null&&(ji(i,1,a),yn(i,a))}function dt(i,a,u){if(i.tag===3)Vw(i,i,u);else for(;a!==null;){if(a.tag===3){Vw(a,i,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Gs===null||!Gs.has(f))){i=fa(u,i),i=tw(a,i,1),a=qs(a,i,1),i=un(),a!==null&&(ji(a,1,i),yn(a,i));break}}a=a.return}}function SR(i,a,u){var f=i.pingCache;f!==null&&f.delete(a),a=un(),i.pingedLanes|=i.suspendedLanes&u,Dt===i&&(Bt&u)===u&&(Rt===4||Rt===3&&(Bt&130023424)===Bt&&500>tt()-Gp?Xi(i,0):Kp|=u),yn(i,a)}function Mw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ds,Ds<<=1,(Ds&130023424)===0&&(Ds=4194304)));var u=un();i=as(i,a),i!==null&&(ji(i,a,u),yn(i,u))}function bR(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Mw(i,u)}function IR(i,a){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),Mw(i,u)}var jw;jw=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||fn.current)mn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return mn=!1,dR(i,a,u);mn=(i.flags&131072)!==0}else mn=!1,it&&(a.flags&1048576)!==0&&y_(a,sh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;_h(i,a),i=a.pendingProps;var g=ia(a,Yt.current);ha(a,u),g=Ip(null,a,f,i,g,u);var _=xp();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,pn(f)?(_=!0,th(a)):_=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,vp(a),g.updater=yh,a.stateNode=g,g._reactInternals=a,Np(a,f,i,u),a=Vp(null,a,f,!0,_,u)):(a.tag=0,it&&_&&lp(a),ln(null,a,g,u),a=a.child),a;case 16:f=a.elementType;e:{switch(_h(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=AR(f),i=Qn(f,i),g){case 0:a=Lp(null,a,f,i,u);break e;case 1:a=cw(null,a,f,i,u);break e;case 11:a=iw(null,a,f,i,u);break e;case 14:a=ow(null,a,f,Qn(f.type,i),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),Lp(i,a,f,g,u);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),cw(i,a,f,g,u);case 3:e:{if(hw(a),i===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,g=_.element,x_(i,a),ch(a,f,null,u);var S=a.memoizedState;if(f=S.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){g=fa(Error(t(423)),a),a=dw(i,a,f,u,g);break e}else if(f!==g){g=fa(Error(t(424)),a),a=dw(i,a,f,u,g);break e}else for(An=$s(a.stateNode.containerInfo.firstChild),xn=a,it=!0,Yn=null,u=b_(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(la(),f===g){a=us(i,a,u);break e}ln(i,a,f,u)}a=a.child}return a;case 5:return R_(a),i===null&&hp(a),f=a.type,g=a.pendingProps,_=i!==null?i.memoizedProps:null,S=g.children,np(f,g)?S=null:_!==null&&np(f,_)&&(a.flags|=32),uw(i,a),ln(i,a,S,u),a.child;case 6:return i===null&&hp(a),null;case 13:return fw(i,a,u);case 4:return _p(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=ua(a,null,f,u):ln(i,a,f,u),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),iw(i,a,f,g,u);case 7:return ln(i,a,a.pendingProps,u),a.child;case 8:return ln(i,a,a.pendingProps.children,u),a.child;case 12:return ln(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,_=a.memoizedProps,S=g.value,Qe(ah,f._currentValue),f._currentValue=S,_!==null)if(Jn(_.value,S)){if(_.children===g.children&&!fn.current){a=us(i,a,u);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var N=_.dependencies;if(N!==null){S=_.child;for(var F=N.firstContext;F!==null;){if(F.context===f){if(_.tag===1){F=ls(-1,u&-u),F.tag=2;var G=_.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),G.pending=F}}_.lanes|=u,F=_.alternate,F!==null&&(F.lanes|=u),gp(_.return,u,a),N.lanes|=u;break}F=F.next}}else if(_.tag===10)S=_.type===a.type?null:_.child;else if(_.tag===18){if(S=_.return,S===null)throw Error(t(341));S.lanes|=u,N=S.alternate,N!==null&&(N.lanes|=u),gp(S,u,a),S=_.sibling}else S=_.child;if(S!==null)S.return=_;else for(S=_;S!==null;){if(S===a){S=null;break}if(_=S.sibling,_!==null){_.return=S.return,S=_;break}S=S.return}_=S}ln(i,a,g.children,u),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,ha(a,u),g=Ln(g),f=f(g),a.flags|=1,ln(i,a,f,u),a.child;case 14:return f=a.type,g=Qn(f,a.pendingProps),g=Qn(f.type,g),ow(i,a,f,g,u);case 15:return aw(i,a,a.type,a.pendingProps,u);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),_h(i,a),a.tag=1,pn(f)?(i=!0,th(a)):i=!1,ha(a,u),X_(a,f,g),Np(a,f,g,u),Vp(null,a,f,!0,i,u);case 19:return mw(i,a,u);case 22:return lw(i,a,u)}throw Error(t(156,a.tag))};function Uw(i,a){return Sl(i,a)}function xR(i,a,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,a,u,f){return new xR(i,a,u,f)}function nm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function AR(i){if(typeof i=="function")return nm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===mt)return 14}return 2}function Xs(i,a){var u=i.alternate;return u===null?(u=jn(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function Ch(i,a,u,f,g,_){var S=2;if(f=i,typeof i=="function")nm(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case P:return eo(u.children,g,_,a);case A:S=8,g|=8;break;case C:return i=jn(12,u,a,g|2),i.elementType=C,i.lanes=_,i;case L:return i=jn(13,u,a,g),i.elementType=L,i.lanes=_,i;case Fe:return i=jn(19,u,a,g),i.elementType=Fe,i.lanes=_,i;case Ce:return Ph(u,g,_,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:S=10;break e;case j:S=9;break e;case B:S=11;break e;case mt:S=14;break e;case jt:S=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=jn(S,u,a,g),a.elementType=i,a.type=f,a.lanes=_,a}function eo(i,a,u,f){return i=jn(7,i,f,a),i.lanes=u,i}function Ph(i,a,u,f){return i=jn(22,i,f,a),i.elementType=Ce,i.lanes=u,i.stateNode={isHidden:!1},i}function rm(i,a,u){return i=jn(6,i,null,a),i.lanes=u,i}function sm(i,a,u){return a=jn(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function kR(i,a,u,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kl(0),this.expirationTimes=kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function im(i,a,u,f,g,_,S,N,F){return i=new kR(i,a,u,N,F),a===1?(a=1,_===!0&&(a|=8)):a=0,_=jn(3,null,null,a),i.current=_,_.stateNode=i,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},vp(_),i}function RR(i,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:f==null?null:""+f,children:i,containerInfo:a,implementation:u}}function Fw(i){if(!i)return zs;i=i._reactInternals;e:{if(Kn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(pn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(pn(u))return p_(i,u,a)}return a}function $w(i,a,u,f,g,_,S,N,F){return i=im(u,f,!0,i,g,_,S,N,F),i.context=Fw(null),u=i.current,f=un(),g=Ys(u),_=ls(f,g),_.callback=a??null,qs(u,_,g),i.current.lanes=g,ji(i,g,f),yn(i,f),i}function Nh(i,a,u,f){var g=a.current,_=un(),S=Ys(g);return u=Fw(u),a.context===null?a.context=u:a.pendingContext=u,a=ls(_,S),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=qs(g,a,S),i!==null&&(er(i,g,S,_),uh(i,g,S)),S}function Oh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Bw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function om(i,a){Bw(i,a),(i=i.alternate)&&Bw(i,a)}function CR(){return null}var zw=typeof reportError=="function"?reportError:function(i){console.error(i)};function am(i){this._internalRoot=i}Dh.prototype.render=am.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Nh(i,a,null,null)},Dh.prototype.unmount=am.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Qi(function(){Nh(null,i,null,null)}),a[rs]=null}};function Dh(i){this._internalRoot=i}Dh.prototype.unstable_scheduleHydration=function(i){if(i){var a=Nl();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Tn.length&&a!==0&&a<Tn[u].priority;u++);Tn.splice(u,0,i),u===0&&zo(i)}};function lm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Lh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Ww(){}function PR(i,a,u,f,g){if(g){if(typeof f=="function"){var _=f;f=function(){var G=Oh(S);_.call(G)}}var S=$w(a,f,i,0,null,!1,!1,"",Ww);return i._reactRootContainer=S,i[rs]=S.current,Wl(i.nodeType===8?i.parentNode:i),Qi(),S}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var G=Oh(F);N.call(G)}}var F=im(i,0,!1,null,null,!1,!1,"",Ww);return i._reactRootContainer=F,i[rs]=F.current,Wl(i.nodeType===8?i.parentNode:i),Qi(function(){Nh(a,F,u,f)}),F}function Vh(i,a,u,f,g){var _=u._reactRootContainer;if(_){var S=_;if(typeof g=="function"){var N=g;g=function(){var F=Oh(S);N.call(F)}}Nh(a,S,i,g)}else S=PR(u,a,i,g,f);return Oh(S)}Cl=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=He(a.pendingLanes);u!==0&&(Rl(a,u|1),yn(a,tt()),(ze&6)===0&&(ga=tt()+500,Ws()))}break;case 13:Qi(function(){var f=as(i,1);if(f!==null){var g=un();er(f,i,1,g)}}),om(i,1)}},$o=function(i){if(i.tag===13){var a=as(i,134217728);if(a!==null){var u=un();er(a,i,134217728,u)}om(i,134217728)}},Pl=function(i){if(i.tag===13){var a=Ys(i),u=as(i,a);if(u!==null){var f=un();er(u,i,a,f)}om(i,a)}},Nl=function(){return Ue},Ol=function(i,a){var u=Ue;try{return Ue=i,a()}finally{Ue=u}},Kr=function(i,a,u){switch(a){case"input":if(ki(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==i&&f.form===i.form){var g=Zc(f);if(!g)throw Error(t(90));pl(f),ki(f,g)}}}break;case"textarea":bc(i,u);break;case"select":a=u.value,a!=null&&Hn(i,!!u.multiple,a,!1)}},Ac=Zp,kc=Qi;var NR={usingClientEntryPoint:!1,Events:[Kl,ra,Zc,Cs,Ps,Zp]},au={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OR={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Lc(i),i===null?null:i.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||CR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mh.isDisabled&&Mh.supportsFiber)try{Di=Mh.inject(OR),wn=Mh}catch{}}return vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NR,vn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lm(a))throw Error(t(200));return RR(i,a,null,u)},vn.createRoot=function(i,a){if(!lm(i))throw Error(t(299));var u=!1,f="",g=zw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=im(i,1,!1,null,null,u,!1,f,g),i[rs]=a.current,Wl(i.nodeType===8?i.parentNode:i),new am(a)},vn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Lc(a),i=i===null?null:i.stateNode,i},vn.flushSync=function(i){return Qi(i)},vn.hydrate=function(i,a,u){if(!Lh(a))throw Error(t(200));return Vh(null,i,a,!0,u)},vn.hydrateRoot=function(i,a,u){if(!lm(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,_="",S=zw;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=$w(a,null,i,1,u??null,g,!1,_,S),i[rs]=a.current,Wl(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Dh(a)},vn.render=function(i,a,u){if(!Lh(a))throw Error(t(200));return Vh(null,i,a,!1,u)},vn.unmountComponentAtNode=function(i){if(!Lh(i))throw Error(t(40));return i._reactRootContainer?(Qi(function(){Vh(null,null,i,!1,function(){i._reactRootContainer=null,i[rs]=null})}),!0):!1},vn.unstable_batchedUpdates=Zp,vn.unstable_renderSubtreeIntoContainer=function(i,a,u,f){if(!Lh(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Vh(i,a,u,!1,f)},vn.version="18.3.1-next-f1338f8080-20240426",vn}var Xw;function $R(){if(Xw)return hm.exports;Xw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hm.exports=FR(),hm.exports}var Zw;function BR(){if(Zw)return jh;Zw=1;var n=$R();return jh.createRoot=n.createRoot,jh.hydrateRoot=n.hydrateRoot,jh}var zR=BR(),M=uy();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var e0="popstate";function WR(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return eg("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Nu(s)}return qR(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Br(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HR(){return Math.random().toString(36).substring(2,10)}function t0(n,e){return{usr:n.state,key:n.key,idx:e}}function eg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?tl(e):e,state:t,key:e&&e.key||r||HR()}}function Nu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function qR(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,p=m();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function m(){return(l.state||{idx:null}).idx}function y(){c="POP";let x=m(),D=x==null?null:x-p;p=x,h&&h({action:c,location:R.location,delta:D})}function v(x,D){c="PUSH";let U=eg(R.location,x,D);p=m()+1;let O=t0(U,p),K=R.createHref(U);try{l.pushState(O,"",K)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(K)}o&&h&&h({action:c,location:R.location,delta:1})}function T(x,D){c="REPLACE";let U=eg(R.location,x,D);p=m();let O=t0(U,p),K=R.createHref(U);l.replaceState(O,"",K),o&&h&&h({action:c,location:R.location,delta:0})}function b(x){return KR(x)}let R={get action(){return c},get location(){return n(s,l)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(e0,y),h=x,()=>{s.removeEventListener(e0,y),h=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let D=b(x);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:v,replace:T,go(x){return l.go(x)}};return R}function KR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Nu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function NS(n,e,t="/"){return GR(n,e,t,!1)}function GR(n,e,t,r){let s=typeof e=="string"?tl(e):e,o=ms(s.pathname||"/",t);if(o==null)return null;let l=OS(n);JR(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=oC(o);c=sC(l[h],p,r)}return c}function OS(n,e=[],t=[],r="",s=!1){let o=(l,c,h=s,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&h)return;ut(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let y=ps([r,m.relativePath]),v=t.concat(m);l.children&&l.children.length>0&&(ut(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),OS(l.children,e,v,y,h)),!(l.path==null&&!l.index)&&e.push({path:y,score:nC(y,l.index),routesMeta:v})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of DS(l.path))o(l,c,!0,p)}),e}function DS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=DS(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function JR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:rC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var YR=/^:[\w-]+$/,QR=3,XR=2,ZR=1,eC=10,tC=-2,n0=n=>n==="*";function nC(n,e){let t=n.split("/"),r=t.length;return t.some(n0)&&(r+=tC),e&&(r+=XR),t.filter(s=>!n0(s)).reduce((s,o)=>s+(YR.test(o)?QR:o===""?ZR:eC),r)}function rC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function sC(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=bd({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),v=h.route;if(!y&&p&&t&&!r[r.length-1].route.index&&(y=bd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:ps([o,y.pathname]),pathnameBase:cC(ps([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=ps([o,y.pathnameBase]))}return l}function bd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=iC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:y},v)=>{if(m==="*"){let b=c[v]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const T=c[v];return y&&!T?p[m]=void 0:p[m]=(T||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function iC(n,e=!1,t=!0){Br(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function oC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Br(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ms(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function lC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?tl(n):n,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=r0(t.substring(1),"/"):o=r0(t,e)):o=e,{pathname:o,search:hC(r),hash:dC(s)}}function r0(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function pm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function uC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function LS(n){let e=uC(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function VS(n,e,t,r=!1){let s;typeof n=="string"?s=tl(n):(s={...n},ut(!s.pathname||!s.pathname.includes("?"),pm("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),pm("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),pm("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}c=y>=0?e[y]:"/"}let h=lC(s,c),p=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var ps=n=>n.join("/").replace(/\/\/+/g,"/"),cC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,fC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function pC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function mC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var MS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jS(n,e){let t=n;if(typeof t!="string"||!aC.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(MS)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),c=ms(l.pathname,e);l.origin===o.origin&&c!=null?t=c+l.search+l.hash:s=!0}catch{Br(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var US=["POST","PUT","PATCH","DELETE"];new Set(US);var gC=["GET",...US];new Set(gC);var nl=M.createContext(null);nl.displayName="DataRouter";var rf=M.createContext(null);rf.displayName="DataRouterState";var yC=M.createContext(!1),FS=M.createContext({isTransitioning:!1});FS.displayName="ViewTransition";var vC=M.createContext(new Map);vC.displayName="Fetchers";var _C=M.createContext(null);_C.displayName="Await";var Wn=M.createContext(null);Wn.displayName="Navigation";var sc=M.createContext(null);sc.displayName="Location";var Es=M.createContext({outlet:null,matches:[],isDataRoute:!1});Es.displayName="Route";var cy=M.createContext(null);cy.displayName="RouteError";var $S="REACT_ROUTER_ERROR",wC="REDIRECT",EC="ROUTE_ERROR_RESPONSE";function TC(n){if(n.startsWith(`${$S}:${wC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function SC(n){if(n.startsWith(`${$S}:${EC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new fC(e.status,e.statusText,e.data)}catch{}}function bC(n,{relative:e}={}){ut(ic(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=M.useContext(Wn),{hash:s,pathname:o,search:l}=oc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:ps([t,o])),r.createHref({pathname:c,search:l,hash:s})}function ic(){return M.useContext(sc)!=null}function Ts(){return ut(ic(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(sc).location}var BS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zS(n){M.useContext(Wn).static||M.useLayoutEffect(n)}function To(){let{isDataRoute:n}=M.useContext(Es);return n?MC():IC()}function IC(){ut(ic(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(nl),{basename:e,navigator:t}=M.useContext(Wn),{matches:r}=M.useContext(Es),{pathname:s}=Ts(),o=JSON.stringify(LS(r)),l=M.useRef(!1);return zS(()=>{l.current=!0}),M.useCallback((h,p={})=>{if(Br(l.current,BS),!l.current)return;if(typeof h=="number"){t.go(h);return}let m=VS(h,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ps([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,o,s,n])}M.createContext(null);function oc(n,{relative:e}={}){let{matches:t}=M.useContext(Es),{pathname:r}=Ts(),s=JSON.stringify(LS(t));return M.useMemo(()=>VS(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function xC(n,e){return WS(n,e)}function WS(n,e,t,r,s){var U;ut(ic(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(Wn),{matches:l}=M.useContext(Es),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",m=c?c.pathnameBase:"/",y=c&&c.route;{let O=y&&y.path||"";qS(p,!y||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let v=Ts(),T;if(e){let O=typeof e=="string"?tl(e):e;ut(m==="/"||((U=O.pathname)==null?void 0:U.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${O.pathname}" was given in the \`location\` prop.`),T=O}else T=v;let b=T.pathname||"/",R=b;if(m!=="/"){let O=m.replace(/^\//,"").split("/");R="/"+b.replace(/^\//,"").split("/").slice(O.length).join("/")}let x=NS(n,{pathname:R});Br(y||x!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),Br(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=PC(x&&x.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:ps([m,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:ps([m,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),l,t,r,s);return e&&D?M.createElement(sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},D):D}function AC(){let n=VC(),e=pC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,l)}var kC=M.createElement(AC,null),HS=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=SC(n.digest);t&&(n=t)}let e=n!==void 0?M.createElement(Es.Provider,{value:this.props.routeContext},M.createElement(cy.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?M.createElement(RC,{error:n},e):e}};HS.contextType=yC;var mm=new WeakMap;function RC({children:n,error:e}){let{basename:t}=M.useContext(Wn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=TC(e.digest);if(r){let s=mm.get(e);if(s)throw s;let o=jS(r.location,t);if(MS&&!mm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw mm.set(e,l),l}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function CC({routeContext:n,match:e,children:t}){let r=M.useContext(nl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Es.Provider,{value:n},t)}function PC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let m=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);ut(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<o.length;m++){let y=o[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=m),y.route.id){let{loaderData:v,errors:T}=t,b=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||b){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let p=t&&r?(m,y)=>{var v,T;r(m,{location:t.location,params:((T=(v=t.matches)==null?void 0:v[0])==null?void 0:T.params)??{},unstable_pattern:mC(t.matches),errorInfo:y})}:void 0;return o.reduceRight((m,y,v)=>{let T,b=!1,R=null,x=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,R=y.route.errorElement||kC,c&&(h<0&&v===0?(qS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):h===v&&(b=!0,x=y.route.hydrateFallbackElement||null)));let D=e.concat(o.slice(0,v+1)),U=()=>{let O;return T?O=R:b?O=x:y.route.Component?O=M.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=m,M.createElement(CC,{match:y,routeContext:{outlet:m,matches:D,isDataRoute:t!=null},children:O})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?M.createElement(HS,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:U(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:p}):U()},null)}function hy(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NC(n){let e=M.useContext(nl);return ut(e,hy(n)),e}function OC(n){let e=M.useContext(rf);return ut(e,hy(n)),e}function DC(n){let e=M.useContext(Es);return ut(e,hy(n)),e}function dy(n){let e=DC(n),t=e.matches[e.matches.length-1];return ut(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function LC(){return dy("useRouteId")}function VC(){var r;let n=M.useContext(cy),e=OC("useRouteError"),t=dy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function MC(){let{router:n}=NC("useNavigate"),e=dy("useNavigate"),t=M.useRef(!1);return zS(()=>{t.current=!0}),M.useCallback(async(s,o={})=>{Br(t.current,BS),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var s0={};function qS(n,e,t){!e&&!s0[n]&&(s0[n]=!0,Br(!1,t))}M.memo(jC);function jC({routes:n,future:e,state:t,onError:r}){return WS(n,void 0,t,r,e)}function so(n){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){ut(!ic(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:c,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[c,s,o,l]);typeof t=="string"&&(t=tl(t));let{pathname:p="/",search:m="",hash:y="",state:v=null,key:T="default"}=t,b=M.useMemo(()=>{let R=ms(p,c);return R==null?null:{location:{pathname:R,search:m,hash:y,state:v,key:T},navigationType:r}},[c,p,m,y,v,T,r]);return Br(b!=null,`<Router basename="${c}"> is not able to match the URL "${p}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:M.createElement(Wn.Provider,{value:h},M.createElement(sc.Provider,{children:e,value:b}))}function FC({children:n,location:e}){return xC(tg(n),e)}function tg(n,e=[]){let t=[];return M.Children.forEach(n,(r,s)=>{if(!M.isValidElement(r))return;let o=[...e,s];if(r.type===M.Fragment){t.push.apply(t,tg(r.props.children,o));return}ut(r.type===so,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=tg(r.props.children,o)),t.push(l)}),t}var od="get",ad="application/x-www-form-urlencoded";function sf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function $C(n){return sf(n)&&n.tagName.toLowerCase()==="button"}function BC(n){return sf(n)&&n.tagName.toLowerCase()==="form"}function zC(n){return sf(n)&&n.tagName.toLowerCase()==="input"}function WC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function HC(n,e){return n.button===0&&(!e||e==="_self")&&!WC(n)}var Uh=null;function qC(){if(Uh===null)try{new FormData(document.createElement("form"),0),Uh=!1}catch{Uh=!0}return Uh}var KC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gm(n){return n!=null&&!KC.has(n)?(Br(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ad}"`),null):n}function GC(n,e){let t,r,s,o,l;if(BC(n)){let c=n.getAttribute("action");r=c?ms(c,e):null,t=n.getAttribute("method")||od,s=gm(n.getAttribute("enctype"))||ad,o=new FormData(n)}else if($C(n)||zC(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?ms(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||od,s=gm(n.getAttribute("formenctype"))||gm(c.getAttribute("enctype"))||ad,o=new FormData(c,n),!qC()){let{name:p,type:m,value:y}=n;if(m==="image"){let v=p?`${p}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else p&&o.append(p,y)}}else{if(sf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=od,r=null,s=ad,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function JC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&ms(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function YC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function XC(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await YC(o,t);return l.links?l.links():[]}return[]}));return n1(r.flat(1).filter(QC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function i0(n,e,t,r,s,o){let l=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,c=(h,p)=>{var m;return t[p].pathname!==h.pathname||((m=t[p].route.path)==null?void 0:m.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):o==="data"?e.filter((h,p)=>{var y;let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function ZC(n,e,{includeHydrateFallback:t}={}){return e1(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function e1(n){return[...new Set(n)]}function t1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function n1(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(t1(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function KS(){let n=M.useContext(nl);return fy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function r1(){let n=M.useContext(rf);return fy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var py=M.createContext(void 0);py.displayName="FrameworkContext";function GS(){let n=M.useContext(py);return fy(n,"You must render this element inside a <HydratedRouter> element"),n}function s1(n,e){let t=M.useContext(py),[r,s]=M.useState(!1),[o,l]=M.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:y}=e,v=M.useRef(null);M.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let R=D=>{D.forEach(U=>{l(U.isIntersecting)})},x=new IntersectionObserver(R,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[n]),M.useEffect(()=>{if(r){let R=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(R)}}},[r]);let T=()=>{s(!0)},b=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:uu(c,T),onBlur:uu(h,b),onMouseEnter:uu(p,T),onMouseLeave:uu(m,b),onTouchStart:uu(y,T)}]:[!1,v,{}]}function uu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function i1({page:n,...e}){let{router:t}=KS(),r=M.useMemo(()=>NS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?M.createElement(a1,{page:n,matches:r,...e}):null}function o1(n){let{manifest:e,routeModules:t}=GS(),[r,s]=M.useState([]);return M.useEffect(()=>{let o=!1;return XC(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function a1({page:n,matches:e,...t}){let r=Ts(),{future:s,manifest:o,routeModules:l}=GS(),{basename:c}=KS(),{loaderData:h,matches:p}=r1(),m=M.useMemo(()=>i0(n,e,p,o,r,"data"),[n,e,p,o,r]),y=M.useMemo(()=>i0(n,e,p,o,r,"assets"),[n,e,p,o,r]),v=M.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let R=new Set,x=!1;if(e.forEach(U=>{var K;let O=o.routes[U.route.id];!O||!O.hasLoader||(!m.some(Y=>Y.route.id===U.route.id)&&U.route.id in h&&((K=l[U.route.id])!=null&&K.shouldRevalidate)||O.hasClientLoader?x=!0:R.add(U.route.id))}),R.size===0)return[];let D=JC(n,c,s.unstable_trailingSlashAwareDataRequests,"data");return x&&R.size>0&&D.searchParams.set("_routes",e.filter(U=>R.has(U.route.id)).map(U=>U.route.id).join(",")),[D.pathname+D.search]},[c,s.unstable_trailingSlashAwareDataRequests,h,r,o,m,e,n,l]),T=M.useMemo(()=>ZC(y,o),[y,o]),b=o1(y);return M.createElement(M.Fragment,null,v.map(R=>M.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),T.map(R=>M.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),b.map(({key:R,link:x})=>M.createElement("link",{key:R,nonce:t.nonce,...x,crossOrigin:x.crossOrigin??t.crossOrigin})))}function l1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var u1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{u1&&(window.__reactRouterVersion="7.13.0")}catch{}function c1({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=M.useRef();s.current==null&&(s.current=WR({window:r,v5Compat:!0}));let o=s.current,[l,c]=M.useState({action:o.action,location:o.location}),h=M.useCallback(p=>{t===!1?c(p):M.startTransition(()=>c(p))},[t]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.createElement(UC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}var JS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,my=M.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:v,...T},b){let{basename:R,unstable_useTransitions:x}=M.useContext(Wn),D=typeof p=="string"&&JS.test(p),U=jS(p,R);p=U.to;let O=bC(p,{relative:s}),[K,Y,Z]=s1(r,T),P=p1(p,{replace:l,state:c,target:h,preventScrollReset:m,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:v,unstable_useTransitions:x});function A(V){e&&e(V),V.defaultPrevented||P(V)}let C=M.createElement("a",{...T,...Z,href:U.absoluteURL||O,onClick:U.isExternal||o?e:A,ref:l1(b,Y),target:h,"data-discover":!D&&t==="render"?"true":void 0});return K&&!D?M.createElement(M.Fragment,null,C,M.createElement(i1,{page:O})):C});my.displayName="Link";var h1=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...p},m){let y=oc(l,{relative:p.relative}),v=Ts(),T=M.useContext(rf),{navigator:b,basename:R}=M.useContext(Wn),x=T!=null&&_1(y)&&c===!0,D=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,U=v.pathname,O=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(U=U.toLowerCase(),O=O?O.toLowerCase():null,D=D.toLowerCase()),O&&R&&(O=ms(O,R)||O);const K=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Y=U===D||!s&&U.startsWith(D)&&U.charAt(K)==="/",Z=O!=null&&(O===D||!s&&O.startsWith(D)&&O.charAt(D.length)==="/"),P={isActive:Y,isPending:Z,isTransitioning:x},A=Y?e:void 0,C;typeof r=="function"?C=r(P):C=[r,Y?"active":null,Z?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(P):o;return M.createElement(my,{...p,"aria-current":A,className:C,ref:m,style:V,to:l,viewTransition:c},typeof h=="function"?h(P):h)});h1.displayName="NavLink";var d1=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=od,action:c,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:v,...T},b)=>{let{unstable_useTransitions:R}=M.useContext(Wn),x=y1(),D=v1(c,{relative:p}),U=l.toLowerCase()==="get"?"get":"post",O=typeof c=="string"&&JS.test(c),K=Y=>{if(h&&h(Y),Y.defaultPrevented)return;Y.preventDefault();let Z=Y.nativeEvent.submitter,P=(Z==null?void 0:Z.getAttribute("formmethod"))||l,A=()=>x(Z||Y.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:s,state:o,relative:p,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:v});R&&t!==!1?M.startTransition(()=>A()):A()};return M.createElement("form",{ref:b,method:U,action:D,onSubmit:r?h:K,...T,"data-discover":!O&&n==="render"?"true":void 0})});d1.displayName="Form";function f1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YS(n){let e=M.useContext(nl);return ut(e,f1(n)),e}function p1(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let p=To(),m=Ts(),y=oc(n,{relative:o});return M.useCallback(v=>{if(HC(v,e)){v.preventDefault();let T=t!==void 0?t:Nu(m)===Nu(y),b=()=>p(n,{replace:T,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});h?M.startTransition(()=>b()):b()}},[m,p,y,t,r,e,n,s,o,l,c,h])}var m1=0,g1=()=>`__${String(++m1)}__`;function y1(){let{router:n}=YS("useSubmit"),{basename:e}=M.useContext(Wn),t=LC(),r=n.fetch,s=n.navigate;return M.useCallback(async(o,l={})=>{let{action:c,method:h,encType:p,formData:m,body:y}=GC(o,e);if(l.navigate===!1){let v=l.fetcherKey||g1();await r(v,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:y,formMethod:l.method||h,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:y,formMethod:l.method||h,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function v1(n,{relative:e}={}){let{basename:t}=M.useContext(Wn),r=M.useContext(Es);ut(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...oc(n||".",{relative:e})},l=Ts();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(m=>m==="")){c.delete("index"),h.filter(y=>y).forEach(y=>c.append("index",y));let m=c.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ps([t,o.pathname])),Nu(o)}function _1(n,{relative:e}={}){let t=M.useContext(FS);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YS("useViewTransitionState"),s=oc(n,{relative:e});if(!t.isTransitioning)return!1;let o=ms(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ms(t.nextLocation.pathname,r)||t.nextLocation.pathname;return bd(s.pathname,l)!=null||bd(s.pathname,o)!=null}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),E1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),o0=n=>{const e=E1(n);return e.charAt(0).toUpperCase()+e.slice(1)},QS=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var T1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=M.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},h)=>M.createElement("svg",{ref:h,...T1,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:QS("lucide",s),...c},[...l.map(([p,m])=>M.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=(n,e)=>{const t=M.forwardRef(({className:r,...s},o)=>M.createElement(S1,{ref:o,iconNode:e,className:QS(`lucide-${w1(o0(n))}`,`lucide-${n}`,r),...s}));return t.displayName=o0(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],I1=dn("arrow-left",b1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],A1=dn("arrow-right",x1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],R1=dn("facebook",k1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ou=dn("heart",C1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],ng=dn("instagram",P1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],O1=dn("menu",N1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],L1=dn("package",D1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],M1=dn("rotate-ccw",V1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j1=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],U1=dn("search",j1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],$1=dn("shopping-bag",F1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],z1=dn("star",B1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],H1=dn("truck",W1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],K1=dn("twitter",q1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],J1=dn("x",G1);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Q1=dn("zap",Y1),gy=M.createContext({});function yy(n){const e=M.useRef(null);return e.current===null&&(e.current=n()),e.current}const XS=typeof window<"u",ZS=XS?M.useLayoutEffect:M.useEffect,of=M.createContext(null);function vy(n,e){n.indexOf(e)===-1&&n.push(e)}function Id(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zr=(n,e,t)=>t>e?e:t<n?n:t;let _y=()=>{};const gs={},eb=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function tb(n){return typeof n=="object"&&n!==null}const nb=n=>/^0[^.\s]+$/u.test(n);function rb(n){let e;return()=>(e===void 0&&(e=n()),e)}const zn=n=>n,X1=(n,e)=>t=>e(n(t)),ac=(...n)=>n.reduce(X1),Du=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class wy{constructor(){this.subscriptions=[]}add(e){return vy(this.subscriptions,e),()=>Id(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ur=n=>n*1e3,Bn=n=>n/1e3;function sb(n,e){return e?n*(1e3/e):0}const ib=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Z1=1e-7,eP=12;function tP(n,e,t,r,s){let o,l,c=0;do l=e+(t-e)/2,o=ib(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>Z1&&++c<eP);return l}function lc(n,e,t,r){if(n===e&&t===r)return zn;const s=o=>tP(o,0,1,n,t);return o=>o===0||o===1?o:ib(s(o),e,r)}const ob=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,ab=n=>e=>1-n(1-e),lb=lc(.33,1.53,.69,.99),Ey=ab(lb),ub=ob(Ey),cb=n=>(n*=2)<1?.5*Ey(n):.5*(2-Math.pow(2,-10*(n-1))),Ty=n=>1-Math.sin(Math.acos(n)),hb=ab(Ty),db=ob(Ty),nP=lc(.42,0,1,1),rP=lc(0,0,.58,1),fb=lc(.42,0,.58,1),sP=n=>Array.isArray(n)&&typeof n[0]!="number",pb=n=>Array.isArray(n)&&typeof n[0]=="number",iP={linear:zn,easeIn:nP,easeInOut:fb,easeOut:rP,circIn:Ty,circInOut:db,circOut:hb,backIn:Ey,backInOut:ub,backOut:lb,anticipate:cb},oP=n=>typeof n=="string",a0=n=>{if(pb(n)){_y(n.length===4);const[e,t,r,s]=n;return lc(e,t,r,s)}else if(oP(n))return iP[n];return n},Fh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function aP(n,e){let t=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(m){l.has(m)&&(p.schedule(m),n()),m(c)}const p={schedule:(m,y=!1,v=!1)=>{const b=v&&s?t:r;return y&&l.add(m),b.has(m)||b.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(h),t.clear(),s=!1,o&&(o=!1,p.process(m))}};return p}const lP=40;function mb(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Fh.reduce((O,K)=>(O[K]=aP(o),O),{}),{setup:c,read:h,resolveKeyframes:p,preUpdate:m,update:y,preRender:v,render:T,postRender:b}=l,R=()=>{const O=gs.useManualTiming?s.timestamp:performance.now();t=!1,gs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(O-s.timestamp,lP),1)),s.timestamp=O,s.isProcessing=!0,c.process(s),h.process(s),p.process(s),m.process(s),y.process(s),v.process(s),T.process(s),b.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(R))},x=()=>{t=!0,r=!0,s.isProcessing||n(R)};return{schedule:Fh.reduce((O,K)=>{const Y=l[K];return O[K]=(Z,P=!1,A=!1)=>(t||x(),Y.schedule(Z,P,A)),O},{}),cancel:O=>{for(let K=0;K<Fh.length;K++)l[Fh[K]].cancel(O)},state:s,steps:l}}const{schedule:et,cancel:yi,state:Ht,steps:ym}=mb(typeof requestAnimationFrame<"u"?requestAnimationFrame:zn,!0);let ld;function uP(){ld=void 0}const cn={now:()=>(ld===void 0&&cn.set(Ht.isProcessing||gs.useManualTiming?Ht.timestamp:performance.now()),ld),set:n=>{ld=n,queueMicrotask(uP)}},gb=n=>e=>typeof e=="string"&&e.startsWith(n),yb=gb("--"),cP=gb("var(--"),Sy=n=>cP(n)?hP.test(n.split("/*")[0].trim()):!1,hP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function l0(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const rl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Lu={...rl,transform:n=>zr(0,1,n)},$h={...rl,default:1},wu=n=>Math.round(n*1e5)/1e5,by=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function dP(n){return n==null}const fP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Iy=(n,e)=>t=>!!(typeof t=="string"&&fP.test(t)&&t.startsWith(n)||e&&!dP(t)&&Object.prototype.hasOwnProperty.call(t,e)),vb=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(by);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},pP=n=>zr(0,255,n),vm={...rl,transform:n=>Math.round(pP(n))},co={test:Iy("rgb","red"),parse:vb("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+vm.transform(n)+", "+vm.transform(e)+", "+vm.transform(t)+", "+wu(Lu.transform(r))+")"};function mP(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rg={test:Iy("#"),parse:mP,transform:co.transform},uc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ti=uc("deg"),Dr=uc("%"),fe=uc("px"),gP=uc("vh"),yP=uc("vw"),u0={...Dr,parse:n=>Dr.parse(n)/100,transform:n=>Dr.transform(n*100)},Na={test:Iy("hsl","hue"),parse:vb("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Dr.transform(wu(e))+", "+Dr.transform(wu(t))+", "+wu(Lu.transform(r))+")"},It={test:n=>co.test(n)||rg.test(n)||Na.test(n),parse:n=>co.test(n)?co.parse(n):Na.test(n)?Na.parse(n):rg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?co.transform(n):Na.transform(n),getAnimatableNone:n=>{const e=It.parse(n);return e.alpha=0,It.transform(e)}},vP=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function _P(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(by))==null?void 0:e.length)||0)+(((t=n.match(vP))==null?void 0:t.length)||0)>0}const _b="number",wb="color",wP="var",EP="var(",c0="${}",TP=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(TP,h=>(It.test(h)?(r.color.push(o),s.push(wb),t.push(It.parse(h))):h.startsWith(EP)?(r.var.push(o),s.push(wP),t.push(h)):(r.number.push(o),s.push(_b),t.push(parseFloat(h))),++o,c0)).split(c0);return{values:t,split:c,indexes:r,types:s}}function Eb(n){return Vu(n).values}function Tb(n){const{split:e,types:t}=Vu(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=t[l];c===_b?o+=wu(s[l]):c===wb?o+=It.transform(s[l]):o+=s[l]}return o}}const SP=n=>typeof n=="number"?0:It.test(n)?It.getAnimatableNone(n):n;function bP(n){const e=Eb(n);return Tb(n)(e.map(SP))}const cr={test:_P,parse:Eb,createTransformer:Tb,getAnimatableNone:bP};function _m(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function IP({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,h=2*t-c;s=_m(h,c,n+1/3),o=_m(h,c,n),l=_m(h,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function xd(n,e){return t=>t>0?e:n}const lt=(n,e,t)=>n+(e-n)*t,wm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},xP=[rg,co,Na],AP=n=>xP.find(e=>e.test(n));function h0(n){const e=AP(n);if(!e)return!1;let t=e.parse(n);return e===Na&&(t=IP(t)),t}const d0=(n,e)=>{const t=h0(n),r=h0(e);if(!t||!r)return xd(n,e);const s={...t};return o=>(s.red=wm(t.red,r.red,o),s.green=wm(t.green,r.green,o),s.blue=wm(t.blue,r.blue,o),s.alpha=lt(t.alpha,r.alpha,o),co.transform(s))},sg=new Set(["none","hidden"]);function kP(n,e){return sg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function RP(n,e){return t=>lt(n,e,t)}function xy(n){return typeof n=="number"?RP:typeof n=="string"?Sy(n)?xd:It.test(n)?d0:NP:Array.isArray(n)?Sb:typeof n=="object"?It.test(n)?d0:CP:xd}function Sb(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>xy(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function CP(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=xy(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function PP(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][r[o]],c=n.values[l]??0;t[s]=c,r[o]++}return t}const NP=(n,e)=>{const t=cr.createTransformer(e),r=Vu(n),s=Vu(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?sg.has(n)&&!s.values.length||sg.has(e)&&!r.values.length?kP(n,e):ac(Sb(PP(r,s),s.values),t):xd(n,e)};function bb(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?lt(n,e,t):xy(n)(n,e)}const OP=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>et.update(e,t),stop:()=>yi(e),now:()=>Ht.isProcessing?Ht.timestamp:cn.now()}},Ib=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Ad=2e4;function Ay(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Ad;)e+=t,r=n.next(e);return e>=Ad?1/0:e}function DP(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(Ay(r),Ad);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Bn(s)}}const LP=5;function xb(n,e,t){const r=Math.max(e-LP,0);return sb(t-n(r),e-r)}const pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Em=.001;function VP({duration:n=pt.duration,bounce:e=pt.bounce,velocity:t=pt.velocity,mass:r=pt.mass}){let s,o,l=1-e;l=zr(pt.minDamping,pt.maxDamping,l),n=zr(pt.minDuration,pt.maxDuration,Bn(n)),l<1?(s=p=>{const m=p*l,y=m*n,v=m-t,T=ig(p,l),b=Math.exp(-y);return Em-v/T*b},o=p=>{const y=p*l*n,v=y*t+t,T=Math.pow(l,2)*Math.pow(p,2)*n,b=Math.exp(-y),R=ig(Math.pow(p,2),l);return(-s(p)+Em>0?-1:1)*((v-T)*b)/R}):(s=p=>{const m=Math.exp(-p*n),y=(p-t)*n+1;return-Em+m*y},o=p=>{const m=Math.exp(-p*n),y=(t-p)*(n*n);return m*y});const c=5/n,h=jP(s,o,c);if(n=ur(n),isNaN(h))return{stiffness:pt.stiffness,damping:pt.damping,duration:n};{const p=Math.pow(h,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:n}}}const MP=12;function jP(n,e,t){let r=t;for(let s=1;s<MP;s++)r=r-n(r)/e(r);return r}function ig(n,e){return n*Math.sqrt(1-e*e)}const UP=["duration","bounce"],FP=["stiffness","damping","mass"];function f0(n,e){return e.some(t=>n[t]!==void 0)}function $P(n){let e={velocity:pt.velocity,stiffness:pt.stiffness,damping:pt.damping,mass:pt.mass,isResolvedFromDuration:!1,...n};if(!f0(n,FP)&&f0(n,UP))if(e.velocity=0,n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*zr(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:pt.mass,stiffness:s,damping:o}}else{const t=VP({...n,velocity:0});e={...e,...t,mass:pt.mass},e.isResolvedFromDuration=!0}return e}function kd(n=pt.visualDuration,e=pt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:h,damping:p,mass:m,duration:y,velocity:v,isResolvedFromDuration:T}=$P({...t,velocity:-Bn(t.velocity||0)}),b=v||0,R=p/(2*Math.sqrt(h*m)),x=l-o,D=Bn(Math.sqrt(h/m)),U=Math.abs(x)<5;r||(r=U?pt.restSpeed.granular:pt.restSpeed.default),s||(s=U?pt.restDelta.granular:pt.restDelta.default);let O;if(R<1){const Y=ig(D,R);O=Z=>{const P=Math.exp(-R*D*Z);return l-P*((b+R*D*x)/Y*Math.sin(Y*Z)+x*Math.cos(Y*Z))}}else if(R===1)O=Y=>l-Math.exp(-D*Y)*(x+(b+D*x)*Y);else{const Y=D*Math.sqrt(R*R-1);O=Z=>{const P=Math.exp(-R*D*Z),A=Math.min(Y*Z,300);return l-P*((b+R*D*x)*Math.sinh(A)+Y*x*Math.cosh(A))/Y}}const K={calculatedDuration:T&&y||null,next:Y=>{const Z=O(Y);if(T)c.done=Y>=y;else{let P=Y===0?b:0;R<1&&(P=Y===0?ur(b):xb(O,Y,Z));const A=Math.abs(P)<=r,C=Math.abs(l-Z)<=s;c.done=A&&C}return c.value=c.done?l:Z,c},toString:()=>{const Y=Math.min(Ay(K),Ad),Z=Ib(P=>K.next(Y*P).value,Y,30);return Y+"ms "+Z},toTransition:()=>{}};return K}kd.applyToOptions=n=>{const e=DP(n,100,kd);return n.ease=e.ease,n.duration=ur(e.duration),n.type="keyframes",n};function og({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:h,restDelta:p=.5,restSpeed:m}){const y=n[0],v={done:!1,value:y},T=A=>c!==void 0&&A<c||h!==void 0&&A>h,b=A=>c===void 0?h:h===void 0||Math.abs(c-A)<Math.abs(h-A)?c:h;let R=t*e;const x=y+R,D=l===void 0?x:l(x);D!==x&&(R=D-y);const U=A=>-R*Math.exp(-A/r),O=A=>D+U(A),K=A=>{const C=U(A),V=O(A);v.done=Math.abs(C)<=p,v.value=v.done?D:V};let Y,Z;const P=A=>{T(v.value)&&(Y=A,Z=kd({keyframes:[v.value,b(v.value)],velocity:xb(O,A,v.value),damping:s,stiffness:o,restDelta:p,restSpeed:m}))};return P(0),{calculatedDuration:null,next:A=>{let C=!1;return!Z&&Y===void 0&&(C=!0,K(A),P(A)),Y!==void 0&&A>=Y?Z.next(A-Y):(!C&&K(A),v)}}}function BP(n,e,t){const r=[],s=t||gs.mix||bb,o=n.length-1;for(let l=0;l<o;l++){let c=s(n[l],n[l+1]);if(e){const h=Array.isArray(e)?e[l]||zn:e;c=ac(h,c)}r.push(c)}return r}function zP(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(_y(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=BP(e,r,s),h=c.length,p=m=>{if(l&&m<n[0])return e[0];let y=0;if(h>1)for(;y<n.length-2&&!(m<n[y+1]);y++);const v=Du(n[y],n[y+1],m);return c[y](v)};return t?m=>p(zr(n[0],n[o-1],m)):p}function WP(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Du(0,e,r);n.push(lt(t,1,s))}}function HP(n){const e=[0];return WP(e,n.length-1),e}function qP(n,e){return n.map(t=>t*e)}function KP(n,e){return n.map(()=>e||fb).splice(0,n.length-1)}function Eu({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=sP(r)?r.map(a0):a0(r),o={done:!1,value:e[0]},l=qP(t&&t.length===e.length?t:HP(e),n),c=zP(l,e,{ease:Array.isArray(s)?s:KP(e,s)});return{calculatedDuration:n,next:h=>(o.value=c(h),o.done=h>=n,o)}}const GP=n=>n!==null;function ky(n,{repeat:e,repeatType:t="loop"},r,s=1){const o=n.filter(GP),c=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const JP={decay:og,inertia:og,tween:Eu,keyframes:Eu,spring:kd};function Ab(n){typeof n.type=="string"&&(n.type=JP[n.type])}class Ry{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const YP=n=>n/100;class Cy extends Ry{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==cn.now()&&this.tick(cn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Ab(e);const{type:t=Eu,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const h=t||Eu;h!==Eu&&typeof c[0]!="number"&&(this.mixKeyframes=ac(YP,bb(c[0],c[1])),c=[0,100]);const p=h({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...c].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Ay(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:m,repeat:y,repeatType:v,repeatDelay:T,type:b,onUpdate:R,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const D=this.currentTime-p*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?D<0:D>s;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,K=r;if(y){const A=Math.min(this.currentTime,s)/c;let C=Math.floor(A),V=A%1;!V&&A>=1&&(V=1),V===1&&C--,C=Math.min(C,y+1),!!(C%2)&&(v==="reverse"?(V=1-V,T&&(V-=T/c)):v==="mirror"&&(K=l)),O=zr(0,1,V)*c}const Y=U?{done:!1,value:m[0]}:K.next(O);o&&(Y.value=o(Y.value));let{done:Z}=Y;!U&&h!==null&&(Z=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Z);return P&&b!==og&&(Y.value=ky(m,this.options,x,this.speed)),R&&R(Y.value),P&&this.finish(),Y}then(e,t){return this.finished.then(e,t)}get duration(){return Bn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bn(e)}get time(){return Bn(this.currentTime)}set time(e){var t;e=ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(cn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Bn(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=OP,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(cn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function QP(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ho=n=>n*180/Math.PI,ag=n=>{const e=ho(Math.atan2(n[1],n[0]));return lg(e)},XP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:ag,rotateZ:ag,skewX:n=>ho(Math.atan(n[1])),skewY:n=>ho(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},lg=n=>(n=n%360,n<0&&(n+=360),n),p0=ag,m0=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),g0=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),ZP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:m0,scaleY:g0,scale:n=>(m0(n)+g0(n))/2,rotateX:n=>lg(ho(Math.atan2(n[6],n[5]))),rotateY:n=>lg(ho(Math.atan2(-n[2],n[0]))),rotateZ:p0,rotate:p0,skewX:n=>ho(Math.atan(n[4])),skewY:n=>ho(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ug(n){return n.includes("scale")?1:0}function cg(n,e){if(!n||n==="none")return ug(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=ZP,s=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=XP,s=c}if(!s)return ug(e);const o=r[e],l=s[1].split(",").map(tN);return typeof o=="function"?o(l):l[o]}const eN=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return cg(t,e)};function tN(n){return parseFloat(n.trim())}const sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],il=new Set(sl),y0=n=>n===rl||n===fe,nN=new Set(["x","y","z"]),rN=sl.filter(n=>!nN.has(n));function sN(n){const e=[];return rN.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ui={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>cg(e,"x"),y:(n,{transform:e})=>cg(e,"y")};ui.translateX=ui.x;ui.translateY=ui.y;const mo=new Set;let hg=!1,dg=!1,fg=!1;function kb(){if(dg){const n=Array.from(mo).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=sN(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var c;(c=r.getValue(o))==null||c.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dg=!1,hg=!1,mo.forEach(n=>n.complete(fg)),mo.clear()}function Rb(){mo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(dg=!0)})}function iN(){fg=!0,Rb(),kb(),fg=!1}class Py{constructor(e,t,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(mo.add(this),hg||(hg=!0,et.read(Rb),et.resolveKeyframes(kb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}QP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),mo.delete(this)}cancel(){this.state==="scheduled"&&(mo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oN=n=>n.startsWith("--");function aN(n,e,t){oN(e)?n.style.setProperty(e,t):n.style[e]=t}const lN={};function Cb(n,e){const t=rb(n);return()=>lN[e]??t()}const uN=Cb(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),Pb=Cb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),fu=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,v0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:fu([0,.65,.55,1]),circOut:fu([.55,0,1,.45]),backIn:fu([.31,.01,.66,-.59]),backOut:fu([.33,1.53,.69,.99])};function Nb(n,e){if(n)return typeof n=="function"?Pb()?Ib(n,e):"ease-out":pb(n)?fu(n):Array.isArray(n)?n.map(t=>Nb(t,e)||v0.easeOut):v0[n]}function cN(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:h}={},p=void 0){const m={[e]:t};h&&(m.offset=h);const y=Nb(c,s);Array.isArray(y)&&(m.easing=y);const v={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return p&&(v.pseudoElement=p),n.animate(m,v)}function Ob(n){return typeof n=="function"&&"applyToOptions"in n}function hN({type:n,...e}){return Ob(n)&&Pb()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Db extends Ry{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,_y(typeof e.type!="string");const p=hN(e);this.animation=cN(t,r,s,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=ky(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):aN(t,r,m),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r,s;const e=(t=this.options)==null?void 0:t.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Bn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bn(e)}get time(){return Bn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&uN()?(this.animation.timeline=e,zn):t(this)}}const Lb={anticipate:cb,backInOut:ub,circInOut:db};function dN(n){return n in Lb}function fN(n){typeof n.ease=="string"&&dN(n.ease)&&(n.ease=Lb[n.ease])}const Tm=10;class pN extends Db{constructor(e){fN(e),Ab(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Cy({...l,autoplay:!1}),h=Math.max(Tm,cn.now()-this.startTime),p=zr(0,Tm,h-Tm);t.setWithVelocity(c.sample(Math.max(0,h-p)).value,c.sample(h).value,p),c.stop()}}const _0=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(cr.test(n)||n==="0")&&!n.startsWith("url("));function mN(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function gN(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=_0(s,e),c=_0(o,e);return!l||!c?!1:mN(n)||(t==="spring"||Ob(t))&&r}function pg(n){n.duration=0,n.type="keyframes"}const yN=new Set(["opacity","clipPath","filter","transform"]),vN=rb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _N(n){var m;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:o,type:l}=n;if(!(((m=e==null?void 0:e.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=e.owner.getProps();return vN()&&t&&yN.has(t)&&(t!=="transform"||!p)&&!h&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const wN=40;class EN extends Ry{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:h,motionValue:p,element:m,...y}){var b;super(),this.stop=()=>{var R,x;this._animation&&(this._animation.stop(),(R=this.stopTimeline)==null||R.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=cn.now();const v={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,name:h,motionValue:p,element:m,...y},T=(m==null?void 0:m.KeyframeResolver)||Py;this.keyframeResolver=new T(c,(R,x,D)=>this.onKeyframesResolved(R,x,v,!D),h,p,m),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,r,s){var x,D;this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:h,isHandoff:p,onUpdate:m}=r;this.resolvedAt=cn.now(),gN(e,o,l,c)||((gs.instantAnimations||!h)&&(m==null||m(ky(e,r,t))),e[0]=e[e.length-1],pg(r),r.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>wN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},T=!p&&_N(v),b=(D=(x=v.motionValue)==null?void 0:x.owner)==null?void 0:D.current,R=T?new pN({...v,element:b}):new Cy(v);R.finished.then(()=>{this.notifyFinished()}).catch(zn),this.pendingTimeline&&(this.stopTimeline=R.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=R}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),iN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function Vb(n,e,t,r=0,s=1){const o=Array.from(n).sort((p,m)=>p.sortNodePosition(m)).indexOf(e),l=n.size,c=(l-1)*r;return typeof t=="function"?t(o,l):s===1?o*r:c-o*r}const TN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SN(n){const e=TN.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function Mb(n,e,t=1){const[r,s]=SN(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return eb(l)?parseFloat(l):l}return Sy(s)?Mb(s,e,t+1):s}const bN={type:"spring",stiffness:500,damping:25,restSpeed:10},IN=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),xN={type:"keyframes",duration:.8},AN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kN=(n,{keyframes:e})=>e.length>2?xN:il.has(n)?n.startsWith("scale")?IN(e[1]):bN:AN,RN=n=>n!==null;function CN(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(RN),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}function jb(n,e){if(n!=null&&n.inherit&&e){const{inherit:t,...r}=n;return{...e,...r}}return n}function Ny(n,e){const t=(n==null?void 0:n[e])??(n==null?void 0:n.default)??n;return t!==n?jb(t,n):t}function PN({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:h,elapsed:p,...m}){return!!Object.keys(m).length}const Oy=(n,e,t,r={},s,o)=>l=>{const c=Ny(r,n)||{},h=c.delay||r.delay||0;let{elapsed:p=0}=r;p=p-ur(h);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:s};PN(c)||Object.assign(m,kN(n,m)),m.duration&&(m.duration=ur(m.duration)),m.repeatDelay&&(m.repeatDelay=ur(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(pg(m),m.delay===0&&(y=!0)),(gs.instantAnimations||gs.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(y=!0,pg(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const v=CN(m.keyframes,c);if(v!==void 0){et.update(()=>{m.onUpdate(v),m.onComplete()});return}}return c.isSync?new Cy(m):new EN(m)};function w0(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function Dy(n,e,t,r){if(typeof e=="function"){const[s,o]=w0(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=w0(r);e=e(t!==void 0?t:n.custom,s,o)}return e}function Ua(n,e,t){const r=n.getProps();return Dy(r,e,t!==void 0?t:r.custom,n)}const Ub=new Set(["width","height","top","left","right","bottom",...sl]),E0=30,NN=n=>!isNaN(parseFloat(n));class ON{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=cn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=cn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new wy);const r=this.events[e].add(t);return e==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=cn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>E0)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,E0);return sb(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ga(n,e){return new ON(n,e)}const mg=n=>Array.isArray(n);function DN(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ga(t))}function LN(n){return mg(n)?n[n.length-1]||0:n}function VN(n,e){const t=Ua(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const c=LN(o[l]);DN(n,l,c)}}const rn=n=>!!(n&&n.getVelocity);function MN(n){return!!(rn(n)&&n.add)}function gg(n,e){const t=n.getValue("willChange");if(MN(t))return t.add(e);if(!t&&gs.WillChange){const r=new gs.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function Ly(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const jN="framerAppearId",Fb="data-"+Ly(jN);function $b(n){return n.props[Fb]}function UN({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Bb(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:o,transitionEnd:l,...c}=e;const h=n.getDefaultTransition();o=o?jb(o,h):h;const p=o==null?void 0:o.reduceMotion;r&&(o=r);const m=[],y=s&&n.animationState&&n.animationState.getState()[s];for(const v in c){const T=n.getValue(v,n.latestValues[v]??null),b=c[v];if(b===void 0||y&&UN(y,v))continue;const R={delay:t,...Ny(o||{},v)},x=T.get();if(x!==void 0&&!T.isAnimating&&!Array.isArray(b)&&b===x&&!R.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const K=$b(n);if(K){const Y=window.MotionHandoffAnimation(K,v,et);Y!==null&&(R.startTime=Y,D=!0)}}gg(n,v);const U=p??n.shouldReduceMotion;T.start(Oy(v,T,b,U&&Ub.has(v)?{type:!1}:R,n,D));const O=T.animation;O&&m.push(O)}if(l){const v=()=>et.update(()=>{l&&VN(n,l)});m.length?Promise.all(m).then(v):v()}return m}function yg(n,e,t={}){var h;const r=Ua(n,e,t.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(Bb(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:v}=s;return FN(n,e,p,m,y,v,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[p,m]=c==="beforeChildren"?[o,l]:[l,o];return p().then(()=>m())}else return Promise.all([o(),l(t.delay)])}function FN(n,e,t=0,r=0,s=0,o=1,l){const c=[];for(const h of n.variantChildren)h.notify("AnimationStart",e),c.push(yg(h,e,{...l,delay:t+(typeof r=="function"?0:r)+Vb(n.variantChildren,h,r,s,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(c)}function $N(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>yg(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=yg(n,e,t);else{const s=typeof e=="function"?Ua(n,e,t.custom):e;r=Promise.all(Bb(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const BN={test:n=>n==="auto",parse:n=>n},zb=n=>e=>e.test(n),Wb=[rl,fe,Dr,ti,yP,gP,BN],T0=n=>Wb.find(zb(n));function zN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||nb(n):!0}const WN=new Set(["brightness","contrast","saturate","opacity"]);function HN(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(by)||[];if(!r)return n;const s=t.replace(r,"");let o=WN.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const qN=/\b([a-z-]*)\(.*?\)/gu,vg={...cr,getAnimatableNone:n=>{const e=n.match(qN);return e?e.map(HN).join(" "):n}},_g={...cr,getAnimatableNone:n=>{const e=cr.parse(n);return cr.createTransformer(n)(e.map(r=>typeof r=="number"?0:typeof r=="object"?{...r,alpha:1}:r))}},S0={...rl,transform:Math.round},KN={rotate:ti,rotateX:ti,rotateY:ti,rotateZ:ti,scale:$h,scaleX:$h,scaleY:$h,scaleZ:$h,skew:ti,skewX:ti,skewY:ti,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:Lu,originX:u0,originY:u0,originZ:fe},Vy={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,top:fe,right:fe,bottom:fe,left:fe,inset:fe,insetBlock:fe,insetBlockStart:fe,insetBlockEnd:fe,insetInline:fe,insetInlineStart:fe,insetInlineEnd:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,paddingBlock:fe,paddingBlockStart:fe,paddingBlockEnd:fe,paddingInline:fe,paddingInlineStart:fe,paddingInlineEnd:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,marginBlock:fe,marginBlockStart:fe,marginBlockEnd:fe,marginInline:fe,marginInlineStart:fe,marginInlineEnd:fe,fontSize:fe,backgroundPositionX:fe,backgroundPositionY:fe,...KN,zIndex:S0,fillOpacity:Lu,strokeOpacity:Lu,numOctaves:S0},GN={...Vy,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:vg,WebkitFilter:vg,mask:_g,WebkitMask:_g},Hb=n=>GN[n],JN=new Set([vg,_g]);function qb(n,e){let t=Hb(n);return JN.has(t)||(t=cr),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const YN=new Set(["auto","none","0"]);function QN(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!YN.has(o)&&Vu(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=qb(t,s)}class XN extends Py{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let y=e[m];if(typeof y=="string"&&(y=y.trim(),Sy(y))){const v=Mb(y,t.current);v!==void 0&&(e[m]=v),m===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!Ub.has(r)||e.length!==2)return;const[s,o]=e,l=T0(s),c=T0(o),h=l0(s),p=l0(o);if(h!==p&&ui[r]){this.needsMeasurement=!0;return}if(l!==c)if(y0(l)&&y0(c))for(let m=0;m<e.length;m++){const y=e[m];typeof y=="string"&&(e[m]=parseFloat(y))}else ui[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||zN(e[s]))&&r.push(s);r.length&&QN(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ui[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=ui[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([h,p])=>{e.getValue(h).set(p)}),this.resolveNoneKeyframes()}}const ZN=new Set(["opacity","clipPath","filter","transform"]);function Kb(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n).filter(r=>r!=null)}const Gb=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function wg(n){return tb(n)&&"offsetHeight"in n}const{schedule:My}=mb(queueMicrotask,!1),rr={x:!1,y:!1};function Jb(){return rr.x||rr.y}function eO(n){return n==="x"||n==="y"?rr[n]?null:(rr[n]=!0,()=>{rr[n]=!1}):rr.x||rr.y?null:(rr.x=rr.y=!0,()=>{rr.x=rr.y=!1})}function Yb(n,e){const t=Kb(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function tO(n){return!(n.pointerType==="touch"||Jb())}function nO(n,e,t={}){const[r,s,o]=Yb(n,t);return r.forEach(l=>{let c=!1,h=!1,p;const m=()=>{l.removeEventListener("pointerleave",b)},y=x=>{p&&(p(x),p=void 0),m()},v=x=>{c=!1,window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),h&&(h=!1,y(x))},T=()=>{c=!0,window.addEventListener("pointerup",v,s),window.addEventListener("pointercancel",v,s)},b=x=>{if(x.pointerType!=="touch"){if(c){h=!0;return}y(x)}},R=x=>{if(!tO(x))return;h=!1;const D=e(l,x);typeof D=="function"&&(p=D,l.addEventListener("pointerleave",b,s))};l.addEventListener("pointerenter",R,s),l.addEventListener("pointerdown",T,s)}),o}const Qb=(n,e)=>e?n===e?!0:Qb(n,e.parentElement):!1,jy=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,rO=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sO(n){return rO.has(n.tagName)||n.isContentEditable===!0}const iO=new Set(["INPUT","SELECT","TEXTAREA"]);function oO(n){return iO.has(n.tagName)||n.isContentEditable===!0}const ud=new WeakSet;function b0(n){return e=>{e.key==="Enter"&&n(e)}}function Sm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aO=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=b0(()=>{if(ud.has(t))return;Sm(t,"down");const s=b0(()=>{Sm(t,"up")}),o=()=>Sm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function I0(n){return jy(n)&&!Jb()}const x0=new WeakSet;function lO(n,e,t={}){const[r,s,o]=Yb(n,t),l=c=>{const h=c.currentTarget;if(!I0(c)||x0.has(c))return;ud.add(h),t.stopPropagation&&x0.add(c);const p=e(h,c),m=(T,b)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),ud.has(h)&&ud.delete(h),I0(T)&&typeof p=="function"&&p(T,{success:b})},y=T=>{m(T,h===window||h===document||t.useGlobalTarget||Qb(h,T.target))},v=T=>{m(T,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",v,s)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),wg(c)&&(c.addEventListener("focus",p=>aO(p,s)),!sO(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function Uy(n){return tb(n)&&"ownerSVGElement"in n}const cd=new WeakMap;let ni;const Xb=(n,e,t)=>(r,s)=>s&&s[0]?s[0][n+"Size"]:Uy(r)&&"getBBox"in r?r.getBBox()[e]:r[t],uO=Xb("inline","width","offsetWidth"),cO=Xb("block","height","offsetHeight");function hO({target:n,borderBoxSize:e}){var t;(t=cd.get(n))==null||t.forEach(r=>{r(n,{get width(){return uO(n,e)},get height(){return cO(n,e)}})})}function dO(n){n.forEach(hO)}function fO(){typeof ResizeObserver>"u"||(ni=new ResizeObserver(dO))}function pO(n,e){ni||fO();const t=Kb(n);return t.forEach(r=>{let s=cd.get(r);s||(s=new Set,cd.set(r,s)),s.add(e),ni==null||ni.observe(r)}),()=>{t.forEach(r=>{const s=cd.get(r);s==null||s.delete(e),s!=null&&s.size||ni==null||ni.unobserve(r)})}}const hd=new Set;let Oa;function mO(){Oa=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};hd.forEach(e=>e(n))},window.addEventListener("resize",Oa)}function gO(n){return hd.add(n),Oa||mO(),()=>{hd.delete(n),!hd.size&&typeof Oa=="function"&&(window.removeEventListener("resize",Oa),Oa=void 0)}}function A0(n,e){return typeof n=="function"?gO(n):pO(n,e)}function yO(n){return Uy(n)&&n.tagName==="svg"}const vO=[...Wb,It,cr],_O=n=>vO.find(zb(n)),k0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Da=()=>({x:k0(),y:k0()}),R0=()=>({min:0,max:0}),Pt=()=>({x:R0(),y:R0()}),wO=new WeakMap;function af(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Mu(n){return typeof n=="string"||Array.isArray(n)}const Fy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$y=["initial",...Fy];function lf(n){return af(n.animate)||$y.some(e=>Mu(n[e]))}function Zb(n){return!!(lf(n)||n.variants)}function EO(n,e,t){for(const r in e){const s=e[r],o=t[r];if(rn(s))n.addValue(r,s);else if(rn(o))n.addValue(r,Ga(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,Ga(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Eg={current:null},eI={current:!1},TO=typeof window<"u";function SO(){if(eI.current=!0,!!TO)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Eg.current=n.matches;n.addEventListener("change",e),e()}else Eg.current=!1}const C0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Rd={};function tI(n){Rd=n}function bO(){return Rd}class IO{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=Py,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=cn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,et.render(this.render,!1,!0))};const{latestValues:p,renderState:m}=c;this.latestValues=p,this.baseTarget={...p},this.initialValues=t.initial?{...p}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=lf(t),this.isVariantNode=Zb(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const T in v){const b=v[T];p[T]!==void 0&&rn(b)&&b.set(p[T])}}mount(e){var t,r;if(this.hasBeenMounted)for(const s in this.initialValues)(t=this.values.get(s))==null||t.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,wO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(eI.current||SO(),this.shouldReduceMotion=Eg.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&ZN.has(e)&&this.current instanceof HTMLElement){const{factory:l,keyframes:c,times:h,ease:p,duration:m}=t.accelerate,y=new Db({element:this.current,name:e,keyframes:c,times:h,ease:p,duration:ur(m)}),v=l(y);this.valueSubscriptions.set(e,()=>{v(),y.cancel()});return}const r=il.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Rd){const t=Rd[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<C0.length;r++){const s=C0[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=EO(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ga(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(eb(r)||nb(r))?r=parseFloat(r):!_O(r)&&cr.test(t)&&(r=qb(e,t)),this.setBaseTarget(e,rn(r)?r.get():r)),rn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=Dy(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!rn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new wy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){My.render(this.render)}}class nI extends IO{constructor(){super(...arguments),this.KeyframeResolver=XN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rI({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function xO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function AO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function bm(n){return n===void 0||n===1}function Tg({scale:n,scaleX:e,scaleY:t}){return!bm(n)||!bm(e)||!bm(t)}function io(n){return Tg(n)||sI(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function sI(n){return P0(n.x)||P0(n.y)}function P0(n){return n&&n!=="0%"}function Cd(n,e,t){const r=n-t,s=e*r;return t+s}function N0(n,e,t,r,s){return s!==void 0&&(n=Cd(n,s,r)),Cd(n,t,r)+e}function Sg(n,e=0,t=1,r,s){n.min=N0(n.min,e,t,r,s),n.max=N0(n.max,e,t,r,s)}function iI(n,{x:e,y:t}){Sg(n.x,e.translate,e.scale,e.originPoint),Sg(n.y,t.translate,t.scale,t.originPoint)}const O0=.999999999999,D0=1.0000000000001;function kO(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=t[c],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Va(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,iI(n,l)),r&&io(o.latestValues)&&Va(n,o.latestValues))}e.x<D0&&e.x>O0&&(e.x=1),e.y<D0&&e.y>O0&&(e.y=1)}function La(n,e){n.min=n.min+e,n.max=n.max+e}function L0(n,e,t,r,s=.5){const o=lt(n.min,n.max,s);Sg(n,e,t,o,r)}function Va(n,e){L0(n.x,e.x,e.scaleX,e.scale,e.originX),L0(n.y,e.y,e.scaleY,e.scale,e.originY)}function oI(n,e){return rI(AO(n.getBoundingClientRect(),e))}function RO(n,e,t){const r=oI(n,t),{scroll:s}=e;return s&&(La(r.x,s.offset.x),La(r.y,s.offset.y)),r}const CO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},PO=sl.length;function NO(n,e,t){let r="",s=!0;for(let o=0;o<PO;o++){const l=sl[o],c=n[l];if(c===void 0)continue;let h=!0;if(typeof c=="number")h=c===(l.startsWith("scale")?1:0);else{const p=parseFloat(c);h=l.startsWith("scale")?p===1:p===0}if(!h||t){const p=Gb(c,Vy[l]);if(!h){s=!1;const m=CO[l]||l;r+=`${m}(${p}) `}t&&(e[l]=p)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function By(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,c=!1;for(const h in e){const p=e[h];if(il.has(h)){l=!0;continue}else if(yb(h)){s[h]=p;continue}else{const m=Gb(p,Vy[h]);h.startsWith("origin")?(c=!0,o[h]=m):r[h]=m}}if(e.transform||(l||t?r.transform=NO(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:m=0}=o;r.transformOrigin=`${h} ${p} ${m}`}}function aI(n,{style:e,vars:t},r,s){const o=n.style;let l;for(l in e)o[l]=e[l];s==null||s.applyProjectionStyles(o,r);for(l in t)o.setProperty(l,t[l])}function V0(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const cu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(fe.test(n))n=parseFloat(n);else return n;const t=V0(n,e.target.x),r=V0(n,e.target.y);return`${t}% ${r}%`}},OO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=cr.parse(n);if(s.length>5)return r;const o=cr.createTransformer(n),l=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,h=t.y.scale*e.y;s[0+l]/=c,s[1+l]/=h;const p=lt(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),o(s)}},bg={borderRadius:{...cu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cu,borderTopRightRadius:cu,borderBottomLeftRadius:cu,borderBottomRightRadius:cu,boxShadow:OO};function lI(n,{layout:e,layoutId:t}){return il.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!bg[n]||n==="opacity")}function zy(n,e,t){var l;const r=n.style,s=e==null?void 0:e.style,o={};if(!r)return o;for(const c in r)(rn(r[c])||s&&rn(s[c])||lI(c,n)||((l=t==null?void 0:t.getValue(c))==null?void 0:l.liveStyle)!==void 0)&&(o[c]=r[c]);return o}function DO(n){return window.getComputedStyle(n)}class LO extends nI{constructor(){super(...arguments),this.type="html",this.renderInstance=aI}readValueFromInstance(e,t){var r;if(il.has(t))return(r=this.projection)!=null&&r.isProjecting?ug(t):eN(e,t);{const s=DO(e),o=(yb(t)?s.getPropertyValue(t):s[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return oI(e,t)}build(e,t,r){By(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return zy(e,t,r)}}const VO={offset:"stroke-dashoffset",array:"stroke-dasharray"},MO={offset:"strokeDashoffset",array:"strokeDasharray"};function jO(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?VO:MO;n[o.offset]=`${-r}`,n[o.array]=`${e} ${t}`}const UO=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function uI(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},h,p,m){if(By(n,c,p),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v}=n;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox);for(const T of UO)y[T]!==void 0&&(v[T]=y[T],delete y[T]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&jO(y,s,o,l,!1)}const cI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),hI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function FO(n,e,t,r){aI(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(cI.has(s)?s:Ly(s),e.attrs[s])}function dI(n,e,t){const r=zy(n,e,t);for(const s in n)if(rn(n[s])||rn(e[s])){const o=sl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}class $O extends nI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Pt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(il.has(t)){const r=Hb(t);return r&&r.default||0}return t=cI.has(t)?t:Ly(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return dI(e,t,r)}build(e,t,r){uI(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){FO(e,t,r,s)}mount(e){this.isSVGTag=hI(e.tagName),super.mount(e)}}const BO=$y.length;function fI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?fI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<BO;t++){const r=$y[t],s=n.props[r];(Mu(s)||s===!1)&&(e[r]=s)}return e}function pI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const zO=[...Fy].reverse(),WO=Fy.length;function HO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>$N(n,t,r)))}function qO(n){let e=HO(n),t=M0(),r=!0;const s=h=>(p,m)=>{var v;const y=Ua(n,m,h==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:T,transitionEnd:b,...R}=y;p={...p,...R,...b}}return p};function o(h){e=h(n)}function l(h){const{props:p}=n,m=fI(n.parent)||{},y=[],v=new Set;let T={},b=1/0;for(let x=0;x<WO;x++){const D=zO[x],U=t[D],O=p[D]!==void 0?p[D]:m[D],K=Mu(O),Y=D===h?U.isActive:null;Y===!1&&(b=x);let Z=O===m[D]&&O!==p[D]&&K;if(Z&&r&&n.manuallyAnimateOnMount&&(Z=!1),U.protectedKeys={...T},!U.isActive&&Y===null||!O&&!U.prevProp||af(O)||typeof O=="boolean")continue;if(D==="exit"&&U.isActive&&Y!==!0){U.prevResolvedValues&&(T={...T,...U.prevResolvedValues});continue}const P=KO(U.prevProp,O);let A=P||D===h&&U.isActive&&!Z&&K||x>b&&K,C=!1;const V=Array.isArray(O)?O:[O];let j=V.reduce(s(D),{});Y===!1&&(j={});const{prevResolvedValues:B={}}=U,L={...B,...j},Fe=Ce=>{A=!0,v.has(Ce)&&(C=!0,v.delete(Ce)),U.needsAnimating[Ce]=!0;const se=n.getValue(Ce);se&&(se.liveStyle=!1)};for(const Ce in L){const se=j[Ce],pe=B[Ce];if(T.hasOwnProperty(Ce))continue;let ae=!1;mg(se)&&mg(pe)?ae=!pI(se,pe):ae=se!==pe,ae?se!=null?Fe(Ce):v.add(Ce):se!==void 0&&v.has(Ce)?Fe(Ce):U.protectedKeys[Ce]=!0}U.prevProp=O,U.prevResolvedValues=j,U.isActive&&(T={...T,...j}),r&&n.blockInitialAnimation&&(A=!1);const mt=Z&&P;A&&(!mt||C)&&y.push(...V.map(Ce=>{const se={type:D};if(typeof Ce=="string"&&r&&!mt&&n.manuallyAnimateOnMount&&n.parent){const{parent:pe}=n,ae=Ua(pe,Ce);if(pe.enteringChildren&&ae){const{delayChildren:z}=ae.transition||{};se.delay=Vb(pe.enteringChildren,n,z)}}return{animation:Ce,options:se}}))}if(v.size){const x={};if(typeof p.initial!="boolean"){const D=Ua(n,Array.isArray(p.initial)?p.initial[0]:p.initial);D&&D.transition&&(x.transition=D.transition)}v.forEach(D=>{const U=n.getBaseTarget(D),O=n.getValue(D);O&&(O.liveStyle=!0),x[D]=U??null}),y.push({animation:x})}let R=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(y):Promise.resolve()}function c(h,p){var y;if(t[h].isActive===p)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(v=>{var T;return(T=v.animationState)==null?void 0:T.setActive(h,p)}),t[h].isActive=p;const m=l(h);for(const v in t)t[v].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=M0()}}}function KO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!pI(e,n):!1}function to(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function M0(){return{animate:to(!0),whileInView:to(),whileHover:to(),whileTap:to(),whileDrag:to(),whileFocus:to(),exit:to()}}function j0(n,e){n.min=e.min,n.max=e.max}function tr(n,e){j0(n.x,e.x),j0(n.y,e.y)}function U0(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const mI=1e-4,GO=1-mI,JO=1+mI,gI=.01,YO=0-gI,QO=0+gI;function hn(n){return n.max-n.min}function XO(n,e,t){return Math.abs(n-e)<=t}function F0(n,e,t,r=.5){n.origin=r,n.originPoint=lt(e.min,e.max,n.origin),n.scale=hn(t)/hn(e),n.translate=lt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=GO&&n.scale<=JO||isNaN(n.scale))&&(n.scale=1),(n.translate>=YO&&n.translate<=QO||isNaN(n.translate))&&(n.translate=0)}function Tu(n,e,t,r){F0(n.x,e.x,t.x,r?r.originX:void 0),F0(n.y,e.y,t.y,r?r.originY:void 0)}function $0(n,e,t){n.min=t.min+e.min,n.max=n.min+hn(e)}function ZO(n,e,t){$0(n.x,e.x,t.x),$0(n.y,e.y,t.y)}function B0(n,e,t){n.min=e.min-t.min,n.max=n.min+hn(e)}function Pd(n,e,t){B0(n.x,e.x,t.x),B0(n.y,e.y,t.y)}function z0(n,e,t,r,s){return n-=e,n=Cd(n,1/t,r),s!==void 0&&(n=Cd(n,1/s,r)),n}function eD(n,e=0,t=1,r=.5,s,o=n,l=n){if(Dr.test(e)&&(e=parseFloat(e),e=lt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=lt(o.min,o.max,r);n===o&&(c-=e),n.min=z0(n.min,e,t,c,s),n.max=z0(n.max,e,t,c,s)}function W0(n,e,[t,r,s],o,l){eD(n,e[t],e[r],e[s],e.scale,o,l)}const tD=["x","scaleX","originX"],nD=["y","scaleY","originY"];function H0(n,e,t,r){W0(n.x,e,tD,t?t.x:void 0,r?r.x:void 0),W0(n.y,e,nD,t?t.y:void 0,r?r.y:void 0)}function q0(n){return n.translate===0&&n.scale===1}function yI(n){return q0(n.x)&&q0(n.y)}function K0(n,e){return n.min===e.min&&n.max===e.max}function rD(n,e){return K0(n.x,e.x)&&K0(n.y,e.y)}function G0(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function vI(n,e){return G0(n.x,e.x)&&G0(n.y,e.y)}function J0(n){return hn(n.x)/hn(n.y)}function Y0(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Nr(n){return[n("x"),n("y")]}function sD(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:m,rotateX:y,rotateY:v,skewX:T,skewY:b}=t;p&&(r=`perspective(${p}px) ${r}`),m&&(r+=`rotate(${m}deg) `),y&&(r+=`rotateX(${y}deg) `),v&&(r+=`rotateY(${v}deg) `),T&&(r+=`skewX(${T}deg) `),b&&(r+=`skewY(${b}deg) `)}const c=n.x.scale*e.x,h=n.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const _I=["TopLeft","TopRight","BottomLeft","BottomRight"],iD=_I.length,Q0=n=>typeof n=="string"?parseFloat(n):n,X0=n=>typeof n=="number"||fe.test(n);function oD(n,e,t,r,s,o){s?(n.opacity=lt(0,t.opacity??1,aD(r)),n.opacityExit=lt(e.opacity??1,0,lD(r))):o&&(n.opacity=lt(e.opacity??1,t.opacity??1,r));for(let l=0;l<iD;l++){const c=`border${_I[l]}Radius`;let h=Z0(e,c),p=Z0(t,c);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||X0(h)===X0(p)?(n[c]=Math.max(lt(Q0(h),Q0(p),r),0),(Dr.test(p)||Dr.test(h))&&(n[c]+="%")):n[c]=p}(e.rotate||t.rotate)&&(n.rotate=lt(e.rotate||0,t.rotate||0,r))}function Z0(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const aD=wI(0,.5,hb),lD=wI(.5,.95,zn);function wI(n,e,t){return r=>r<n?0:r>e?1:t(Du(n,e,r))}function uD(n,e,t){const r=rn(n)?n:Ga(n);return r.start(Oy("",r,e,t)),r.animation}function ju(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const cD=(n,e)=>n.depth-e.depth;class hD{constructor(){this.children=[],this.isDirty=!1}add(e){vy(this.children,e),this.isDirty=!0}remove(e){Id(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(cD),this.isDirty=!1,this.children.forEach(e)}}function dD(n,e){const t=cn.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(yi(r),n(o-e))};return et.setup(r,!0),()=>yi(r)}function dd(n){return rn(n)?n.get():n}class fD{constructor(){this.members=[]}add(e){vy(this.members,e);for(let t=this.members.length-1;t>=0;t--){const r=this.members[t];if(r===e||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Id(this.members,r)}e.scheduleRender()}remove(e){if(Id(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s],l=o.instance;if(o.isPresent!==!1&&(!l||l.isConnected!==!1)){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,o=e.options.layoutDependency;if(!(s!==void 0&&o!==void 0&&s===o)){const h=r.instance;h&&h.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:c}=e.options;c===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const fd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Im=["","X","Y","Z"],pD=1e3;let mD=0;function xm(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function EI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=$b(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",et,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&EI(r)}function TI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=mD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(vD),this.nodes.forEach(TD),this.nodes.forEach(SD),this.nodes.forEach(_D)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new hD)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new wy),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Uy(l)&&!yO(l),this.instance=l;const{layoutId:c,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),n){let m,y=0;const v=()=>this.root.updateBlockedByResize=!1;et.read(()=>{y=window.innerWidth}),n(l,()=>{const T=window.innerWidth;T!==y&&(y=T,this.root.updateBlockedByResize=!0,m&&m(),m=dD(v,250),fd.hasAnimatedSinceResize&&(fd.hasAnimatedSinceResize=!1,this.nodes.forEach(nE)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||p.getDefaultTransition()||kD,{onLayoutAnimationStart:R,onLayoutAnimationComplete:x}=p.getProps(),D=!this.targetLayout||!vI(this.targetLayout,T),U=!y&&v;if(this.options.layoutRoot||this.resumeFrom||U||y&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Ny(b,"layout"),onPlay:R,onComplete:x};(p.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(m,U)}else y||nE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bD),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&EI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(eE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(tE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ED),this.nodes.forEach(gD),this.nodes.forEach(yD)):this.nodes.forEach(tE),this.clearAllSnapshots();const c=cn.now();Ht.delta=zr(0,1e3/60,c-Ht.timestamp),Ht.timestamp=c,Ht.isProcessing=!0,ym.update.process(Ht),ym.preRender.process(Ht),ym.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,My.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(wD),this.sharedNodes.forEach(ID)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!hn(this.snapshot.measuredBox.x)&&!hn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Pt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!yI(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;l&&this.instance&&(c||io(this.latestValues)||m)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),RD(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:l}=this.options;if(!l)return Pt();const c=l.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(CD))){const{scroll:m}=this.root;m&&(La(c.x,m.offset.x),La(c.y,m.offset.y))}return c}removeElementScroll(l){var h;const c=Pt();if(tr(c,l),(h=this.scroll)!=null&&h.wasRoot)return c;for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:y,options:v}=m;m!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&tr(c,l),La(c.x,y.offset.x),La(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const h=Pt();tr(h,l);for(let p=0;p<this.path.length;p++){const m=this.path[p];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&Va(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),io(m.latestValues)&&Va(h,m.latestValues)}return io(this.latestValues)&&Va(h,this.latestValues),h}removeTransform(l){const c=Pt();tr(c,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!io(p.latestValues))continue;Tg(p.latestValues)&&p.updateSnapshot();const m=Pt(),y=p.measurePageBox();tr(m,y),H0(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return io(this.latestValues)&&H0(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var T;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=Ht.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Pt(),this.targetWithTransforms=Pt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ZO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),iI(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Tg(this.parent.latestValues)||sI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pt(),this.relativeTargetOrigin=Pt(),Pd(this.relativeTargetOrigin,c,h),tr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(h=!1),h)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;tr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;kO(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Pt());const{target:T}=l;if(!T){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(U0(this.prevProjectionDelta.x,this.projectionDelta.x),U0(this.prevProjectionDelta.y,this.projectionDelta.y)),Tu(this.projectionDelta,this.layoutCorrected,T,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!Y0(this.projectionDelta.x,this.prevProjectionDelta.x)||!Y0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Da(),this.projectionDelta=Da(),this.projectionDeltaWithTransform=Da()}setAnimationOrigin(l,c=!1){const h=this.snapshot,p=h?h.latestValues:{},m={...this.latestValues},y=Da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=Pt(),T=h?h.source:void 0,b=this.layout?this.layout.source:void 0,R=T!==b,x=this.getStack(),D=!x||x.members.length<=1,U=!!(R&&!D&&this.options.crossfade===!0&&!this.path.some(AD));this.animationProgress=0;let O;this.mixTargetDelta=K=>{const Y=K/1e3;rE(y.x,l.x,Y),rE(y.y,l.y,Y),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pd(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),xD(this.relativeTarget,this.relativeTargetOrigin,v,Y),O&&rD(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Pt()),tr(O,this.relativeTarget)),R&&(this.animationValues=m,oD(m,p,this.latestValues,Y,U,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,h,p;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(p=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||p.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{fd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ga(0)),this.motionValue.jump(0,!1),this.currentAnimation=uD(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),l.onUpdate&&l.onUpdate(m)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pD),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:p,latestValues:m}=l;if(!(!c||!h||!p)){if(this!==l&&this.layout&&p&&SI(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Pt();const y=hn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const v=hn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+v}tr(c,h),Va(c,m),Tu(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new fD),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const p={};h.z&&xm("z",l,p,this.animationValues);for(let m=0;m<Im.length;m++)xm(`rotate${Im[m]}`,l,p,this.animationValues),xm(`skew${Im[m]}`,l,p,this.animationValues);l.render();for(const m in p)l.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=dd(c==null?void 0:c.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=dd(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!io(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=sD(this.projectionDeltaWithTransform,this.treeScale,m);h&&(y=h(m,y)),l.transform=y;const{x:v,y:T}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${T.origin*100}% 0`,p.animationValues?l.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in bg){if(m[b]===void 0)continue;const{correct:R,applyTo:x,isCSSVariable:D}=bg[b],U=y==="none"?m[b]:R(m[b],p);if(x){const O=x.length;for(let K=0;K<O;K++)l[x[K]]=U}else D?this.options.visualElement.renderState.vars[b]=U:l[b]=U}this.options.layoutId&&(l.pointerEvents=p===this?dd(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(eE),this.root.sharedNodes.clear()}}}function gD(n){n.updateLayout()}function yD(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=e.source!==n.layout.source;o==="size"?Nr(y=>{const v=l?e.measuredBox[y]:e.layoutBox[y],T=hn(v);v.min=r[y].min,v.max=v.min+T}):SI(o,e.layoutBox,r)&&Nr(y=>{const v=l?e.measuredBox[y]:e.layoutBox[y],T=hn(r[y]);v.max=v.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+T)});const c=Da();Tu(c,r,e.layoutBox);const h=Da();l?Tu(h,n.applyTransform(s,!0),e.measuredBox):Tu(h,r,e.layoutBox);const p=!yI(c);let m=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:T}=y;if(v&&T){const b=Pt();Pd(b,e.layoutBox,v.layoutBox);const R=Pt();Pd(R,r,T.layoutBox),vI(b,R)||(m=!0),y.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=b,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function vD(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function _D(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function wD(n){n.clearSnapshot()}function eE(n){n.clearMeasurements()}function tE(n){n.isLayoutDirty=!1}function ED(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function nE(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function TD(n){n.resolveTargetDelta()}function SD(n){n.calcProjection()}function bD(n){n.resetSkewAndRotation()}function ID(n){n.removeLeadSnapshot()}function rE(n,e,t){n.translate=lt(e.translate,0,t),n.scale=lt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function sE(n,e,t,r){n.min=lt(e.min,t.min,r),n.max=lt(e.max,t.max,r)}function xD(n,e,t,r){sE(n.x,e.x,t.x,r),sE(n.y,e.y,t.y,r)}function AD(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const kD={duration:.45,ease:[.4,0,.1,1]},iE=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),oE=iE("applewebkit/")&&!iE("chrome/")?Math.round:zn;function aE(n){n.min=oE(n.min),n.max=oE(n.max)}function RD(n){aE(n.x),aE(n.y)}function SI(n,e,t){return n==="position"||n==="preserve-aspect"&&!XO(J0(e),J0(t),.2)}function CD(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const PD=TI({attachResizeListener:(n,e)=>ju(n,"resize",e),measureScroll:()=>{var n,e;return{x:document.documentElement.scrollLeft||((n=document.body)==null?void 0:n.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Am={current:void 0},bI=TI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Am.current){const n=new PD({});n.mount(window),n.setOptions({layoutScroll:!0}),Am.current=n}return Am.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Wy=M.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function lE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function ND(...n){return e=>{let t=!1;const r=n.map(s=>{const o=lE(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():lE(n[s],null)}}}}function OD(...n){return M.useCallback(ND(...n),n)}class DD extends M.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=t.offsetParent,s=wg(r)&&r.offsetWidth||0,o=wg(r)&&r.offsetHeight||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function LD({children:n,isPresent:e,anchorX:t,anchorY:r,root:s,pop:o}){var v;const l=M.useId(),c=M.useRef(null),h=M.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=M.useContext(Wy),m=((v=n.props)==null?void 0:v.ref)??(n==null?void 0:n.ref),y=OD(c,m);return M.useInsertionEffect(()=>{const{width:T,height:b,top:R,left:x,right:D,bottom:U}=h.current;if(e||o===!1||!c.current||!T||!b)return;const O=t==="left"?`left: ${x}`:`right: ${D}`,K=r==="bottom"?`bottom: ${U}`:`top: ${R}`;c.current.dataset.motionPopId=l;const Y=document.createElement("style");p&&(Y.nonce=p);const Z=s??document.head;return Z.appendChild(Y),Y.sheet&&Y.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${T}px !important;
            height: ${b}px !important;
            ${O}px !important;
            ${K}px !important;
          }
        `),()=>{Z.contains(Y)&&Z.removeChild(Y)}},[e]),I.jsx(DD,{isPresent:e,childRef:c,sizeRef:h,pop:o,children:o===!1?n:M.cloneElement(n,{ref:y})})}const VD=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,anchorY:h,root:p})=>{const m=yy(MD),y=M.useId();let v=!0,T=M.useMemo(()=>(v=!1,{id:y,initial:e,isPresent:t,custom:s,onExitComplete:b=>{m.set(b,!0);for(const R of m.values())if(!R)return;r&&r()},register:b=>(m.set(b,!1),()=>m.delete(b))}),[t,m,r]);return o&&v&&(T={...T}),M.useMemo(()=>{m.forEach((b,R)=>m.set(R,!1))},[t]),M.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),n=I.jsx(LD,{pop:l==="popLayout",isPresent:t,anchorX:c,anchorY:h,root:p,children:n}),I.jsx(of.Provider,{value:T,children:n})};function MD(){return new Map}function II(n=!0){const e=M.useContext(of);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=M.useId();M.useEffect(()=>{if(n)return s(o)},[n]);const l=M.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const Bh=n=>n.key||"";function uE(n){const e=[];return M.Children.forEach(n,t=>{M.isValidElement(t)&&e.push(t)}),e}const jD=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",anchorY:h="top",root:p})=>{const[m,y]=II(l),v=M.useMemo(()=>uE(n),[n]),T=l&&!m?[]:v.map(Bh),b=M.useRef(!0),R=M.useRef(v),x=yy(()=>new Map),D=M.useRef(new Set),[U,O]=M.useState(v),[K,Y]=M.useState(v);ZS(()=>{b.current=!1,R.current=v;for(let A=0;A<K.length;A++){const C=Bh(K[A]);T.includes(C)?(x.delete(C),D.current.delete(C)):x.get(C)!==!0&&x.set(C,!1)}},[K,T.length,T.join("-")]);const Z=[];if(v!==U){let A=[...v];for(let C=0;C<K.length;C++){const V=K[C],j=Bh(V);T.includes(j)||(A.splice(C,0,V),Z.push(V))}return o==="wait"&&Z.length&&(A=Z),Y(uE(A)),O(v),null}const{forceRender:P}=M.useContext(gy);return I.jsx(I.Fragment,{children:K.map(A=>{const C=Bh(A),V=l&&!m?!1:v===K||T.includes(C),j=()=>{if(D.current.has(C))return;if(D.current.add(C),x.has(C))x.set(C,!0);else return;let B=!0;x.forEach(L=>{L||(B=!1)}),B&&(P==null||P(),Y(R.current),l&&(y==null||y()),r&&r())};return I.jsx(VD,{isPresent:V,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:p,onExitComplete:V?void 0:j,anchorX:c,anchorY:h,children:A},C)})})},xI=M.createContext({strict:!1}),cE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let hE=!1;function UD(){if(hE)return;const n={};for(const e in cE)n[e]={isEnabled:t=>cE[e].some(r=>!!t[r])};tI(n),hE=!0}function AI(){return UD(),bO()}function FD(n){const e=AI();for(const t in n)e[t]={...e[t],...n[t]};tI(e)}const $D=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Nd(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||$D.has(n)}let kI=n=>!Nd(n);function BD(n){typeof n=="function"&&(kI=e=>e.startsWith("on")?!Nd(e):n(e))}try{BD(require("@emotion/is-prop-valid").default)}catch{}function zD(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(kI(s)||t===!0&&Nd(s)||!e&&!Nd(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const uf=M.createContext({});function WD(n,e){if(lf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Mu(t)?t:void 0,animate:Mu(r)?r:void 0}}return n.inherit!==!1?e:{}}function HD(n){const{initial:e,animate:t}=WD(n,M.useContext(uf));return M.useMemo(()=>({initial:e,animate:t}),[dE(e),dE(t)])}function dE(n){return Array.isArray(n)?n.join(" "):n}const Hy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function RI(n,e,t){for(const r in e)!rn(e[r])&&!lI(r,t)&&(n[r]=e[r])}function qD({transformTemplate:n},e){return M.useMemo(()=>{const t=Hy();return By(t,e,n),Object.assign({},t.vars,t.style)},[e])}function KD(n,e){const t=n.style||{},r={};return RI(r,t,n),Object.assign(r,qD(n,e)),r}function GD(n,e){const t={},r=KD(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const CI=()=>({...Hy(),attrs:{}});function JD(n,e,t,r){const s=M.useMemo(()=>{const o=CI();return uI(o,e,hI(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};RI(o,n.style,n),s.style={...o,...s.style}}return s}const YD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qy(n){return typeof n!="string"||n.includes("-")?!1:!!(YD.indexOf(n)>-1||/[A-Z]/u.test(n))}function QD(n,e,t,{latestValues:r},s,o=!1,l){const h=(l??qy(n)?JD:GD)(e,r,s,n),p=zD(e,typeof n=="string",o),m=n!==M.Fragment?{...p,...h,ref:t}:{},{children:y}=e,v=M.useMemo(()=>rn(y)?y.get():y,[y]);return M.createElement(n,{...m,children:v})}function XD({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:ZD(t,r,s,n),renderState:e()}}function ZD(n,e,t,r){const s={},o=r(n,{});for(const v in o)s[v]=dd(o[v]);let{initial:l,animate:c}=n;const h=lf(n),p=Zb(n);e&&p&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||l===!1;const y=m?c:l;if(y&&typeof y!="boolean"&&!af(y)){const v=Array.isArray(y)?y:[y];for(let T=0;T<v.length;T++){const b=Dy(n,v[T]);if(b){const{transitionEnd:R,transition:x,...D}=b;for(const U in D){let O=D[U];if(Array.isArray(O)){const K=m?O.length-1:0;O=O[K]}O!==null&&(s[U]=O)}for(const U in R)s[U]=R[U]}}}return s}const PI=n=>(e,t)=>{const r=M.useContext(uf),s=M.useContext(of),o=()=>XD(n,e,r,s);return t?o():yy(o)},e2=PI({scrapeMotionValuesFromProps:zy,createRenderState:Hy}),t2=PI({scrapeMotionValuesFromProps:dI,createRenderState:CI}),n2=Symbol.for("motionComponentSymbol");function r2(n,e,t){const r=M.useRef(t);M.useInsertionEffect(()=>{r.current=t});const s=M.useRef(null);return M.useCallback(o=>{var c;o&&((c=n.onMount)==null||c.call(n,o)),e&&(o?e.mount(o):e.unmount());const l=r.current;if(typeof l=="function")if(o){const h=l(o);typeof h=="function"&&(s.current=h)}else s.current?(s.current(),s.current=null):l(o);else l&&(l.current=o)},[e])}const NI=M.createContext({});function ba(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function s2(n,e,t,r,s,o){var O,K;const{visualElement:l}=M.useContext(uf),c=M.useContext(xI),h=M.useContext(of),p=M.useContext(Wy),m=p.reducedMotion,y=p.skipAnimations,v=M.useRef(null),T=M.useRef(!1);r=r||c.renderer,!v.current&&r&&(v.current=r(n,{visualState:e,parent:l,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m,skipAnimations:y,isSVG:o}),T.current&&v.current&&(v.current.manuallyAnimateOnMount=!0));const b=v.current,R=M.useContext(NI);b&&!b.projection&&s&&(b.type==="html"||b.type==="svg")&&i2(v.current,t,s,R);const x=M.useRef(!1);M.useInsertionEffect(()=>{b&&x.current&&b.update(t,h)});const D=t[Fb],U=M.useRef(!!D&&!((O=window.MotionHandoffIsComplete)!=null&&O.call(window,D))&&((K=window.MotionHasOptimisedAnimation)==null?void 0:K.call(window,D)));return ZS(()=>{T.current=!0,b&&(x.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),U.current&&b.animationState&&b.animationState.animateChanges())}),M.useEffect(()=>{b&&(!U.current&&b.animationState&&b.animationState.animateChanges(),U.current&&(queueMicrotask(()=>{var Y;(Y=window.MotionHandoffMarkAsComplete)==null||Y.call(window,D)}),U.current=!1),b.enteringChildren=void 0)}),b}function i2(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:p,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:OI(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&ba(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:h,layoutRoot:p})}function OI(n){if(n)return n.options.allowProjection!==!1?n.projection:OI(n.parent)}function km(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&FD(r);const o=t?t==="svg":qy(n),l=o?t2:e2;function c(p,m){let y;const v={...M.useContext(Wy),...p,layoutId:o2(p)},{isStatic:T}=v,b=HD(p),R=l(p,T);if(!T&&XS){a2();const x=l2(v);y=x.MeasureLayout,b.visualElement=s2(n,R,v,s,x.ProjectionNode,o)}return I.jsxs(uf.Provider,{value:b,children:[y&&b.visualElement?I.jsx(y,{visualElement:b.visualElement,...v}):null,QD(n,p,r2(R,b.visualElement,m),R,T,e,o)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const h=M.forwardRef(c);return h[n2]=n,h}function o2({layoutId:n}){const e=M.useContext(gy).id;return e&&n!==void 0?e+"-"+n:n}function a2(n,e){M.useContext(xI).strict}function l2(n){const e=AI(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function u2(n,e){if(typeof Proxy>"u")return km;const t=new Map,r=(o,l)=>km(o,l,n,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(t.has(l)||t.set(l,km(l,void 0,n,e)),t.get(l))})}const c2=(n,e)=>e.isSVG??qy(n)?new $O(e):new LO(e,{allowProjection:n!==M.Fragment});class h2 extends Ii{constructor(e){super(e),e.animationState||(e.animationState=qO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();af(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let d2=0;class f2 extends Ii{constructor(){super(...arguments),this.id=d2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const p2={animation:{Feature:h2},exit:{Feature:f2}};function cc(n){return{point:{x:n.pageX,y:n.pageY}}}const m2=n=>e=>jy(e)&&n(e,cc(e));function Su(n,e,t,r){return ju(n,e,m2(t),r)}const DI=({current:n})=>n?n.ownerDocument.defaultView:null,fE=(n,e)=>Math.abs(n-e);function g2(n,e){const t=fE(n.x,e.x),r=fE(n.y,e.y);return Math.sqrt(t**2+r**2)}const pE=new Set(["auto","scroll"]);class LI{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=T=>{this.handleScroll(T.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Cm(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,R=g2(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!R)return;const{point:x}=T,{timestamp:D}=Ht;this.history.push({...x,timestamp:D});const{onStart:U,onMove:O}=this.handlers;b||(U&&U(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,T)},this.handlePointerMove=(T,b)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=Rm(b,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(T,b)=>{this.end();const{onEnd:R,onSessionEnd:x,resumeAnimation:D}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Cm(T.type==="pointercancel"?this.lastMoveEventInfo:Rm(b,this.transformPagePoint),this.history);this.startEvent&&R&&R(T,U),x&&x(T,U)},!jy(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const h=cc(e),p=Rm(h,this.transformPagePoint),{point:m}=p,{timestamp:y}=Ht;this.history=[{...m,timestamp:y}];const{onSessionStart:v}=t;v&&v(e,Cm(p,this.history)),this.removeListeners=ac(Su(this.contextWindow,"pointermove",this.handlePointerMove),Su(this.contextWindow,"pointerup",this.handlePointerUp),Su(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(pE.has(r.overflowX)||pE.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:s.x-t.x,y:s.y-t.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,s),et.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),yi(this.updatePoint)}}function Rm(n,e){return e?{point:e(n.point)}:n}function mE(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Cm({point:n},e){return{point:n,delta:mE(n,VI(e)),offset:mE(n,y2(e)),velocity:v2(e,.1)}}function y2(n){return n[0]}function VI(n){return n[n.length-1]}function v2(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=VI(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ur(e)));)t--;if(!r)return{x:0,y:0};r===n[0]&&n.length>2&&s.timestamp-r.timestamp>ur(e)*2&&(r=n[1]);const o=Bn(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function _2(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lt(t,n,r.max):Math.min(n,t)),n}function gE(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function w2(n,{top:e,left:t,bottom:r,right:s}){return{x:gE(n.x,t,s),y:gE(n.y,e,r)}}function yE(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function E2(n,e){return{x:yE(n.x,e.x),y:yE(n.y,e.y)}}function T2(n,e){let t=.5;const r=hn(n),s=hn(e);return s>r?t=Du(e.min,e.max-r,n.min):r>s&&(t=Du(n.min,n.max-s,e.min)),zr(0,1,t)}function S2(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ig=.35;function b2(n=Ig){return n===!1?n=0:n===!0&&(n=Ig),{x:vE(n,"left","right"),y:vE(n,"top","bottom")}}function vE(n,e,t){return{min:_E(n,e),max:_E(n,t)}}function _E(n,e){return typeof n=="number"?n:n[e]||0}const I2=new WeakMap;class x2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{t&&this.snapToCursor(cc(y).point),this.stopAnimation()},l=(y,v)=>{const{drag:T,dragPropagation:b,onDragStart:R}=this.getProps();if(T&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=eO(T),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nr(D=>{let U=this.getAxisMotionValue(D).get()||0;if(Dr.test(U)){const{projection:O}=this.visualElement;if(O&&O.layout){const K=O.layout.layoutBox[D];K&&(U=hn(K)*(parseFloat(U)/100))}}this.originPoint[D]=U}),R&&et.update(()=>R(y,v),!1,!0),gg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},c=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:T,dragDirectionLock:b,onDirectionLock:R,onDrag:x}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:D}=v;if(b&&this.currentDirection===null){this.currentDirection=k2(D),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",v.point,D),this.updateAxis("y",v.point,D),this.visualElement.render(),x&&et.update(()=>x(y,v),!1,!0)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new LI(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:DI(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&et.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!zh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=_2(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&ba(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=w2(r.layoutBox,e):this.constraints=!1,this.elastic=b2(t),s!==this.constraints&&!ba(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Nr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=S2(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ba(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=RO(r,s.root,this.visualElement.getTransformPagePoint());let l=E2(s.layout.layoutBox,o);if(t){const c=t(xO(l));this.hasMutatedConstraints=!!c,c&&(l=rI(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},p=Nr(m=>{if(!zh(m,t,this.currentDirection))return;let y=h&&h[m]||{};l&&(y={min:0,max:0});const v=s?200:1e6,T=s?40:1e7,b={type:"inertia",velocity:r?e[m]:0,bounceStiffness:v,bounceDamping:T,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,b)});return Promise.all(p).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return gg(this.visualElement,e),r.start(Oy(e,r,0,t,this.visualElement,!1))}stopAnimation(){Nr(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Nr(t=>{const{drag:r}=this.getProps();if(!zh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[t],h=o.get()||0;o.set(e[t]-lt(l,c,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ba(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Nr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=T2({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Nr(l=>{if(!zh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];c.set(lt(h,p,s[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;I2.set(this.visualElement,this);const e=this.visualElement.current,t=Su(e,"pointerdown",p=>{const{drag:m,dragListener:y=!0}=this.getProps(),v=p.target,T=v!==e&&oO(v);m&&y&&!T&&this.start(p)});let r;const s=()=>{const{dragConstraints:p}=this.getProps();ba(p)&&p.current&&(this.constraints=this.resolveRefConstraints(),r||(r=A2(e,p.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),et.read(s);const c=ju(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Nr(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=p[y].translate,v.set(v.get()+p[y].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=Ig,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function wE(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function A2(n,e,t){const r=A0(n,wE(t)),s=A0(e,wE(t));return()=>{r(),s()}}function zh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function k2(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class R2 extends Ii{constructor(e){super(e),this.removeGroupControls=zn,this.removeListeners=zn,this.controls=new x2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Pm=n=>(e,t)=>{n&&et.update(()=>n(e,t),!1,!0)};class C2 extends Ii{constructor(){super(...arguments),this.removePointerDownListener=zn}onPointerDown(e){this.session=new LI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Pm(e),onStart:Pm(t),onMove:Pm(r),onEnd:(o,l)=>{delete this.session,s&&et.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Su(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Nm=!1;class P2 extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),Nm&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),fd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,e.layoutDependency!==t&&l.setOptions({...l.options,layoutDependency:t}),Nm=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||et.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),My.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Nm=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MI(n){const[e,t]=II(),r=M.useContext(gy);return I.jsx(P2,{...n,layoutGroup:r,switchLayoutGroup:M.useContext(NI),isPresent:e,safeToRemove:t})}const N2={pan:{Feature:C2},drag:{Feature:R2,ProjectionNode:bI,MeasureLayout:MI}};function EE(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&et.postRender(()=>o(e,cc(e)))}class O2 extends Ii{mount(){const{current:e}=this.node;e&&(this.unmount=nO(e,(t,r)=>(EE(this.node,r,"Start"),s=>EE(this.node,s,"End"))))}unmount(){}}class D2 extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ac(ju(this.node.current,"focus",()=>this.onFocus()),ju(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function TE(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&et.postRender(()=>o(e,cc(e)))}class L2 extends Ii{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:r}=this.node.props;this.unmount=lO(e,(s,o)=>(TE(this.node,o,"Start"),(l,{success:c})=>TE(this.node,l,c?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const xg=new WeakMap,Om=new WeakMap,V2=n=>{const e=xg.get(n.target);e&&e(n)},M2=n=>{n.forEach(V2)};function j2({root:n,...e}){const t=n||document;Om.has(t)||Om.set(t,{});const r=Om.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(M2,{root:n,...e})),r[s]}function U2(n,e,t){const r=j2(e);return xg.set(n,t),r.observe(n),()=>{xg.delete(n),r.unobserve(n)}}const F2={some:0,all:1};class $2 extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:F2[s]},c=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),v=p?m:y;v&&v(h)};return U2(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(B2(e,t))&&this.startObserver()}unmount(){}}function B2({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const z2={inView:{Feature:$2},tap:{Feature:L2},focus:{Feature:D2},hover:{Feature:O2}},W2={layout:{ProjectionNode:bI,MeasureLayout:MI}},H2={...p2,...z2,...N2,...W2},ye=u2(H2,c2),jI=M.createContext(void 0),SE="infinity-vibe-wishlist";function q2({children:n}){const[e,t]=M.useState(new Set);M.useEffect(()=>{const p=localStorage.getItem(SE);if(p)try{const m=JSON.parse(p);t(new Set(m))}catch(m){console.error("Failed to parse wishlist from localStorage:",m)}},[]),M.useEffect(()=>{localStorage.setItem(SE,JSON.stringify(Array.from(e)))},[e]);const r=p=>{t(m=>new Set([...m,p]))},s=p=>{t(m=>{const y=new Set(m);return y.delete(p),y})},o=p=>e.has(p),h={wishlist:e,addToWishlist:r,removeFromWishlist:s,isInWishlist:o,toggleWishlist:p=>{o(p)?s(p):r(p)},clearWishlist:()=>{t(new Set)}};return I.jsx(jI.Provider,{value:h,children:n})}function cf(){const n=M.useContext(jI);if(n===void 0)throw new Error("useWishlist must be used within a WishlistProvider");return n}const K2="/assets/logo-CxIzqSfl.png";function G2(){const n=To(),{wishlist:e}=cf(),[t,r]=M.useState(!1),[s,o]=M.useState(!1);M.useEffect(()=>{const c=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const l=["Shop","Collections","About","Contact"];return I.jsxs(ye.header,{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-black/95 backdrop-blur-sm py-4":"bg-transparent py-6"}`,initial:{y:-100},animate:{y:0},transition:{duration:.6},children:[I.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:I.jsxs("div",{className:"flex items-center justify-between",children:[I.jsx("div",{className:"flex flex-row gap-3 items-center",children:I.jsxs(my,{to:"/",className:"flex flex-row gap-3 items-center",children:[I.jsx("img",{src:K2,alt:"Infinity Vibe Logo",className:"h-12"}),I.jsx(ye.div,{className:"text-2xl tracking-wider cursor-pointer",whileHover:{scale:1.05},children:I.jsx("span",{className:"font-bold",children:"Infinity Vibe"})})]})}),I.jsx("nav",{className:"hidden md:flex items-center gap-8",children:l.map(c=>I.jsxs(ye.div,{className:"text-sm tracking-widest hover:text-gray-400 transition-colors relative group cursor-pointer",whileHover:{y:-2},onClick:()=>{n(c==="Shop"||c==="Collections"?"/products":c==="Contact"?"/contact":c==="Admin"?"/admin":"/")},children:[c,I.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-px bg-white transition-all duration-300 group-hover:w-full"})]},c))}),I.jsxs("div",{className:"flex items-center gap-6",children:[I.jsx(ye.button,{className:"hidden md:block hover:text-gray-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:I.jsx(U1,{size:20})}),I.jsxs(ye.button,{className:"hover:text-gray-400 transition-colors relative",whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>n("/wishlist"),children:[I.jsx(Ou,{size:20}),e.size>0&&I.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs w-5 h-5 rounded-full flex items-center justify-center",children:e.size})]}),I.jsxs(ye.button,{className:"hover:text-gray-400 transition-colors relative",whileHover:{scale:1.1},whileTap:{scale:.95},children:[I.jsx($1,{size:20}),I.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs w-5 h-5 rounded-full flex items-center justify-center",children:"0"})]}),I.jsx("button",{className:"md:hidden",onClick:()=>o(!s),children:s?I.jsx(J1,{size:24}):I.jsx(O1,{size:24})})]})]})}),I.jsx(jD,{children:s&&I.jsx(ye.div,{className:"md:hidden bg-black border-t border-white/10 mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:I.jsx("nav",{className:"container mx-auto px-6 py-8 flex flex-col gap-6",children:l.map((c,h)=>I.jsx(ye.div,{className:"text-lg tracking-widest hover:text-gray-400 transition-colors cursor-pointer",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},onClick:()=>{o(!1),n(c==="Shop"||c==="Collections"?"/products":c==="Contact"?"/contact":c==="Admin"?"/admin":"/")},children:c},c))})})})]})}const Wh={shop:["New Arrivals","Collections","Sale","Gift Cards"],about:["Our Story","Sustainability","Press","Careers"],support:["Contact Us","FAQs","Shipping & Returns","Size Guide"],legal:["Privacy Policy","Terms of Service","Cookie Policy"]};function J2(){return I.jsx("footer",{className:"bg-black border-t border-white/10",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12 py-16",children:[I.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 mb-12",children:[I.jsxs("div",{className:"lg:col-span-1",children:[I.jsx(ye.div,{className:"text-3xl tracking-wider mb-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:I.jsx("span",{className:"font-bold",children:"Infinity Vibe"})}),I.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Premium streetwear for those who dare to be different."}),I.jsx("div",{className:"flex gap-4",children:[{icon:ng,href:"https://instagram.com/infinity_vibe.1"},{icon:R1,href:"https://facebook.com"},{icon:K1,href:"https://twitter.com"}].map((n,e)=>I.jsx(ye.a,{href:n.href,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 border border-white/20 hover:border-white hover:bg-white hover:text-black transition-all duration-300 flex items-center justify-center",whileHover:{scale:1.1,rotate:360},transition:{duration:.3},children:I.jsx(n.icon,{size:18})},e))})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"SHOP"}),I.jsx("ul",{className:"space-y-3",children:Wh.shop.map((n,e)=>I.jsx(ye.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:I.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"ABOUT"}),I.jsx("ul",{className:"space-y-3",children:Wh.about.map((n,e)=>I.jsx(ye.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:I.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"SUPPORT"}),I.jsx("ul",{className:"space-y-3",children:Wh.support.map((n,e)=>I.jsx(ye.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:I.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]}),I.jsxs("div",{children:[I.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"LEGAL"}),I.jsx("ul",{className:"space-y-3",children:Wh.legal.map((n,e)=>I.jsx(ye.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:I.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]})]}),I.jsxs("div",{className:"pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-4",children:[I.jsx("p",{className:"text-sm text-gray-500",children:" 2026 Infinity Vibe. All rights reserved."}),I.jsx("a",{href:"https://texsky.vercel.app/",target:"_blank",rel:"noopener noreferrer",children:I.jsx("p",{className:"text-sm text-gray-500",children:"Designed and developed by Texsky."})})]})]})})}function Y2(){const n=To();return I.jsxs("section",{className:"relative h-screen w-full bg-black overflow-hidden",children:[I.jsxs("div",{className:"absolute inset-0",children:[I.jsx("img",{src:"https://images.unsplash.com/photo-1650464595868-fd12e3047d33?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxibGFjayUyMHdoaXRlJTIwZmFzaGlvbiUyMG1vZGVsJTIwcG9ydHJhaXR8ZW58MXx8fHwxNzcxOTk3MTc5fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",alt:"Fashion Model",className:"w-full h-full object-cover object-center grayscale"}),I.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/90"})]}),I.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center px-6 text-center",children:[I.jsxs(ye.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-5xl",children:[I.jsxs(ye.h1,{className:"text-5xl md:text-7xl lg:text-8xl mb-6 tracking-tight leading-none",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:["WE DON'T FOLLOW TRENDS.",I.jsx("br",{}),I.jsx("span",{className:"italic",children:"WE CREATE THEM."})]}),I.jsx(ye.p,{className:"text-lg md:text-xl text-gray-400 mb-12 max-w-2xl mx-auto tracking-wide",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:"Premium streetwear crafted for those who stand different."}),I.jsxs(ye.div,{className:"flex flex-col sm:flex-row items-center justify-center gap-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},children:[I.jsx(ye.button,{className:"px-10 py-4 bg-white text-black tracking-widest text-sm hover:bg-black hover:text-white border-2 border-white transition-all duration-300 min-w-[220px]",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"SHOP THE DROP"}),I.jsx(ye.button,{className:"px-10 py-4 bg-transparent text-white tracking-widest text-sm border-2 border-white hover:bg-white hover:text-black transition-all duration-300 min-w-[220px]",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"EXPLORE COLLECTION"})]})]}),I.jsx(ye.div,{className:"absolute bottom-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1.5},children:I.jsx(ye.div,{className:"w-px h-16 bg-white/50",animate:{height:[40,64,40]},transition:{duration:2,repeat:1/0}})})]})]})}const Q2=()=>{};var bE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},X2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},FI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|p>>6,T=p&63;h||(T=64,l||(v=64)),r.push(t[m],t[y],t[v],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(UI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):X2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||p==null||y==null)throw new Z2;const v=o<<2|c>>4;if(r.push(v),p!==64){const T=c<<4&240|p>>2;if(r.push(T),y!==64){const b=p<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Z2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eL=function(n){const e=UI(n);return FI.encodeByteArray(e,!0)},Od=function(n){return eL(n).replace(/\./g,"")},$I=function(n){try{return FI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=()=>tL().__FIREBASE_DEFAULTS__,rL=()=>{if(typeof process>"u"||typeof bE>"u")return;const n=bE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&$I(n[1]);return e&&JSON.parse(e)},hf=()=>{try{return Q2()||nL()||rL()||sL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BI=n=>{var e,t;return(t=(e=hf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},zI=n=>{const e=BI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},WI=()=>{var n;return(n=hf())==null?void 0:n.config},HI=n=>{var e;return(e=hf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iL=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ky(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Od(JSON.stringify(t)),Od(JSON.stringify(l)),""].join(".")}const bu={};function oL(){const n={prod:[],emulator:[]};for(const e of Object.keys(bu))bu[e]?n.emulator.push(e):n.prod.push(e);return n}function aL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let IE=!1;function Gy(n,e){if(typeof window>"u"||typeof document>"u"||!So(window.location.host)||bu[n]===e||bu[n]||IE)return;bu[n]=e;function t(v){return`__firebase__banner__${v}`}const r="__firebase__banner",o=oL().prod.length>0;function l(){const v=document.getElementById(r);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,T){v.setAttribute("width","24"),v.setAttribute("id",T),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function p(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{IE=!0,l()},v}function m(v,T){v.setAttribute("id",T),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=aL(r),T=t("text"),b=document.getElementById(T)||document.createElement("span"),R=t("learnmore"),x=document.getElementById(R)||document.createElement("a"),D=t("preprendIcon"),U=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const O=v.element;c(O),m(x,R);const K=p();h(U,D),O.append(U,b,x,K),document.body.appendChild(O)}o?(b.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function uL(){var e;const n=(e=hf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hL(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fL(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pL(){return!uL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mL(){try{return typeof indexedDB=="object"}catch{return!1}}function gL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yL="FirebaseError";class qr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=yL,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hc.prototype.create)}}class hc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?vL(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new qr(s,c,r)}}function vL(n,e){return n.replace(_L,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _L=/\{\$([^}]+)}/g;function wL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function go(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(xE(o)&&xE(l)){if(!go(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function xE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function mu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function EL(n,e){const t=new TL(n,e);return t.subscribe.bind(t)}class TL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");SL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Dm),s.error===void 0&&(s.error=Dm),s.complete===void 0&&(s.complete=Dm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n){return n&&n._delegate?n._delegate:n}class vi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new iL;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xL(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IL(n){return n===oo?void 0:n}function xL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const kL={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},RL=Ve.INFO,CL={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},PL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=CL[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jy{constructor(e){this.name=e,this._logLevel=RL,this._logHandler=PL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const NL=(n,e)=>e.some(t=>n instanceof t);let AE,kE;function OL(){return AE||(AE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DL(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KI=new WeakMap,Ag=new WeakMap,GI=new WeakMap,Lm=new WeakMap,Yy=new WeakMap;function LL(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(hi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&KI.set(t,n)}).catch(()=>{}),Yy.set(e,n),e}function VL(n){if(Ag.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});Ag.set(n,e)}let kg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ag.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function ML(n){kg=n(kg)}function jL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Vm(this),e,...t);return GI.set(r,e.sort?e.sort():[e]),hi(r)}:DL().includes(n)?function(...e){return n.apply(Vm(this),e),hi(KI.get(this))}:function(...e){return hi(n.apply(Vm(this),e))}}function UL(n){return typeof n=="function"?jL(n):(n instanceof IDBTransaction&&VL(n),NL(n,OL())?new Proxy(n,kg):n)}function hi(n){if(n instanceof IDBRequest)return LL(n);if(Lm.has(n))return Lm.get(n);const e=UL(n);return e!==n&&(Lm.set(n,e),Yy.set(e,n)),e}const Vm=n=>Yy.get(n);function FL(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=hi(l);return r&&l.addEventListener("upgradeneeded",h=>{r(hi(l.result),h.oldVersion,h.newVersion,hi(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const $L=["get","getKey","getAll","getAllKeys","count"],BL=["put","add","delete","clear"],Mm=new Map;function RE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Mm.get(e))return Mm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=BL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||$L.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),s&&h.done]))[0]};return Mm.set(e,o),o}ML(n=>({...n,get:(e,t,r)=>RE(e,t)||n.get(e,t,r),has:(e,t)=>!!RE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(WL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function WL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rg="@firebase/app",CE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Jy("@firebase/app"),HL="@firebase/app-compat",qL="@firebase/analytics-compat",KL="@firebase/analytics",GL="@firebase/app-check-compat",JL="@firebase/app-check",YL="@firebase/auth",QL="@firebase/auth-compat",XL="@firebase/database",ZL="@firebase/data-connect",eV="@firebase/database-compat",tV="@firebase/functions",nV="@firebase/functions-compat",rV="@firebase/installations",sV="@firebase/installations-compat",iV="@firebase/messaging",oV="@firebase/messaging-compat",aV="@firebase/performance",lV="@firebase/performance-compat",uV="@firebase/remote-config",cV="@firebase/remote-config-compat",hV="@firebase/storage",dV="@firebase/storage-compat",fV="@firebase/firestore",pV="@firebase/ai",mV="@firebase/firestore-compat",gV="firebase",yV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="[DEFAULT]",vV={[Rg]:"fire-core",[HL]:"fire-core-compat",[KL]:"fire-analytics",[qL]:"fire-analytics-compat",[JL]:"fire-app-check",[GL]:"fire-app-check-compat",[YL]:"fire-auth",[QL]:"fire-auth-compat",[XL]:"fire-rtdb",[ZL]:"fire-data-connect",[eV]:"fire-rtdb-compat",[tV]:"fire-fn",[nV]:"fire-fn-compat",[rV]:"fire-iid",[sV]:"fire-iid-compat",[iV]:"fire-fcm",[oV]:"fire-fcm-compat",[aV]:"fire-perf",[lV]:"fire-perf-compat",[uV]:"fire-rc",[cV]:"fire-rc-compat",[hV]:"fire-gcs",[dV]:"fire-gcs-compat",[fV]:"fire-fst",[mV]:"fire-fst-compat",[pV]:"fire-vertex","fire-js":"fire-js",[gV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,_V=new Map,Pg=new Map;function PE(n,e){try{n.container.addComponent(e)}catch(t){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yo(n){const e=n.name;if(Pg.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;Pg.set(e,n);for(const t of Uu.values())PE(t,n);for(const t of _V.values())PE(t,n);return!0}function df(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Un(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new hc("app","Firebase",wV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=yV;function JI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Cg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw di.create("bad-app-name",{appName:String(s)});if(t||(t=WI()),!t)throw di.create("no-options");const o=Uu.get(s);if(o){if(go(t,o.options)&&go(r,o.config))return o;throw di.create("duplicate-app",{appName:s})}const l=new AL(s);for(const h of Pg.values())l.addComponent(h);const c=new EV(t,r,l);return Uu.set(s,c),c}function ff(n=Cg){const e=Uu.get(n);if(!e&&n===Cg&&WI())return JI();if(!e)throw di.create("no-app",{appName:n});return e}function TV(){return Array.from(Uu.values())}function Lr(n,e,t){let r=vV[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(l.join(" "));return}yo(new vi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="firebase-heartbeat-database",bV=1,Fu="firebase-heartbeat-store";let jm=null;function YI(){return jm||(jm=FL(SV,bV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Fu)}catch(t){console.warn(t)}}}}).catch(n=>{throw di.create("idb-open",{originalErrorMessage:n.message})})),jm}async function IV(n){try{const t=(await YI()).transaction(Fu),r=await t.objectStore(Fu).get(QI(n));return await t.done,r}catch(e){if(e instanceof qr)ys.warn(e.message);else{const t=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(t.message)}}}async function NE(n,e){try{const r=(await YI()).transaction(Fu,"readwrite");await r.objectStore(Fu).put(e,QI(n)),await r.done}catch(t){if(t instanceof qr)ys.warn(t.message);else{const r=di.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ys.warn(r.message)}}}function QI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xV=1024,AV=30;class kV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CV(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=OE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>AV){const l=PV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=OE(),{heartbeatsToSend:r,unsentEntries:s}=RV(this._heartbeatsCache.heartbeats),o=Od(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ys.warn(t),""}}}function OE(){return new Date().toISOString().substring(0,10)}function RV(n,e=xV){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),DE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),DE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class CV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mL()?gL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return NE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return NE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function DE(n){return Od(JSON.stringify({version:2,heartbeats:n})).length}function PV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(n){yo(new vi("platform-logger",e=>new zL(e),"PRIVATE")),yo(new vi("heartbeat",e=>new kV(e),"PRIVATE")),Lr(Rg,CE,n),Lr(Rg,CE,"esm2020"),Lr("fire-js","")}NV("");var LE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,XI;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function C(){}C.prototype=A.prototype,P.F=A.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(V,j,B){for(var L=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)L[Fe-2]=arguments[Fe];return A.prototype[j].apply(V,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,A,C){C||(C=0);const V=Array(16);if(typeof A=="string")for(var j=0;j<16;++j)V[j]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(j=0;j<16;++j)V[j]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=P.g[0],C=P.g[1],j=P.g[2];let B=P.g[3],L;L=A+(B^C&(j^B))+V[0]+3614090360&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(j^A&(C^j))+V[1]+3905402710&4294967295,B=A+(L<<12&4294967295|L>>>20),L=j+(C^B&(A^C))+V[2]+606105819&4294967295,j=B+(L<<17&4294967295|L>>>15),L=C+(A^j&(B^A))+V[3]+3250441966&4294967295,C=j+(L<<22&4294967295|L>>>10),L=A+(B^C&(j^B))+V[4]+4118548399&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(j^A&(C^j))+V[5]+1200080426&4294967295,B=A+(L<<12&4294967295|L>>>20),L=j+(C^B&(A^C))+V[6]+2821735955&4294967295,j=B+(L<<17&4294967295|L>>>15),L=C+(A^j&(B^A))+V[7]+4249261313&4294967295,C=j+(L<<22&4294967295|L>>>10),L=A+(B^C&(j^B))+V[8]+1770035416&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(j^A&(C^j))+V[9]+2336552879&4294967295,B=A+(L<<12&4294967295|L>>>20),L=j+(C^B&(A^C))+V[10]+4294925233&4294967295,j=B+(L<<17&4294967295|L>>>15),L=C+(A^j&(B^A))+V[11]+2304563134&4294967295,C=j+(L<<22&4294967295|L>>>10),L=A+(B^C&(j^B))+V[12]+1804603682&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(j^A&(C^j))+V[13]+4254626195&4294967295,B=A+(L<<12&4294967295|L>>>20),L=j+(C^B&(A^C))+V[14]+2792965006&4294967295,j=B+(L<<17&4294967295|L>>>15),L=C+(A^j&(B^A))+V[15]+1236535329&4294967295,C=j+(L<<22&4294967295|L>>>10),L=A+(j^B&(C^j))+V[1]+4129170786&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^j&(A^C))+V[6]+3225465664&4294967295,B=A+(L<<9&4294967295|L>>>23),L=j+(A^C&(B^A))+V[11]+643717713&4294967295,j=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(j^B))+V[0]+3921069994&4294967295,C=j+(L<<20&4294967295|L>>>12),L=A+(j^B&(C^j))+V[5]+3593408605&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^j&(A^C))+V[10]+38016083&4294967295,B=A+(L<<9&4294967295|L>>>23),L=j+(A^C&(B^A))+V[15]+3634488961&4294967295,j=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(j^B))+V[4]+3889429448&4294967295,C=j+(L<<20&4294967295|L>>>12),L=A+(j^B&(C^j))+V[9]+568446438&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^j&(A^C))+V[14]+3275163606&4294967295,B=A+(L<<9&4294967295|L>>>23),L=j+(A^C&(B^A))+V[3]+4107603335&4294967295,j=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(j^B))+V[8]+1163531501&4294967295,C=j+(L<<20&4294967295|L>>>12),L=A+(j^B&(C^j))+V[13]+2850285829&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^j&(A^C))+V[2]+4243563512&4294967295,B=A+(L<<9&4294967295|L>>>23),L=j+(A^C&(B^A))+V[7]+1735328473&4294967295,j=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(j^B))+V[12]+2368359562&4294967295,C=j+(L<<20&4294967295|L>>>12),L=A+(C^j^B)+V[5]+4294588738&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^j)+V[8]+2272392833&4294967295,B=A+(L<<11&4294967295|L>>>21),L=j+(B^A^C)+V[11]+1839030562&4294967295,j=B+(L<<16&4294967295|L>>>16),L=C+(j^B^A)+V[14]+4259657740&4294967295,C=j+(L<<23&4294967295|L>>>9),L=A+(C^j^B)+V[1]+2763975236&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^j)+V[4]+1272893353&4294967295,B=A+(L<<11&4294967295|L>>>21),L=j+(B^A^C)+V[7]+4139469664&4294967295,j=B+(L<<16&4294967295|L>>>16),L=C+(j^B^A)+V[10]+3200236656&4294967295,C=j+(L<<23&4294967295|L>>>9),L=A+(C^j^B)+V[13]+681279174&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^j)+V[0]+3936430074&4294967295,B=A+(L<<11&4294967295|L>>>21),L=j+(B^A^C)+V[3]+3572445317&4294967295,j=B+(L<<16&4294967295|L>>>16),L=C+(j^B^A)+V[6]+76029189&4294967295,C=j+(L<<23&4294967295|L>>>9),L=A+(C^j^B)+V[9]+3654602809&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^j)+V[12]+3873151461&4294967295,B=A+(L<<11&4294967295|L>>>21),L=j+(B^A^C)+V[15]+530742520&4294967295,j=B+(L<<16&4294967295|L>>>16),L=C+(j^B^A)+V[2]+3299628645&4294967295,C=j+(L<<23&4294967295|L>>>9),L=A+(j^(C|~B))+V[0]+4096336452&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~j))+V[7]+1126891415&4294967295,B=A+(L<<10&4294967295|L>>>22),L=j+(A^(B|~C))+V[14]+2878612391&4294967295,j=B+(L<<15&4294967295|L>>>17),L=C+(B^(j|~A))+V[5]+4237533241&4294967295,C=j+(L<<21&4294967295|L>>>11),L=A+(j^(C|~B))+V[12]+1700485571&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~j))+V[3]+2399980690&4294967295,B=A+(L<<10&4294967295|L>>>22),L=j+(A^(B|~C))+V[10]+4293915773&4294967295,j=B+(L<<15&4294967295|L>>>17),L=C+(B^(j|~A))+V[1]+2240044497&4294967295,C=j+(L<<21&4294967295|L>>>11),L=A+(j^(C|~B))+V[8]+1873313359&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~j))+V[15]+4264355552&4294967295,B=A+(L<<10&4294967295|L>>>22),L=j+(A^(B|~C))+V[6]+2734768916&4294967295,j=B+(L<<15&4294967295|L>>>17),L=C+(B^(j|~A))+V[13]+1309151649&4294967295,C=j+(L<<21&4294967295|L>>>11),L=A+(j^(C|~B))+V[4]+4149444226&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~j))+V[11]+3174756917&4294967295,B=A+(L<<10&4294967295|L>>>22),L=j+(A^(B|~C))+V[2]+718787259&4294967295,j=B+(L<<15&4294967295|L>>>17),L=C+(B^(j|~A))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(j+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+j&4294967295,P.g[3]=P.g[3]+B&4294967295}r.prototype.v=function(P,A){A===void 0&&(A=P.length);const C=A-this.blockSize,V=this.C;let j=this.h,B=0;for(;B<A;){if(j==0)for(;B<=C;)s(this,P,B),B+=this.blockSize;if(typeof P=="string"){for(;B<A;)if(V[j++]=P.charCodeAt(B++),j==this.blockSize){s(this,V),j=0;break}}else for(;B<A;)if(V[j++]=P[B++],j==this.blockSize){s(this,V),j=0;break}}this.h=j,this.o+=A},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)P[A++]=this.g[C]>>>V&255;return P};function o(P,A){var C=c;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=A(P)}function l(P,A){this.h=A;const C=[];let V=!0;for(let j=P.length-1;j>=0;j--){const B=P[j]|0;V&&B==A||(C[j]=B,V=!1)}this.g=C}var c={};function h(P){return-128<=P&&P<128?o(P,function(A){return new l([A|0],A<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return x(p(-P));const A=[];let C=1;for(let V=0;P>=C;V++)A[V]=P/C|0,C*=4294967296;return new l(A,0)}function m(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return x(m(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(A,8));let V=y;for(let B=0;B<P.length;B+=8){var j=Math.min(8,P.length-B);const L=parseInt(P.substring(B,B+j),A);j<8?(j=p(Math.pow(A,j)),V=V.j(j).add(p(L))):(V=V.j(C),V=V.add(p(L)))}return V}var y=h(0),v=h(1),T=h(16777216);n=l.prototype,n.m=function(){if(R(this))return-x(this).m();let P=0,A=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);P+=(V>=0?V:4294967296+V)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(R(this))return"-"+x(this).toString(P);const A=p(Math.pow(P,6));var C=this;let V="";for(;;){const j=K(C,A).g;C=D(C,j.j(A));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=j,b(C))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function R(P){return P.h==-1}n.l=function(P){return P=D(this,P),R(P)?-1:b(P)?0:1};function x(P){const A=P.g.length,C=[];for(let V=0;V<A;V++)C[V]=~P.g[V];return new l(C,~P.h).add(v)}n.abs=function(){return R(this)?x(this):this},n.add=function(P){const A=Math.max(this.g.length,P.g.length),C=[];let V=0;for(let j=0;j<=A;j++){let B=V+(this.i(j)&65535)+(P.i(j)&65535),L=(B>>>16)+(this.i(j)>>>16)+(P.i(j)>>>16);V=L>>>16,B&=65535,L&=65535,C[j]=L<<16|B}return new l(C,C[C.length-1]&-2147483648?-1:0)};function D(P,A){return P.add(x(A))}n.j=function(P){if(b(this)||b(P))return y;if(R(this))return R(P)?x(this).j(x(P)):x(x(this).j(P));if(R(P))return x(this.j(x(P)));if(this.l(T)<0&&P.l(T)<0)return p(this.m()*P.m());const A=this.g.length+P.g.length,C=[];for(var V=0;V<2*A;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let j=0;j<P.g.length;j++){const B=this.i(V)>>>16,L=this.i(V)&65535,Fe=P.i(j)>>>16,mt=P.i(j)&65535;C[2*V+2*j]+=L*mt,U(C,2*V+2*j),C[2*V+2*j+1]+=B*mt,U(C,2*V+2*j+1),C[2*V+2*j+1]+=L*Fe,U(C,2*V+2*j+1),C[2*V+2*j+2]+=B*Fe,U(C,2*V+2*j+2)}for(P=0;P<A;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=A;P<2*A;P++)C[P]=0;return new l(C,0)};function U(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function O(P,A){this.g=P,this.h=A}function K(P,A){if(b(A))throw Error("division by zero");if(b(P))return new O(y,y);if(R(P))return A=K(x(P),A),new O(x(A.g),x(A.h));if(R(A))return A=K(P,x(A)),new O(x(A.g),A.h);if(P.g.length>30){if(R(P)||R(A))throw Error("slowDivide_ only works with positive integers.");for(var C=v,V=A;V.l(P)<=0;)C=Y(C),V=Y(V);var j=Z(C,1),B=Z(V,1);for(V=Z(V,2),C=Z(C,2);!b(V);){var L=B.add(V);L.l(P)<=0&&(j=j.add(C),B=L),V=Z(V,1),C=Z(C,1)}return A=D(P,j.j(A)),new O(j,A)}for(j=y;P.l(A)>=0;){for(C=Math.max(1,Math.floor(P.m()/A.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=p(C),L=B.j(A);R(L)||L.l(P)>0;)C-=V,B=p(C),L=B.j(A);b(B)&&(B=v),j=j.add(B),P=D(P,L)}return new O(j,P)}n.B=function(P){return K(this,P).h},n.and=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)&P.i(V);return new l(C,this.h&P.h)},n.or=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)|P.i(V);return new l(C,this.h|P.h)},n.xor=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)^P.i(V);return new l(C,this.h^P.h)};function Y(P){const A=P.g.length+1,C=[];for(let V=0;V<A;V++)C[V]=P.i(V)<<1|P.i(V-1)>>>31;return new l(C,P.h)}function Z(P,A){const C=A>>5;A%=32;const V=P.g.length-C,j=[];for(let B=0;B<V;B++)j[B]=A>0?P.i(B+C)>>>A|P.i(B+C+1)<<32-A:P.i(B+C);return new l(j,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,XI=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=m,fi=l}).apply(typeof LE<"u"?LE:typeof self<"u"?self:typeof window<"u"?window:{});var Hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZI,gu,ex,pd,Ng,tx,nx,rx;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hh=="object"&&Hh];for(var w=0;w<d.length;++w){var E=d[w];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(d,w){if(w)e:{var E=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var H=d[k];if(!(H in E))break e;E=E[H]}d=d[d.length-1],k=E[d],w=w(k),w!=k&&w!=null&&e(E,d,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(w){var E=[],k;for(k in w)Object.prototype.hasOwnProperty.call(w,k)&&E.push([k,w[k]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var w=typeof d;return w=="object"&&d!=null||w=="function"}function h(d,w,E){return d.call.apply(d.bind,arguments)}function p(d,w,E){return p=h,p.apply(null,arguments)}function m(d,w){var E=Array.prototype.slice.call(arguments,1);return function(){var k=E.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function y(d,w){function E(){}E.prototype=w.prototype,d.Z=w.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(k,H,J){for(var oe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)oe[ke-2]=arguments[ke];return w.prototype[H].apply(k,oe)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function T(d){const w=d.length;if(w>0){const E=Array(w);for(let k=0;k<w;k++)E[k]=d[k];return E}return[]}function b(d,w){for(let k=1;k<arguments.length;k++){const H=arguments[k];var E=typeof H;if(E=E!="object"?E:H?Array.isArray(H)?"array":E:"null",E=="array"||E=="object"&&typeof H.length=="number"){E=d.length||0;const J=H.length||0;d.length=E+J;for(let oe=0;oe<J;oe++)d[E+oe]=H[oe]}else d.push(H)}}class R{constructor(w,E){this.i=w,this.j=E,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function x(d){l.setTimeout(()=>{throw d},0)}function D(){var d=P;let w=null;return d.g&&(w=d.g,d.g=d.g.next,d.g||(d.h=null),w.next=null),w}class U{constructor(){this.h=this.g=null}add(w,E){const k=O.get();k.set(w,E),this.h?this.h.next=k:this.g=k,this.h=k}}var O=new R(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(w,E){this.h=w,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,Z=!1,P=new U,A=()=>{const d=Promise.resolve(void 0);Y=()=>{d.then(C)}};function C(){for(var d;d=D();){try{d.h.call(d.g)}catch(E){x(E)}var w=O;w.j(d),w.h<100&&(w.h++,d.next=w.g,w.g=d)}Z=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(d,w){this.type=d,this.g=this.target=w,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,w=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,w),l.removeEventListener("test",E,w)}catch{}return d})();function L(d){return/^[\s\xa0]*$/.test(d)}function Fe(d,w){j.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,w)}y(Fe,j),Fe.prototype.init=function(d,w){const E=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=w,w=d.relatedTarget,w||(E=="mouseover"?w=d.fromElement:E=="mouseout"&&(w=d.toElement)),this.relatedTarget=w,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),jt=0;function Ce(d,w,E,k,H){this.listener=d,this.proxy=null,this.src=w,this.type=E,this.capture=!!k,this.ha=H,this.key=++jt,this.da=this.fa=!1}function se(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function pe(d,w,E){for(const k in d)w.call(E,d[k],k,d)}function ae(d,w){for(const E in d)w.call(void 0,d[E],E,d)}function z(d){const w={};for(const E in d)w[E]=d[E];return w}const ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(d,w){let E,k;for(let H=1;H<arguments.length;H++){k=arguments[H];for(E in k)d[E]=k[E];for(let J=0;J<ee.length;J++)E=ee[J],Object.prototype.hasOwnProperty.call(k,E)&&(d[E]=k[E])}}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,w,E,k,H){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const oe=Le(d,w,k,H);return oe>-1?(w=d[oe],E||(w.fa=!1)):(w=new Ce(w,this.src,J,!!k,H),w.fa=E,d.push(w)),w};function De(d,w){const E=w.type;if(E in d.g){var k=d.g[E],H=Array.prototype.indexOf.call(k,w,void 0),J;(J=H>=0)&&Array.prototype.splice.call(k,H,1),J&&(se(w),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Le(d,w,E,k){for(let H=0;H<d.length;++H){const J=d[H];if(!J.da&&J.listener==w&&J.capture==!!E&&J.ha==k)return H}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Be={};function Je(d,w,E,k,H){if(Array.isArray(w)){for(let J=0;J<w.length;J++)Je(d,w[J],E,k,H);return null}return E=ml(E),d&&d[mt]?d.J(w,E,c(k)?!!k.capture:!1,H):an(d,w,E,!1,k,H)}function an(d,w,E,k,H,J){if(!w)throw Error("Invalid event type");const oe=c(H)?!!H.capture:!!H;let ke=No(d);if(ke||(d[qe]=ke=new Ne(d)),E=ke.add(w,E,k,oe,J),E.proxy)return E;if(k=Co(),E.proxy=k,k.src=d,k.listener=E,d.addEventListener)B||(H=oe),H===void 0&&(H=!1),d.addEventListener(w.toString(),k,H);else if(d.attachEvent)d.attachEvent(Po(w.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Co(){function d(E){return w.call(d.src,d.listener,E)}const w=Sc;return d}function pl(d,w,E,k,H){if(Array.isArray(w))for(var J=0;J<w.length;J++)pl(d,w[J],E,k,H);else k=c(k)?!!k.capture:!!k,E=ml(E),d&&d[mt]?(d=d.i,J=String(w).toString(),J in d.g&&(w=d.g[J],E=Le(w,E,k,H),E>-1&&(se(w[E]),Array.prototype.splice.call(w,E,1),w.length==0&&(delete d.g[J],d.h--)))):d&&(d=No(d))&&(w=d.g[w.toString()],d=-1,w&&(d=Le(w,E,k,H)),(E=d>-1?w[d]:null)&&bs(E))}function bs(d){if(typeof d!="number"&&d&&!d.da){var w=d.src;if(w&&w[mt])De(w.i,d);else{var E=d.type,k=d.proxy;w.removeEventListener?w.removeEventListener(E,k,d.capture):w.detachEvent?w.detachEvent(Po(E),k):w.addListener&&w.removeListener&&w.removeListener(k),(E=No(w))?(De(E,d),E.h==0&&(E.src=null,w[qe]=null)):se(d)}}}function Po(d){return d in Be?Be[d]:Be[d]="on"+d}function Sc(d,w){if(d.da)d=!0;else{w=new Fe(w,this);const E=d.listener,k=d.ha||d.src;d.fa&&bs(d),d=E.call(k,w)}return d}function No(d){return d=d[qe],d instanceof Ne?d:null}var ki="__closure_events_fn_"+(Math.random()*1e9>>>0);function ml(d){return typeof d=="function"?d:(d[ki]||(d[ki]=function(w){return d.handleEvent(w)}),d[ki])}function wt(){V.call(this),this.i=new Ne(this),this.M=this,this.G=null}y(wt,V),wt.prototype[mt]=!0,wt.prototype.removeEventListener=function(d,w,E,k){pl(this,d,w,E,k)};function gt(d,w){var E,k=d.G;if(k)for(E=[];k;k=k.G)E.push(k);if(d=d.M,k=w.type||w,typeof w=="string")w=new j(w,d);else if(w instanceof j)w.target=w.target||d;else{var H=w;w=new j(k,d),Pe(w,H)}H=!0;let J,oe;if(E)for(oe=E.length-1;oe>=0;oe--)J=w.g=E[oe],H=Hn(J,k,!0,w)&&H;if(J=w.g=d,H=Hn(J,k,!0,w)&&H,H=Hn(J,k,!1,w)&&H,E)for(oe=0;oe<E.length;oe++)J=w.g=E[oe],H=Hn(J,k,!1,w)&&H}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var d=this.i;for(const w in d.g){const E=d.g[w];for(let k=0;k<E.length;k++)se(E[k]);delete d.g[w],d.h--}}this.G=null},wt.prototype.J=function(d,w,E,k){return this.i.add(String(d),w,!1,E,k)},wt.prototype.K=function(d,w,E,k){return this.i.add(String(d),w,!0,E,k)};function Hn(d,w,E,k){if(w=d.i.g[String(w)],!w)return!0;w=w.concat();let H=!0;for(let J=0;J<w.length;++J){const oe=w[J];if(oe&&!oe.da&&oe.capture==E){const ke=oe.listener,yt=oe.ha||oe.src;oe.fa&&De(d.i,oe),H=ke.call(yt,k)!==!1&&H}}return H&&!k.defaultPrevented}function gl(d,w){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:l.setTimeout(d,w||0)}function yl(d){d.g=gl(()=>{d.g=null,d.i&&(d.i=!1,yl(d))},d.l);const w=d.h;d.h=null,d.m.apply(null,w)}class bc extends V{constructor(w,E){super(),this.m=w,this.l=E,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:yl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(d){V.call(this),this.h=d,this.g={}}y(Is,V);var vl=[];function Oo(d){pe(d.g,function(w,E){this.g.hasOwnProperty(E)&&bs(w)},d),d.g={}}Is.prototype.N=function(){Is.Z.N.call(this),Oo(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=l.JSON.stringify,Ic=l.JSON.parse,Ri=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function As(){}function xc(){}var ks={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Do(){j.call(this,"d")}y(Do,j);function _l(){j.call(this,"c")}y(_l,j);var qn={},Lo=null;function Rs(){return Lo=Lo||new wt}qn.Ia="serverreachability";function Vo(d){j.call(this,qn.Ia,d)}y(Vo,j);function Kr(d){const w=Rs();gt(w,new Vo(w))}qn.STAT_EVENT="statevent";function Gr(d,w){j.call(this,qn.STAT_EVENT,d),this.stat=w}y(Gr,j);function ht(d){const w=Rs();gt(w,new Gr(w,d))}qn.Ja="timingevent";function wl(d,w){j.call(this,qn.Ja,d),this.size=w}y(wl,j);function Cs(d,w){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},w)}function Ps(){this.g=!0}Ps.prototype.ua=function(){this.g=!1};function Ac(d,w,E,k,H,J){d.info(function(){if(d.g)if(J){var oe="",ke=J.split("&");for(let Ge=0;Ge<ke.length;Ge++){var yt=ke[Ge].split("=");if(yt.length>1){const Et=yt[0];yt=yt[1];const In=Et.split("_");oe=In.length>=2&&In[1]=="type"?oe+(Et+"="+yt+"&"):oe+(Et+"=redacted&")}}}else oe=null;else oe=J;return"XMLHTTP REQ ("+k+") [attempt "+H+"]: "+w+`
`+E+`
`+oe})}function kc(d,w,E,k,H,J,oe){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+H+"]: "+w+`
`+E+`
`+J+" "+oe})}function pr(d,w,E,k){d.info(function(){return"XMLHTTP TEXT ("+w+"): "+Ci(d,E)+(k?" "+k:"")})}function Rc(d,w){d.info(function(){return"TIMEOUT: "+w})}Ps.prototype.info=function(){};function Ci(d,w){if(!d.g)return w;if(!w)return null;try{const J=JSON.parse(w);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var E=J[d];if(!(E.length<2)){var k=E[1];if(Array.isArray(k)&&!(k.length<1)){var H=k[0];if(H!="noop"&&H!="stop"&&H!="close")for(let oe=1;oe<k.length;oe++)k[oe]=""}}}}return xs(J)}catch{return w}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Os={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Cc;function Jr(){}y(Jr,As),Jr.prototype.g=function(){return new XMLHttpRequest},Cc=new Jr;function mr(d){return encodeURIComponent(String(d))}function Mo(d){var w=1;d=d.split(":");const E=[];for(;w>0&&d.length;)E.push(d.shift()),w--;return d.length&&E.push(d.join(":")),E}function Pn(d,w,E,k){this.j=d,this.i=w,this.l=E,this.S=k||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Pc}function Pc(){this.i=null,this.g="",this.h=!1}var Nc={},El={};function Kn(d,w,E){d.M=1,d.A=Qr(Nn(w)),d.u=E,d.R=!0,Tl(d,null)}function Tl(d,w){d.F=Date.now(),Pi(d),d.B=Nn(d.A);var E=d.B,k=d.S;Array.isArray(k)||(k=[String(k)]),Nl(E.i,"t",k),d.C=0,E=d.j.L,d.h=new Pc,d.g=Bc(d.j,E?w:null,!d.u),d.P>0&&(d.O=new bc(p(d.Y,d,d.g),d.P)),w=d.V,E=d.g,k=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(vl[0]=H.toString()),H=vl);for(let J=0;J<H.length;J++){const oe=Je(E,H[J],k||w.handleEvent,!1,w.h||w);if(!oe)break;w.g[oe.key]=oe}w=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,w)):(d.v="GET",d.g.ea(d.B,d.v,null,w)),Kr(),Ac(d.i,d.v,d.B,d.l,d.S,d.u)}Pn.prototype.ba=function(d){d=d.target;const w=this.O;w&&Tr(d)==3?w.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const ke=Tr(this.g),yt=this.g.ya(),Ge=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Fc(this.g)))){this.K||ke!=4||yt==7||(yt==8||Ge<=0?Kr(3):Kr(2)),jo(this);var w=this.g.ca();this.X=w;var E=Oc(this);if(this.o=w==200,kc(this.i,this.v,this.B,this.l,this.S,ke,w),this.o){if(this.U&&!this.L){t:{if(this.g){var k,H=this.g;if((k=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(k)){var J=k;break t}}J=null}if(d=J)pr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,d);else{this.o=!1,this.m=3,ht(12),Yr(this),Ni(this);break e}}if(this.R){d=!0;let Et;for(;!this.K&&this.C<E.length;)if(Et=Lc(this,E),Et==El){ke==4&&(this.m=4,ht(14),d=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Nc){this.m=4,ht(15),pr(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else pr(this.i,this.l,Et,null),tt(this,Et);if(Dc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||E.length!=0||this.h.h||(this.m=1,ht(16),d=!1),this.o=this.o&&d,!d)pr(this.i,this.l,E,"[Invalid Chunked Response]"),Yr(this),Ni(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),$i(oe),oe.P=!0,ht(11))}}else pr(this.i,this.l,E,null),tt(this,E);ke==4&&Yr(this),this.o&&!this.K&&(ke==4?Go(this.j,this):(this.o=!1,Pi(this)))}else Dl(this.g),w==400&&E.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Yr(this),Ni(this)}}}catch{}finally{}};function Oc(d){if(!Dc(d))return d.g.la();const w=Fc(d.g);if(w==="")return"";let E="";const k=w.length,H=Tr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Yr(d),Ni(d),"";d.h.i=new l.TextDecoder}for(let J=0;J<k;J++)d.h.h=!0,E+=d.h.i.decode(w[J],{stream:!(H&&J==k-1)});return w.length=0,d.h.g+=E,d.C=0,d.h.g}function Dc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Lc(d,w){var E=d.C,k=w.indexOf(`
`,E);return k==-1?El:(E=Number(w.substring(E,k)),isNaN(E)?Nc:(k+=1,k+E>w.length?El:(w=w.slice(k,k+E),d.C=k+E,w)))}Pn.prototype.cancel=function(){this.K=!0,Yr(this)};function Pi(d){d.T=Date.now()+d.H,Sl(d,d.H)}function Sl(d,w){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Cs(p(d.aa,d),w)}function jo(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Rc(this.i,this.B),this.M!=2&&(Kr(),ht(17)),Yr(this),this.m=2,Ni(this)):Sl(this,this.T-d)};function Ni(d){d.j.I==0||d.K||Go(d.j,d)}function Yr(d){jo(d);var w=d.O;w&&typeof w.dispose=="function"&&w.dispose(),d.O=null,Oo(d.V),d.g&&(w=d.g,d.g=null,w.abort(),w.dispose())}function tt(d,w){try{var E=d.j;if(E.I!=0&&(E.g==d||Il(E.h,d))){if(!d.L&&Il(E.h,d)&&E.I==3){try{var k=E.Ba.g.parse(w)}catch{k=null}if(Array.isArray(k)&&k.length==3){var H=k;if(H[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)Ko(E),Sn(E);else break e;Ir(E),ht(18)}}else E.xa=H[1],0<E.xa-E.K&&H[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Cs(p(E.Va,E),6e3));Oi(E.h)<=1&&E.ta&&(E.ta=void 0)}else bn(E,11)}else if((d.L||E.g==d)&&Ko(E),!L(w))for(H=E.Ba.g.parse(w),w=0;w<H.length;w++){let Ge=H[w];const Et=Ge[0];if(!(Et<=E.K))if(E.K=Et,Ge=Ge[1],E.I==2)if(Ge[0]=="c"){E.M=Ge[1],E.ba=Ge[2];const In=Ge[3];In!=null&&(E.ka=In,E.j.info("VER="+E.ka));const ns=Ge[4];ns!=null&&(E.za=ns,E.j.info("SVER="+E.za));const xr=Ge[5];xr!=null&&typeof xr=="number"&&xr>0&&(k=1.5*xr,E.O=k,E.j.info("backChannelRequestTimeoutMs_="+k)),k=E;const Ar=d.g;if(Ar){const Qo=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var J=k.h;J.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Fo(J,J.h),J.h=null))}if(k.G){const Ml=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Ml&&(k.wa=Ml,He(k.J,k.G,Ml))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),k=E;var oe=d;if(k.na=Vl(k,k.L?k.ba:null,k.W),oe.L){Di(k.h,oe);var ke=oe,yt=k.O;yt&&(ke.H=yt),ke.D&&(jo(ke),Pi(ke)),k.g=oe}else Jt(k);E.i.length>0&&ts(E)}else Ge[0]!="stop"&&Ge[0]!="close"||bn(E,7);else E.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?bn(E,7):Ho(E):Ge[0]!="noop"&&E.l&&E.l.qa(Ge),E.A=0)}}Kr(4)}catch{}}var Ff=class{constructor(d,w){this.g=d,this.map=w}};function Uo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Oi(d){return d.h?1:d.g?d.g.size:0}function Il(d,w){return d.h?d.h==w:d.g?d.g.has(w):!1}function Fo(d,w){d.g?d.g.add(w):d.h=w}function Di(d,w){d.h&&d.h==w?d.h=null:d.g&&d.g.has(w)&&d.g.delete(w)}Uo.prototype.cancel=function(){if(this.i=wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function wn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let w=d.i;for(const E of d.g.values())w=w.concat(E.G);return w}return T(d.i)}var Vc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function En(d,w){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const k=d[E].indexOf("=");let H,J=null;k>=0?(H=d[E].substring(0,k),J=d[E].substring(k+1)):H=d[E],w(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function gr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;d instanceof gr?(this.l=d.l,Li(this,d.j),this.o=d.o,this.g=d.g,yr(this,d.u),this.h=d.h,Ds(this,Ol(d.i)),this.m=d.m):d&&(w=String(d).match(Vc))?(this.l=!1,Li(this,w[1]||"",!0),this.o=Vi(w[2]||""),this.g=Vi(w[3]||"",!0),yr(this,w[4]),this.h=Vi(w[5]||"",!0),Ds(this,w[6]||"",!0),this.m=Vi(w[7]||"")):(this.l=!1,this.i=new Ue(null,this.l))}gr.prototype.toString=function(){const d=[];var w=this.j;w&&d.push(Mi(w,Al,!0),":");var E=this.g;return(E||w=="file")&&(d.push("//"),(w=this.o)&&d.push(Mi(w,Al,!0),"@"),d.push(mr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Mi(E,E.charAt(0)=="/"?ji:kl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Mi(E,Rl)),d.join("")},gr.prototype.resolve=function(d){const w=Nn(this);let E=!!d.j;E?Li(w,d.j):E=!!d.o,E?w.o=d.o:E=!!d.g,E?w.g=d.g:E=d.u!=null;var k=d.h;if(E)yr(w,d.u);else if(E=!!d.h){if(k.charAt(0)!="/")if(this.g&&!this.h)k="/"+k;else{var H=w.h.lastIndexOf("/");H!=-1&&(k=w.h.slice(0,H+1)+k)}if(H=k,H==".."||H==".")k="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){k=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let oe=0;oe<H.length;){const ke=H[oe++];ke=="."?k&&oe==H.length&&J.push(""):ke==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),k&&oe==H.length&&J.push("")):(J.push(ke),k=!0)}k=J.join("/")}else k=H}return E?w.h=k:E=d.i.toString()!=="",E?Ds(w,Ol(d.i)):E=!!d.m,E&&(w.m=d.m),w};function Nn(d){return new gr(d)}function Li(d,w,E){d.j=E?Vi(w,!0):w,d.j&&(d.j=d.j.replace(/:$/,""))}function yr(d,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);d.u=w}else d.u=null}function Ds(d,w,E){w instanceof Ue?(d.i=w,Bo(d.i,d.l)):(E||(w=Mi(w,$f)),d.i=new Ue(w,d.l))}function He(d,w,E){d.i.set(w,E)}function Qr(d){return He(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Vi(d,w){return d?w?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Mi(d,w,E){return typeof d=="string"?(d=encodeURI(d).replace(w,xl),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function xl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Al=/[#\/\?@]/g,kl=/[#\?:]/g,ji=/[#\?]/g,$f=/[#\?@]/g,Rl=/#/g;function Ue(d,w){this.h=this.g=null,this.i=d||null,this.j=!!w}function vr(d){d.g||(d.g=new Map,d.h=0,d.i&&En(d.i,function(w,E){d.add(decodeURIComponent(w.replace(/\+/g," ")),E)}))}n=Ue.prototype,n.add=function(d,w){vr(this),this.i=null,d=_r(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(w),this.h+=1,this};function Cl(d,w){vr(d),w=_r(d,w),d.g.has(w)&&(d.i=null,d.h-=d.g.get(w).length,d.g.delete(w))}function $o(d,w){return vr(d),w=_r(d,w),d.g.has(w)}n.forEach=function(d,w){vr(this),this.g.forEach(function(E,k){E.forEach(function(H){d.call(w,H,k,this)},this)},this)};function Pl(d,w){vr(d);let E=[];if(typeof w=="string")$o(d,w)&&(E=E.concat(d.g.get(_r(d,w))));else for(d=Array.from(d.g.values()),w=0;w<d.length;w++)E=E.concat(d[w]);return E}n.set=function(d,w){return vr(this),this.i=null,d=_r(this,d),$o(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[w]),this.h+=1,this},n.get=function(d,w){return d?(d=Pl(this,d),d.length>0?String(d[0]):w):w};function Nl(d,w,E){Cl(d,w),E.length>0&&(d.i=null,d.g.set(_r(d,w),T(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],w=Array.from(this.g.keys());for(let k=0;k<w.length;k++){var E=w[k];const H=mr(E);E=Pl(this,E);for(let J=0;J<E.length;J++){let oe=H;E[J]!==""&&(oe+="="+mr(E[J])),d.push(oe)}}return this.i=d.join("&")};function Ol(d){const w=new Ue;return w.i=d.i,d.g&&(w.g=new Map(d.g),w.h=d.h),w}function _r(d,w){return w=String(w),d.j&&(w=w.toLowerCase()),w}function Bo(d,w){w&&!d.j&&(vr(d),d.i=null,d.g.forEach(function(E,k){const H=k.toLowerCase();k!=H&&(Cl(this,k),Nl(this,H,E))},d)),d.j=w}function wr(d,w){const E=new Ps;if(l.Image){const k=new Image;k.onload=m(Ut,E,"TestLoadImage: loaded",!0,w,k),k.onerror=m(Ut,E,"TestLoadImage: error",!1,w,k),k.onabort=m(Ut,E,"TestLoadImage: abort",!1,w,k),k.ontimeout=m(Ut,E,"TestLoadImage: timeout",!1,w,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else w(!1)}function Er(d,w){const E=new Ps,k=new AbortController,H=setTimeout(()=>{k.abort(),Ut(E,"TestPingServer: timeout",!1,w)},1e4);fetch(d,{signal:k.signal}).then(J=>{clearTimeout(H),J.ok?Ut(E,"TestPingServer: ok",!0,w):Ut(E,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(H),Ut(E,"TestPingServer: error",!1,w)})}function Ut(d,w,E,k,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),k(E)}catch{}}function Ui(){this.g=new Ri}function Xr(d){this.i=d.Sb||null,this.h=d.ab||!1}y(Xr,As),Xr.prototype.g=function(){return new Tn(this.i,this.h)};function Tn(d,w){wt.call(this),this.H=d,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Tn,wt),n=Tn.prototype,n.open=function(d,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=w,this.readyState=1,Gn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(w.body=d),(this.H||l).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mc(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mc(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var w=d.value?d.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!d.done}))&&(this.response=this.responseText+=w)}d.done?Ls(this):Gn(this),this.readyState==3&&Mc(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Ls(this))},n.Na=function(d){this.g&&(this.response=d,Ls(this))},n.ga=function(){this.g&&Ls(this)};function Ls(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Gn(d)}n.setRequestHeader=function(d,w){this.A.append(d,w)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],w=this.h.entries();for(var E=w.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=w.next();return d.join(`\r
`)};function Gn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function jc(d){let w="";return pe(d,function(E,k){w+=k,w+=":",w+=E,w+=`\r
`}),w}function zo(d,w,E){e:{for(k in E){var k=!1;break e}k=!0}k||(E=jc(E),typeof d=="string"?E!=null&&mr(E):He(d,w,E))}function Ye(d){wt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Ye,wt);var Uc=/^https?$/i,Bf=["POST","PUT"];n=Ye.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,w,E,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);w=w?w.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Cc.g(),this.g.onreadystatechange=v(p(this.Ca,this));try{this.B=!0,this.g.open(w,String(d),!0),this.B=!1}catch(J){Vs(this,J);return}if(d=E||"",E=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var H in k)E.set(H,k[H]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const J of k.keys())E.set(J,k.get(J));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),H=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Bf,w,void 0)>=0)||k||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,oe]of E)this.g.setRequestHeader(J,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Vs(this,J)}};function Vs(d,w){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=w,d.o=5,Ms(d),es(d)}function Ms(d){d.A||(d.A=!0,gt(d,"complete"),gt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,gt(this,"complete"),gt(this,"abort"),es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zr(this):this.Xa())},n.Xa=function(){Zr(this)};function Zr(d){if(d.h&&typeof o<"u"){if(d.v&&Tr(d)==4)setTimeout(d.Ca.bind(d),0);else if(gt(d,"readystatechange"),Tr(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var E;if(!(E=w)){var k;if(k=J===0){let oe=String(d.D).match(Vc)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),k=!Uc.test(oe?oe.toLowerCase():"")}E=k}if(E)gt(d,"complete"),gt(d,"success");else{d.o=6;try{var H=Tr(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",Ms(d)}}finally{es(d)}}}}function es(d,w){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,w||gt(d,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Tr(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Tr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var w=this.g.responseText;return d&&w.indexOf(d)==0&&(w=w.substring(d.length)),Ic(w)}};function Fc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Dl(d){const w={};d=(d.g&&Tr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(L(d[k]))continue;var E=Mo(d[k]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=w[H]||[];w[H]=J,J.push(E)}ae(w,function(k){return k.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sr(d,w,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||w}function Wo(d){this.za=0,this.i=[],this.j=new Ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sr("baseRetryDelayMs",5e3,d),this.Za=Sr("retryDelaySeedMs",1e4,d),this.Ta=Sr("forwardChannelMaxRetries",2,d),this.va=Sr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(d&&d.concurrentRequestLimit),this.Ba=new Ui,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Wo.prototype,n.ka=8,n.I=1,n.connect=function(d,w,E,k){ht(0),this.W=d,this.H=w||{},E&&k!==void 0&&(this.H.OSID=E,this.H.OAID=k),this.F=this.X,this.J=Vl(this,null,this.W),ts(this)};function Ho(d){if(qo(d),d.I==3){var w=d.V++,E=Nn(d.J);if(He(E,"SID",d.M),He(E,"RID",w),He(E,"TYPE","terminate"),br(d,E),w=new Pn(d,d.j,w),w.M=2,w.A=Qr(Nn(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(w.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=w.A,E=!0),E||(w.g=Bc(w.j,null),w.g.ea(w.A)),w.F=Date.now(),Pi(w)}Bi(d)}function Sn(d){d.g&&($i(d),d.g.cancel(),d.g=null)}function qo(d){Sn(d),d.v&&(l.clearTimeout(d.v),d.v=null),Ko(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function ts(d){if(!bl(d.h)&&!d.m){d.m=!0;var w=d.Ea;Y||A(),Z||(Y(),Z=!0),P.add(w,d),d.D=0}}function $c(d,w){return Oi(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=w.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Cs(p(d.Ea,d,w),Jo(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new Pn(this,this.j,d);let J=this.o;if(this.U&&(J?(J=z(J),Pe(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var w=0,E=0;E<this.i.length;E++){t:{var k=this.i[E];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(w+=k,w>4096){w=E;break e}if(w===4096||E===this.i.length-1){w=E+1;break e}}w=1e3}else w=1e3;w=Ll(this,H,w),E=Nn(this.J),He(E,"RID",d),He(E,"CVER",22),this.G&&He(E,"X-HTTP-Session-Id",this.G),br(this,E),J&&(this.R?w="headers="+mr(jc(J))+"&"+w:this.u&&zo(E,this.u,J)),Fo(this.h,H),this.Ra&&He(E,"TYPE","init"),this.S?(He(E,"$req",w),He(E,"SID","null"),H.U=!0,Kn(H,E,null)):Kn(H,E,w),this.I=2}}else this.I==3&&(d?Fi(this,d):this.i.length==0||bl(this.h)||Fi(this))};function Fi(d,w){var E;w?E=w.l:E=d.V++;const k=Nn(d.J);He(k,"SID",d.M),He(k,"RID",E),He(k,"AID",d.K),br(d,k),d.u&&d.o&&zo(k,d.u,d.o),E=new Pn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),w&&(d.i=w.G.concat(d.i)),w=Ll(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Fo(d.h,E),Kn(E,k,w)}function br(d,w){d.H&&pe(d.H,function(E,k){He(w,k,E)}),d.l&&pe({},function(E,k){He(w,k,E)})}function Ll(d,w,E){E=Math.min(d.i.length,E);const k=d.l?p(d.l.Ka,d.l,d):null;e:{var H=d.i;let ke=-1;for(;;){const yt=["count="+E];ke==-1?E>0?(ke=H[0].g,yt.push("ofs="+ke)):ke=0:yt.push("ofs="+ke);let Ge=!0;for(let Et=0;Et<E;Et++){var J=H[Et].g;const In=H[Et].map;if(J-=ke,J<0)ke=Math.max(0,H[Et].g-100),Ge=!1;else try{J="req"+J+"_"||"";try{var oe=In instanceof Map?In:Object.entries(In);for(const[ns,xr]of oe){let Ar=xr;c(xr)&&(Ar=xs(xr)),yt.push(J+ns+"="+encodeURIComponent(Ar))}}catch(ns){throw yt.push(J+"type="+encodeURIComponent("_badmap")),ns}}catch{k&&k(In)}}if(Ge){oe=yt.join("&");break e}}oe=void 0}return d=d.i.splice(0,E),w.G=d,oe}function Jt(d){if(!d.g&&!d.v){d.Y=1;var w=d.Da;Y||A(),Z||(Y(),Z=!0),P.add(w,d),d.A=0}}function Ir(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Cs(p(d.Da,d),Jo(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,js(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Cs(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Sn(this),js(this))};function $i(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function js(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var w=Nn(d.na);He(w,"RID","rpc"),He(w,"SID",d.M),He(w,"AID",d.K),He(w,"CI",d.F?"0":"1"),!d.F&&d.ia&&He(w,"TO",d.ia),He(w,"TYPE","xmlhttp"),br(d,w),d.u&&d.o&&zo(w,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=Qr(Nn(w)),E.u=null,E.R=!0,Tl(E,d)}n.Va=function(){this.C!=null&&(this.C=null,Sn(this),Ir(this),ht(19))};function Ko(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Go(d,w){var E=null;if(d.g==w){Ko(d),$i(d),d.g=null;var k=2}else if(Il(d.h,w))E=w.G,Di(d.h,w),k=1;else return;if(d.I!=0){if(w.o)if(k==1){E=w.u?w.u.length:0,w=Date.now()-w.F;var H=d.D;k=Rs(),gt(k,new wl(k,E)),ts(d)}else Jt(d);else if(H=w.m,H==3||H==0&&w.X>0||!(k==1&&$c(d,w)||k==2&&Ir(d)))switch(E&&E.length>0&&(w=d.h,w.i=w.i.concat(E)),H){case 1:bn(d,5);break;case 4:bn(d,10);break;case 3:bn(d,6);break;default:bn(d,2)}}}function Jo(d,w){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*w}function bn(d,w){if(d.j.info("Error code "+w),w==2){var E=p(d.bb,d),k=d.Ua;const H=!k;k=new gr(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Li(k,"https"),Qr(k),H?wr(k.toString(),E):Er(k.toString(),E)}else ht(2);d.I=0,d.l&&d.l.pa(w),Bi(d),qo(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Bi(d){if(d.I=0,d.ja=[],d.l){const w=wn(d.h);(w.length!=0||d.i.length!=0)&&(b(d.ja,w),b(d.ja,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.oa()}}function Vl(d,w,E){var k=E instanceof gr?Nn(E):new gr(E);if(k.g!="")w&&(k.g=w+"."+k.g),yr(k,k.u);else{var H=l.location;k=H.protocol,w=w?w+"."+H.hostname:H.hostname,H=+H.port;const J=new gr(null);k&&Li(J,k),w&&(J.g=w),H&&yr(J,H),E&&(J.h=E),k=J}return E=d.G,w=d.wa,E&&w&&He(k,E,w),He(k,"VER",d.ka),br(d,k),k}function Bc(d,w,E){if(w&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=d.Aa&&!d.ma?new Ye(new Xr({ab:E})):new Ye(d.ma),w.Fa(d.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zc(){}n=zc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Yo(){}Yo.prototype.g=function(d,w){return new Ft(d,w)};function Ft(d,w){wt.call(this),this.g=new Wo(w),this.l=d,this.h=w&&w.messageUrlParams||null,d=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(d?d["X-WebChannel-Content-Type"]=w.messageContentType:d={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(d?d["X-WebChannel-Client-Profile"]=w.sa:d={"X-WebChannel-Client-Profile":w.sa}),this.g.U=d,(d=w&&w.Qb)&&!L(d)&&(this.g.u=d),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.G=w,d=this.h,d!==null&&w in d&&(d=this.h,w in d&&delete d[w])),this.j=new Us(this)}y(Ft,wt),Ft.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){Ho(this.g)},Ft.prototype.o=function(d){var w=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=xs(d),d=E);w.i.push(new Ff(w.Ya++,d)),w.I==3&&ts(w)},Ft.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,Ft.Z.N.call(this)};function Wc(d){Do.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var w=d.__sm__;if(w){e:{for(const E in w){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,w=w!==null&&d in w?w[d]:void 0),this.data=w}else this.data=d}y(Wc,Do);function Hc(){_l.call(this),this.status=1}y(Hc,_l);function Us(d){this.g=d}y(Us,zc),Us.prototype.ra=function(){gt(this.g,"a")},Us.prototype.qa=function(d){gt(this.g,new Wc(d))},Us.prototype.pa=function(d){gt(this.g,new Hc)},Us.prototype.oa=function(){gt(this.g,"b")},Yo.prototype.createWebChannel=Yo.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,rx=function(){return new Yo},nx=function(){return Rs()},tx=qn,Ng={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,pd=Ns,Os.COMPLETE="complete",ex=Os,xc.EventType=ks,ks.OPEN="a",ks.CLOSE="b",ks.ERROR="c",ks.MESSAGE="d",wt.prototype.listen=wt.prototype.J,gu=xc,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,ZI=Ye}).apply(typeof Hh<"u"?Hh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.9.0";function OV(n){ol=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new Jy("@firebase/firestore");function Ia(){return vo.logLevel}function ue(n,...e){if(vo.logLevel<=Ve.DEBUG){const t=e.map(Qy);vo.debug(`Firestore (${ol}): ${n}`,...t)}}function vs(n,...e){if(vo.logLevel<=Ve.ERROR){const t=e.map(Qy);vo.error(`Firestore (${ol}): ${n}`,...t)}}function _o(n,...e){if(vo.logLevel<=Ve.WARN){const t=e.map(Qy);vo.warn(`Firestore (${ol}): ${n}`,...t)}}function Qy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sx(n,r,t)}function sx(n,e,t){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vs(r),new Error(r)}function Ke(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||sx(e,s,r)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class LV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VV{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},c=h=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new ix(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class MV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new MV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class VE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new VE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new VE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=FV(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Me(n,e){return n<e?-1:n>e?1:0}function Og(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return Um(s)===Um(o)?Me(s,o):Um(s)?1:-1}return Me(n.length,e.length)}const $V=55296,BV=57343;function Um(n){const e=n.charCodeAt(0);return e>=$V&&e<=BV}function Ja(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="__name__";class Or{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Or.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Me(e.length,t.length)}static compareSegments(e,t){const r=Or.isNumericId(e),s=Or.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Or.extractNumericId(e).compare(Or.extractNumericId(t)):Og(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fi.fromString(e.substring(4,e.length-2))}}class Ze extends Or{construct(e,t,r){return new Ze(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new Ze(t)}static emptyPath(){return new Ze([])}}const zV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Or{construct(e,t,r){return new Kt(e,t,r)}static isValidIdentifier(e){return zV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ME}static keyField(){return new Kt([ME])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Ze.fromString(e))}static fromName(e){return new _e(Ze.fromString(e).popFirst(5))}static empty(){return new _e(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n,e,t){if(!t)throw new ce(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function WV(n,e,t,r){if(e===!0&&r===!0)throw new ce(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jE(n){if(!_e.isDocumentKey(n))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UE(n){if(_e.isDocumentKey(n))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ax(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function pf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function $u(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pf(n);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n,e){const t={typeString:n};return e&&(t.value=e),t}function fc(n,e){if(!ax(n))throw new ce(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ce(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=-62135596800,$E=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*$E);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<FE)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$E}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fc(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-FE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:At("string",st._jsonSchemaVersion),seconds:At("number"),nanoseconds:At("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new st(0,0))}static max(){return new Ae(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=-1;function HV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new _i(s,_e.empty(),e)}function qV(n){return new _i(n.readTime,n.key,Bu)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(Ae.min(),_e.empty(),Bu)}static max(){return new _i(Ae.max(),_e.empty(),Bu)}}function KV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==GV)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,r)=>{t(e)}))}static reject(e){return new X(((t,r)=>{r(e)}))}static waitFor(e){return new X(((t,r)=>{let s=0,o=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++o,l&&o===s&&t()}),(h=>r(h)))})),l=!0,o===s&&t()}))}static or(e){let t=X.resolve(!1);for(const r of e)t=t.next((s=>s?X.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new X(((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next((m=>{l[p]=m,++c,c===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,t){return new X(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function YV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ll(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy=-1;function gf(n){return n==null}function Dd(n){return n===0&&1/n==-1/0}function QV(n){return typeof n=="number"&&Number.isInteger(n)&&!Dd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="";function XV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BE(e)),e=ZV(n.get(t),e);return BE(e)}function ZV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case lx:t+="";break;default:t+=o}}return t}function BE(n){return n+lx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Io(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ux(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qh(this.root,e,this.comparator,!1)}getReverseIterator(){return new qh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qh(this.root,e,this.comparator,!0)}}class qh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??qt.RED,this.left=s??qt.EMPTY,this.right=o??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new qt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new WE(this.data.getIterator())}getIteratorFrom(e){return new WE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class WE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new or([])}unionWith(e){let t=new Nt(Kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cx("Invalid base64 string: "+o):o}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const eM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=eM.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ei(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="server_timestamp",dx="__type__",fx="__previous_value__",px="__local_write_time__";function ev(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[dx])==null?void 0:r.stringValue)===hx}function yf(n){const e=n.mapValue.fields[fx];return ev(e)?yf(e):e}function zu(n){const e=wi(n.mapValue.fields[px].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t,r,s,o,l,c,h,p,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=m,this.apiKey=y}}const Ld="(default)";class Wu{constructor(e,t){this.projectId=e,this.database=t||Ld}static empty(){return new Wu("","")}get isDefaultDatabase(){return this.database===Ld}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}function nM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="__type__",rM="__max__",Kh={mapValue:{}},gx="__vector__",Vd="value";function Ti(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ev(n)?4:iM(n)?9007199254740991:sM(n)?10:11:Ie(28295,{value:n})}function Wr(n,e){if(n===e)return!0;const t=Ti(n);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zu(n).isEqual(zu(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=wi(s.timestampValue),c=wi(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return Ei(s.bytesValue).isEqual(Ei(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return _t(s.geoPointValue.latitude)===_t(o.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return _t(s.integerValue)===_t(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=_t(s.doubleValue),c=_t(o.doubleValue);return l===c?Dd(l)===Dd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Ja(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(zE(l)!==zE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Wr(l[h],c[h])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Hu(n,e){return(n.values||[]).find((t=>Wr(t,e)))!==void 0}function Ya(n,e){if(n===e)return 0;const t=Ti(n),r=Ti(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=_t(o.integerValue||o.doubleValue),h=_t(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return HE(n.timestampValue,e.timestampValue);case 4:return HE(zu(n),zu(e));case 5:return Og(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=Ei(o),h=Ei(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const m=Me(c[p],h[p]);if(m!==0)return m}return Me(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Me(_t(o.latitude),_t(l.latitude));return c!==0?c:Me(_t(o.longitude),_t(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return qE(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var v,T,b,R;const c=o.fields||{},h=l.fields||{},p=(v=c[Vd])==null?void 0:v.arrayValue,m=(T=h[Vd])==null?void 0:T.arrayValue,y=Me(((b=p==null?void 0:p.values)==null?void 0:b.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return y!==0?y:qE(p,m)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Kh.mapValue&&l===Kh.mapValue)return 0;if(o===Kh.mapValue)return 1;if(l===Kh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},m=Object.keys(p);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const v=Og(h[y],m[y]);if(v!==0)return v;const T=Ya(c[h[y]],p[m[y]]);if(T!==0)return T}return Me(h.length,m.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function HE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=wi(n),r=wi(e),s=Me(t.seconds,r.seconds);return s!==0?s:Me(t.nanos,r.nanos)}function qE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Ya(t[s],r[s]);if(o)return o}return Me(t.length,r.length)}function Qa(n){return Dg(n)}function Dg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=wi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ei(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=Dg(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${Dg(t.fields[l])}`;return s+"}"})(n.mapValue):Ie(61005,{value:n})}function md(n){switch(Ti(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=yf(n);return e?16+md(e):16;case 5:return 2*n.stringValue.length;case 6:return Ei(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+md(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Io(r.fields,((o,l)=>{s+=o.length+md(l)})),s})(n.mapValue);default:throw Ie(13486,{value:n})}}function KE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lg(n){return!!n&&"integerValue"in n}function tv(n){return!!n&&"arrayValue"in n}function GE(n){return!!n&&"nullValue"in n}function JE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gd(n){return!!n&&"mapValue"in n}function sM(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[mx])==null?void 0:r.stringValue)===gx}function Iu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Io(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Iu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iu(n.arrayValue.values[t]);return e}return{...n}}function iM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===rM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(t)}setAll(e){let t=Kt.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=Iu(l):s.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];gd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Io(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Fn(Iu(this.value))}}function yx(n){const e=[];return Io(n.fields,((t,r)=>{const s=new Kt([t]);if(gd(r)){const o=yx(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new nn(e,0,Ae.min(),Ae.min(),Ae.min(),Fn.empty(),0)}static newFoundDocument(e,t,r,s){return new nn(e,1,t,Ae.min(),r,s,0)}static newNoDocument(e,t){return new nn(e,2,t,Ae.min(),Ae.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,Ae.min(),Ae.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this.position=e,this.inclusive=t}}function YE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=Ya(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function QE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t="asc"){this.field=e,this.dir=t}}function oM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{}class xt extends vx{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lM(e,t,r):t==="array-contains"?new hM(e,r):t==="in"?new dM(e,r):t==="not-in"?new fM(e,r):t==="array-contains-any"?new pM(e,r):new xt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uM(e,r):new cM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ya(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends vx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dr(e,t)}matches(e){return _x(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _x(n){return n.op==="and"}function wx(n){return aM(n)&&_x(n)}function aM(n){for(const e of n.filters)if(e instanceof dr)return!1;return!0}function Vg(n){if(n instanceof xt)return n.field.canonicalString()+n.op.toString()+Qa(n.value);if(wx(n))return n.filters.map((e=>Vg(e))).join(",");{const e=n.filters.map((t=>Vg(t))).join(",");return`${n.op}(${e})`}}function Ex(n,e){return n instanceof xt?(function(r,s){return s instanceof xt&&r.op===s.op&&r.field.isEqual(s.field)&&Wr(r.value,s.value)})(n,e):n instanceof dr?(function(r,s){return s instanceof dr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,c)=>o&&Ex(l,s.filters[c])),!0):!1})(n,e):void Ie(19439)}function Tx(n){return n instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qa(t.value)}`})(n):n instanceof dr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Tx).join(" ,")+"}"})(n):"Filter"}class lM extends xt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class uM extends xt{constructor(e,t){super(e,"in",t),this.keys=Sx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cM extends xt{constructor(e,t){super(e,"not-in",t),this.keys=Sx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Sx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class hM extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tv(t)&&Hu(t.arrayValue,this.value)}}class dM extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hu(this.value.arrayValue,t)}}class fM extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hu(this.value.arrayValue,t)}}class pM extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function XE(n,e=null,t=[],r=[],s=null,o=null,l=null){return new mM(n,e,t,r,s,o,l)}function nv(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Vg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Qa(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Qa(r))).join(",")),e.Te=t}return e.Te}function rv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ex(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QE(n.startAt,e.startAt)&&QE(n.endAt,e.endAt)}function Mg(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gM(n,e,t,r,s,o,l,c){return new pc(n,e,t,r,s,o,l,c)}function bx(n){return new pc(n)}function ZE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function yM(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ix(n){return n.collectionGroup!==null}function xu(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Nt(Kt.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new jd(o,r))})),t.has(Kt.keyField().canonicalString())||e.Ie.push(new jd(Kt.keyField(),r))}return e.Ie}function Vr(n){const e=Re(n);return e.Ee||(e.Ee=vM(e,xu(n))),e.Ee}function vM(n,e){if(n.limitType==="F")return XE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new jd(s.field,o)}));const t=n.endAt?new Md(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Md(n.startAt.position,n.startAt.inclusive):null;return XE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function jg(n,e){const t=n.filters.concat([e]);return new pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ug(n,e,t){return new pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return rv(Vr(n),Vr(e))&&n.limitType===e.limitType}function xx(n){return`${nv(Vr(n))}|lt:${n.limitType}`}function xa(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>Tx(s))).join(", ")}]`),gf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Qa(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Qa(s))).join(",")),`Target(${r})`})(Vr(n))}; limitType=${n.limitType})`}function _f(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of xu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,h){const p=YE(l,c,h);return l.inclusive?p<=0:p<0})(r.startAt,xu(r),s)||r.endAt&&!(function(l,c,h){const p=YE(l,c,h);return l.inclusive?p>=0:p>0})(r.endAt,xu(r),s))})(n,e)}function _M(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ax(n){return(e,t)=>{let r=!1;for(const s of xu(n)){const o=wM(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function wM(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?Ya(h,p):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return ux(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM=new ct(_e.comparator);function _s(){return EM}const kx=new ct(_e.comparator);function yu(...n){let e=kx;for(const t of n)e=e.insert(t.key,t);return e}function Rx(n){let e=kx;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function fo(){return Au()}function Cx(){return Au()}function Au(){return new xo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const TM=new ct(_e.comparator),SM=new Nt(_e.comparator);function je(...n){let e=SM;for(const t of n)e=e.add(t);return e}const bM=new Nt(Me);function IM(){return bM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dd(e)?"-0":e}}function Px(n){return{integerValue:""+n}}function xM(n,e){return QV(e)?Px(e):sv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(){this._=void 0}}function AM(n,e,t){return n instanceof Ud?(function(s,o){const l={fields:{[dx]:{stringValue:hx},[px]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&ev(o)&&(o=yf(o)),o&&(l.fields[fx]=o),{mapValue:l}})(t,e):n instanceof qu?Ox(n,e):n instanceof Ku?Dx(n,e):(function(s,o){const l=Nx(s,o),c=eT(l)+eT(s.Ae);return Lg(l)&&Lg(s.Ae)?Px(c):sv(s.serializer,c)})(n,e)}function kM(n,e,t){return n instanceof qu?Ox(n,e):n instanceof Ku?Dx(n,e):t}function Nx(n,e){return n instanceof Fd?(function(r){return Lg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Ud extends wf{}class qu extends wf{constructor(e){super(),this.elements=e}}function Ox(n,e){const t=Lx(e);for(const r of n.elements)t.some((s=>Wr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ku extends wf{constructor(e){super(),this.elements=e}}function Dx(n,e){let t=Lx(e);for(const r of n.elements)t=t.filter((s=>!Wr(s,r)));return{arrayValue:{values:t}}}class Fd extends wf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function eT(n){return _t(n.integerValue||n.doubleValue)}function Lx(n){return tv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function RM(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof qu&&s instanceof qu||r instanceof Ku&&s instanceof Ku?Ja(r.elements,s.elements,Wr):r instanceof Fd&&s instanceof Fd?Wr(r.Ae,s.Ae):r instanceof Ud&&s instanceof Ud})(n.transform,e.transform)}class CM{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ef{}function Vx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new iv(n.key,Mr.none()):new mc(n.key,n.data,Mr.none());{const t=n.data,r=Fn.empty();let s=new Nt(Kt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Ao(n.key,r,new or(s.toArray()),Mr.none())}}function PM(n,e,t){n instanceof mc?(function(s,o,l){const c=s.value.clone(),h=nT(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Ao?(function(s,o,l){if(!yd(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=nT(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(Mx(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function ku(n,e,t,r){return n instanceof mc?(function(o,l,c,h){if(!yd(o.precondition,l))return c;const p=o.value.clone(),m=rT(o.fieldTransforms,h,l);return p.setAll(m),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ao?(function(o,l,c,h){if(!yd(o.precondition,l))return c;const p=rT(o.fieldTransforms,h,l),m=l.data;return m.setAll(Mx(o)),m.setAll(p),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,c){return yd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function NM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=Nx(r.transform,s||null);o!=null&&(t===null&&(t=Fn.empty()),t.set(r.field,o))}return t||null}function tT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ja(r,s,((o,l)=>RM(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mc extends Ef{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ao extends Ef{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Mx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function nT(n,e,t){const r=new Map;Ke(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,kM(l,c,t[s]))}return r}function rT(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,AM(o,l,e))}return r}class iv extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OM extends Ef{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&PM(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Cx();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=Vx(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,((t,r)=>tT(t,r)))&&Ja(this.baseMutations,e.baseMutations,((t,r)=>tT(t,r)))}}class ov{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return TM})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new ov(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,$e;function MM(n){switch(n){case Q.OK:return Ie(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function jx(n){if(n===void 0)return vs("GRPC error has no .code"),Q.UNKNOWN;switch(n){case St.OK:return Q.OK;case St.CANCELLED:return Q.CANCELLED;case St.UNKNOWN:return Q.UNKNOWN;case St.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case St.INTERNAL:return Q.INTERNAL;case St.UNAVAILABLE:return Q.UNAVAILABLE;case St.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case St.NOT_FOUND:return Q.NOT_FOUND;case St.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case St.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case St.ABORTED:return Q.ABORTED;case St.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case St.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case St.DATA_LOSS:return Q.DATA_LOSS;default:return Ie(39323,{code:n})}}($e=St||(St={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=new fi([4294967295,4294967295],0);function sT(n){const e=jM().encode(n),t=new XI;return t.update(e),new Uint8Array(t.digest())}function iT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fi([t,r],0),new fi([s,o],0)]}class av{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vu(`Invalid padding: ${t}`);if(r<0)throw new vu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(fi.fromNumber(r)));return s.compare(UM)===1&&(s=new fi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=sT(e),[r,s]=iT(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new av(o,s,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=sT(e),[r,s]=iT(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,gc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Tf(Ae.min(),s,new ct(Me),_s(),je())}}class gc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new gc(r,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class Ux{constructor(e,t){this.targetId=e,this.Ce=t}}class Fx{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class oT{constructor(){this.ve=0,this.Fe=aT(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),r=je();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:o})}})),new gc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=aT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class FM{constructor(e){this.Ge=e,this.ze=new Map,this.je=_s(),this.He=Gh(),this.Je=Gh(),this.Ze=new ct(Me)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Mg(o))if(r===0){const l=new _e(o.path);this.et(t,l,nn.newNoDocument(l,Ae.min()))}else Ke(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=Ei(r).toUint8Array()}catch(h){if(h instanceof cx)return _o("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new av(l,s,o)}catch(h){return _o(h instanceof vu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Mg(c.target)){const h=new _e(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,nn.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.Ke())}}));let r=je();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new Tf(e,t,this.Ze,this.je,r);return this.je=_s(),this.He=Gh(),this.Je=Gh(),this.Ze=new ct(Me),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new oT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Nt(Me),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Nt(Me),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new oT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Gh(){return new ct(_e.comparator)}function aT(){return new ct(_e.comparator)}const $M={asc:"ASCENDING",desc:"DESCENDING"},BM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zM={and:"AND",or:"OR"};class WM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fg(n,e){return n.useProto3Json||gf(e)?e:{value:e}}function $d(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $x(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function HM(n,e){return $d(n,e.toTimestamp())}function jr(n){return Ke(!!n,49232),Ae.fromTimestamp((function(t){const r=wi(t);return new st(r.seconds,r.nanos)})(n))}function lv(n,e){return $g(n,e).canonicalString()}function $g(n,e){const t=(function(s){return new Ze(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Bx(n){const e=Ze.fromString(n);return Ke(Kx(e),10190,{key:e.toString()}),e}function Bg(n,e){return lv(n.databaseId,e.path)}function Fm(n,e){const t=Bx(e);if(t.get(1)!==n.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Wx(t))}function zx(n,e){return lv(n.databaseId,e)}function qM(n){const e=Bx(n);return e.length===4?Ze.emptyPath():Wx(e)}function zg(n){return new Ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wx(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function lT(n,e,t){return{name:Bg(n,e),fields:t.value.mapValue.fields}}function KM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),Gt.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Gt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const m=p.code===void 0?Q.UNKNOWN:jx(p.code);return new ce(m,p.message||"")})(l);t=new Fx(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Fm(n,r.document.name),o=jr(r.document.updateTime),l=r.document.createTime?jr(r.document.createTime):Ae.min(),c=new Fn({mapValue:{fields:r.document.fields}}),h=nn.newFoundDocument(s,o,l,c),p=r.targetIds||[],m=r.removedTargetIds||[];t=new vd(p,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Fm(n,r.document),o=r.readTime?jr(r.readTime):Ae.min(),l=nn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new vd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Fm(n,r.document),o=r.removedTargetIds||[];t=new vd([],o,s,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new VM(s,o),c=r.targetId;t=new Ux(c,l)}}return t}function GM(n,e){let t;if(e instanceof mc)t={update:lT(n,e.key,e.value)};else if(e instanceof iv)t={delete:Bg(n,e.key)};else if(e instanceof Ao)t={update:lT(n,e.key,e.data),updateMask:rj(e.fieldMask)};else{if(!(e instanceof OM))return Ie(16599,{dt:e.type});t={verify:Bg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof Ud)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof qu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ku)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ie(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:HM(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(n,e.precondition)),t}function JM(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?jr(s.updateTime):jr(o);return l.isEqual(Ae.min())&&(l=jr(o)),new CM(l,s.transformResults||[])})(t,e)))):[]}function YM(n,e){return{documents:[zx(n,e.path)]}}function QM(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zx(n,s);const o=(function(p){if(p.length!==0)return qx(dr.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((m=>(function(v){return{field:Aa(v.field),direction:ej(v.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Fg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function XM(n){let e=qM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const v=Hx(y);return v instanceof dr&&wx(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((v=>(function(b){return new jd(ka(b.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(v)))})(t.orderBy));let c=null;t.limit&&(c=(function(y){let v;return v=typeof y=="object"?y.value:y,gf(v)?null:v})(t.limit));let h=null;t.startAt&&(h=(function(y){const v=!!y.before,T=y.values||[];return new Md(T,v)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const v=!y.before,T=y.values||[];return new Md(T,v)})(t.endAt)),gM(e,s,l,o,c,"F",h,p)}function ZM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Hx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ka(t.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ka(t.unaryFilter.field);return xt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ka(t.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ka(t.unaryFilter.field);return xt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xt.create(ka(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return dr.create(t.compositeFilter.filters.map((r=>Hx(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function ej(n){return $M[n]}function tj(n){return BM[n]}function nj(n){return zM[n]}function Aa(n){return{fieldPath:n.canonicalString()}}function ka(n){return Kt.fromServerFormat(n.fieldPath)}function qx(n){return n instanceof xt?(function(t){if(t.op==="=="){if(JE(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NAN"}};if(GE(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JE(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NAN"}};if(GE(t.value))return{unaryFilter:{field:Aa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Aa(t.field),op:tj(t.op),value:t.value}}})(n):n instanceof dr?(function(t){const r=t.getFilters().map((s=>qx(s)));return r.length===1?r[0]:{compositeFilter:{op:nj(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function rj(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Kx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Gx(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,r,s,o=Ae.min(),l=Ae.min(),c=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.yt=e}}function ij(n){const e=XM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.Sn=new aj}addToCollectionParentIndex(e,t){return this.Sn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(_i.min())}updateCollectionGroup(e,t,r){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class aj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nt(Ze.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jx=41943040;class _n{static withCacheSize(e){return new _n(e,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(Jx,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Xa(0)}static ar(){return new Xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="LruGarbageCollector",lj=1048576;function hT([n,e],[t,r]){const s=Me(n,t);return s===0?Me(e,r):s}class uj{constructor(e){this.Pr=e,this.buffer=new Nt(hT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();hT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(cT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ll(t)?ue(cT,"Ignoring IndexedDB error during garbage collection: ",t):await al(t)}await this.Ar(3e5)}))}}class hj{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(mf.ce);const r=new uj(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve(uT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,o,l,c,h,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,c=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(p=Date.now(),Ia()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-m}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function dj(n,e){return new hj(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.changes=new xo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?X.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&ku(r.mutation,s,or.empty(),st.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=je()){const s=fo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=yu();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=fo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,je())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,s){let o=_s();const l=Au(),c=(function(){return Au()})();return t.forEach(((h,p)=>{const m=r.get(p.key);s.has(p.key)&&(m===void 0||m.mutation instanceof Ao)?o=o.insert(p.key,p):m!==void 0?(l.set(p.key,m.mutation.getFieldMask()),ku(m.mutation,p,m.mutation.getFieldMask(),st.now())):l.set(p.key,or.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((p,m)=>l.set(p,m))),t.forEach(((p,m)=>c.set(p,new pj(m,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Au();let s=new ct(((l,c)=>l-c)),o=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let m=r.get(h)||or.empty();m=c.applyToLocalView(p,m),r.set(h,m);const y=(s.get(c.batchId)||je()).add(h);s=s.insert(c.batchId,y)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,m=h.value,y=Cx();m.forEach((v=>{if(!o.has(v)){const T=Vx(t.get(v),r.get(v));T!==null&&y.set(v,T),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return X.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return yM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ix(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):X.resolve(fo());let c=Bu,h=o;return l.next((p=>X.forEach(p,((m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?X.resolve():this.remoteDocumentCache.getEntry(e,m).next((v=>{h=h.insert(m,v)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,h,p,je()))).next((m=>({batchId:c,changes:Rx(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let s=yu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=yu();return this.indexManager.getCollectionParents(e,o).next((c=>X.forEach(c,(h=>{const p=(function(y,v){return new pc(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((m=>{m.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((h,p)=>{const m=p.getKey();l.get(m)===null&&(l=l.insert(m,nn.newInvalidDocument(m)))}));let c=yu();return l.forEach(((h,p)=>{const m=o.get(h);m!==void 0&&ku(m.mutation,p,or.empty(),st.now()),_f(t,p)&&(c=c.insert(h,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return X.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:jr(s.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:ij(s.bundledQuery),readTime:jr(s.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.overlays=new ct(_e.comparator),this.Lr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fo();return X.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.bt(e,t,o)})),X.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),X.resolve()}getOverlaysForCollection(e,t,r){const s=fo(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return X.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new ct(((p,m)=>p-m));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=fo(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const c=fo(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,m)=>c.set(p,m))),!(c.size()>=s)););return X.resolve(c)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new LM(t,r));let o=this.Lr.get(t);o===void 0&&(o=je(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.kr=new Nt(Vt.Kr),this.qr=new Nt(Vt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Vt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new Ze([])),r=new Vt(t,e),s=new Vt(t,e+1),o=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new Ze([])),r=new Vt(t,e),s=new Vt(t,e+1);let o=je();return this.qr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Vt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Nt(Vt.Kr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new DM(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Jr=this.Jr.add(new Vt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return X.resolve(l)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),o=s<0?0:s;return X.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Zy:this.Yn-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),s=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,s],(l=>{const c=this.Zr(l.Hr);o.push(c)})),X.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(Me);return t.forEach((s=>{const o=new Vt(s,0),l=new Vt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(c=>{r=r.add(c.Hr)}))})),X.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const l=new Vt(new _e(o),0);let c=new Nt(Me);return this.Jr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(h.Hr)),!0)}),l),X.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ke(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return X.forEach(t.mutations,(s=>{const o=new Vt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Vt(t,0),s=this.Jr.firstAfterOrEqual(r);return X.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.ti=e,this.docs=(function(){return new ct(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return X.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():nn.newInvalidDocument(s))})),X.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=_s();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:m}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||KV(qV(m),r)<=0||(s.has(m.key)||_f(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ie(9500)}ni(e,t){return X.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Ej(this)}getSize(e){return X.resolve(this.size)}}class Ej extends fj{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),X.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.persistence=e,this.ri=new xo((t=>nv(t)),rv),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new uv,this.targetCount=0,this.oi=Xa._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),X.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.lr(t),X.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),X.waitFor(o).next((()=>s))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return X.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),X.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),X.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return X.resolve(r)}containsKey(e,t){return X.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t){this._i={},this.overlays={},this.ai=new mf(0),this.ui=!1,this.ui=!0,this.ci=new vj,this.referenceDelegate=e(this),this.li=new Tj(this),this.indexManager=new oj,this.remoteDocumentCache=(function(s){return new wj(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new sj(t),this.Pi=new gj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new _j(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const s=new Sj(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,t){return X.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class Sj extends JV{constructor(e){super(),this.currentSequenceNumber=e}}class cv{constructor(e){this.persistence=e,this.Ri=new uv,this.Ai=null}static Vi(e){return new cv(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),X.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.di,(r=>{const s=_e.fromPath(r);return this.mi(e,s).next((o=>{o||t.removeEntry(s,Ae.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Bd{constructor(e,t){this.persistence=e,this.fi=new xo((r=>XV(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=dj(this,t)}static Vi(e,t){return new Bd(e,t)}Ti(){}Ii(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return X.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((o=>o?X.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(r++,o.removeEntry(l,Ae.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),X.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),X.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=md(e.data.value)),t}wr(e,t,r){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return X.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=je(),s=je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new hv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return pL()?8:YV(sn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.gs(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new bj;return this.ys(e,t,l).next((c=>{if(o.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>o.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(Ia()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",xa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ia()<=Ve.DEBUG&&ue("QueryEngine","Query:",xa(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ia()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",xa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(t))):X.resolve())}gs(e,t){if(ZE(t))return X.resolve(null);let r=Vr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Ug(t,null,"F"),r=Vr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=je(...o);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.bs(t,c);return this.Ss(t,p,l,h.readTime)?this.gs(e,Ug(t,null,"F")):this.Ds(e,p,t,h)}))))})))))}ps(e,t,r,s){return ZE(t)||s.isEqual(Ae.min())?X.resolve(null):this.fs.getDocuments(e,r).next((o=>{const l=this.bs(t,o);return this.Ss(t,l,r,s)?X.resolve(null):(Ia()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xa(t)),this.Ds(e,l,t,HV(s,Bu)).next((c=>c)))}))}bs(e,t){let r=new Nt(Ax(e));return t.forEach(((s,o)=>{_f(e,o)&&(r=r.add(o))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,t,r){return Ia()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",xa(t)),this.fs.getDocumentsMatchingQuery(e,t,_i.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="LocalStore",xj=3e8;class Aj{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new ct(Me),this.Fs=new xo((o=>nv(o)),rv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mj(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function kj(n,e,t,r){return new Aj(n,e,t,r)}async function Qx(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let h=je();for(const p of s){l.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}for(const p of o){c.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function Rj(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,p,m){const y=p.batch,v=y.keys();let T=X.resolve();return v.forEach((b=>{T=T.next((()=>m.getEntry(h,b))).next((R=>{const x=p.docVersions.get(b);Ke(x!==null,48541),R.version.compareTo(x)<0&&(y.applyToRemoteDocument(R,p),R.isValidDocument()&&(R.setReadTime(p.commitVersion),m.addEntry(R)))}))})),T.next((()=>c.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=je();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function Xx(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Cj(n,e){const t=Re(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((m,y)=>{const v=s.get(y);if(!v)return;c.push(t.li.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.li.addMatchingKeys(o,m.addedDocuments,y))));let T=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(Gt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),s=s.insert(y,T),(function(R,x,D){return R.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=xj?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(v,T,m)&&c.push(t.li.updateTargetData(o,T))}));let h=_s(),p=je();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(Pj(o,l,e.documentUpdates).next((m=>{h=m.Bs,p=m.Ls}))),!r.isEqual(Ae.min())){const m=t.li.getLastRemoteSnapshotVersion(o).next((y=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(m)}return X.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,p))).next((()=>h))})).then((o=>(t.vs=s,o)))}function Pj(n,e,t){let r=je(),s=je();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=_s();return t.forEach(((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(Ae.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ue(dv,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)})),{Bs:l,Ls:s}}))}function Nj(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Zy),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Oj(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((o=>o?(s=o,X.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new ci(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Wg(n,e,t){const r=Re(n),s=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!ll(l))throw l;ue(dv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function dT(n,e,t){const r=Re(n);let s=Ae.min(),o=je();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,p,m){const y=Re(h),v=y.Fs.get(m);return v!==void 0?X.resolve(y.vs.get(v)):y.li.getTargetData(p,m)})(r,l,Vr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Ae.min(),t?o:je()))).next((c=>(Dj(r,_M(e),c),{documents:c,ks:o})))))}function Dj(n,e,t){let r=n.Ms.get(e)||Ae.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Ms.set(e,r)}class fT{constructor(){this.activeTargetIds=IM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lj{constructor(){this.vo=new fT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new fT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT="ConnectivityMonitor";class mT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(pT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(pT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jh=null;function Hg(){return Jh===null?Jh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jh++,"0x"+Jh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="RestConnection",Mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class jj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Ld?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,o){const l=Hg(),c=this.Qo(e,t.toUriEncodedString());ue($m,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,s,o);const{host:p}=new URL(c),m=So(p);return this.zo(e,c,h,r,m).then((y=>(ue($m,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw _o($m,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y}))}jo(e,t,r,s,o,l){return this.Wo(e,t,r,s,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Qo(e,t){const r=Mj[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection",hu=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Fa extends jj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Fa.c_){const e=nx();hu(e,tx.STAT_EVENT,(t=>{t.stat===Ng.PROXY?ue(en,"STAT_EVENT: detected buffering proxy"):t.stat===Ng.NOPROXY&&ue(en,"STAT_EVENT: detected no buffering proxy")})),Fa.c_=!0}}zo(e,t,r,s,o){const l=Hg();return new Promise(((c,h)=>{const p=new ZI;p.setWithCredentials(!0),p.listenOnce(ex.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case pd.NO_ERROR:const y=p.getResponseJson();ue(en,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case pd.TIMEOUT:ue(en,`RPC '${e}' ${l} timed out`),h(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case pd.HTTP_ERROR:const v=p.getStatus();if(ue(en,`RPC '${e}' ${l} failed with status:`,v,"response text:",p.getResponseText()),v>0){let T=p.getResponseJson();Array.isArray(T)&&(T=T[0]);const b=T==null?void 0:T.error;if(b&&b.status&&b.message){const R=(function(D){const U=D.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(U)>=0?U:Q.UNKNOWN})(b.status);h(new ce(R,b.message))}else h(new ce(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ue(en,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);ue(en,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=Hg(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=o.join("");ue(en,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=l.createWebChannel(p,c);this.I_(m);let y=!1,v=!1;const T=new Uj({Ho:b=>{v?ue(en,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(y||(ue(en,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),ue(en,`RPC '${e}' stream ${s} sending:`,b),m.send(b))},Jo:()=>m.close()});return hu(m,gu.EventType.OPEN,(()=>{v||(ue(en,`RPC '${e}' stream ${s} transport opened.`),T.i_())})),hu(m,gu.EventType.CLOSE,(()=>{v||(v=!0,ue(en,`RPC '${e}' stream ${s} transport closed`),T.o_(),this.E_(m))})),hu(m,gu.EventType.ERROR,(b=>{v||(v=!0,_o(en,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),T.o_(new ce(Q.UNAVAILABLE,"The operation could not be completed")))})),hu(m,gu.EventType.MESSAGE,(b=>{var R;if(!v){const x=b.data[0];Ke(!!x,16349);const D=x,U=(D==null?void 0:D.error)||((R=D[0])==null?void 0:R.error);if(U){ue(en,`RPC '${e}' stream ${s} received error:`,U);const O=U.status;let K=(function(P){const A=St[P];if(A!==void 0)return jx(A)})(O),Y=U.message;O==="NOT_FOUND"&&Y.includes("database")&&Y.includes("does not exist")&&Y.includes(this.databaseId.database)&&_o(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),K===void 0&&(K=Q.INTERNAL,Y="Unknown error status: "+O+" with message "+U.message),v=!0,T.o_(new ce(K,Y)),m.close()}else ue(en,`RPC '${e}' stream ${s} received:`,x),T.__(x)}})),Fa.u_(),setTimeout((()=>{T.s_()}),0),T}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return rx()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(n){return new Fa(n)}function Bm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n){return new WM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fa.c_=!1;class Zx{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="PersistentStream";class eA{constructor(e,t,r,s,o,l,c,h){this.Ci=e,this.b_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Zx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(vs(t.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ce(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(gT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ue(gT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class $j extends eA{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=KM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ae.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ae.min():l.readTime?jr(l.readTime):Ae.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=zg(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Mg(h)?{documents:YM(o,h)}:{query:QM(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=$x(o,l.resumeToken);const p=Fg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ae.min())>0){c.readTime=$d(o,l.snapshotVersion.toTimestamp());const p=Fg(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=ZM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=zg(this.serializer),t.removeTarget=e,this.K_(t)}}class Bj extends eA{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JM(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=zg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>GM(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{}class Wj extends zj{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,$g(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(Q.UNKNOWN,o.toString())}))}jo(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,$g(t,r),s,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(Q.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Hj(n,e,t,r){return new Wj(n,e,t,r)}class qj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vs(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class Kj{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{ko(this)&&(ue(wo,"Restarting streams for network reachability change."),await(async function(h){const p=Re(h);p.Ea.add(4),await yc(p),p.Va.set("Unknown"),p.Ea.delete(4),await bf(p)})(this))}))})),this.Va=new qj(r,s)}}async function bf(n){if(ko(n))for(const e of n.Ra)await e(!0)}async function yc(n){for(const e of n.Ra)await e(!1)}function tA(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),gv(t)?mv(t):ul(t).O_()&&pv(t,e))}function fv(n,e){const t=Re(n),r=ul(t);t.Ia.delete(e),r.O_()&&nA(t,e),t.Ia.size===0&&(r.O_()?r.L_():ko(t)&&t.Va.set("Unknown"))}function pv(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).Z_(e)}function nA(n,e){n.da.$e(e),ul(n).X_(e)}function mv(n){n.da=new FM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.Va.ua()}function gv(n){return ko(n)&&!ul(n).x_()&&n.Ia.size>0}function ko(n){return Re(n).Ea.size===0}function rA(n){n.da=void 0}async function Gj(n){n.Va.set("Online")}async function Jj(n){n.Ia.forEach(((e,t)=>{pv(n,e)}))}async function Yj(n,e){rA(n),gv(n)?(n.Va.ha(e),mv(n)):n.Va.set("Unknown")}async function Qj(n,e,t){if(n.Va.set("Online"),e instanceof Fx&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(r){ue(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zd(n,r)}else if(e instanceof vd?n.da.Xe(e):e instanceof Ux?n.da.st(e):n.da.tt(e),!t.isEqual(Ae.min()))try{const r=await Xx(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.da.Tt(l);return c.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,p)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Gt.EMPTY_BYTE_STRING,m.snapshotVersion)),nA(o,h);const y=new ci(m.target,h,p,m.sequenceNumber);pv(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){ue(wo,"Failed to raise snapshot:",r),await zd(n,r)}}async function zd(n,e,t){if(!ll(e))throw e;n.Ea.add(1),await yc(n),n.Va.set("Offline"),t||(t=()=>Xx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(wo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await bf(n)}))}function sA(n,e){return e().catch((t=>zd(n,t,e)))}async function If(n){const e=Re(n),t=Si(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zy;for(;Xj(e);)try{const s=await Nj(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,Zj(e,s)}catch(s){await zd(e,s)}iA(e)&&oA(e)}function Xj(n){return ko(n)&&n.Ta.length<10}function Zj(n,e){n.Ta.push(e);const t=Si(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function iA(n){return ko(n)&&!Si(n).x_()&&n.Ta.length>0}function oA(n){Si(n).start()}async function e4(n){Si(n).ra()}async function t4(n){const e=Si(n);for(const t of n.Ta)e.ea(t.mutations)}async function n4(n,e,t){const r=n.Ta.shift(),s=ov.from(r,e,t);await sA(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await If(n)}async function r4(n,e){e&&Si(n).Y_&&await(async function(r,s){if((function(l){return MM(l)&&l!==Q.ABORTED})(s.code)){const o=r.Ta.shift();Si(r).B_(),await sA(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await If(r)}})(n,e),iA(n)&&oA(n)}async function yT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ue(wo,"RemoteStore received new credentials");const r=ko(t);t.Ea.add(3),await yc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await bf(t)}async function s4(n,e){const t=Re(n);e?(t.Ea.delete(2),await bf(t)):e||(t.Ea.add(2),await yc(t),t.Va.set("Unknown"))}function ul(n){return n.ma||(n.ma=(function(t,r,s){const o=Re(t);return o.sa(),new $j(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Gj.bind(null,n),Yo:Jj.bind(null,n),t_:Yj.bind(null,n),J_:Qj.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),gv(n)?mv(n):n.Va.set("Unknown")):(await n.ma.stop(),rA(n))}))),n.ma}function Si(n){return n.fa||(n.fa=(function(t,r,s){const o=Re(t);return o.sa(),new Bj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:e4.bind(null,n),t_:r4.bind(null,n),ta:t4.bind(null,n),na:n4.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await If(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(wo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new yv(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vv(n,e){if(vs("AsyncQueue",`${e}: ${n}`),ll(n))return new ce(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{static emptySet(e){return new $a(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=yu(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $a)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new $a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(){this.ga=new ct(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Za{constructor(e,t,r,s,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Za(e,t,$a.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class o4{constructor(){this.queries=_T(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Re(t),o=s.queries;s.queries=_T(),o.forEach(((l,c)=>{for(const h of c.ba)h.onError(r)}))})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function _T(){return new xo((n=>xx(n)),vf)}async function a4(n,e){const t=Re(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.Sa()&&e.Da()&&(r=2):(o=new i4,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=vv(l,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&_v(t)}async function l4(n,e){const t=Re(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function u4(n,e){const t=Re(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.ba)c.Fa(s)&&(r=!0);l.wa=s}}r&&_v(t)}function c4(n,e,t){const r=Re(n),s=r.queries.get(e);if(s)for(const o of s.ba)o.onError(t);r.queries.delete(e)}function _v(n){n.Ca.forEach((e=>{e.next()}))}var qg,wT;(wT=qg||(qg={})).Ma="default",wT.Cache="cache";class h4{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.key=e}}class lA{constructor(e){this.key=e}}class d4{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=Ax(e),this.tu=new $a(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new vT,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const v=s.get(m),T=_f(this.query,y)?y:null,b=!!v&&this.mutatedKeys.has(v.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let x=!1;v&&T?v.data.isEqual(T.data)?b!==R&&(r.track({type:3,doc:T}),x=!0):this.su(v,T)||(r.track({type:2,doc:T}),x=!0,(h&&this.eu(T,h)>0||p&&this.eu(T,p)<0)&&(c=!0)):!v&&T?(r.track({type:0,doc:T}),x=!0):v&&!T&&(r.track({type:1,doc:v}),x=!0,(h||p)&&(c=!0)),x&&(T?(l=l.add(T),o=R?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,y)=>(function(T,b){const R=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:x})}};return R(T)-R(b)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],h=this.Ya.size===0&&this.current&&!s?1:0,p=h!==this.Xa;return this.Xa=h,l.length!==0||p?{snapshot:new Za(this.query,e.tu,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new lA(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new aA(r))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Za.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const wv="SyncEngine";class f4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class p4{constructor(e){this.key=e,this.hu=!1}}class m4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new xo((c=>xx(c)),vf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ct(_e.comparator),this.Au=new Map,this.Vu=new uv,this.du={},this.mu=new Map,this.fu=Xa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g4(n,e,t=!0){const r=pA(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await uA(r,e,t,!0),s}async function y4(n,e){const t=pA(n);await uA(t,e,!0,!1)}async function uA(n,e,t,r){const s=await Oj(n.localStore,Vr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await v4(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&tA(n.remoteStore,s),c}async function v4(n,e,t,r,s){n.pu=(y,v,T)=>(async function(R,x,D,U){let O=x.view.ru(D);O.Ss&&(O=await dT(R.localStore,x.query,!1).then((({documents:P})=>x.view.ru(P,O))));const K=U&&U.targetChanges.get(x.targetId),Y=U&&U.targetMismatches.get(x.targetId)!=null,Z=x.view.applyChanges(O,R.isPrimaryClient,K,Y);return TT(R,x.targetId,Z.au),Z.snapshot})(n,y,v,T);const o=await dT(n.localStore,e,!0),l=new d4(e,o.ks),c=l.ru(o.documents),h=gc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(c,n.isPrimaryClient,h);TT(n,t,p.au);const m=new f4(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function _4(n,e,t){const r=Re(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!vf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&fv(r.remoteStore,s.targetId),Kg(r,s.targetId)})).catch(al)):(Kg(r,s.targetId),await Wg(r.localStore,s.targetId,!0))}async function w4(n,e){const t=Re(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fv(t.remoteStore,r.targetId))}async function E4(n,e,t){const r=k4(n);try{const s=await(function(l,c){const h=Re(l),p=st.now(),m=c.reduce(((T,b)=>T.add(b.key)),je());let y,v;return h.persistence.runTransaction("Locally write mutations","readwrite",(T=>{let b=_s(),R=je();return h.xs.getEntries(T,m).next((x=>{b=x,b.forEach(((D,U)=>{U.isValidDocument()||(R=R.add(D))}))})).next((()=>h.localDocuments.getOverlayedDocuments(T,b))).next((x=>{y=x;const D=[];for(const U of c){const O=NM(U,y.get(U.key).overlayedDocument);O!=null&&D.push(new Ao(U.key,O,yx(O.value.mapValue),Mr.exists(!0)))}return h.mutationQueue.addMutationBatch(T,p,D,c)})).next((x=>{v=x;const D=x.applyToLocalDocumentSet(y,R);return h.documentOverlayCache.saveOverlays(T,x.batchId,D)}))})).then((()=>({batchId:v.batchId,changes:Rx(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,h){let p=l.du[l.currentUser.toKey()];p||(p=new ct(Me)),p=p.insert(c,h),l.du[l.currentUser.toKey()]=p})(r,s.batchId,t),await vc(r,s.changes),await If(r.remoteStore)}catch(s){const o=vv(s,"Failed to persist write");t.reject(o)}}async function cA(n,e){const t=Re(n);try{const r=await Cj(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ke(l.hu,14607):s.removedDocuments.size>0&&(Ke(l.hu,42227),l.hu=!1))})),await vc(t,r,e)}catch(r){await al(r)}}function ET(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const h=Re(l);h.onlineState=c;let p=!1;h.queries.forEach(((m,y)=>{for(const v of y.ba)v.va(c)&&(p=!0)})),p&&_v(h)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function T4(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new ct(_e.comparator);l=l.insert(o,nn.newNoDocument(o,Ae.min()));const c=je().add(o),h=new Tf(Ae.min(),new Map,new ct(Me),l,c);await cA(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),Ev(r)}else await Wg(r.localStore,e,!1).then((()=>Kg(r,e,t))).catch(al)}async function S4(n,e){const t=Re(n),r=e.batch.batchId;try{const s=await Rj(t.localStore,e);dA(t,r,null),hA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vc(t,s)}catch(s){await al(s)}}async function b4(n,e,t){const r=Re(n);try{const s=await(function(l,c){const h=Re(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return h.mutationQueue.lookupMutationBatch(p,c).next((y=>(Ke(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(p,y)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>h.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);dA(r,e,t),hA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vc(r,s)}catch(s){await al(s)}}function hA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function dA(n,e,t){const r=Re(n);let s=r.du[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Kg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||fA(n,r)}))}function fA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(fv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Ev(n))}function TT(n,e,t){for(const r of t)r instanceof aA?(n.Vu.addReference(r.key,e),I4(n,r)):r instanceof lA?(ue(wv,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||fA(n,r.key)):Ie(19791,{wu:r})}function I4(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ue(wv,"New document in limbo: "+t),n.Eu.add(r),Ev(n))}function Ev(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(Ze.fromString(e)),r=n.fu.next();n.Au.set(r,new p4(t)),n.Ru=n.Ru.insert(t,r),tA(n.remoteStore,new ci(Vr(bx(t.path)),r,"TargetPurposeLimboResolution",mf.ce))}}async function vc(n,e,t){const r=Re(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,t).then((p=>{var m;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(p){s.push(p);const y=hv.Es(h.targetId,p);o.push(y)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(h,p){const m=Re(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>X.forEach(p,(v=>X.forEach(v.Ts,(T=>m.persistence.referenceDelegate.addReference(y,v.targetId,T))).next((()=>X.forEach(v.Is,(T=>m.persistence.referenceDelegate.removeReference(y,v.targetId,T)))))))))}catch(y){if(!ll(y))throw y;ue(dv,"Failed to update sequence numbers: "+y)}for(const y of p){const v=y.targetId;if(!y.fromCache){const T=m.vs.get(v),b=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(b);m.vs=m.vs.insert(v,R)}}})(r.localStore,o))}async function x4(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ue(wv,"User change. New user:",e.toKey());const r=await Qx(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new ce(Q.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(t,r.Ns)}}function A4(n,e){const t=Re(n),r=t.Au.get(e);if(r&&r.hu)return je().add(r.key);{let s=je();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function pA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T4.bind(null,e),e.Pu.J_=u4.bind(null,e.eventManager),e.Pu.yu=c4.bind(null,e.eventManager),e}function k4(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b4.bind(null,e),e}class Wd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return kj(this.persistence,new Ij,e.initialUser,this.serializer)}Cu(e){return new Yx(cv.Vi,this.serializer)}Du(e){return new Lj}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wd.provider={build:()=>new Wd};class R4 extends Wd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Bd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new cj(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Yx((r=>Bd.Vi(r,t)),this.serializer)}}class Gg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ET(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x4.bind(null,this.syncEngine),await s4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new o4})()}createDatastore(e){const t=Sf(e.databaseInfo.databaseId),r=Fj(e.databaseInfo);return Hj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,c){return new Kj(r,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>ET(this.syncEngine,t,0)),(function(){return mT.v()?new mT:new Vj})())}createSyncEngine(e,t){return(function(s,o,l,c,h,p,m){const y=new m4(s,o,l,c,h,p);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const o=Re(s);ue(wo,"RemoteStore shutting down."),o.Ea.add(5),await yc(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Gg.provider={build:()=>new Gg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class P4{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=tn.UNAUTHENTICATED,this.clientId=Xy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ue(bi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ue(bi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function zm(n,e){n.asyncQueue.verifyOperationInProgress(),ue(bi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Qx(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ST(n,e){n.asyncQueue.verifyOperationInProgress();const t=await N4(n);ue(bi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>yT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>yT(e.remoteStore,s))),n._onlineComponents=e}async function N4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(bi,"Using user provided OfflineComponentProvider");try{await zm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Q.FAILED_PRECONDITION||s.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;_o("Error using user provided cache. Falling back to memory cache: "+t),await zm(n,new Wd)}}else ue(bi,"Using default OfflineComponentProvider"),await zm(n,new R4(void 0));return n._offlineComponents}async function mA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(bi,"Using user provided OnlineComponentProvider"),await ST(n,n._uninitializedComponentsProvider._online)):(ue(bi,"Using default OnlineComponentProvider"),await ST(n,new Gg))),n._onlineComponents}function O4(n){return mA(n).then((e=>e.syncEngine))}async function D4(n){const e=await mA(n),t=e.eventManager;return t.onListen=g4.bind(null,e.syncEngine),t.onUnlisten=_4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=y4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=w4.bind(null,e.syncEngine),t}function L4(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,p){const m=new C4({next:v=>{m.Nu(),l.enqueueAndForget((()=>l4(o,y))),v.fromCache&&h.source==="server"?p.reject(new ce(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(v)},error:v=>p.reject(v)}),y=new h4(c,m,{includeMetadataChanges:!0,Ka:!0});return a4(o,y)})(await D4(n),n.asyncQueue,e,t,r))),r.promise}function V4(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((async()=>E4(await O4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4="ComponentProvider",bT=new Map;function j4(n,e,t,r,s){return new tM(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,gA(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="firestore.googleapis.com",IT=!0;class xT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yA,this.ssl=IT}else this.host=e.host,this.ssl=e.ssl??IT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Jx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lj)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new DV;switch(r.type){case"firstParty":return new jV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=bT.get(t);r&&(ue(M4,"Removing Datastore"),bT.delete(t),r.terminate())})(this),Promise.resolve()}}function U4(n,e,t,r={}){var p;n=$u(n,xf);const s=So(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Ky(`https://${c}`),Gy("Firestore",!0)),o.host!==yA&&o.host!==c&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:s,emulatorOptions:r};if(!go(h,l)&&(n._setSettings(h),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=tn.MOCK_USER;else{m=qI(r.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new tn(v)}n._authCredentials=new LV(new ix(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cl(this.firestore,e,this._query)}}class Mt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(fc(t,Mt._jsonSchema))return new Mt(e,r||null,new _e(Ze.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:At("string",Mt._jsonSchemaVersion),referencePath:At("string")};class mi extends cl{constructor(e,t,r){super(e,t,bx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new _e(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function Af(n,e,...t){if(n=on(n),ox("collection","path",e),n instanceof xf){const r=Ze.fromString(e,...t);return UE(r),new mi(n,null,r)}{if(!(n instanceof Mt||n instanceof mi))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ze.fromString(e,...t));return UE(r),new mi(n.firestore,null,r)}}function vA(n,e,...t){if(n=on(n),arguments.length===1&&(e=Xy.newId()),ox("doc","path",e),n instanceof xf){const r=Ze.fromString(e,...t);return jE(r),new Mt(n,null,new _e(r))}{if(!(n instanceof Mt||n instanceof mi))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ze.fromString(e,...t));return jE(r),new Mt(n.firestore,n instanceof mi?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="AsyncQueue";class kT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Zx(this,"async_queue_retry"),this._c=()=>{const r=Bm();r&&ue(AT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Bm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Bm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;ue(AT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vs("INTERNAL UNHANDLED ERROR: ",RT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=yv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ie(47125,{Pc:RT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function RT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class kf extends xf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new kT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kT(e),this._firestoreClient=void 0,await e}}}function F4(n,e){const t=typeof n=="object"?n:ff(),r=typeof n=="string"?n:Ld,s=df(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=zI("firestore");o&&U4(s,...o)}return s}function _A(n){if(n._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||$4(n),n._firestoreClient}function $4(n){var r,s,o,l;const e=n._freezeSettings(),t=j4(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new P4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(Gt.fromBase64String(e))}catch(t){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fc(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:At("string",$n._jsonSchemaVersion),bytes:At("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ur._jsonSchemaVersion}}static fromJSON(e){if(fc(e,Ur._jsonSchema))return new Ur(e.latitude,e.longitude)}}Ur._jsonSchemaVersion="firestore/geoPoint/1.0",Ur._jsonSchema={type:At("string",Ur._jsonSchemaVersion),latitude:At("number"),longitude:At("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fc(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hr(e.vectorValues);throw new ce(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:At("string",hr._jsonSchemaVersion),vectorValues:At("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=/^__.*__$/;class z4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new mc(e,this.data,t,this.fieldTransforms)}}function TA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:n})}}class Tv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Tv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Hd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(TA(this.dataSource)&&B4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class W4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sf(e)}createContext(e,t,r,s=!1){return new Tv({dataSource:e,methodName:t,targetDoc:r,path:Kt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SA(n){const e=n._freezeSettings(),t=Sf(n._databaseId);return new W4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function H4(n,e,t,r,s,o={}){const l=n.createContext(o.merge||o.mergeFields?2:0,e,t,s);xA("Data must be an object, but it was:",l,r);const c=bA(r,l);let h,p;if(o.merge)h=new or(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const v=Rf(e,y,t);if(!l.contains(v))throw new ce(Q.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);J4(m,v)||m.push(v)}h=new or(m),p=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,p=l.fieldTransforms;return new z4(new Fn(c),h,p)}function q4(n,e,t,r=!1){return Sv(t,n.createContext(r?4:3,e))}function Sv(n,e){if(IA(n=on(n)))return xA("Unsupported field value:",e,n),bA(n,e);if(n instanceof EA)return(function(r,s){if(!TA(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const c of r){let h=Sv(c,s.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return xM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=st.fromDate(r);return{timestampValue:$d(s.serializer,o)}}if(r instanceof st){const o=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$d(s.serializer,o)}}if(r instanceof Ur)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:$x(s.serializer,r._byteString)};if(r instanceof Mt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hr)return(function(l,c){const h=l instanceof hr?l.toArray():l;return{mapValue:{fields:{[mx]:{stringValue:gx},[Vd]:{arrayValue:{values:h.map((m=>{if(typeof m!="number")throw c.createError("VectorValues must only contain numeric values.");return sv(c.serializer,m)}))}}}}}})(r,s);if(Gx(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${pf(r)}`)})(n,e)}function bA(n,e){const t={};return ux(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(n,((r,s)=>{const o=Sv(s,e.childContextForField(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function IA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Ur||n instanceof $n||n instanceof Mt||n instanceof EA||n instanceof hr||Gx(n))}function xA(n,e,t){if(!IA(t)||!ax(t)){const r=pf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Rf(n,e,t){if((e=on(e))instanceof wA)return e._internalPath;if(typeof e=="string")return G4(n,e);throw Hd("Field path arguments must be of type string or ",n,!1,void 0,t)}const K4=new RegExp("[~\\*/\\[\\]]");function G4(n,e,t){if(e.search(K4)>=0)throw Hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wA(...e.split("."))._internalPath}catch{throw Hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Hd(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new ce(Q.INVALID_ARGUMENT,c+n+h)}function J4(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Io(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){var r,s,o;const t=(o=(s=(r=e.fields)==null?void 0:r[Vd].arrayValue)==null?void 0:s.values)==null?void 0:o.map((l=>_t(l.doubleValue)));return new hr(t)}convertGeoPoint(e){return new Ur(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=yf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=wi(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ze.fromString(e);Ke(Kx(r),9688,{name:e});const s=new Wu(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return s.isEqual(t)||vs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4 extends Y4{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}const CT="@firebase/firestore",PT="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Rf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class X4 extends AA{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ce(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bv{}class eU extends bv{}function tU(n,e,...t){let r=[];e instanceof bv&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((h=>h instanceof Iv)).length,c=o.filter((h=>h instanceof Cf)).length;if(l>1||l>0&&c>0)throw new ce(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Cf extends eU{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Cf(e,t,r)}_apply(e){const t=this._parse(e);return kA(e._query,t),new cl(e.firestore,e.converter,jg(e._query,t))}_parse(e){const t=SA(e.firestore);return(function(o,l,c,h,p,m,y){let v;if(p.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){OT(y,m);const b=[];for(const R of y)b.push(NT(h,o,R));v={arrayValue:{values:b}}}else v=NT(h,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||OT(y,m),v=q4(c,l,y,m==="in"||m==="not-in");return xt.create(p,m,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function nU(n,e,t){const r=e,s=Rf("where",n);return Cf._create(s,r,t)}class Iv extends bv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:dr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,o){let l=s;const c=o.getFlattenedFilters();for(const h of c)kA(l,h),l=jg(l,h)})(e._query,t),new cl(e.firestore,e.converter,jg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function NT(n,e,t){if(typeof(t=on(t))=="string"){if(t==="")throw new ce(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ix(e)&&t.indexOf("/")!==-1)throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ze.fromString(t));if(!_e.isDocumentKey(r))throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KE(n,new _e(r))}if(t instanceof Mt)return KE(n,t._key);throw new ce(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pf(t)}.`)}function OT(n,e){if(!Array.isArray(n)||n.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kA(n,e){const t=(function(s,o){for(const l of s)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function rU(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Yh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ba extends AA{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _d(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Rf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ba._jsonSchema={type:At("string",Ba._jsonSchemaVersion),bundleSource:At("string","DocumentSnapshot"),bundleName:At("string"),bundle:At("string")};class _d extends Ba{data(e={}){return super.data(e)}}class za{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Yh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new _d(this._firestore,this._userDataWriter,r.key,r,new Yh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ce(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const h=new _d(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Yh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new _d(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Yh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,m=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:sU(c.type),doc:h,oldIndex:p,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=za._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */za._jsonSchemaVersion="firestore/querySnapshot/1.0",za._jsonSchema={type:At("string",za._jsonSchemaVersion),bundleSource:At("string","QuerySnapshot"),bundleName:At("string"),bundle:At("string")};function Pf(n){n=$u(n,cl);const e=$u(n.firestore,kf),t=_A(e),r=new Q4(e);return Z4(n._query),L4(t,n._query).then((s=>new za(e,r,n,s)))}function iU(n){return RA($u(n.firestore,kf),[new iv(n._key,Mr.none())])}function oU(n,e){const t=$u(n.firestore,kf),r=vA(n),s=rU(n.converter,e),o=SA(n.firestore);return RA(t,[H4(o,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Mr.exists(!1))]).then((()=>r))}function RA(n,e){const t=_A(n);return V4(t,e)}(function(e,t=!0){OV(bo),yo(new vi("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new kf(new VV(r.getProvider("auth-internal")),new UV(l,r.getProvider("app-check-internal")),nM(l,s),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Lr(CT,PT,e),Lr(CT,PT,"esm2020")})();var aU="firebase",lU="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(aU,lU,"app");function CA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uU=CA,PA=new hc("auth","Firebase",CA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=new Jy("@firebase/auth");function cU(n,...e){qd.logLevel<=Ve.WARN&&qd.warn(`Auth (${bo}): ${n}`,...e)}function wd(n,...e){qd.logLevel<=Ve.ERROR&&qd.error(`Auth (${bo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(n,...e){throw xv(n,...e)}function Fr(n,...e){return xv(n,...e)}function NA(n,e,t){const r={...uU(),[e]:t};return new hc("auth","Firebase",r).create(e,{appName:n.name})}function gi(n){return NA(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PA.create(n,...e)}function be(n,e,...t){if(!n)throw xv(e,...t)}function ds(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wd(e),new Error(e)}function ws(n,e){n||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function hU(){return DT()==="http:"||DT()==="https:"}function DT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hU()||hL()||"connection"in navigator)?navigator.onLine:!0}function fU(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=lL()||dL()}get(){return dU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(n,e){ws(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gU=new _c(3e4,6e4);function Ro(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xi(n,e,t,r,s={}){return DA(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=dc({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...o};return cL()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&So(n.emulatorConfig.host)&&(p.credentials="include"),OA.fetch()(await LA(n,n.config.apiHost,t,c),p)})}async function DA(n,e,t){n._canInitEmulator=!1;const r={...pU,...e};try{const s=new vU(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Qh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Qh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Qh(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw NA(n,m,p);fr(n,m)}}catch(s){if(s instanceof qr)throw s;fr(n,"network-request-failed",{message:String(s)})}}async function Nf(n,e,t,r,s={}){const o=await xi(n,e,t,r,s);return"mfaPendingCredential"in o&&fr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function LA(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?Av(n.config,s):`${n.config.apiScheme}://${s}`;return mU.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function yU(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fr(this.auth,"network-request-failed")),gU.get())})}}function Qh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Fr(n,e,r);return s.customData._tokenResponse=t,s}function LT(n){return n!==void 0&&n.enterprise!==void 0}class _U{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yU(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function wU(n,e){return xi(n,"GET","/v2/recaptchaConfig",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(n,e){return xi(n,"POST","/v1/accounts:delete",e)}async function Kd(n,e){return xi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TU(n,e=!1){const t=on(n),r=await t.getIdToken(e),s=kv(r);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Ru(Wm(s.auth_time)),issuedAtTime:Ru(Wm(s.iat)),expirationTime:Ru(Wm(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Wm(n){return Number(n)*1e3}function kv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wd("JWT malformed, contained fewer than 3 sections"),null;try{const s=$I(t);return s?JSON.parse(s):(wd("Failed to decode base64 JWT payload"),null)}catch(s){return wd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function VT(n){const e=kv(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qr&&SU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function SU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ru(this.lastLoginAt),this.creationTime=Ru(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gd(n){var y;const e=n.auth,t=await n.getIdToken(),r=await Gu(n,Kd(e,{idToken:t}));be(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=(y=s.providerUserInfo)!=null&&y.length?VA(s.providerUserInfo):[],l=xU(n.providerData,o),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Yg(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function IU(n){const e=on(n);await Gd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xU(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function VA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(n,e){const t=await DA(n,{},async()=>{const r=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await LA(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&So(n.emulatorConfig.host)&&(h.credentials="include"),OA.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kU(n,e){return xi(n,"POST","/v2/accounts:revokeToken",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):VT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=VT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await AU(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new Wa;return r&&(be(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(be(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new bU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Gu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TU(this,e)}reload(){return IU(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Gd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(gi(this.auth));const e=await this.getIdToken();return await Gu(this,EU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:T,providerData:b,stsTokenManager:R}=t;be(y&&R,e,"internal-error");const x=Wa.fromJSON(this.name,R);be(typeof y=="string",e,"internal-error"),ei(r,e.name),ei(s,e.name),be(typeof v=="boolean",e,"internal-error"),be(typeof T=="boolean",e,"internal-error"),ei(o,e.name),ei(l,e.name),ei(c,e.name),ei(h,e.name),ei(p,e.name),ei(m,e.name);const D=new ar({uid:y,auth:e,email:s,emailVerified:v,displayName:r,isAnonymous:T,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:x,createdAt:p,lastLoginAt:m});return b&&Array.isArray(b)&&(D.providerData=b.map(U=>({...U}))),h&&(D._redirectEventId=h),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new Wa;s.updateFromServerResponse(t);const o=new ar({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];be(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?VA(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new Wa;c.updateFromIdToken(r);const h=new ar({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=new Map;function fs(n){ws(n instanceof Function,"Expected a class definition");let e=MT.get(n);return e?(ws(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,MT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}MA.type="NONE";const jT=MA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n,e,t){return`firebase:${n}:${e}:${t}`}class Ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Ed(this.userKey,s.apiKey,o),this.fullPersistenceKey=Ed("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kd(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ha(fs(jT),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||fs(jT);const l=Ed(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const m=await p._get(l);if(m){let y;if(typeof m=="string"){const v=await Kd(e,{idToken:m}).catch(()=>{});if(!v)break;y=await ar._fromGetAccountInfoResponse(e,v,m)}else y=ar._fromJSON(e,m);p!==o&&(c=y),o=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ha(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ha(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($A(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zA(e))return"Blackberry";if(WA(e))return"Webos";if(UA(e))return"Safari";if((e.includes("chrome/")||FA(e))&&!e.includes("edge/"))return"Chrome";if(BA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jA(n=sn()){return/firefox\//i.test(n)}function UA(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FA(n=sn()){return/crios\//i.test(n)}function $A(n=sn()){return/iemobile/i.test(n)}function BA(n=sn()){return/android/i.test(n)}function zA(n=sn()){return/blackberry/i.test(n)}function WA(n=sn()){return/webos/i.test(n)}function Rv(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RU(n=sn()){var e;return Rv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function CU(){return fL()&&document.documentMode===10}function HA(n=sn()){return Rv(n)||BA(n)||WA(n)||zA(n)||/windows phone/i.test(n)||$A(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n,e=[]){let t;switch(n){case"Browser":t=UT(sn());break;case"Worker":t=`${UT(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,e={}){return xi(n,"GET","/v2/passwordPolicy",Ro(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=6;class DU{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??OU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new FT(this),this.idTokenSubscription=new FT(this),this.beforeStateQueue=new PU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kd(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Gd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(gi(this));const t=e?on(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NU(this),t=new DU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await kU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&cU(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function hl(n){return on(n)}class FT{constructor(e){this.auth=e,this.observer=null,this.addObserver=EL(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Of={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VU(n){Of=n}function KA(n){return Of.loadJS(n)}function MU(){return Of.recaptchaEnterpriseScript}function jU(){return Of.gapiScript}function UU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class FU{constructor(){this.enterprise=new $U}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $U{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const BU="recaptcha-enterprise",GA="NO_RECAPTCHA";class zU{constructor(e){this.type=BU,this.auth=hl(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{wU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new _U(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;LT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(GA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&LT(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=MU();h.length!==0&&(h+=c),KA(h).then(()=>{s(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function $T(n,e,t,r=!1,s=!1){const o=new zU(n);let l;if(s)l=GA;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function BT(n,e,t,r,s){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await $T(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await $T(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n,e){const t=df(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(go(o,e??{}))return s;fr(s,"already-initialized")}return t.initialize({options:e})}function HU(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qU(n,e,t){const r=hl(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=JA(e),{host:l,port:c}=KU(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(go(p,r.config.emulator)&&go(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,So(l)?(Ky(`${o}//${l}${h}`),Gy("Auth",!0)):GU()}function JA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KU(n){const e=JA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:zT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:zT(l)}}}function zT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function GU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,t){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function JU(n,e){return xi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(n,e){return Nf(n,"POST","/v1/accounts:signInWithPassword",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(n,e){return Nf(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}async function XU(n,e){return Nf(n,"POST","/v1/accounts:signInWithEmailLink",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends Cv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ju(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ju(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return BT(e,t,"signInWithPassword",YU);case"emailLink":return QU(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return BT(e,r,"signUpPassword",JU);case"emailLink":return XU(e,{idToken:t,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(n,e){return Nf(n,"POST","/v1/accounts:signInWithIdp",Ro(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="http://localhost";class Eo extends Cv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Eo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new Eo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return qa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,qa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qa(e,t)}buildRequest(){const e={requestUri:ZU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tF(n){const e=pu(mu(n)).link,t=e?pu(mu(e)).deep_link_id:null,r=pu(mu(n)).deep_link_id;return(r?pu(mu(r)).link:null)||r||t||e||n}class Pv{constructor(e){const t=pu(mu(e)),r=t.apiKey??null,s=t.oobCode??null,o=eF(t.mode??null);be(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=tF(e);try{return new Pv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(){this.providerId=dl.PROVIDER_ID}static credential(e,t){return Ju._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Pv.parseLink(t);return be(r,"argument-error"),Ju._fromEmailAndCode(e,r.code,r.tenantId)}}dl.PROVIDER_ID="password";dl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";dl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends YA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends wc{constructor(){super("facebook.com")}static credential(e){return Eo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Eo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ii.credential(t,r)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends wc{constructor(){super("github.com")}static credential(e){return Eo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends wc{constructor(){super("twitter.com")}static credential(e,t){return Eo._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ai.credential(t,r)}catch{return null}}}ai.TWITTER_SIGN_IN_METHOD="twitter.com";ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ar._fromIdTokenResponse(e,r,s),l=WT(r);return new el({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=WT(r);return new el({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function WT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends qr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Jd(e,t,r,s)}}function QA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(n,o,e,r):o})}async function nF(n,e,t=!1){const r=await Gu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return el._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(n,e,t=!1){const{auth:r}=n;if(Un(r.app))return Promise.reject(gi(r));const s="reauthenticate";try{const o=await Gu(n,QA(r,s,e,n),t);be(o.idToken,r,"internal-error");const l=kv(o.idToken);be(l,r,"internal-error");const{sub:c}=l;return be(n.uid===c,r,"user-mismatch"),el._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&fr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(n,e,t=!1){if(Un(n.app))return Promise.reject(gi(n));const r="signIn",s=await QA(n,r,e),o=await el._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function sF(n,e){return XA(hl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(n){const e=hl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function oF(n,e,t){return Un(n.app)?Promise.reject(gi(n)):sF(on(n),dl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&iF(n),r})}function aF(n,e,t,r){return on(n).onIdTokenChanged(e,t,r)}function lF(n,e,t){return on(n).beforeAuthStateChanged(e,t)}function uF(n,e,t,r){return on(n).onAuthStateChanged(e,t,r)}function cF(n){return on(n).signOut()}const Yd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hF=1e3,dF=10;class ek extends ZA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);CU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dF):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ek.type="LOCAL";const fF=ek;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends ZA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tk.type="SESSION";const nk=tk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Df(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await pF(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Df.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=Nv("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const v=y;if(v.data.eventId===p)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function gF(n){$r().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function yF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function _F(){return rk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="firebaseLocalStorageDb",wF=1,Qd="firebaseLocalStorage",ik="fbase_key";class Ec{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lf(n,e){return n.transaction([Qd],e?"readwrite":"readonly").objectStore(Qd)}function EF(){const n=indexedDB.deleteDatabase(sk);return new Ec(n).toPromise()}function Qg(){const n=indexedDB.open(sk,wF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Qd,{keyPath:ik})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Qd)?e(r):(r.close(),await EF(),e(await Qg()))})})}async function HT(n,e,t){const r=Lf(n,!0).put({[ik]:e,value:t});return new Ec(r).toPromise()}async function TF(n,e){const t=Lf(n,!1).get(e),r=await new Ec(t).toPromise();return r===void 0?null:r.value}function qT(n,e){const t=Lf(n,!0).delete(e);return new Ec(t).toPromise()}const SF=800,bF=3;class ok{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>bF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Df._getInstance(_F()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await yF(),!this.activeServiceWorker)return;this.sender=new mF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qg();return await HT(e,Yd,"1"),await qT(e,Yd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>HT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>TF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>qT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Lf(s,!1).getAll();return new Ec(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ok.type="LOCAL";const IF=ok;new _c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xF(n,e){return e?fs(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov extends Cv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function AF(n){return XA(n.auth,new Ov(n),n.bypassAuthState)}function kF(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),rF(t,new Ov(n),n.bypassAuthState)}async function RF(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),nF(t,new Ov(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AF;case"linkViaPopup":case"linkViaRedirect":return RF;case"reauthViaPopup":case"reauthViaRedirect":return kF;default:fr(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF=new _c(2e3,1e4);class Ma extends ak{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Ma.currentPopupAction&&Ma.currentPopupAction.cancel(),Ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=Nv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CF.get())};e()}}Ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF="pendingRedirect",Td=new Map;class NF extends ak{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Td.get(this.auth._key());if(!e){try{const r=await OF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Td.set(this.auth._key(),e)}return this.bypassAuthState||Td.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OF(n,e){const t=VF(e),r=LF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function DF(n,e){Td.set(n._key(),e)}function LF(n){return fs(n._redirectPersistence)}function VF(n){return Ed(PF,n.config.apiKey,n.name)}async function MF(n,e,t=!1){if(Un(n.app))return Promise.reject(gi(n));const r=hl(n),s=xF(r,e),l=await new NF(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=600*1e3;class UF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!lk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jF&&this.cachedEventUids.clear(),this.cachedEventUids.has(KT(e))}saveEventToCache(e){this.cachedEventUids.add(KT(e)),this.lastProcessedEventTime=Date.now()}}function KT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lk({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(n,e={}){return xi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zF=/^https?/;async function WF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await $F(n);for(const t of e)try{if(HF(t))return}catch{}fr(n,"unauthorized-domain")}function HF(n){const e=Jg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!zF.test(t))return!1;if(BF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=new _c(3e4,6e4);function GT(){const n=$r().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KF(n){return new Promise((e,t)=>{var s,o,l;function r(){GT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GT(),t(Fr(n,"network-request-failed"))},timeout:qF.get()})}if((o=(s=$r().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=$r().gapi)!=null&&l.load)r();else{const c=UU("iframefcb");return $r()[c]=()=>{gapi.load?r():t(Fr(n,"network-request-failed"))},KA(`${jU()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function GF(n){return Sd=Sd||KF(n),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF=new _c(5e3,15e3),YF="__/auth/iframe",QF="emulator/auth/iframe",XF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function e3(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Av(e,QF):`https://${n.config.authDomain}/${YF}`,r={apiKey:e.apiKey,appName:n.name,v:bo},s=ZF.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${dc(r).slice(1)}`}async function t3(n){const e=await GF(n),t=$r().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:e3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XF,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Fr(n,"network-request-failed"),c=$r().setTimeout(()=>{o(l)},JF.get());function h(){$r().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},r3=500,s3=600,i3="_blank",o3="http://localhost";class JT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function a3(n,e,t,r=r3,s=s3){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...n3,width:r.toString(),height:s.toString(),top:o,left:l},p=sn().toLowerCase();t&&(c=FA(p)?i3:t),jA(p)&&(e=e||o3,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[T,b])=>`${v}${T}=${b},`,"");if(RU(p)&&c!=="_self")return l3(e||"",c),new JT(null);const y=window.open(e||"",c,m);be(y,n,"popup-blocked");try{y.focus()}catch{}return new JT(y)}function l3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3="__/auth/handler",c3="emulator/auth/handler",h3=encodeURIComponent("fac");async function YT(n,e,t,r,s,o){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:bo,eventId:s};if(e instanceof YA){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",wL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof wc){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),p=h?`#${h3}=${encodeURIComponent(h)}`:"";return`${d3(n)}?${dc(c).slice(1)}${p}`}function d3({config:n}){return n.emulator?Av(n,c3):`https://${n.authDomain}/${u3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="webStorageSupport";class f3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nk,this._completeRedirectFn=MF,this._overrideRedirectResult=DF}async _openPopup(e,t,r,s){var l;ws((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await YT(e,t,r,Jg(),s);return a3(e,o,Nv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await YT(e,t,r,Jg(),s);return gF(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ws(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await t3(e),r=new UF(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hm,{type:Hm},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[Hm];o!==void 0&&t(!!o),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=WF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HA()||UA()||Rv()}}const p3=f3;var QT="@firebase/auth",XT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y3(n){yo(new vi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;be(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qA(n)},p=new LU(r,s,o,h);return HU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yo(new vi("auth-internal",e=>{const t=hl(e.getProvider("auth").getImmediate());return(r=>new m3(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lr(QT,XT,g3(n)),Lr(QT,XT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3=300,_3=HI("authIdTokenMaxAge")||v3;let ZT=null;const w3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>_3)return;const s=t==null?void 0:t.token;ZT!==s&&(ZT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function E3(n=ff()){const e=df(n,"auth");if(e.isInitialized())return e.getImmediate();const t=WU(n,{popupRedirectResolver:p3,persistence:[IF,fF,nk]}),r=HI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=w3(o.toString());lF(t,l,()=>l(t.currentUser)),aF(t,c=>l(c))}}const s=BI("auth");return s&&qU(t,`http://${s}`),t}function T3(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}VU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Fr("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",T3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y3("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="firebasestorage.googleapis.com",S3="storageBucket",b3=120*1e3,I3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ai=class ck extends qr{constructor(e,t,r=0){super(qm(e),`Firebase Storage: ${t} (${qm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ck.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Hr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Hr||(Hr={}));function qm(n){return"storage/"+n}function x3(){const n="An unknown error occurred, please check the error payload for server response.";return new Ai(Hr.UNKNOWN,n)}function A3(){return new Ai(Hr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function k3(){return new Ai(Hr.CANCELED,"User canceled the upload/download.")}function R3(n){return new Ai(Hr.INVALID_URL,"Invalid URL '"+n+"'.")}function C3(n){return new Ai(Hr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function eS(n){return new Ai(Hr.INVALID_ARGUMENT,n)}function hk(){return new Ai(Hr.APP_DELETED,"The Firebase app was deleted.")}function P3(n){return new Ai(Hr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=lr.makeFromUrl(e,t)}catch{return new lr(e,"")}if(r.path==="")return r;throw C3(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const m="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",T=new RegExp(`^https?://${y}/${m}/b/${s}/o${v}`,"i"),b={bucket:1,path:3},R=t===uk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",D=new RegExp(`^https?://${R}/${s}/${x}`,"i"),O=[{regex:c,indices:h,postModify:o},{regex:T,indices:b,postModify:p},{regex:D,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<O.length;K++){const Y=O[K],Z=Y.regex.exec(e);if(Z){const P=Z[Y.indices.bucket];let A=Z[Y.indices.path];A||(A=""),r=new lr(P,A),Y.postModify(r);break}}if(r==null)throw R3(e);return r}}class N3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function m(...x){p||(p=!0,e.apply(null,x))}function y(x){s=setTimeout(()=>{s=null,n(T,h())},x)}function v(){o&&clearTimeout(o)}function T(x,...D){if(p){v();return}if(x){v(),m.call(null,x,...D);return}if(h()||l){v(),m.call(null,x,...D);return}r<64&&(r*=2);let O;c===1?(c=2,O=0):O=(r+Math.random())*1e3,y(O)}let b=!1;function R(x){b||(b=!0,v(),!p&&(s!==null?(x||(c=2),clearTimeout(s),y(0)):x||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,R(!0)},t),R}function D3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(n){return n!==void 0}function tS(n,e,t,r){if(r<e)throw eS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw eS(`Invalid value for '${n}'. Expected ${t} or less.`)}function V3(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Xd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Xd||(Xd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,t,r,s,o,l,c,h,p,m,y,v=!0,T=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=m,this.connectionFactory_=y,this.retry=v,this.isUsingEmulator=T,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,R)=>{this.resolve_=b,this.reject_=R,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Xh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Xd.NO_ERROR,h=o.getStatus();if(!c||M3(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Xd.ABORT;r(!1,new Xh(!1,null,m));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Xh(p,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());L3(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=x3();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(s.canceled){const h=this.appDelete_?hk():k3();l(h)}else{const h=A3();l(h)}};this.canceled_?t(!1,new Xh(!1,null,!0)):this.backoffId_=O3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&D3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function U3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function F3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function $3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function B3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function z3(n,e,t,r,s,o,l=!0,c=!1){const h=V3(n.urlParams),p=n.url+h,m=Object.assign({},n.headers);return $3(m,e),U3(m,t),F3(m,o),B3(m,r),new j3(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function H3(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this._service=e,t instanceof lr?this._location=t:this._location=lr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zd(e,t)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return H3(this._location.path)}get storage(){return this._service}get parent(){const e=W3(this._location.path);if(e===null)return null;const t=new lr(this._location.bucket,e);return new Zd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw P3(e)}}function nS(n,e){const t=e==null?void 0:e[S3];return t==null?null:lr.makeFromBucketSpec(t,n)}function q3(n,e,t,r={}){n.host=`${e}:${t}`;const s=So(e);s&&(Ky(`https://${n.host}/b`),Gy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:qI(o,n.app.options.projectId))}class K3{constructor(e,t,r,s,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=uk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=b3,this._maxUploadRetryTime=I3,this._requests=new Set,s!=null?this._bucket=lr.makeFromBucketSpec(s,this._host):this._bucket=nS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=nS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zd(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new N3(hk());{const l=z3(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const rS="@firebase/storage",sS="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="storage";function G3(n=ff(),e){n=on(n);const r=df(n,dk).getImmediate({identifier:e}),s=zI("storage");return s&&J3(r,...s),r}function J3(n,e,t,r={}){q3(n,e,t,r)}function Y3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new K3(t,r,s,e,bo)}function Q3(){yo(new vi(dk,Y3,"PUBLIC").setMultipleInstances(!0)),Lr(rS,sS,""),Lr(rS,sS,"esm2020")}Q3();const X3={apiKey:"AIzaSyDoMv7fz9vUbyOXhiNUdgEfIWLgiNe7zRw",authDomain:"infinity-vibe.firebaseapp.com",projectId:"infinity-vibe",storageBucket:"infinity-vibe.firebasestorage.app",messagingSenderId:"52478226145",appId:"1:52478226145:web:3605eaaaa6fb6e371f11a0",measurementId:"G-EGYX83Z6EJ"},Dv=TV().length?ff():JI(X3),Yu=F4(Dv),Xg=E3(Dv);G3(Dv);function Z3(){const n=To(),[e,t]=M.useState([]),[r,s]=M.useState(null),[o,l]=M.useState(!0),[c,h]=M.useState(null),{isInWishlist:p,toggleWishlist:m}=cf();M.useEffect(()=>{(async()=>{l(!0),h(null);try{const b=(await Pf(Af(Yu,"products"))).docs.map(R=>{const x=R.data();return{id:R.id,...x}});t(b)}catch(T){console.error(T),h("Failed to load featured products.")}finally{l(!1)}})()},[]);const y=e.slice(0,4);return I.jsx("section",{className:"py-24 bg-black",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs(ye.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[I.jsx("h2",{className:"text-4xl md:text-6xl mb-4 tracking-tight",children:"FEATURED COLLECTION"}),I.jsx("p",{className:"text-gray-400 tracking-wide",children:"Limited drops. Exclusive pieces."})]}),o?I.jsx("div",{className:"py-12 text-center",children:I.jsx("p",{className:"text-gray-500 tracking-widest text-sm",children:"LOADING FEATURED PRODUCTS..."})}):c?I.jsx("div",{className:"py-12 text-center",children:I.jsx("p",{className:"text-red-400 tracking-widest text-sm",children:c})}):I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:y.map((v,T)=>I.jsxs(ye.div,{className:"group relative overflow-hidden bg-zinc-900 cursor-pointer",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:T*.1},onMouseEnter:()=>s(v.id),onMouseLeave:()=>s(null),children:[v.badge&&I.jsx("div",{className:"absolute top-4 left-4 z-10 bg-white text-black px-3 py-1 text-xs tracking-widest",children:v.badge}),I.jsx(ye.button,{className:"absolute top-4 right-4 z-10 bg-black/50 backdrop-blur-sm p-2 rounded-full",onClick:()=>m(v.id),whileHover:{scale:1.1},whileTap:{scale:.9},children:I.jsx(Ou,{size:20,className:`transition-colors ${p(v.id)?"fill-white text-white":"text-white"}`})}),I.jsx("div",{className:"aspect-[3/4] overflow-hidden",children:I.jsx(ye.img,{src:v.image,alt:v.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500",animate:{scale:r===v.id?1.1:1},transition:{duration:.6}})}),I.jsxs(ye.div,{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/95 to-transparent p-6",initial:{opacity:0,y:20},animate:{opacity:r===v.id?1:0,y:r===v.id?0:20},transition:{duration:.3},children:[I.jsx("h3",{className:"text-lg tracking-widest mb-2",children:v.name}),I.jsx("p",{className:"text-2xl mb-3",children:v.price}),I.jsx("button",{onClick:b=>{b.stopPropagation(),m(v.id)},className:"mt-1 w-full border border-white/40 text-[10px] tracking-[0.2em] py-2 hover:bg-white hover:text-black transition-colors",children:p(v.id)?"REMOVE FROM WISHLIST":"ADD TO WISHLIST"})]})]},v.id))}),I.jsx(ye.div,{className:"text-center mt-12",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:.4},children:I.jsx(ye.button,{className:"px-12 py-4 border-2 border-white hover:bg-white hover:text-black transition-all duration-300 tracking-widest text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"VIEW ALL PRODUCTS"})})]})})}function e6(){return I.jsx("section",{className:"py-24 bg-black",children:I.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center",children:[I.jsxs(ye.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[I.jsxs("h2",{className:"text-4xl md:text-6xl mb-6 tracking-tight leading-tight",children:["THIS IS MORE",I.jsx("br",{}),"THAN FASHION."]}),I.jsx("div",{className:"w-20 h-px bg-white mb-8"}),I.jsx("p",{className:"text-lg text-gray-400 mb-6 leading-relaxed",children:"We create pieces that speak louder than words. Every stitch, every fabric choice, every design decision is intentional. This isn't about following the crowdit's about defining your own path."}),I.jsx("p",{className:"text-lg text-gray-400 mb-8 leading-relaxed",children:"Born from the streets, refined in the studio. Infinity Vibe represents the intersection of raw authenticity and premium craftsmanship. We don't compromise on quality, and neither should you."}),I.jsx("blockquote",{className:"border-l-2 border-white pl-6 py-2 italic text-xl mb-8",children:'"Wear who you are."'}),I.jsx(ye.button,{className:"px-10 py-4 bg-white text-black tracking-widest text-sm hover:bg-transparent hover:text-white border-2 border-white transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"OUR STORY"})]}),I.jsxs(ye.div,{className:"relative",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[I.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:I.jsx("img",{src:"https://images.unsplash.com/photo-1621423938441-5a7346cb2213?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtaW5pbWFsJTIwZmFzaGlvbiUyMHBob3RvZ3JhcGh5JTIwYnd8ZW58MXx8fHwxNzcxOTk3MTg0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",alt:"Brand Story",className:"w-full h-full object-cover grayscale"})}),I.jsx("div",{className:"absolute -bottom-6 -right-6 w-32 h-32 border-2 border-white/20 -z-10"})]})]})})})}const t6=[{icon:L1,title:"Premium Quality Fabrics",description:"Sourced from the finest materials worldwide"},{icon:Q1,title:"Limited Edition Drops",description:"Exclusive pieces, never mass-produced"},{icon:H1,title:"Shipping & Delivery",description:"Coming soon for online orders"},{icon:M1,title:"Returns & Exchanges",description:"Coming soon with flexible options"}];function n6(){return I.jsx("section",{className:"py-24 bg-zinc-950",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs(ye.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[I.jsx("h2",{className:"text-4xl md:text-6xl mb-4 tracking-tight",children:"WHY CHOOSE INFINITY VIBE"}),I.jsx("p",{className:"text-gray-400 tracking-wide",children:"Premium quality meets uncompromising style"})]}),I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:t6.map((n,e)=>I.jsxs(ye.div,{className:"text-center p-8 border border-white/10 hover:border-white/30 transition-all duration-300 group",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.1},whileHover:{y:-10},children:[I.jsx(ye.div,{className:"inline-flex items-center justify-center w-16 h-16 border-2 border-white mb-6 group-hover:bg-white group-hover:text-black transition-all duration-300",whileHover:{rotate:360},transition:{duration:.6},children:I.jsx(n.icon,{size:28,strokeWidth:1.5})}),I.jsx("h3",{className:"text-lg tracking-widest mb-3",children:n.title}),I.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:n.description})]},e))})]})})}const r6=[{id:1,name:"Vijay S.",review:"The fit is insane. Pure quality.",rating:5},{id:2,name:"Tharun kumar K.",review:"Minimal. Bold. Perfect.",rating:5},{id:3,name:"Zubair",review:"Feels luxury. Worth every penny.",rating:5}];function s6(){return I.jsx("section",{className:"py-24 bg-black",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs(ye.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[I.jsx("h2",{className:"text-4xl md:text-6xl mb-4 tracking-tight",children:"WHAT THEY SAY"}),I.jsx("p",{className:"text-gray-400 tracking-wide",children:"Real people. Real experiences."})]}),I.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:r6.map((n,e)=>I.jsxs(ye.div,{className:"bg-zinc-900 p-8 border border-white/10 hover:border-white/30 transition-all duration-300",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.1},whileHover:{y:-5},children:[I.jsx("div",{className:"flex gap-1 mb-6",children:[...Array(n.rating)].map((t,r)=>I.jsx(z1,{size:16,fill:"white",strokeWidth:0},r))}),I.jsxs("p",{className:"text-xl mb-6 italic leading-relaxed",children:['"',n.review,'"']}),I.jsx("p",{className:"text-sm text-gray-400 tracking-widest",children:n.name})]},n.id))}),I.jsx(ye.div,{className:"text-center mt-12",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:.4},children:I.jsx("p",{className:"text-gray-400 text-sm",children:" 4.9/5 from 2,847 reviews"})})]})})}function i6(){return I.jsxs("section",{className:"relative py-32 bg-black overflow-hidden",children:[I.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),I.jsx("div",{className:"relative container mx-auto px-6 lg:px-12 text-center",children:I.jsxs(ye.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[I.jsxs("h2",{className:"text-5xl md:text-7xl lg:text-8xl mb-8 tracking-tight leading-tight",children:["READY TO OWN",I.jsx("br",{}),"THE STREET?"]}),I.jsx("p",{className:"text-xl text-gray-400 mb-12 max-w-2xl mx-auto",children:"Join thousands who've already made the switch to premium."}),I.jsx(ye.button,{className:"px-16 py-5 bg-white text-black tracking-widest text-sm hover:bg-transparent hover:text-white border-2 border-white transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"SHOP NOW"})]})})]})}function o6(){const[n,e]=M.useState(""),t=r=>{r.preventDefault(),console.log("Newsletter signup:",n),e("")};return I.jsx("section",{className:"py-24 bg-zinc-950",children:I.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:I.jsxs(ye.div,{className:"max-w-3xl mx-auto text-center",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[I.jsx("h2",{className:"text-4xl md:text-6xl mb-6 tracking-tight",children:"JOIN THE MOVEMENT."}),I.jsx("p",{className:"text-lg text-gray-400 mb-10",children:"Get exclusive drops before anyone else. Be the first to know about new collections, limited releases, and insider access."}),I.jsxs("form",{onSubmit:t,className:"flex flex-col sm:flex-row gap-4",children:[I.jsx("input",{type:"email",value:n,onChange:r=>e(r.target.value),placeholder:"Enter your email",className:"flex-1 px-6 py-4 bg-black border-2 border-white/20 focus:border-white text-white placeholder:text-gray-500 outline-none transition-all duration-300",required:!0}),I.jsxs(ye.button,{type:"submit",className:"px-10 py-4 bg-white text-black tracking-widest text-sm hover:bg-transparent hover:text-white border-2 border-white transition-all duration-300 flex items-center justify-center gap-2 whitespace-nowrap",whileHover:{scale:1.05},whileTap:{scale:.95},children:["GET EARLY ACCESS",I.jsx(A1,{size:18})]})]}),I.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"We respect your privacy. Unsubscribe at any time."})]})})})}const a6=["https://images.unsplash.com/photo-1635650805015-2fa50682873a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx1cmJhbiUyMHN0cmVldHdlYXIlMjBzdHlsZXxlbnwxfHx8fDE3NzE5NTgwODV8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1645997098653-ed4519760b10?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb25vY2hyb21lJTIwZmFzaGlvbiUyMHBob3RvZ3JhcGh5fGVufDF8fHx8MTc3MTkxNjQ5N3ww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1759933318666-97a7e86c4d76?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxibGFjayUyMGNsb3RoaW5nJTIwYnJhbmQlMjBhZXN0aGV0aWN8ZW58MXx8fHwxNzcxOTk3MTg0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1641137806473-5fe07dd62d63?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx1cmJhbiUyMGZhc2hpb24lMjBlZGl0b3JpYWx8ZW58MXx8fHwxNzcxOTk3MTg0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/flagged/photo-1553965860-a53f9a484a3b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdHJlZXR3ZWFyJTIwaW5zdGFncmFtJTIwZmVlZHxlbnwxfHx8fDE3NzE5OTcxODR8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1601071824666-dc1fb5c6169d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxsdXh1cnklMjBmYXNoaW9uJTIwcHJvZHVjdCUyMGJsYWNrfGVufDF8fHx8MTc3MTk5NzE3OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"];function l6(){return I.jsx("section",{className:"py-24 bg-black",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs(ye.div,{className:"text-center mb-12",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[I.jsx("h2",{className:"text-4xl md:text-6xl mb-6 tracking-tight",children:"#WEARINFINITYVIBE"}),I.jsxs("a",{href:"https://instagram.com/infinity_vibe.1",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[I.jsx(ng,{size:24}),I.jsx("span",{className:"tracking-widest",children:"FOLLOW US @Infinity_vibe.1"})]})]}),I.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 md:gap-4",children:a6.map((n,e)=>I.jsxs(ye.a,{href:"https://instagram.com/infinity_vibe.1",target:"_blank",rel:"noopener noreferrer",className:"aspect-square overflow-hidden group cursor-pointer relative",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.4,delay:e*.05},whileHover:{scale:.95},children:[I.jsx("img",{src:n,alt:`Instagram post ${e+1}`,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500"}),I.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all duration-300 flex items-center justify-center",children:I.jsx(ng,{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",size:32})})]},e))})]})})}function u6(){return M.useEffect(()=>{document.documentElement.style.scrollBehavior="smooth"},[]),I.jsxs(I.Fragment,{children:[I.jsx(Y2,{}),I.jsx(Z3,{}),I.jsx(e6,{}),I.jsx(n6,{}),I.jsx(s6,{}),I.jsx(i6,{}),I.jsx(o6,{}),I.jsx(l6,{})]})}function c6(){const[n,e]=M.useState([]),[t,r]=M.useState(null),[s,o]=M.useState("All"),[l,c]=M.useState(!0),[h,p]=M.useState(null),{isInWishlist:m,toggleWishlist:y}=cf();M.useEffect(()=>{window.scrollTo(0,0)},[]),M.useEffect(()=>{(async()=>{c(!0),p(null);try{const x=(await Pf(Af(Yu,"products"))).docs.map(D=>{const U=D.data();return{id:D.id,...U}});e(x)}catch(R){console.error(R),p("Failed to load products.")}finally{c(!1)}})()},[]);const v=["All",...Array.from(new Set(n.map(b=>b.category)))],T=s==="All"?n:n.filter(b=>b.category===s);return I.jsx("div",{className:"bg-black pt-32 pb-24",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6",children:[I.jsxs(ye.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-5xl md:text-7xl mb-4 tracking-tighter",children:"ALL COLLECTIONS"}),I.jsx("p",{className:"text-gray-400 tracking-widest text-sm",children:"DISCOVER OUR COMPLETE ARCHIVE"})]}),I.jsx(ye.div,{className:"flex items-center gap-4 overflow-x-auto pb-2 no-scrollbar",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:v.map(b=>I.jsx("button",{onClick:()=>o(b),className:`px-6 py-2 text-xs tracking-widest border transition-all duration-300 whitespace-nowrap ${s===b?"bg-white text-black border-white":"bg-transparent text-white border-white/20 hover:border-white"}`,children:b.toUpperCase()},b))})]}),l?I.jsx("div",{className:"py-24 text-center",children:I.jsx("p",{className:"text-gray-500 tracking-widest",children:"LOADING PRODUCTS..."})}):h?I.jsx("div",{className:"py-24 text-center",children:I.jsx("p",{className:"text-red-400 tracking-widest",children:h})}):I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12",children:T.map((b,R)=>I.jsxs(ye.div,{className:"group relative overflow-hidden bg-zinc-900 cursor-pointer",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:R*.05},onMouseEnter:()=>r(b.id),onMouseLeave:()=>r(null),children:[b.badge&&I.jsx("div",{className:"absolute top-4 left-4 z-10 bg-white text-black px-3 py-1 text-[10px] tracking-widest font-bold",children:b.badge}),I.jsx(ye.button,{className:"absolute top-4 right-4 z-10 bg-black/50 backdrop-blur-md p-2 rounded-full border border-white/10",onClick:x=>{x.stopPropagation(),y(b.id)},whileHover:{scale:1.1},whileTap:{scale:.9},children:I.jsx(Ou,{size:18,className:`transition-colors ${m(b.id)?"fill-white text-white":"text-white"}`})}),I.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-zinc-800",children:I.jsx(ye.img,{src:b.image,alt:b.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",animate:{scale:t===b.id?1.1:1},transition:{duration:.8,ease:"easeOut"}})}),I.jsx(ye.div,{className:"absolute bottom-0 left-0 right-0 p-6 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500",children:I.jsxs("div",{className:"flex flex-col gap-2",children:[I.jsx("div",{className:"flex items-center justify-between",children:I.jsx("span",{className:"text-[10px] tracking-[0.2em] text-gray-400 uppercase",children:b.category})}),I.jsx("h3",{className:"text-lg tracking-widest leading-tight",children:b.name}),I.jsx("p",{className:"text-2xl font-light",children:b.price})]})}),I.jsxs("div",{className:"p-4 bg-zinc-900 group-hover:opacity-0 transition-opacity duration-300",children:[I.jsxs("div",{className:"flex justify-between items-start mb-1",children:[I.jsx("h3",{className:"text-sm tracking-widest truncate mr-2",children:b.name}),I.jsx("span",{className:"text-sm",children:b.price})]}),I.jsx("p",{className:"text-[10px] tracking-widest text-gray-500 uppercase mb-3",children:b.category}),I.jsx("button",{onClick:x=>{x.stopPropagation(),y(b.id)},className:"mt-1 w-full border border-white/30 text-[10px] tracking-[0.2em] py-2 hover:bg-white hover:text-black transition-colors",children:m(b.id)?"REMOVE FROM WISHLIST":"ADD TO WISHLIST"})]})]},b.id))}),!l&&!h&&T.length===0&&I.jsx("div",{className:"py-24 text-center",children:I.jsx("p",{className:"text-gray-500 tracking-widest",children:"NO PRODUCTS FOUND IN THIS CATEGORY."})})]})})}function h6(){const n=To(),[e,t]=M.useState([]),[r,s]=M.useState(!0),[o,l]=M.useState(null),{wishlist:c,toggleWishlist:h}=cf();M.useEffect(()=>{window.scrollTo(0,0)},[]),M.useEffect(()=>{(async()=>{if(c.size===0){t([]),s(!1);return}s(!0),l(null);try{const y=tU(Af(Yu,"products"),nU("__name__","in",Array.from(c))),T=(await Pf(y)).docs.map(b=>{const R=b.data();return{id:b.id,...R}});t(T)}catch(y){console.error(y),l("Failed to load wishlist products.")}finally{s(!1)}})()},[c]);const p=e.filter(m=>c.has(m.id));return I.jsx("div",{className:"bg-black pt-32 pb-24",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs("div",{className:"flex items-center gap-6 mb-12",children:[I.jsx(ye.button,{onClick:()=>n(-1),className:"text-white hover:text-gray-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:I.jsx(I1,{size:24})}),I.jsxs(ye.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},children:[I.jsx("h1",{className:"text-5xl md:text-7xl mb-4 tracking-tighter",children:"WISHLIST"}),I.jsxs("p",{className:"text-gray-400 tracking-widest text-sm",children:[c.size," ",c.size===1?"ITEM":"ITEMS"]})]})]}),r?I.jsx("div",{className:"py-24 text-center",children:I.jsx("p",{className:"text-gray-500 tracking-widest",children:"LOADING WISHLIST..."})}):o?I.jsx("div",{className:"py-24 text-center",children:I.jsx("p",{className:"text-red-400 tracking-widest",children:o})}):p.length===0?I.jsxs("div",{className:"py-24 text-center",children:[I.jsx(Ou,{size:64,className:"mx-auto mb-6 text-gray-600"}),I.jsx("h2",{className:"text-2xl mb-4 tracking-widest",children:"YOUR WISHLIST IS EMPTY"}),I.jsx("p",{className:"text-gray-400 mb-8 tracking-widest text-sm",children:"START ADDING ITEMS YOU LOVE"}),I.jsx(ye.button,{className:"px-8 py-4 border border-white hover:bg-white hover:text-black transition-all duration-300 tracking-widest text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"BROWSE PRODUCTS"})]}):I.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12",children:p.map((m,y)=>I.jsxs(ye.div,{className:"group relative overflow-hidden bg-zinc-900 cursor-pointer",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:y*.05},children:[m.badge&&I.jsx("div",{className:"absolute top-4 left-4 z-10 bg-white text-black px-3 py-1 text-[10px] tracking-widest font-bold",children:m.badge}),I.jsx(ye.button,{className:"absolute top-4 right-4 z-10 bg-black/50 backdrop-blur-md p-2 rounded-full border border-white/10",onClick:v=>{v.stopPropagation(),h(m.id)},whileHover:{scale:1.1},whileTap:{scale:.9},children:I.jsx(Ou,{size:18,className:"fill-white text-white"})}),I.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-zinc-800",children:I.jsx("img",{src:m.image,alt:m.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700"})}),I.jsxs("div",{className:"p-4 bg-zinc-900",children:[I.jsxs("div",{className:"flex justify-between items-start mb-1",children:[I.jsx("h3",{className:"text-sm tracking-widest truncate mr-2",children:m.name}),I.jsx("span",{className:"text-sm",children:m.price})]}),I.jsx("p",{className:"text-[10px] tracking-widest text-gray-500 uppercase mb-3",children:m.category}),I.jsx("button",{onClick:v=>{v.stopPropagation(),h(m.id)},className:"w-full border border-white/30 text-[10px] tracking-[0.2em] py-2 hover:bg-white hover:text-black transition-colors",children:"REMOVE FROM WISHLIST"})]})]},m.id))})]})})}function Vf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function d6(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{p(r.next(m))}catch(y){l(y)}}function h(m){try{p(r.throw(m))}catch(y){l(y)}}function p(m){m.done?o(m.value):s(m.value).then(c,h)}p((r=r.apply(n,e||[])).next())})}const f6=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Lv extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class p6 extends Lv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class iS extends Lv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oS extends Lv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Zg||(Zg={}));class m6{constructor(e,{headers:t={},customFetch:r,region:s=Zg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=f6(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return d6(this,arguments,void 0,function*(t,r={}){var s;let o,l;try{const{headers:c,method:h,body:p,signal:m,timeout:y}=r;let v={},{region:T}=r;T||(T=this.region);const b=new URL(`${this.url}/${t}`);T&&T!=="any"&&(v["x-region"]=T,b.searchParams.set("forceFunctionRegion",T));let R;p&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",R=p):typeof p=="string"?(v["Content-Type"]="text/plain",R=p):typeof FormData<"u"&&p instanceof FormData?R=p:(v["Content-Type"]="application/json",R=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?R=JSON.stringify(p):R=p;let x=m;y&&(l=new AbortController,o=setTimeout(()=>l.abort(),y),m?(x=l.signal,m.addEventListener("abort",()=>l.abort())):x=l.signal);const D=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),c),body:R,signal:x}).catch(Y=>{throw new p6(Y)}),U=D.headers.get("x-relay-error");if(U&&U==="true")throw new iS(D);if(!D.ok)throw new oS(D);let O=((s=D.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),K;return O==="application/json"?K=yield D.json():O==="application/octet-stream"||O==="application/pdf"?K=yield D.blob():O==="text/event-stream"?K=D:O==="multipart/form-data"?K=yield D.formData():K=yield D.text(),{data:K,error:null,response:D}}catch(c){return{data:null,error:c,response:c instanceof oS||c instanceof iS?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var g6=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},y6=class{constructor(n){var e,t,r;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(r=n.urlLengthLimit)!==null&&r!==void 0?r:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,c=null,h=null,p=o.status,m=o.statusText;if(o.ok){var y,v;if(t.method!=="HEAD"){var T;const D=await o.text();D===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((T=t.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?c=D:c=JSON.parse(D))}const R=(y=t.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),x=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");R&&x&&x.length>1&&(h=parseInt(x[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,p=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var b;const R=await o.text();try{l=JSON.parse(R),Array.isArray(l)&&o.status===404&&(c=[],l=null,p=200,m="OK")}catch{o.status===404&&R===""?(p=204,m="No Content"):l={message:R}}if(l&&t.isMaybeSingle&&(!(l==null||(b=l.details)===null||b===void 0)&&b.includes("0 rows"))&&(l=null,p=200,m="OK"),l&&t.shouldThrowOnError)throw new g6(l)}return{error:l,data:c,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(o=>{var l;let c="",h="",p="";const m=o==null?void 0:o.cause;if(m){var y,v,T,b;const D=(y=m==null?void 0:m.message)!==null&&y!==void 0?y:"",U=(v=m==null?void 0:m.code)!==null&&v!==void 0?v:"";c=`${(T=o==null?void 0:o.name)!==null&&T!==void 0?T:"FetchError"}: ${o==null?void 0:o.message}`,c+=`

Caused by: ${(b=m==null?void 0:m.name)!==null&&b!==void 0?b:"Error"}: ${D}`,U&&(c+=` (${U})`),m!=null&&m.stack&&(c+=`
${m.stack}`)}else{var R;c=(R=o==null?void 0:o.stack)!==null&&R!==void 0?R:""}const x=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(p="",h="Request was aborted (timeout or manual cancellation)",x>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${x} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((m==null?void 0:m.name)==="HeadersOverflowError"||(m==null?void 0:m.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",h="HTTP headers exceeded server limits (typically 16KB)",x>this.urlLengthLimit&&(h+=`. Your request URL is ${x} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:c,hint:h,code:p},data:null,count:null,status:0,statusText:""}})),s.then(n,e)}returns(){return this}overrideTypes(){return this}},v6=class extends y6{select(n){let e=!1;const t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${n}`),this.url.searchParams.set(o,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var l;const c=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const aS=new RegExp("[,()]");var Ra=class extends v6{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&aS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&aS.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${s}fts${o}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},_6=class{constructor(n,{headers:e={},schema:t,fetch:r,urlLengthLimit:s=8e3}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:r}=e??{},s=t?"HEAD":"GET";let o=!1;const l=(n??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:c,headers:h}=this.cloneRequestState();return c.searchParams.set("select",l),r&&h.append("Prefer",`count=${r}`),new Ra({method:s,url:c,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;const s="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),t||l.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);o.searchParams.set("columns",h.join(","))}}return new Ra({method:s,url:o,headers:l,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){var o;const l="POST",{url:c,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),r&&h.append("Prefer",`count=${r}`),s||h.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(p.length>0){const m=[...new Set(p)].map(y=>`"${y}"`);c.searchParams.set("columns",m.join(","))}}return new Ra({method:l,url:c,headers:h,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:e}={}){var t;const r="PATCH",{url:s,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Ra({method:r,url:s,headers:o,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var e;const t="DELETE",{url:r,headers:s}=this.cloneRequestState();return n&&s.append("Prefer",`count=${n}`),new Ra({method:t,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Qu(n){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(n)}function w6(n,e){if(Qu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function E6(n){var e=w6(n,"string");return Qu(e)=="symbol"?e:e+""}function T6(n,e,t){return(e=E6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function lS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Zh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?lS(Object(t),!0).forEach(function(r){T6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):lS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var S6=class fk{constructor(e,{headers:t={},schema:r,fetch:s,timeout:o,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.urlLengthLimit=l;const c=s??globalThis.fetch;o!==void 0&&o>0?this.fetch=(h,p)=>{const m=new AbortController,y=setTimeout(()=>m.abort(),o),v=p==null?void 0:p.signal;if(v){if(v.aborted)return clearTimeout(y),c(h,p);const T=()=>{clearTimeout(y),m.abort()};return v.addEventListener("abort",T,{once:!0}),c(h,Zh(Zh({},p),{},{signal:m.signal})).finally(()=>{clearTimeout(y),v.removeEventListener("abort",T)})}return c(h,Zh(Zh({},p),{},{signal:m.signal})).finally(()=>clearTimeout(y))}:this.fetch=c}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new _6(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new fk(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:r=!1,get:s=!1,count:o}={}){var l;let c;const h=new URL(`${this.url}/rpc/${e}`);let p;const m=T=>T!==null&&typeof T=="object"&&(!Array.isArray(T)||T.some(m)),y=r&&Object.values(t).some(m);y?(c="POST",p=t):r||s?(c=r?"HEAD":"GET",Object.entries(t).filter(([T,b])=>b!==void 0).map(([T,b])=>[T,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([T,b])=>{h.searchParams.append(T,b)})):(c="POST",p=t);const v=new Headers(this.headers);return y?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new Ra({method:c,url:h,headers:v,schema:this.schemaName,body:p,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class b6{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const r=t.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const I6="2.97.0",x6=`realtime-js/${I6}`,A6="1.0.0",pk="2.0.0",uS=pk,ey=1e4,k6=1e3,R6=100;var ri;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ri||(ri={}));var Ct;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ct||(Ct={}));var ir;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ir||(ir={}));var ty;(function(n){n.websocket="websocket"})(ty||(ty={}));var lo;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(lo||(lo={}));class C6{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,r){var s,o;const l=e.topic,c=(s=e.ref)!==null&&s!==void 0?s:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(m).length===0?"":JSON.stringify(m);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+c.length+l.length+p.length+y.length,T=new ArrayBuffer(this.HEADER_LENGTH+v);let b=new DataView(T),R=0;b.setUint8(R++,this.KINDS.userBroadcastPush),b.setUint8(R++,h.length),b.setUint8(R++,c.length),b.setUint8(R++,l.length),b.setUint8(R++,p.length),b.setUint8(R++,y.length),b.setUint8(R++,t),Array.from(h,D=>b.setUint8(R++,D.charCodeAt(0))),Array.from(c,D=>b.setUint8(R++,D.charCodeAt(0))),Array.from(l,D=>b.setUint8(R++,D.charCodeAt(0))),Array.from(p,D=>b.setUint8(R++,D.charCodeAt(0))),Array.from(y,D=>b.setUint8(R++,D.charCodeAt(0)));var x=new Uint8Array(T.byteLength+r.byteLength);return x.set(new Uint8Array(T),0),x.set(new Uint8Array(r),T.byteLength),x.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,o,l,c,h]=r;return t({join_ref:s,ref:o,topic:l,event:c,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2),l=t.getUint8(3),c=t.getUint8(4);let h=this.HEADER_LENGTH+4;const p=r.decode(e.slice(h,h+s));h=h+s;const m=r.decode(e.slice(h,h+o));h=h+o;const y=r.decode(e.slice(h,h+l));h=h+l;const v=e.slice(h,e.byteLength),T=c===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,b={type:this.BROADCAST_EVENT,event:m,payload:T};return l>0&&(b.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class mk{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Xe||(Xe={}));const cS=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=P6(l,n,e,s),o),{}):{}},P6=(n,e,t,r)=>{const s=e.find(c=>c.name===n),o=s==null?void 0:s.type,l=t[n];return o&&!r.includes(o)?gk(o,l):ny(l)},gk=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return L6(e,t)}switch(n){case Xe.bool:return N6(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return O6(e);case Xe.json:case Xe.jsonb:return D6(e);case Xe.timestamp:return V6(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return ny(e);default:return ny(e)}},ny=n=>n,N6=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},O6=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},D6=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},L6=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>gk(e,c))}return n},V6=n=>typeof n=="string"?n.replace(" ","T"):n,yk=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Km{constructor(e,t,r={},s=ey){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hS;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(hS||(hS={}));class Cu{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Cu.syncState(this.state,s,o,l),this.pendingDiffs.forEach(h=>{this.state=Cu.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Cu.syncDiff(this.state,s,o,l),c())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),c={},h={};return this.map(o,(p,m)=>{l[p]||(h[p]=m)}),this.map(l,(p,m)=>{const y=o[p];if(y){const v=m.map(x=>x.presence_ref),T=y.map(x=>x.presence_ref),b=m.filter(x=>T.indexOf(x.presence_ref)<0),R=y.filter(x=>v.indexOf(x.presence_ref)<0);b.length>0&&(c[p]=b),R.length>0&&(h[p]=R)}else c[p]=m}),this.syncDiff(o,{joins:c,leaves:h},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(c,h)=>{var p;const m=(p=e[c])!==null&&p!==void 0?p:[];if(e[c]=this.cloneDeep(h),m.length>0){const y=e[c].map(T=>T.presence_ref),v=m.filter(T=>y.indexOf(T.presence_ref)<0);e[c].unshift(...v)}r(c,m,h)}),this.map(l,(c,h)=>{let p=e[c];if(!p)return;const m=h.map(y=>y.presence_ref);p=p.filter(y=>m.indexOf(y.presence_ref)<0),e[c]=p,s(c,p,h),p.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var dS;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(dS||(dS={}));var Pu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Pu||(Pu={}));var hs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(hs||(hs={}));class ja{constructor(e,t={config:{}},r){var s,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Km(this,ir.join,this.params,this.timeout),this.rejoinTimer=new mk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ct.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ir.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Cu(this),this.broadcastEndpointURL=yk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ct.closed){const{config:{broadcast:l,presence:c,private:h}}=this.params,p=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(T=>T.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[Pu.PRESENCE]&&this.bindings[Pu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},v={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(T=>e==null?void 0:e(hs.CHANNEL_ERROR,T)),this._onClose(()=>e==null?void 0:e(hs.CLOSED)),this.updateJoinPayload(Object.assign({config:v},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:T})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),T===void 0){e==null||e(hs.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,x=(b=R==null?void 0:R.length)!==null&&b!==void 0?b:0,D=[];for(let U=0;U<x;U++){const O=R[U],{filter:{event:K,schema:Y,table:Z,filter:P}}=O,A=T&&T[U];if(A&&A.event===K&&ja.isFilterValueEqual(A.schema,Y)&&ja.isFilterValueEqual(A.table,Z)&&ja.isFilterValueEqual(A.filter,P))D.push(Object.assign(Object.assign({},O),{id:A.id}));else{this.unsubscribe(),this.state=Ct.errored,e==null||e(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(hs.SUBSCRIBED);return}}).receive("error",T=>{this.state=Ct.errored,e==null||e(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(T).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Ct.joined&&e===Pu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const p=await c.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,h;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ct.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ir.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Km(this,ir.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ct.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Km(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>R6){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:c,error:h,leave:p,join:m}=ir;if(r&&[c,h,p,m].indexOf(l)>=0&&r!==this._joinRef())return;let v=this._onMessage(l,t,r);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(T=>{var b,R,x;return((b=T.filter)===null||b===void 0?void 0:b.event)==="*"||((x=(R=T.filter)===null||R===void 0?void 0:R.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(T=>T.callback(v,r)):(o=this.bindings[l])===null||o===void 0||o.filter(T=>{var b,R,x,D,U,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in T){const K=T.id,Y=(b=T.filter)===null||b===void 0?void 0:b.event;return K&&((R=t.ids)===null||R===void 0?void 0:R.includes(K))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const K=(U=(D=T==null?void 0:T.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return K==="*"||K===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return T.type.toLocaleLowerCase()===l}).map(T=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:R,table:x,commit_timestamp:D,type:U,errors:O}=b;v=Object.assign(Object.assign({},{schema:R,table:x,commit_timestamp:D,eventType:U,new:{},old:{},errors:O}),this._getPayloadRecords(b))}T.callback(v,r)})}_isClosed(){return this.state===Ct.closed}_isJoined(){return this.state===Ct.joined}_isJoining(){return this.state===Ct.joining}_isLeaving(){return this.state===Ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ja.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ir.close,{},e)}_onError(e){this._on(ir.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=cS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=cS(e.columns,e.old_record)),t}}const Gm=()=>{},ed={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},M6=[1e3,2e3,5e3,1e4],j6=1e4,U6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class F6{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ey,this.transport=null,this.heartbeatIntervalMs=ed.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gm,this.ref=0,this.reconnectTimer=null,this.vsn=uS,this.logger=Gm,this.conn=null,this.sendBuffer=[],this.serializer=new C6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${ty.websocket}`,this.httpEndpoint=yk(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=b6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ri.connecting:return lo.Connecting;case ri.open:return lo.Open;case ri.closing:return lo.Closing;default:return lo.Closed}}isConnected(){return this.connectionState()===lo.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new ja(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(k6,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ed.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:o,ref:l}=t,c=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${r} ${s} ${c}`.trim(),o),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(s,o,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ri.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ri.open||this.conn.readyState===ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ir.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([U6],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const o={access_token:t,version:x6};t&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ir.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new mk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ed.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,o,l,c,h,p,m,y,v,T;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:ey,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:ed.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:Gm,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:uS,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(b=>M6[b-1]||j6),this.vsn){case A6:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:((b,R)=>R(JSON.stringify(b))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:((b,R)=>R(JSON.parse(b)));break;case pk:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(T=e==null?void 0:e.decode)!==null&&T!==void 0?T:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Xu=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function $6(n,e,t){const r=new URL(e,n);if(t)for(const[s,o]of Object.entries(t))o!==void 0&&r.searchParams.set(s,o);return r.toString()}async function B6(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function z6(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:s,body:o,headers:l}){const c=$6(n.baseUrl,r,s),h=await B6(n.auth),p=await e(c,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...h,...l},body:o?JSON.stringify(o):void 0}),m=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),v=y&&m?JSON.parse(m):m;if(!p.ok){const T=y?v:void 0,b=T==null?void 0:T.error;throw new Xu((b==null?void 0:b.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:T})}return{status:p.status,headers:p.headers,data:v}}}}function td(n){return n.join("")}var W6=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:td(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${td(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${td(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${td(n.namespace)}`}),!0}catch(e){if(e instanceof Xu&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Xu&&t.status===409)return;throw t}}};function va(n){return n.join("")}var H6=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${va(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${va(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${va(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${va(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${va(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${va(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Xu&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Xu&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},q6=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=z6({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new W6(this.client,e),this.tableOps=new H6(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Mf=class extends Error{constructor(n,e="storage",t,r){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=r}};function jf(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var nd=class extends Mf{constructor(n,e,t,r="storage"){super(n,r,e,t),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},vk=class extends Mf{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const K6=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),G6=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ry=n=>{if(Array.isArray(n))return n.map(t=>ry(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=ry(r)}),e},J6=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Zu(n){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(n)}function Y6(n,e){if(Zu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Q6(n){var e=Y6(n,"string");return Zu(e)=="symbol"?e:e+""}function X6(n,e,t){return(e=Q6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function fS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Te(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fS(Object(t),!0).forEach(function(r){X6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):fS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const pS=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},Z6=async(n,e,t,r)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n,o=s.status||500;if(typeof s.json=="function")s.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new nd(pS(l),o,c,r))}).catch(()=>{if(r==="vectors"){const l=o+"";e(new nd(s.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";e(new nd(s.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";e(new nd(s.statusText||`HTTP ${o} error`,o,l,r))}}else e(new vk(pS(n),n,r))},e$=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||n==="HEAD"||!r?Te(Te({},s),t):(G6(r)?(s.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Te(Te({},s),t))};async function du(n,e,t,r,s,o,l){return new Promise((c,h)=>{n(t,e$(e,r,s,o)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;if(l==="vectors"){const m=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!m||!m.includes("application/json"))return{}}return p.json()}).then(p=>c(p)).catch(p=>Z6(p,h,r,l))})}function _k(n="storage"){return{get:async(e,t,r,s)=>du(e,"GET",t,r,s,void 0,n),post:async(e,t,r,s,o)=>du(e,"POST",t,s,o,r,n),put:async(e,t,r,s,o)=>du(e,"PUT",t,s,o,r,n),head:async(e,t,r,s)=>du(e,"HEAD",t,Te(Te({},r),{},{noResolveJson:!0}),s,void 0,n),remove:async(e,t,r,s,o)=>du(e,"DELETE",t,s,o,r,n)}}const t$=_k("storage"),{get:ec,post:sr,put:sy,head:n$,remove:Vv}=t$,Cn=_k("vectors");var fl=class{constructor(n,e={},t,r="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=K6(t),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=Te(Te({},this.headers),{},{[n]:e}),this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(jf(t))return{data:null,error:t};throw t}}},r$=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(jf(e))return{data:null,error:e};throw e}}};let wk;wk=Symbol.toStringTag;var s$=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[wk]="BlobDownloadBuilder",this.promise=null}asStream(){return new r$(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(jf(e))return{data:null,error:e};throw e}}};const i$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},mS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var o$=class extends fl{constructor(n,e={},t,r){super(n,e,r,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,r){var s=this;return s.handleOperation(async()=>{let o;const l=Te(Te({},mS),r);let c=Te(Te({},s.headers),n==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&t instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",s.encodeMetadata(h)),o.append("",t)):typeof FormData<"u"&&t instanceof FormData?(o=t,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),h&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(h))):(o=t,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,h&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(c=Te(Te({},c),r.headers));const p=s._removeEmptyFolders(e),m=s._getFinalPath(p),y=await(n=="PUT"?sy:sr)(s.fetch,`${s.url}/object/${m}`,o,Te({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:p,id:y.Id,fullPath:y.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var s=this;const o=s._removeEmptyFolders(n),l=s._getFinalPath(o),c=new URL(s.url+`/object/upload/sign/${l}`);return c.searchParams.set("token",e),s.handleOperation(async()=>{let h;const p=Te({upsert:mS.upsert},r),m=Te(Te({},s.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",p.cacheControl)):(h=t,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType),{path:o,fullPath:(await sy(s.fetch,c.toString(),h,{headers:m})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let r=t._getFinalPath(n);const s=Te({},t.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const o=await sr(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(t.url+o.url),c=l.searchParams.get("token");if(!c)throw new Mf("No token returned by API");return{signedUrl:l.toString(),path:n,token:c}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;return r.handleOperation(async()=>await sr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}))}async copy(n,e,t){var r=this;return r.handleOperation(async()=>({path:(await sr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(n,e,t){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(n),o=await sr(r.fetch,`${r.url}/object/sign/${s}`,Te({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(n,e,t){var r=this;return r.handleOperation(async()=>{const s=await sr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return s.map(l=>Te(Te({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(n,e,t){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=s?`?${s}`:"",l=this._getFinalPath(n),c=()=>ec(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0},t);return new s$(c,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>ry(await ec(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await n$(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(jf(r)&&r instanceof vk){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const t=this._getFinalPath(n),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${c}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await Vv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var r=this;return r.handleOperation(async()=>{const s=Te(Te(Te({},i$),e),{},{prefix:n||""});return await sr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const r=Te({},n);return await sr(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const a$="2.97.0",Tc={"X-Client-Info":`storage-js/${a$}`};var l$=class extends fl{constructor(n,e={},t,r){const s=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const o=s.href.replace(/\/$/,""),l=Te(Te({},Tc),e);super(o,l,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await ec(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await ec(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await sr(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await sy(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await sr(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Vv(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},u$=class extends fl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},Tc),e);super(r,s,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await sr(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const r=t.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await ec(e.fetch,s,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Vv(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!J6(n))throw new Mf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new q6({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(s,o){const l=s[o];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(s,c),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}},c$=class extends fl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},Tc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await Cn.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await Cn.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},h$=class extends fl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},Tc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},d$=class extends fl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},Tc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},f$=class extends d${constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new p$(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},p$=class extends c${constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new m$(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},m$=class extends h${constructor(n,e,t,r,s){super(n,e,s),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},g$=class extends l${constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new o$(this.url,this.headers,n,this.fetch)}get vectors(){return new f$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new u$(this.url+"/iceberg",this.headers,this.fetch)}};const Ek="2.97.0",Ca=30*1e3,iy=3,Jm=iy*Ca,y$="http://localhost:9999",v$="supabase.auth.token",_$={"X-Client-Info":`gotrue-js/${Ek}`},oy="X-Supabase-Api-Version",Tk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},w$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,E$=600*1e3;class tc extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ve(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class T$ extends tc{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function S$(n){return ve(n)&&n.name==="AuthApiError"}class uo extends tc{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ss extends tc{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Rn extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ym(n){return ve(n)&&n.name==="AuthSessionMissingError"}class _a extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rd extends Ss{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class sd extends Ss{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function b$(n){return ve(n)&&n.name==="AuthImplicitGrantRedirectError"}class gS extends Ss{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class I$ extends Ss{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ay extends Ss{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Qm(n){return ve(n)&&n.name==="AuthRetryableFetchError"}class yS extends Ss{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ly extends Ss{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ef="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vS=` 	
\r=`.split(""),x$=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<vS.length;e+=1)n[vS[e].charCodeAt(0)]=-2;for(let e=0;e<ef.length;e+=1)n[ef[e].charCodeAt(0)]=e;return n})();function _S(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ef[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(ef[r]),e.queuedBits-=6}}function Sk(n,e,t){const r=x$[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function wS(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{R$(l,r,t)};for(let l=0;l<n.length;l+=1)Sk(n.charCodeAt(l),s,o);return e.join("")}function A$(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function k$(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}A$(r,e)}}function R$(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ka(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)Sk(n.charCodeAt(s),t,r);return new Uint8Array(e)}function C$(n){const e=[];return k$(n,t=>e.push(t)),new Uint8Array(e)}function po(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>_S(s,t,r)),_S(null,t,r),e.join("")}function P$(n){return Math.round(Date.now()/1e3)+n}function N$(){return Symbol("auth-callback")}const Wt=()=>typeof window<"u"&&typeof document<"u",no={tested:!1,writable:!1},bk=()=>{if(!Wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(no.tested)return no.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),no.tested=!0,no.writable=!0}catch{no.tested=!0,no.writable=!1}return no.writable};function O$(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Ik=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),D$=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Pa=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ro=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},zt=async(n,e)=>{await n.removeItem(e)};class Uf{constructor(){this.promise=new Uf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Uf.promiseConstructor=Promise;function id(n){const e=n.split(".");if(e.length!==3)throw new ly("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!w$.test(e[r]))throw new ly("JWT not in base64url format");return{header:JSON.parse(wS(e[0])),payload:JSON.parse(wS(e[1])),signature:Ka(e[2]),raw:{header:e[0],payload:e[1]}}}async function L$(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function V$(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function M$(n){return("0"+n.toString(16)).substr(-2)}function j$(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,M$).join("")}async function U$(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function F$(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await U$(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wa(n,e,t=!1){const r=j$();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Pa(n,`${e}-code-verifier`,s);const o=await F$(r);return[o,r===o?"plain":"s256"]}const $$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function B$(n){const e=n.headers.get(oy);if(!e||!e.match($$))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function z$(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function W$(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const H$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ea(n){if(!H$.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xm(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function q$(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function ES(n){return JSON.parse(JSON.stringify(n))}const ao=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),K$=[502,503,504];async function TS(n){var e;if(!D$(n))throw new ay(ao(n),0);if(K$.includes(n.status))throw new ay(ao(n),n.status);let t;try{t=await n.json()}catch(o){throw new uo(ao(o),o)}let r;const s=B$(n);if(s&&s.getTime()>=Tk["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new yS(ao(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Rn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new yS(ao(t),n.status,t.weak_password.reasons);throw new T$(ao(t),n.status||500,r)}const G$=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Se(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[oy]||(o[oy]=Tk["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await J$(n,e,t+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function J$(n,e,t,r,s,o){const l=G$(e,r,s,o);let c;try{c=await n(t,Object.assign({},l))}catch(h){throw console.error(h),new ay(ao(h),0)}if(c.ok||await TS(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(h){await TS(h)}}function nr(n){var e;let t=null;X$(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=P$(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function SS(n){const e=nr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function li(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function Y$(n){return{data:n,error:null}}function Q$(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=Vf(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},h=Object.assign({},l);return{data:{properties:c,user:h},error:null}}function bS(n){return n}function X$(n){return n.access_token&&n.refresh_token&&n.expires_in}const Zm=["global","local","others"];class Z${constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Ik(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Zm[0]){if(Zm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zm.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:li})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Vf(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Q$,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ve(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:li})}catch(t){if(ve(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,c,h;try{const p={nextPage:null,lastPage:0,total:0},m=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:bS});if(m.error)throw m.error;const y=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return T.length>0&&(T.forEach(b=>{const R=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);p[`${x}Page`]=R}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ve(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){Ea(e);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:li})}catch(t){if(ve(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ea(e);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:li})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Ea(e);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:li})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ea(e.userId);try{const{data:t,error:r}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ea(e.userId),Ea(e.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,o,l,c,h;try{const p={nextPage:null,lastPage:0,total:0},m=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:bS});if(m.error)throw m.error;const y=await m.json(),v=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,T=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return T.length>0&&(T.forEach(b=>{const R=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);p[`${x}Page`]=R}),p.total=parseInt(v)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ve(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ve(t))return{data:null,error:t};throw t}}}function IS(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const Ta={debug:!!(globalThis&&bk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xS extends xk{}async function e5(n,e,t){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;e>0&&setTimeout(()=>{r.abort(),Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw Ta.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new xS(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ta.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new xS(`Acquiring an exclusive Navigator LockManager lock "${n}" timed out waiting ${e}ms`):s}}function t5(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ak(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function n5(n){return parseInt(n,16)}function r5(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function s5(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:h,resources:p,scheme:m,uri:y,version:v}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const T=Ak(n.address),b=m?`${m}://${r}`:r,R=n.statement?`${n.statement}
`:"",x=`${b} wants you to sign in with your Ethereum account:
${T}

${R}`;let D=`URI: ${y}
Version: ${v}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(s&&(D+=`
Expiration Time: ${s.toISOString()}`),c&&(D+=`
Not Before: ${c.toISOString()}`),h&&(D+=`
Request ID: ${h}`),p){let U=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);U+=`
- ${O}`}D+=U}return`${x}
${D}`}class bt extends Error{constructor({message:e,code:t,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class tf extends bt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function i5({error:n,options:e}){var t,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new bt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(kk(l)){if(o.rp.id!==l)return new bt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function o5({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new bt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(kk(r)){if(t.rpId!==r)return new bt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class a5{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const l5=new a5;function u5(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=Vf(n,["challenge","user","excludeCredentials"]),o=Ka(e).buffer,l=Object.assign(Object.assign({},t),{id:Ka(t.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:o,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];c.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:Ka(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function c5(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Vf(n,["challenge","allowCredentials"]),s=Ka(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const c=t[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:Ka(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function h5(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:po(new Uint8Array(n.response.attestationObject)),clientDataJSON:po(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function d5(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:po(new Uint8Array(s.authenticatorData)),clientDataJSON:po(new Uint8Array(s.clientDataJSON)),signature:po(new Uint8Array(s.signature)),userHandle:s.userHandle?po(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function kk(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function AS(){var n,e;return!!(Wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function f5(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new tf("Browser returned unexpected credential type",e)}:{data:null,error:new tf("Empty credential response",e)}}catch(e){return{data:null,error:i5({error:e,options:n})}}}async function p5(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new tf("Browser returned unexpected credential type",e)}:{data:null,error:new tf("Empty credential response",e)}}catch(e){return{data:null,error:o5({error:e,options:n})}}}const m5={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},g5={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function nf(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const o in s){const l=s[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(t(l))r[o]=l;else if(e(l)){const c=r[o];e(c)?r[o]=nf(c,l):r[o]=nf(l)}else r[o]=l}return r}function y5(n,e){return nf(m5,n,e||{})}function v5(n,e){return nf(g5,n,e||{})}class _5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},o){var l;try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:h};const p=s??l5.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;if(!m.name){const y=r;if(y)m.name=`${m.id}:${y}`;else{const T=(await this.client.getUser()).data.user,b=((l=T==null?void 0:T.user_metadata)===null||l===void 0?void 0:l.name)||(T==null?void 0:T.email)||(T==null?void 0:T.id)||"User";m.name=`${m.id}:${b}`}}m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=y5(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:y,error:v}=await f5({publicKey:m,signal:p});return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const m=v5(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:y,error:v}=await p5(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:p}));return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(c){return ve(c)?{data:null,error:c}:{data:null,error:new uo("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!t)return{data:null,error:new tc("rpId is required for WebAuthn authentication")};try{if(!AS())return{data:null,error:new uo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:o});if(!l)return{data:null,error:c};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return ve(l)?{data:null,error:l}:{data:null,error:new uo("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!t)return{data:null,error:new tc("rpId is required for WebAuthn registration")};try{if(!AS())return{data:null,error:new uo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var y;return(y=m.data)===null||y===void 0?void 0:y.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:c};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return ve(l)?{data:null,error:l}:{data:null,error:new uo("Unexpected error in register",l)}}}}t5();const w5={url:y$,storageKey:v$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function kS(n,e,t){return await t()}const Sa={};class nc{get jwks(){var e,t;return(t=(e=Sa[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Sa[this.storageKey]=Object.assign(Object.assign({},Sa[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Sa[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Sa[this.storageKey]=Object.assign(Object.assign({},Sa[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},w5),e);if(this.storageKey=o.storageKey,this.instanceID=(t=nc.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,nc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Wt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Z$({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Ik(o.fetch),this.lock=o.lock||kS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Wt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=e5:this.lock=kS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new _5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:bk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=IS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=IS(this.memoryStorage)),Wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}o.skipAutoInitialize||this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ek}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(Wt()&&(t=O$(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Wt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),b$(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ve(t)?this._returnResult({error:t}):this._returnResult({error:new uo("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:nr}),{data:l,error:c}=o;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(ve(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:m,password:y,options:v}=e;let T=null,b=null;this.flowType==="pkce"&&([T,b]=await wa(this.storage,this.storageKey)),o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:m,password:y,data:(t=v==null?void 0:v.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:T,code_challenge_method:b},xform:nr})}else if("phone"in e){const{phone:m,password:y,options:v}=e;o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:nr})}else throw new rd("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return await zt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:c}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:SS})}else if("phone"in e){const{phone:o,password:l,options:c}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:SS})}else throw new rd("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new _a;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,o,l,c,h,p,m,y,v;let T,b;if("message"in e)T=e.message,b=e.signature;else{const{chain:R,wallet:x,statement:D,options:U}=e;let O;if(Wt())if(typeof x=="object")O=x;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")O=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=x}const K=new URL((t=U==null?void 0:U.url)!==null&&t!==void 0?t:window.location.href),Y=await O.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Z=Ak(Y[0]);let P=(r=U==null?void 0:U.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const C=await O.request({method:"eth_chainId"});P=n5(C)}const A={domain:K.host,address:Z,statement:D,uri:K.href,version:"1",chainId:P,nonce:(s=U==null?void 0:U.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(o=U==null?void 0:U.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=U==null?void 0:U.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=U==null?void 0:U.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.resources};T=s5(A),b=await O.request({method:"personal_sign",params:[r5(T),Z]})}try{const{data:R,error:x}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:T,signature:b},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:nr});if(x)throw x;if(!R||!R.session||!R.user){const D=new _a;return this._returnResult({data:{user:null,session:null},error:D})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:x})}catch(R){if(ve(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(e){var t,r,s,o,l,c,h,p,m,y,v,T;let b,R;if("message"in e)b=e.message,R=e.signature;else{const{chain:x,wallet:D,statement:U,options:O}=e;let K;if(Wt())if(typeof D=="object")K=D;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))K=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=D}const Y=new URL((t=O==null?void 0:O.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in K&&K.signIn){const Z=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),U?{statement:U}:null));let P;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")P=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)P=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)b=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),R=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${Y.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(s=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=O==null?void 0:O.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(m=O==null?void 0:O.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const Z=await K.signMessage(new TextEncoder().encode(b),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=Z}}try{const{data:x,error:D}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:po(R)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(T=e.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:nr});if(D)throw D;if(!x||!x.session||!x.user){const U=new _a;return this._returnResult({data:{user:null,session:null},error:U})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:D})}catch(x){if(ve(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const t=await ro(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new I$;const{data:o,error:l}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nr});if(await zt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const c=new _a;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,c=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:nr}),{data:h,error:p}=c;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const m=new _a;return this._returnResult({data:{user:null,session:null},error:m})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(t){if(ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:c,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await wa(this.storage,this.storageKey));const{error:y}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:c,options:h}=e,{data:p,error:m}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:m})}throw new rd("You must provide either an email or phone number.")}catch(c){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:nr});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(s){if(ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,o,l;try{let c=null,h=null;this.flowType==="pkce"&&([c,h]=await wa(this.storage,this.storageKey));const p=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:Y$});return!((o=p.data)===null||o===void 0)&&o.url&&Wt()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(c){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Rn;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(ve(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:c}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new rd("You must provide either an email or phone number and a type")}catch(t){if(ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ro(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Jm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await ro(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Xm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=q$(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:li}):await this._useSession(async t=>{var r,s,o;const{data:l,error:c}=t;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rn}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:li})})}catch(t){if(ve(t))return Ym(t)&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Rn;const l=s.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await wa(this.storage,this.storageKey));const{data:p,error:m}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:li});if(m)throw m;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rn;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:l}=id(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(ve(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Rn;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Wt())throw new sd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new sd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new gS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sd("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gS("No code detected.");const{data:U,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:c,expires_at:h,token_type:p}=e;if(!o||!c||!l||!p)throw new sd("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(c);let v=m+y;h&&(v=parseInt(h));const T=v-m;T*1e3<=Ca&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${T}s, should have been closer to ${y}s`);const b=v-y;m-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,m):m-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,m);const{data:R,error:x}=await this._getUser(o);if(x)throw x;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:y,expires_at:v,refresh_token:l,token_type:p,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(r){if(ve(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ro(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o&&!Ym(o))return this._returnResult({error:o});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(S$(c)&&(c.status===404||c.status===401||c.status===403)||Ym(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await zt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=N$(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await wa(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,c,h,p,m;const{data:y,error:v}=o;if(v)throw v;const T=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",T,{headers:this.headers,jwt:(m=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return Wt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ve(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:o}}=t;if(s)throw s;const{options:l,provider:c,token:h,access_token:p,nonce:m}=e,y=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:h,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nr}),{data:v,error:T}=y;return T?this._returnResult({data:{user:null,session:null},error:T}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new _a}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:T}))}catch(s){if(await zt(this.storage,`${this.storageKey}-code-verifier`),ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await V$(async s=>(s>0&&await L$(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nr})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Qm(o)&&Date.now()+l-r<Ca})}catch(r){if(this._debug(t,"error",r),ve(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Wt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ro(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ro(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Pa(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Xm()}else if(s&&!s.user&&!s.user){const l=await ro(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await zt(this.storage,this.storageKey+"-user"),await Pa(this.storage,this.storageKey,s)):s.user=Xm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Jm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Qm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Uf;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Rn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),ve(o)){const l={data:null,error:o};return Qm(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await zt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Pa(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const o=ES(s);await Pa(this.storage,this.storageKey,o)}else{const s=ES(t);await Pa(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await zt(this.storage,this.storageKey),await zt(this.storage,this.storageKey+"-code-verifier"),await zt(this.storage,this.storageKey+"-user"),this.userStorage&&await zt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ca);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ca);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ca}ms, refresh threshold is ${iy} ticks`),s<=iy&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await wa(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?this._returnResult({data:null,error:o}):await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?h5(e.webauthn.credential_response):d5(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:h}))})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:u5(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:c5(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,r,s,o;if(e)try{const{payload:T}=id(e);let b=null;T.aal&&(b=T.aal);let R=b;const{data:{user:x},error:D}=await this.getUser(e);if(D)return this._returnResult({data:null,error:D});((r=(t=x==null?void 0:x.factors)===null||t===void 0?void 0:t.filter(K=>K.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(R="aal2");const O=T.amr||[];return{data:{currentLevel:b,nextLevel:R,currentAuthenticationMethods:O},error:null}}catch(T){if(ve(T))return this._returnResult({data:null,error:T});throw T}const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=id(l.access_token);let p=null;h.aal&&(p=h.aal);let m=p;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(T=>T.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(m="aal2");const v=h.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Rn})})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Rn});const l=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Wt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Rn});const l=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&Wt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Rn})})}catch(e){if(ve(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rn})})}catch(t){if(ve(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+E$>s)return r;const{data:o,error:l}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:T,error:b}=await this.getSession();if(b||!T.session)return this._returnResult({data:null,error:b});r=T.session.access_token}const{header:s,payload:o,signature:l,raw:{header:c,payload:h}}=id(r);t!=null&&t.allowExpired||z$(o.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:T}=await this.getUser(r);if(T)throw T;return{data:{claims:o,header:s,signature:l},error:null}}const m=W$(s.alg),y=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,l,C$(`${c}.${h}`)))throw new ly("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}}nc.nextInstanceID={};const E5=nc,T5="2.97.0";let _u="";typeof Deno<"u"?_u="deno":typeof document<"u"?_u="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_u="react-native":_u="node";const S5={"X-Client-Info":`supabase-js-${_u}/${T5}`},b5={headers:S5},I5={schema:"public"},x5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A5={};function rc(n){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rc(n)}function k5(n,e){if(rc(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(rc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function R5(n){var e=k5(n,"string");return rc(e)=="symbol"?e:e+""}function C5(n,e,t){return(e=R5(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ft(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?RS(Object(t),!0).forEach(function(r){C5(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):RS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const P5=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),N5=()=>Headers,O5=(n,e,t)=>{const r=P5(t),s=N5();return async(o,l)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:n;let p=new s(l==null?void 0:l.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(o,ft(ft({},l),{},{headers:p}))}};function D5(n){return n.endsWith("/")?n:n+"/"}function L5(n,e){var t,r;const{db:s,auth:o,realtime:l,global:c}=n,{db:h,auth:p,realtime:m,global:y}=e,v={db:ft(ft({},h),s),auth:ft(ft({},p),o),realtime:ft(ft({},m),l),storage:{},global:ft(ft(ft({},y),c),{},{headers:ft(ft({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?v.accessToken=n.accessToken:delete v.accessToken,v}function V5(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(D5(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var M5=class extends E5{constructor(n){super(n)}},j5=class{constructor(n,e,t){var r,s;this.supabaseUrl=n,this.supabaseKey=e;const o=V5(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:I5,realtime:A5,auth:ft(ft({},x5),{},{storageKey:l}),global:b5},h=L5(t??{},c);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=h.auth)!==null&&p!==void 0?p:{},this.headers,h.global.fetch)}this.fetch=O5(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(ft({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new S6(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new g$(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new m6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,storageKey:o,flowType:l,lock:c,debug:h,throwOnError:p},m,y){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new M5({url:this.authUrl.href,headers:ft(ft({},v),m),storageKey:o,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,flowType:l,lock:c,debug:h,throwOnError:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new F6(this.realtimeUrl.href,ft(ft({},n),{},{params:ft(ft({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const U5=(n,e,t)=>new j5(n,e,t);function F5(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}F5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const $5="https://nllxvstsyasnuoxzotfy.supabase.co",B5="sb_publishable_059xq8K8zTvm9Mmmukzf3A_NMYTcWMS",CS=U5($5,B5);function z5(){const n=To(),e=Ts(),[t,r]=M.useState([]),[s,o]=M.useState({name:"",price:"",image:"",badge:"",category:""}),[l,c]=M.useState(null),[h,p]=M.useState(!0),[m,y]=M.useState(!1),[v,T]=M.useState(null),[b,R]=M.useState(!0),[x,D]=M.useState(null),U=Af(Yu,"products");M.useEffect(()=>{const C=uF(Xg,V=>{V?(D(V),R(!1)):(D(null),R(!1),n("/login",{replace:!0,state:{from:e.pathname}}))});return()=>C()},[n,e.pathname]);const O=async()=>{p(!0),T(null);try{const V=(await Pf(U)).docs.map(j=>{const B=j.data();return{id:j.id,...B}});r(V)}catch(C){console.error(C),T("Failed to load products from Firebase.")}finally{p(!1)}},K=async C=>{const V="product-images",j=C.name.split(".").pop()||"jpg",B=`products/${Date.now()}-${Math.random().toString(36).slice(2)}.${j}`,{error:L}=await CS.storage.from(V).upload(B,C,{cacheControl:"3600",upsert:!1});if(L)throw console.error(L),new Error("Image upload to Supabase failed.");const{data:Fe}=CS.storage.from(V).getPublicUrl(B);if(!(Fe!=null&&Fe.publicUrl))throw new Error("Could not get public URL from Supabase.");return Fe.publicUrl};M.useEffect(()=>{!b&&x&&O()},[b,x]);const Y=(C,V)=>{o(j=>({...j,[C]:V}))},Z=async C=>{if(C.preventDefault(),!s.name||!s.price||!s.category){T("Please fill in all required fields.");return}if(!l){T("Please upload a product image.");return}y(!0),T(null);try{const V=s.price.startsWith("")?s.price:`${s.price.replace(/^[^0-9]*/,"")}`,j=await K(l);await oU(U,{name:s.name,price:V,image:j,badge:s.badge||void 0,category:s.category}),o({name:"",price:"",image:"",badge:"",category:""}),c(null),await O()}catch(V){console.error(V),T("Failed to save product to Firebase.")}finally{y(!1)}},P=async()=>{await cF(Xg)},A=async C=>{try{await iU(vA(Yu,"products",C)),r(V=>V.filter(j=>j.id!==C))}catch(V){console.error(V),T("Failed to delete product.")}};return b?I.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:I.jsx("p",{className:"text-gray-400 tracking-widest text-sm",children:"CHECKING ADMIN SESSION..."})}):x?I.jsx("div",{className:"bg-black text-white pt-32 pb-24 min-h-screen",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12 space-y-12",children:[I.jsxs("div",{className:"flex items-start justify-between gap-4",children:[I.jsxs("div",{children:[I.jsx("h1",{className:"text-4xl md:text-5xl font-semibold tracking-tight",children:"Admin Panel"}),I.jsx("p",{className:"text-gray-400 mt-2 tracking-widest text-xs",children:"MANAGE PRODUCTS FROM FIREBASE"})]}),I.jsxs("div",{className:"text-right space-y-2",children:[I.jsx("p",{className:"text-[11px] text-gray-500 tracking-widest",children:x.email}),I.jsx("button",{onClick:P,className:"text-xs tracking-widest border border-white/30 px-4 py-1 hover:bg-white hover:text-black transition-colors",children:"LOG OUT"})]})]}),I.jsxs(ye.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-zinc-900 border border-white/10 p-6 md:p-8",children:[I.jsx("h2",{className:"text-xl font-semibold mb-4 tracking-wide",children:"Add / Edit Product"}),v&&I.jsx("div",{className:"mb-4 text-sm text-red-400 bg-red-950/40 border border-red-500/40 px-4 py-2",children:v}),I.jsxs("form",{onSubmit:Z,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Name *"}),I.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.name,onChange:C=>Y("name",C.target.value),placeholder:"Infinity Vibe Essential Hoodie"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Price ( INR) *"}),I.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.price,onChange:C=>Y("price",C.target.value),placeholder:"189"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Product Image *"}),I.jsx("input",{type:"file",accept:"image/*",className:"w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-none file:border-0 file:text-xs file:tracking-widest file:bg-white file:text-black hover:file:bg-gray-200",onChange:C=>{var j;const V=((j=C.target.files)==null?void 0:j[0])||null;c(V)}}),l&&I.jsxs("p",{className:"text-[11px] text-gray-500 tracking-widest",children:["Selected: ",l.name]})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Category *"}),I.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.category,onChange:C=>Y("category",C.target.value),placeholder:"Hoodies"})]}),I.jsxs("div",{className:"space-y-2 md:col-span-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Badge (optional)"}),I.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.badge,onChange:C=>Y("badge",C.target.value),placeholder:"NEW DROP / LIMITED / BESTSELLER"})]}),I.jsx("div",{className:"md:col-span-2 flex justify-end",children:I.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-white text-black text-xs tracking-widest font-semibold hover:bg-gray-200 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:m?"SAVING...":"SAVE PRODUCT"})})]})]}),I.jsxs(ye.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-zinc-900 border border-white/10 p-6 md:p-8",children:[I.jsxs("div",{className:"flex items-center justify-between mb-4",children:[I.jsx("h2",{className:"text-xl font-semibold tracking-wide",children:"Products"}),I.jsx("button",{onClick:O,className:"text-xs tracking-widest border border-white/30 px-4 py-1 hover:bg-white hover:text-black transition-colors",children:"REFRESH"})]}),h?I.jsx("p",{className:"text-gray-400 text-sm",children:"Loading products from Firebase..."}):t.length===0?I.jsx("p",{className:"text-gray-500 text-sm",children:"No products found. Add your first one above."}):I.jsx("div",{className:"overflow-x-auto",children:I.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[I.jsx("thead",{className:"border-b border-white/20 text-xs uppercase tracking-widest text-gray-400",children:I.jsxs("tr",{children:[I.jsx("th",{className:"py-2 pr-4",children:"Name"}),I.jsx("th",{className:"py-2 pr-4",children:"Price"}),I.jsx("th",{className:"py-2 pr-4",children:"Category"}),I.jsx("th",{className:"py-2 pr-4",children:"Badge"}),I.jsx("th",{className:"py-2 text-right",children:"Actions"})]})}),I.jsx("tbody",{children:t.map(C=>I.jsxs("tr",{className:"border-b border-white/5",children:[I.jsx("td",{className:"py-2 pr-4",children:C.name}),I.jsx("td",{className:"py-2 pr-4",children:C.price}),I.jsx("td",{className:"py-2 pr-4",children:C.category}),I.jsx("td",{className:"py-2 pr-4",children:C.badge||"-"}),I.jsx("td",{className:"py-2 text-right",children:I.jsx("button",{onClick:()=>A(C.id),className:"text-xs tracking-widest text-red-400 hover:text-red-300",children:"DELETE"})})]},C.id))})]})})]})]})}):null}function W5(){var v;const n=To(),e=Ts(),[t,r]=M.useState(""),[s,o]=M.useState(""),[l,c]=M.useState(!1),[h,p]=M.useState(null),m=((v=e.state)==null?void 0:v.from)||"/admin",y=async T=>{T.preventDefault(),p(null),c(!0);try{await oF(Xg,t,s),n(m,{replace:!0})}catch(b){console.error(b),p("Invalid email or password.")}finally{c(!1)}};return I.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-6",children:I.jsxs("div",{className:"w-full max-w-md bg-zinc-900 border border-white/10 p-8",children:[I.jsx("h1",{className:"text-3xl font-semibold mb-2 tracking-tight",children:"Admin Login"}),I.jsx("p",{className:"text-xs text-gray-400 tracking-widest mb-6",children:"SIGN IN TO MANAGE PRODUCTS"}),h&&I.jsx("div",{className:"mb-4 text-sm text-red-400 bg-red-950/40 border border-red-500/40 px-4 py-2",children:h}),I.jsxs("form",{onSubmit:y,className:"space-y-4",children:[I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Email"}),I.jsx("input",{type:"email",className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:t,onChange:T=>r(T.target.value),placeholder:"admin@example.com"})]}),I.jsxs("div",{className:"space-y-2",children:[I.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Password"}),I.jsx("input",{type:"password",className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s,onChange:T=>o(T.target.value),placeholder:""})]}),I.jsx("button",{type:"submit",disabled:l,className:"w-full mt-4 px-6 py-2 bg-white text-black text-xs tracking-widest font-semibold hover:bg-gray-200 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:l?"SIGNING IN...":"SIGN IN"})]}),I.jsx("p",{className:"mt-4 text-[11px] text-gray-500 tracking-widest",children:"Use the admin email/password you created in the Firebase console (Email/Password auth)."})]})})}const H5="@infinity_vibe.1",PS="+91 6304-776448",q5="https://maps.app.goo.gl/WrcUHpUHRtxuVjUd8";function K5(){return I.jsx("div",{className:"bg-black text-white pt-32 pb-24 min-h-screen",children:I.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[I.jsxs(ye.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",children:[I.jsx("p",{className:"text-xs tracking-[0.3em] text-gray-500 mb-3",children:"GET IN TOUCH"}),I.jsxs("h1",{className:"text-4xl md:text-6xl tracking-tight",children:["Contact ",I.jsx("span",{className:"font-light",children:"Infinity Vibe"})]}),I.jsx("p",{className:"mt-4 text-gray-400 max-w-xl",children:"Questions, collaborations, or custom pieces? Reach out directly via phone or Instagram, or find us via the map below."})]}),I.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12 items-start",children:[I.jsxs(ye.div,{className:"space-y-8",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:[I.jsxs("div",{children:[I.jsx("h2",{className:"text-sm tracking-[0.3em] text-gray-500 mb-2",children:"PHONE"}),I.jsx("a",{href:`tel:${PS.replace(/[^+\d]/g,"")}`,className:"text-xl tracking-wide hover:underline",children:PS})]}),I.jsxs("div",{children:[I.jsx("h2",{className:"text-sm tracking-[0.3em] text-gray-500 mb-2",children:"INSTAGRAM"}),I.jsx("a",{href:"https://instagram.com/infinity_vibe.1",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-xl tracking-wide hover:underline",children:H5})]}),I.jsxs("div",{children:[I.jsx("h2",{className:"text-sm tracking-[0.3em] text-gray-500 mb-2",children:"LOCATION"}),I.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Tap below to open the exact Infinity Vibe location in Google Maps."}),I.jsx("a",{href:q5,target:"_blank",rel:"noreferrer",className:"inline-block px-6 py-2 border border-white text-xs tracking-[0.3em] hover:bg-white hover:text-black transition-colors",children:"OPEN IN MAPS"})]})]}),I.jsx(ye.div,{className:"lg:col-span-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.15},children:I.jsx("div",{className:"aspect-[16/9] w-full overflow-hidden border border-white/10 bg-zinc-900",children:I.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d3794.3128973411585!2d79.5623948!3d18.0106768!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a3345005bfc560f%3A0xcb3acd157904184f!2sInfinity%20Vibe!5e0!3m2!1sen!2sin!4v1772003821021!5m2!1sen!2sin",title:"Infinity Vibe Location",className:"w-full h-full border-0",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})})]})]})})}function G5(){return M.useEffect(()=>{document.documentElement.style.scrollBehavior="smooth"},[]),I.jsx(q2,{children:I.jsxs("div",{className:"min-h-screen bg-black text-white antialiased flex flex-col",children:[I.jsx(G2,{}),I.jsx("main",{className:"flex-grow",children:I.jsxs(FC,{children:[I.jsx(so,{path:"/",element:I.jsx(u6,{})}),I.jsx(so,{path:"/products",element:I.jsx(c6,{})}),I.jsx(so,{path:"/wishlist",element:I.jsx(h6,{})}),I.jsx(so,{path:"/login",element:I.jsx(W5,{})}),I.jsx(so,{path:"/admin",element:I.jsx(z5,{})}),I.jsx(so,{path:"/contact",element:I.jsx(K5,{})})]})}),I.jsx(J2,{})]})})}zR.createRoot(document.getElementById("root")).render(I.jsx(c1,{children:I.jsx(G5,{})}));
