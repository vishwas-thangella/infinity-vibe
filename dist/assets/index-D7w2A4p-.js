(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var nm={exports:{}},au={},rm={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uw;function TR(){if(Uw)return Oe;Uw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function w(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,I={};function x(z,Z,Pe){this.props=z,this.context=Z,this.refs=I,this.updater=Pe||E}x.prototype.isReactComponent={},x.prototype.setState=function(z,Z){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Z,"setState")},x.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function D(){}D.prototype=x.prototype;function U(z,Z,Pe){this.props=z,this.context=Z,this.refs=I,this.updater=Pe||E}var O=U.prototype=new D;O.constructor=U,b(O,x.prototype),O.isPureReactComponent=!0;var K=Array.isArray,Y=Object.prototype.hasOwnProperty,X={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function A(z,Z,Pe){var Ne,De={},Le=null,qe=null;if(Z!=null)for(Ne in Z.ref!==void 0&&(qe=Z.ref),Z.key!==void 0&&(Le=""+Z.key),Z)Y.call(Z,Ne)&&!P.hasOwnProperty(Ne)&&(De[Ne]=Z[Ne]);var Be=arguments.length-2;if(Be===1)De.children=Pe;else if(1<Be){for(var Je=Array(Be),on=0;on<Be;on++)Je[on]=arguments[on+2];De.children=Je}if(z&&z.defaultProps)for(Ne in Be=z.defaultProps,Be)De[Ne]===void 0&&(De[Ne]=Be[Ne]);return{$$typeof:n,type:z,key:Le,ref:qe,props:De,_owner:X.current}}function C(z,Z){return{$$typeof:n,type:z.type,key:Z,ref:z.ref,props:z.props,_owner:z._owner}}function V(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function M(z){var Z={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Pe){return Z[Pe]})}var B=/\/+/g;function L(z,Z){return typeof z=="object"&&z!==null&&z.key!=null?M(""+z.key):Z.toString(36)}function Fe(z,Z,Pe,Ne,De){var Le=typeof z;(Le==="undefined"||Le==="boolean")&&(z=null);var qe=!1;if(z===null)qe=!0;else switch(Le){case"string":case"number":qe=!0;break;case"object":switch(z.$$typeof){case n:case e:qe=!0}}if(qe)return qe=z,De=De(qe),z=Ne===""?"."+L(qe,0):Ne,K(De)?(Pe="",z!=null&&(Pe=z.replace(B,"$&/")+"/"),Fe(De,Z,Pe,"",function(on){return on})):De!=null&&(V(De)&&(De=C(De,Pe+(!De.key||qe&&qe.key===De.key?"":(""+De.key).replace(B,"$&/")+"/")+z)),Z.push(De)),1;if(qe=0,Ne=Ne===""?".":Ne+":",K(z))for(var Be=0;Be<z.length;Be++){Le=z[Be];var Je=Ne+L(Le,Be);qe+=Fe(Le,Z,Pe,Je,De)}else if(Je=w(z),typeof Je=="function")for(z=Je.call(z),Be=0;!(Le=z.next()).done;)Le=Le.value,Je=Ne+L(Le,Be++),qe+=Fe(Le,Z,Pe,Je,De);else if(Le==="object")throw Z=String(z),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return qe}function mt(z,Z,Pe){if(z==null)return z;var Ne=[],De=0;return Fe(z,Ne,"","",function(Le){return Z.call(Pe,Le,De++)}),Ne}function Mt(z){if(z._status===-1){var Z=z._result;Z=Z(),Z.then(function(Pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=Pe)},function(Pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=Pe)}),z._status===-1&&(z._status=0,z._result=Z)}if(z._status===1)return z._result.default;throw z._result}var Ce={current:null},se={transition:null},fe={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:se,ReactCurrentOwner:X};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:mt,forEach:function(z,Z,Pe){mt(z,function(){Z.apply(this,arguments)},Pe)},count:function(z){var Z=0;return mt(z,function(){Z++}),Z},toArray:function(z){return mt(z,function(Z){return Z})||[]},only:function(z){if(!V(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Oe.Component=x,Oe.Fragment=t,Oe.Profiler=s,Oe.PureComponent=U,Oe.StrictMode=r,Oe.Suspense=h,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,Oe.act=ae,Oe.cloneElement=function(z,Z,Pe){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var Ne=b({},z.props),De=z.key,Le=z.ref,qe=z._owner;if(Z!=null){if(Z.ref!==void 0&&(Le=Z.ref,qe=X.current),Z.key!==void 0&&(De=""+Z.key),z.type&&z.type.defaultProps)var Be=z.type.defaultProps;for(Je in Z)Y.call(Z,Je)&&!P.hasOwnProperty(Je)&&(Ne[Je]=Z[Je]===void 0&&Be!==void 0?Be[Je]:Z[Je])}var Je=arguments.length-2;if(Je===1)Ne.children=Pe;else if(1<Je){Be=Array(Je);for(var on=0;on<Je;on++)Be[on]=arguments[on+2];Ne.children=Be}return{$$typeof:n,type:z.type,key:De,ref:Le,props:Ne,_owner:qe}},Oe.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:o,_context:z},z.Consumer=z},Oe.createElement=A,Oe.createFactory=function(z){var Z=A.bind(null,z);return Z.type=z,Z},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(z){return{$$typeof:c,render:z}},Oe.isValidElement=V,Oe.lazy=function(z){return{$$typeof:m,_payload:{_status:-1,_result:z},_init:Mt}},Oe.memo=function(z,Z){return{$$typeof:p,type:z,compare:Z===void 0?null:Z}},Oe.startTransition=function(z){var Z=se.transition;se.transition={};try{z()}finally{se.transition=Z}},Oe.unstable_act=ae,Oe.useCallback=function(z,Z){return Ce.current.useCallback(z,Z)},Oe.useContext=function(z){return Ce.current.useContext(z)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(z){return Ce.current.useDeferredValue(z)},Oe.useEffect=function(z,Z){return Ce.current.useEffect(z,Z)},Oe.useId=function(){return Ce.current.useId()},Oe.useImperativeHandle=function(z,Z,Pe){return Ce.current.useImperativeHandle(z,Z,Pe)},Oe.useInsertionEffect=function(z,Z){return Ce.current.useInsertionEffect(z,Z)},Oe.useLayoutEffect=function(z,Z){return Ce.current.useLayoutEffect(z,Z)},Oe.useMemo=function(z,Z){return Ce.current.useMemo(z,Z)},Oe.useReducer=function(z,Z,Pe){return Ce.current.useReducer(z,Z,Pe)},Oe.useRef=function(z){return Ce.current.useRef(z)},Oe.useState=function(z){return Ce.current.useState(z)},Oe.useSyncExternalStore=function(z,Z,Pe){return Ce.current.useSyncExternalStore(z,Z,Pe)},Oe.useTransition=function(){return Ce.current.useTransition()},Oe.version="18.3.1",Oe}var Fw;function ty(){return Fw||(Fw=1,rm.exports=TR()),rm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w;function SR(){if($w)return au;$w=1;var n=ty(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var m,y={},w=null,E=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(E=h.ref);for(m in h)r.call(h,m)&&!o.hasOwnProperty(m)&&(y[m]=h[m]);if(c&&c.defaultProps)for(m in h=c.defaultProps,h)y[m]===void 0&&(y[m]=h[m]);return{$$typeof:e,type:c,key:w,ref:E,props:y,_owner:s.current}}return au.Fragment=t,au.jsx=l,au.jsxs=l,au}var Bw;function bR(){return Bw||(Bw=1,nm.exports=SR()),nm.exports}var k=bR(),Dh={},sm={exports:{}},yn={},im={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function IR(){return zw||(zw=1,(function(n){function e(se,fe){var ae=se.length;se.push(fe);e:for(;0<ae;){var z=ae-1>>>1,Z=se[z];if(0<s(Z,fe))se[z]=fe,se[ae]=Z,ae=z;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var fe=se[0],ae=se.pop();if(ae!==fe){se[0]=ae;e:for(var z=0,Z=se.length,Pe=Z>>>1;z<Pe;){var Ne=2*(z+1)-1,De=se[Ne],Le=Ne+1,qe=se[Le];if(0>s(De,ae))Le<Z&&0>s(qe,De)?(se[z]=qe,se[Le]=ae,z=Le):(se[z]=De,se[Ne]=ae,z=Ne);else if(Le<Z&&0>s(qe,ae))se[z]=qe,se[Le]=ae,z=Le;else break e}}return fe}function s(se,fe){var ae=se.sortIndex-fe.sortIndex;return ae!==0?ae:se.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],m=1,y=null,w=3,E=!1,b=!1,I=!1,x=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(se){for(var fe=t(p);fe!==null;){if(fe.callback===null)r(p);else if(fe.startTime<=se)r(p),fe.sortIndex=fe.expirationTime,e(h,fe);else break;fe=t(p)}}function K(se){if(I=!1,O(se),!b)if(t(h)!==null)b=!0,Mt(Y);else{var fe=t(p);fe!==null&&Ce(K,fe.startTime-se)}}function Y(se,fe){b=!1,I&&(I=!1,D(A),A=-1),E=!0;var ae=w;try{for(O(fe),y=t(h);y!==null&&(!(y.expirationTime>fe)||se&&!M());){var z=y.callback;if(typeof z=="function"){y.callback=null,w=y.priorityLevel;var Z=z(y.expirationTime<=fe);fe=n.unstable_now(),typeof Z=="function"?y.callback=Z:y===t(h)&&r(h),O(fe)}else r(h);y=t(h)}if(y!==null)var Pe=!0;else{var Ne=t(p);Ne!==null&&Ce(K,Ne.startTime-fe),Pe=!1}return Pe}finally{y=null,w=ae,E=!1}}var X=!1,P=null,A=-1,C=5,V=-1;function M(){return!(n.unstable_now()-V<C)}function B(){if(P!==null){var se=n.unstable_now();V=se;var fe=!0;try{fe=P(!0,se)}finally{fe?L():(X=!1,P=null)}}else X=!1}var L;if(typeof U=="function")L=function(){U(B)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,mt=Fe.port2;Fe.port1.onmessage=B,L=function(){mt.postMessage(null)}}else L=function(){x(B,0)};function Mt(se){P=se,X||(X=!0,L())}function Ce(se,fe){A=x(function(){se(n.unstable_now())},fe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){b||E||(b=!0,Mt(Y))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(se){switch(w){case 1:case 2:case 3:var fe=3;break;default:fe=w}var ae=w;w=fe;try{return se()}finally{w=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,fe){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ae=w;w=se;try{return fe()}finally{w=ae}},n.unstable_scheduleCallback=function(se,fe,ae){var z=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?z+ae:z):ae=z,se){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ae+Z,se={id:m++,callback:fe,priorityLevel:se,startTime:ae,expirationTime:Z,sortIndex:-1},ae>z?(se.sortIndex=ae,e(p,se),t(h)===null&&se===t(p)&&(I?(D(A),A=-1):I=!0,Ce(K,ae-z))):(se.sortIndex=Z,e(h,se),b||E||(b=!0,Mt(Y))),se},n.unstable_shouldYield=M,n.unstable_wrapCallback=function(se){var fe=w;return function(){var ae=w;w=fe;try{return se.apply(this,arguments)}finally{w=ae}}}})(om)),om}var Hw;function xR(){return Hw||(Hw=1,im.exports=IR()),im.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww;function kR(){if(Ww)return yn;Ww=1;var n=ty(),e=xR();function t(i){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function o(i,a){l(i,a),l(i+"Capture",a)}function l(i,a){for(s[i]=a,i=0;i<a.length;i++)r.add(a[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},y={};function w(i){return h.call(y,i)?!0:h.call(m,i)?!1:p.test(i)?y[i]=!0:(m[i]=!0,!1)}function E(i,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,a,u,f){if(a===null||typeof a>"u"||E(i,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function I(i,a,u,f,g,v,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=a,this.sanitizeURL=v,this.removeEmptyString=S}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){x[i]=new I(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var a=i[0];x[a]=new I(a,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){x[i]=new I(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){x[i]=new I(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){x[i]=new I(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){x[i]=new I(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){x[i]=new I(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){x[i]=new I(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){x[i]=new I(i,5,!1,i.toLowerCase(),null,!1,!1)});var D=/[\-:]([a-z])/g;function U(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var a=i.replace(D,U);x[a]=new I(a,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var a=i.replace(D,U);x[a]=new I(a,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var a=i.replace(D,U);x[a]=new I(a,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){x[i]=new I(i,1,!1,i.toLowerCase(),null,!1,!1)}),x.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){x[i]=new I(i,1,!1,i.toLowerCase(),null,!0,!0)});function O(i,a,u,f){var g=x.hasOwnProperty(a)?x[a]:null;(g!==null?g.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,u,g,f)&&(u=null),f||g===null?w(a)&&(u===null?i.removeAttribute(a):i.setAttribute(a,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,a,u):i.setAttribute(a,u))))}var K=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Y=Symbol.for("react.element"),X=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),M=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),mt=Symbol.for("react.memo"),Mt=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),se=Symbol.iterator;function fe(i){return i===null||typeof i!="object"?null:(i=se&&i[se]||i["@@iterator"],typeof i=="function"?i:null)}var ae=Object.assign,z;function Z(i){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+i}var Pe=!1;function Ne(i,a){if(!i||Pe)return"";Pe=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(G){var f=G}Reflect.construct(i,[],a)}else{try{a.call()}catch(G){f=G}i.call(a.prototype)}else{try{throw Error()}catch(G){f=G}i()}}catch(G){if(G&&f&&typeof G.stack=="string"){for(var g=G.stack.split(`
`),v=f.stack.split(`
`),S=g.length-1,N=v.length-1;1<=S&&0<=N&&g[S]!==v[N];)N--;for(;1<=S&&0<=N;S--,N--)if(g[S]!==v[N]){if(S!==1||N!==1)do if(S--,N--,0>N||g[S]!==v[N]){var F=`
`+g[S].replace(" at new "," at ");return i.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",i.displayName)),F}while(1<=S&&0<=N);break}}}finally{Pe=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?Z(i):""}function De(i){switch(i.tag){case 5:return Z(i.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return i=Ne(i.type,!1),i;case 11:return i=Ne(i.type.render,!1),i;case 1:return i=Ne(i.type,!0),i;default:return""}}function Le(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case X:return"Portal";case C:return"Profiler";case A:return"StrictMode";case L:return"Suspense";case Fe:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case M:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case B:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case mt:return a=i.displayName||null,a!==null?a:Le(i.type)||"Memo";case Mt:a=i._payload,i=i._init;try{return Le(i(a))}catch{}}return null}function qe(i){var a=i.type;switch(i.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=a.render,i=i.displayName||i.name||"",a.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(a);case 8:return a===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Je(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function on(i){var a=Je(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),f=""+i[a];if(!i.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,v=u.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(S){f=""+S,v.call(this,S)}}),Object.defineProperty(i,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(S){f=""+S},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Ao(i){i._valueTracker||(i._valueTracker=on(i))}function fl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return i&&(f=Je(i)?i.checked?"true":"false":i.value),i=f,i!==u?(a.setValue(i),!0):!1}function bs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ro(i,a){var u=a.checked;return ae({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function _c(i,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=Be(a.value!=null?a.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Co(i,a){a=a.checked,a!=null&&O(i,"checked",a,!1)}function Ai(i,a){Co(i,a);var u=Be(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}a.hasOwnProperty("value")?wt(i,a.type,u):a.hasOwnProperty("defaultValue")&&wt(i,a.type,Be(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(i.defaultChecked=!!a.defaultChecked)}function pl(i,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+i._wrapperState.initialValue,u||a===i.value||(i.value=a),i.defaultValue=a}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function wt(i,a,u){(a!=="number"||bs(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var gt=Array.isArray;function Wn(i,a,u,f){if(i=i.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=a.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Be(u),a=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function ml(i,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},a,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function gl(i,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(gt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}i._wrapperState={initialValue:Be(u)}}function wc(i,a){var u=Be(a.value),f=Be(a.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),a.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function Is(i){var a=i.textContent;a===i._wrapperState.initialValue&&a!==""&&a!==null&&(i.value=a)}function yl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Po(i,a){return i==null||i==="http://www.w3.org/1999/xhtml"?yl(a):i==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var xs,Ec=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(a,u,f,g)})}:i})(function(i,a){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=a;else{for(xs=xs||document.createElement("div"),xs.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=xs.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;a.firstChild;)i.appendChild(a.firstChild)}});function Ri(i,a){if(a){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=a;return}}i.textContent=a}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Tc=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(i){Tc.forEach(function(a){a=a+i.charAt(0).toUpperCase()+i.substring(1),ks[a]=ks[i]})});function As(i,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||ks.hasOwnProperty(i)&&ks[i]?(""+a).trim():a+"px"}function No(i,a){i=i.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=As(u,a[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var vl=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qn(i,a){if(a){if(vl[i]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Oo(i,a){if(i.indexOf("-")===-1)return typeof a.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rs=null;function Do(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Kr=null,Gr=null,ht=null;function _l(i){if(i=ql(i)){if(typeof Kr!="function")throw Error(t(280));var a=i.stateNode;a&&(a=Jc(a),Kr(i.stateNode,i.type,a))}}function Cs(i){Gr?ht?ht.push(i):ht=[i]:Gr=i}function Ps(){if(Gr){var i=Gr,a=ht;if(ht=Gr=null,_l(i),a)for(i=0;i<a.length;i++)_l(a[i])}}function Sc(i,a){return i(a)}function bc(){}var fr=!1;function Ic(i,a,u){if(fr)return i(a,u);fr=!0;try{return Sc(i,a,u)}finally{fr=!1,(Gr!==null||ht!==null)&&(bc(),Ps())}}function Ci(i,a){var u=i.stateNode;if(u===null)return null;var f=Jc(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var Ns=!1;if(c)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{Ns=!1}function xc(i,a,u,f,g,v,S,N,F){var G=Array.prototype.slice.call(arguments,3);try{a.apply(u,G)}catch(ne){this.onError(ne)}}var Jr=!1,pr=null,Lo=!1,Pn=null,kc={onError:function(i){Jr=!0,pr=i}};function Ac(i,a,u,f,g,v,S,N,F){Jr=!1,pr=null,xc.apply(kc,arguments)}function wl(i,a,u,f,g,v,S,N,F){if(Ac.apply(this,arguments),Jr){if(Jr){var G=pr;Jr=!1,pr=null}else throw Error(t(198));Lo||(Lo=!0,Pn=G)}}function Kn(i){var a=i,u=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(u=a.return),i=a.return;while(i)}return a.tag===3?u:null}function El(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function Rc(i){if(Kn(i)!==i)throw Error(t(188))}function Cc(i){var a=i.alternate;if(!a){if(a=Kn(i),a===null)throw Error(t(188));return a!==i?null:i}for(var u=i,f=a;;){var g=u.return;if(g===null)break;var v=g.alternate;if(v===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===u)return Rc(g),i;if(v===f)return Rc(g),a;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=v;else{for(var S=!1,N=g.child;N;){if(N===u){S=!0,u=g,f=v;break}if(N===f){S=!0,f=g,u=v;break}N=N.sibling}if(!S){for(N=v.child;N;){if(N===u){S=!0,u=v,f=g;break}if(N===f){S=!0,f=v,u=g;break}N=N.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:a}function Pc(i){return i=Cc(i),i!==null?Pi(i):null}function Pi(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var a=Pi(i);if(a!==null)return a;i=i.sibling}return null}var Tl=e.unstable_scheduleCallback,Vo=e.unstable_cancelCallback,Ni=e.unstable_shouldYield,Yr=e.unstable_requestPaint,et=e.unstable_now,Of=e.unstable_getCurrentPriorityLevel,Mo=e.unstable_ImmediatePriority,Sl=e.unstable_UserBlockingPriority,Oi=e.unstable_NormalPriority,bl=e.unstable_LowPriority,jo=e.unstable_IdlePriority,Di=null,wn=null;function Nc(i){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Di,i,void 0,(i.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:Li,mr=Math.log,Nn=Math.LN2;function Li(i){return i>>>=0,i===0?32:31-(mr(i)/Nn|0)|0}var gr=64,Ds=4194304;function We(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Qr(i,a){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,v=i.pingedLanes,S=u&268435455;if(S!==0){var N=S&~g;N!==0?f=We(N):(v&=S,v!==0&&(f=We(v)))}else S=u&~g,S!==0?f=We(S):v!==0&&(f=We(v));if(f===0)return 0;if(a!==0&&a!==f&&(a&g)===0&&(g=f&-f,v=a&-a,g>=v||g===16&&(v&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=i.entangledLanes,a!==0)for(i=i.entanglements,a&=f;0<a;)u=31-En(a),g=1<<u,f|=i[u],a&=~g;return f}function Vi(i,a){switch(i){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mi(i,a){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes;0<v;){var S=31-En(v),N=1<<S,F=g[S];F===-1?((N&u)===0||(N&f)!==0)&&(g[S]=Vi(N,a)):F<=a&&(i.expiredLanes|=N),v&=~N}}function Il(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function xl(){var i=gr;return gr<<=1,(gr&4194240)===0&&(gr=64),i}function kl(i){for(var a=[],u=0;31>u;u++)a.push(i);return a}function ji(i,a,u){i.pendingLanes|=a,a!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,a=31-En(a),i[a]=u}function Df(i,a){var u=i.pendingLanes&~a;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=a,i.mutableReadLanes&=a,i.entangledLanes&=a,a=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-En(u),v=1<<g;a[g]=0,f[g]=-1,i[g]=-1,u&=~v}}function Al(i,a){var u=i.entangledLanes|=a;for(i=i.entanglements;u;){var f=31-En(u),g=1<<f;g&a|i[f]&a&&(i[f]|=a),u&=~g}}var Ue=0;function yr(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Rl,Uo,Cl,Pl,Nl,vr=!1,Fo=[],_r=null,wr=null,jt=null,Ui=new Map,Xr=new Map,Tn=[],Oc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ls(i,a){switch(i){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":wr=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":Ui.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xr.delete(a.pointerId)}}function Gn(i,a,u,f,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[g]},a!==null&&(a=ql(a),a!==null&&Uo(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function Dc(i,a,u,f,g){switch(a){case"focusin":return _r=Gn(_r,i,a,u,f,g),!0;case"dragenter":return wr=Gn(wr,i,a,u,f,g),!0;case"mouseover":return jt=Gn(jt,i,a,u,f,g),!0;case"pointerover":var v=g.pointerId;return Ui.set(v,Gn(Ui.get(v)||null,i,a,u,f,g)),!0;case"gotpointercapture":return v=g.pointerId,Xr.set(v,Gn(Xr.get(v)||null,i,a,u,f,g)),!0}return!1}function $o(i){var a=zi(i.target);if(a!==null){var u=Kn(a);if(u!==null){if(a=u.tag,a===13){if(a=El(u),a!==null){i.blockedOn=a,Nl(i.priority,function(){Cl(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ye(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var u=Bo(i.domEventName,i.eventSystemFlags,a[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Rs=f,u.target.dispatchEvent(f),Rs=null}else return a=ql(u),a!==null&&Uo(a),i.blockedOn=u,!1;a.shift()}return!0}function Lc(i,a,u){Ye(i)&&u.delete(a)}function Lf(){vr=!1,_r!==null&&Ye(_r)&&(_r=null),wr!==null&&Ye(wr)&&(wr=null),jt!==null&&Ye(jt)&&(jt=null),Ui.forEach(Lc),Xr.forEach(Lc)}function Vs(i,a){i.blockedOn===a&&(i.blockedOn=null,vr||(vr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lf)))}function Ms(i){function a(g){return Vs(g,i)}if(0<Fo.length){Vs(Fo[0],i);for(var u=1;u<Fo.length;u++){var f=Fo[u];f.blockedOn===i&&(f.blockedOn=null)}}for(_r!==null&&Vs(_r,i),wr!==null&&Vs(wr,i),jt!==null&&Vs(jt,i),Ui.forEach(a),Xr.forEach(a),u=0;u<Tn.length;u++)f=Tn[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Tn.length&&(u=Tn[0],u.blockedOn===null);)$o(u),u.blockedOn===null&&Tn.shift()}var Zr=K.ReactCurrentBatchConfig,es=!0;function Er(i,a,u,f){var g=Ue,v=Zr.transition;Zr.transition=null;try{Ue=1,Ol(i,a,u,f)}finally{Ue=g,Zr.transition=v}}function Vc(i,a,u,f){var g=Ue,v=Zr.transition;Zr.transition=null;try{Ue=4,Ol(i,a,u,f)}finally{Ue=g,Zr.transition=v}}function Ol(i,a,u,f){if(es){var g=Bo(i,a,u,f);if(g===null)qf(i,a,f,Tr,u),Ls(i,f);else if(Dc(g,i,a,u,f))f.stopPropagation();else if(Ls(i,f),a&4&&-1<Oc.indexOf(i)){for(;g!==null;){var v=ql(g);if(v!==null&&Rl(v),v=Bo(i,a,u,f),v===null&&qf(i,a,f,Tr,u),v===g)break;g=v}g!==null&&f.stopPropagation()}else qf(i,a,f,null,u)}}var Tr=null;function Bo(i,a,u,f){if(Tr=null,i=Do(f),i=zi(i),i!==null)if(a=Kn(i),a===null)i=null;else if(u=a.tag,u===13){if(i=El(a),i!==null)return i;i=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null);return Tr=i,null}function zo(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Of()){case Mo:return 1;case Sl:return 4;case Oi:case bl:return 16;case jo:return 536870912;default:return 16}default:return 16}}var Sn=null,Ho=null,ts=null;function Mc(){if(ts)return ts;var i,a=Ho,u=a.length,f,g="value"in Sn?Sn.value:Sn.textContent,v=g.length;for(i=0;i<u&&a[i]===g[i];i++);var S=u-i;for(f=1;f<=S&&a[u-f]===g[v-f];f++);return ts=g.slice(i,1<f?1-f:void 0)}function Fi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Sr(){return!0}function Dl(){return!1}function Jt(i){function a(u,f,g,v,S){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(v):v[N]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Sr:Dl,this.isPropagationStopped=Dl,this}return ae(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sr)},persist:function(){},isPersistent:Sr}),a}var br={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$i=Jt(br),js=ae({},br,{view:0,detail:0}),Wo=Jt(js),qo,Ko,bn,Bi=ae({},js,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ae,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==bn&&(bn&&i.type==="mousemove"?(qo=i.screenX-bn.screenX,Ko=i.screenY-bn.screenY):Ko=qo=0,bn=i),qo)},movementY:function(i){return"movementY"in i?i.movementY:Ko}}),Ll=Jt(Bi),jc=ae({},Bi,{dataTransfer:0}),Uc=Jt(jc),Go=ae({},js,{relatedTarget:0}),Ut=Jt(Go),Fc=ae({},br,{animationName:0,elapsedTime:0,pseudoElement:0}),$c=Jt(Fc),Us=ae({},br,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),d=Jt(Us),_=ae({},br,{data:0}),T=Jt(_),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oe(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=J[i])?!!a[i]:!1}function Ae(){return oe}var yt=ae({},js,{key:function(i){if(i.key){var a=R[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Fi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?W[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ae,charCode:function(i){return i.type==="keypress"?Fi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Fi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ge=Jt(yt),Et=ae({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),In=Jt(Et),ns=ae({},js,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ae}),Ir=Jt(ns),xr=ae({},br,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jo=Jt(xr),Vl=ae({},Bi,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),gA=Jt(Vl),yA=[9,13,27,32],Vf=c&&"CompositionEvent"in window,Ml=null;c&&"documentMode"in document&&(Ml=document.documentMode);var vA=c&&"TextEvent"in window&&!Ml,Pv=c&&(!Vf||Ml&&8<Ml&&11>=Ml),Nv=" ",Ov=!1;function Dv(i,a){switch(i){case"keyup":return yA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yo=!1;function _A(i,a){switch(i){case"compositionend":return Lv(a);case"keypress":return a.which!==32?null:(Ov=!0,Nv);case"textInput":return i=a.data,i===Nv&&Ov?null:i;default:return null}}function wA(i,a){if(Yo)return i==="compositionend"||!Vf&&Dv(i,a)?(i=Mc(),ts=Ho=Sn=null,Yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Pv&&a.locale!=="ko"?null:a.data;default:return null}}var EA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vv(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!EA[i.type]:a==="textarea"}function Mv(i,a,u,f){Cs(f),a=qc(a,"onChange"),0<a.length&&(u=new $i("onChange","change",null,u,f),i.push({event:u,listeners:a}))}var jl=null,Ul=null;function TA(i){t_(i,0)}function Bc(i){var a=ta(i);if(fl(a))return i}function SA(i,a){if(i==="change")return a}var jv=!1;if(c){var Mf;if(c){var jf="oninput"in document;if(!jf){var Uv=document.createElement("div");Uv.setAttribute("oninput","return;"),jf=typeof Uv.oninput=="function"}Mf=jf}else Mf=!1;jv=Mf&&(!document.documentMode||9<document.documentMode)}function Fv(){jl&&(jl.detachEvent("onpropertychange",$v),Ul=jl=null)}function $v(i){if(i.propertyName==="value"&&Bc(Ul)){var a=[];Mv(a,Ul,i,Do(i)),Ic(TA,a)}}function bA(i,a,u){i==="focusin"?(Fv(),jl=a,Ul=u,jl.attachEvent("onpropertychange",$v)):i==="focusout"&&Fv()}function IA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Bc(Ul)}function xA(i,a){if(i==="click")return Bc(a)}function kA(i,a){if(i==="input"||i==="change")return Bc(a)}function AA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Jn=typeof Object.is=="function"?Object.is:AA;function Fl(i,a){if(Jn(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var u=Object.keys(i),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(a,g)||!Jn(i[g],a[g]))return!1}return!0}function Bv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function zv(i,a){var u=Bv(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=a&&f>=a)return{node:u,offset:a-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Bv(u)}}function Hv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Hv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Wv(){for(var i=window,a=bs();a instanceof i.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)i=a.contentWindow;else break;a=bs(i.document)}return a}function Uf(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function RA(i){var a=Wv(),u=i.focusedElem,f=i.selectionRange;if(a!==u&&u&&u.ownerDocument&&Hv(u.ownerDocument.documentElement,u)){if(f!==null&&Uf(u)){if(a=f.start,i=f.end,i===void 0&&(i=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(i,u.value.length);else if(i=(a=u.ownerDocument||document)&&a.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,v=Math.min(f.start,g);f=f.end===void 0?v:Math.min(f.end,g),!i.extend&&v>f&&(g=f,f=v,v=g),g=zv(u,v);var S=zv(u,f);g&&S&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==S.node||i.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),i.removeAllRanges(),v>f?(i.addRange(a),i.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),i.addRange(a)))}}for(a=[],i=u;i=i.parentNode;)i.nodeType===1&&a.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)i=a[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var CA=c&&"documentMode"in document&&11>=document.documentMode,Qo=null,Ff=null,$l=null,$f=!1;function qv(i,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;$f||Qo==null||Qo!==bs(f)||(f=Qo,"selectionStart"in f&&Uf(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),$l&&Fl($l,f)||($l=f,f=qc(Ff,"onSelect"),0<f.length&&(a=new $i("onSelect","select",null,a,u),i.push({event:a,listeners:f}),a.target=Qo)))}function zc(i,a){var u={};return u[i.toLowerCase()]=a.toLowerCase(),u["Webkit"+i]="webkit"+a,u["Moz"+i]="moz"+a,u}var Xo={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},Bf={},Kv={};c&&(Kv=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Hc(i){if(Bf[i])return Bf[i];if(!Xo[i])return i;var a=Xo[i],u;for(u in a)if(a.hasOwnProperty(u)&&u in Kv)return Bf[i]=a[u];return i}var Gv=Hc("animationend"),Jv=Hc("animationiteration"),Yv=Hc("animationstart"),Qv=Hc("transitionend"),Xv=new Map,Zv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fs(i,a){Xv.set(i,a),o(a,[i])}for(var zf=0;zf<Zv.length;zf++){var Hf=Zv[zf],PA=Hf.toLowerCase(),NA=Hf[0].toUpperCase()+Hf.slice(1);Fs(PA,"on"+NA)}Fs(Gv,"onAnimationEnd"),Fs(Jv,"onAnimationIteration"),Fs(Yv,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(Qv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bl));function e_(i,a,u){var f=i.type||"unknown-event";i.currentTarget=u,wl(f,a,void 0,i),i.currentTarget=null}function t_(i,a){a=(a&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var v=void 0;if(a)for(var S=f.length-1;0<=S;S--){var N=f[S],F=N.instance,G=N.currentTarget;if(N=N.listener,F!==v&&g.isPropagationStopped())break e;e_(g,N,G),v=F}else for(S=0;S<f.length;S++){if(N=f[S],F=N.instance,G=N.currentTarget,N=N.listener,F!==v&&g.isPropagationStopped())break e;e_(g,N,G),v=F}}}if(Lo)throw i=Pn,Lo=!1,Pn=null,i}function tt(i,a){var u=a[Xf];u===void 0&&(u=a[Xf]=new Set);var f=i+"__bubble";u.has(f)||(n_(a,i,2,!1),u.add(f))}function Wf(i,a,u){var f=0;a&&(f|=4),n_(u,i,f,a)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function zl(i){if(!i[Wc]){i[Wc]=!0,r.forEach(function(u){u!=="selectionchange"&&(OA.has(u)||Wf(u,!1,i),Wf(u,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Wc]||(a[Wc]=!0,Wf("selectionchange",!1,a))}}function n_(i,a,u,f){switch(zo(a)){case 1:var g=Er;break;case 4:g=Vc;break;default:g=Ol}u=g.bind(null,a,u,i),g=void 0,!Ns||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(a,u,{capture:!0,passive:g}):i.addEventListener(a,u,!0):g!==void 0?i.addEventListener(a,u,{passive:g}):i.addEventListener(a,u,!1)}function qf(i,a,u,f,g){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(S===4)for(S=f.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===g||F.nodeType===8&&F.parentNode===g))return;S=S.return}for(;N!==null;){if(S=zi(N),S===null)return;if(F=S.tag,F===5||F===6){f=v=S;continue e}N=N.parentNode}}f=f.return}Ic(function(){var G=v,ne=Do(u),re=[];e:{var ee=Xv.get(i);if(ee!==void 0){var le=$i,he=i;switch(i){case"keypress":if(Fi(u)===0)break e;case"keydown":case"keyup":le=Ge;break;case"focusin":he="focus",le=Ut;break;case"focusout":he="blur",le=Ut;break;case"beforeblur":case"afterblur":le=Ut;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Ir;break;case Gv:case Jv:case Yv:le=$c;break;case Qv:le=Jo;break;case"scroll":le=Wo;break;case"wheel":le=gA;break;case"copy":case"cut":case"paste":le=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=In}var pe=(a&4)!==0,vt=!pe&&i==="scroll",H=pe?ee!==null?ee+"Capture":null:ee;pe=[];for(var $=G,q;$!==null;){q=$;var ie=q.stateNode;if(q.tag===5&&ie!==null&&(q=ie,H!==null&&(ie=Ci($,H),ie!=null&&pe.push(Hl($,ie,q)))),vt)break;$=$.return}0<pe.length&&(ee=new le(ee,he,null,u,ne),re.push({event:ee,listeners:pe}))}}if((a&7)===0){e:{if(ee=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",ee&&u!==Rs&&(he=u.relatedTarget||u.fromElement)&&(zi(he)||he[rs]))break e;if((le||ee)&&(ee=ne.window===ne?ne:(ee=ne.ownerDocument)?ee.defaultView||ee.parentWindow:window,le?(he=u.relatedTarget||u.toElement,le=G,he=he?zi(he):null,he!==null&&(vt=Kn(he),he!==vt||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=G),le!==he)){if(pe=Ll,ie="onMouseLeave",H="onMouseEnter",$="mouse",(i==="pointerout"||i==="pointerover")&&(pe=In,ie="onPointerLeave",H="onPointerEnter",$="pointer"),vt=le==null?ee:ta(le),q=he==null?ee:ta(he),ee=new pe(ie,$+"leave",le,u,ne),ee.target=vt,ee.relatedTarget=q,ie=null,zi(ne)===G&&(pe=new pe(H,$+"enter",he,u,ne),pe.target=q,pe.relatedTarget=vt,ie=pe),vt=ie,le&&he)t:{for(pe=le,H=he,$=0,q=pe;q;q=Zo(q))$++;for(q=0,ie=H;ie;ie=Zo(ie))q++;for(;0<$-q;)pe=Zo(pe),$--;for(;0<q-$;)H=Zo(H),q--;for(;$--;){if(pe===H||H!==null&&pe===H.alternate)break t;pe=Zo(pe),H=Zo(H)}pe=null}else pe=null;le!==null&&r_(re,ee,le,pe,!1),he!==null&&vt!==null&&r_(re,vt,he,pe,!0)}}e:{if(ee=G?ta(G):window,le=ee.nodeName&&ee.nodeName.toLowerCase(),le==="select"||le==="input"&&ee.type==="file")var me=SA;else if(Vv(ee))if(jv)me=kA;else{me=IA;var we=bA}else(le=ee.nodeName)&&le.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(me=xA);if(me&&(me=me(i,G))){Mv(re,me,u,ne);break e}we&&we(i,ee,G),i==="focusout"&&(we=ee._wrapperState)&&we.controlled&&ee.type==="number"&&wt(ee,"number",ee.value)}switch(we=G?ta(G):window,i){case"focusin":(Vv(we)||we.contentEditable==="true")&&(Qo=we,Ff=G,$l=null);break;case"focusout":$l=Ff=Qo=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,qv(re,u,ne);break;case"selectionchange":if(CA)break;case"keydown":case"keyup":qv(re,u,ne)}var Ee;if(Vf)e:{switch(i){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Yo?Dv(i,u)&&(xe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(xe="onCompositionStart");xe&&(Pv&&u.locale!=="ko"&&(Yo||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Yo&&(Ee=Mc()):(Sn=ne,Ho="value"in Sn?Sn.value:Sn.textContent,Yo=!0)),we=qc(G,xe),0<we.length&&(xe=new T(xe,i,null,u,ne),re.push({event:xe,listeners:we}),Ee?xe.data=Ee:(Ee=Lv(u),Ee!==null&&(xe.data=Ee)))),(Ee=vA?_A(i,u):wA(i,u))&&(G=qc(G,"onBeforeInput"),0<G.length&&(ne=new T("onBeforeInput","beforeinput",null,u,ne),re.push({event:ne,listeners:G}),ne.data=Ee))}t_(re,a)})}function Hl(i,a,u){return{instance:i,listener:a,currentTarget:u}}function qc(i,a){for(var u=a+"Capture",f=[];i!==null;){var g=i,v=g.stateNode;g.tag===5&&v!==null&&(g=v,v=Ci(i,u),v!=null&&f.unshift(Hl(i,v,g)),v=Ci(i,a),v!=null&&f.push(Hl(i,v,g))),i=i.return}return f}function Zo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function r_(i,a,u,f,g){for(var v=a._reactName,S=[];u!==null&&u!==f;){var N=u,F=N.alternate,G=N.stateNode;if(F!==null&&F===f)break;N.tag===5&&G!==null&&(N=G,g?(F=Ci(u,v),F!=null&&S.unshift(Hl(u,F,N))):g||(F=Ci(u,v),F!=null&&S.push(Hl(u,F,N)))),u=u.return}S.length!==0&&i.push({event:a,listeners:S})}var DA=/\r\n?/g,LA=/\u0000|\uFFFD/g;function s_(i){return(typeof i=="string"?i:""+i).replace(DA,`
`).replace(LA,"")}function Kc(i,a,u){if(a=s_(a),s_(i)!==a&&u)throw Error(t(425))}function Gc(){}var Kf=null,Gf=null;function Jf(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,VA=typeof clearTimeout=="function"?clearTimeout:void 0,i_=typeof Promise=="function"?Promise:void 0,MA=typeof queueMicrotask=="function"?queueMicrotask:typeof i_<"u"?function(i){return i_.resolve(null).then(i).catch(jA)}:Yf;function jA(i){setTimeout(function(){throw i})}function Qf(i,a){var u=a,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Ms(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Ms(a)}function $s(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return i}function o_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return i;a--}else u==="/$"&&a++}i=i.previousSibling}return null}var ea=Math.random().toString(36).slice(2),kr="__reactFiber$"+ea,Wl="__reactProps$"+ea,rs="__reactContainer$"+ea,Xf="__reactEvents$"+ea,UA="__reactListeners$"+ea,FA="__reactHandles$"+ea;function zi(i){var a=i[kr];if(a)return a;for(var u=i.parentNode;u;){if(a=u[rs]||u[kr]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(i=o_(i);i!==null;){if(u=i[kr])return u;i=o_(i)}return a}i=u,u=i.parentNode}return null}function ql(i){return i=i[kr]||i[rs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ta(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Jc(i){return i[Wl]||null}var Zf=[],na=-1;function Bs(i){return{current:i}}function nt(i){0>na||(i.current=Zf[na],Zf[na]=null,na--)}function Qe(i,a){na++,Zf[na]=i.current,i.current=a}var zs={},Yt=Bs(zs),dn=Bs(!1),Hi=zs;function ra(i,a){var u=i.type.contextTypes;if(!u)return zs;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var g={},v;for(v in u)g[v]=a[v];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=g),g}function fn(i){return i=i.childContextTypes,i!=null}function Yc(){nt(dn),nt(Yt)}function a_(i,a,u){if(Yt.current!==zs)throw Error(t(168));Qe(Yt,a),Qe(dn,u)}function l_(i,a,u){var f=i.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in a))throw Error(t(108,qe(i)||"Unknown",g));return ae({},u,f)}function Qc(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||zs,Hi=Yt.current,Qe(Yt,i),Qe(dn,dn.current),!0}function u_(i,a,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=l_(i,a,Hi),f.__reactInternalMemoizedMergedChildContext=i,nt(dn),nt(Yt),Qe(Yt,i)):nt(dn),Qe(dn,u)}var ss=null,Xc=!1,ep=!1;function c_(i){ss===null?ss=[i]:ss.push(i)}function $A(i){Xc=!0,c_(i)}function Hs(){if(!ep&&ss!==null){ep=!0;var i=0,a=Ue;try{var u=ss;for(Ue=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}ss=null,Xc=!1}catch(g){throw ss!==null&&(ss=ss.slice(i+1)),Tl(Mo,Hs),g}finally{Ue=a,ep=!1}}return null}var sa=[],ia=0,Zc=null,eh=0,On=[],Dn=0,Wi=null,is=1,os="";function qi(i,a){sa[ia++]=eh,sa[ia++]=Zc,Zc=i,eh=a}function h_(i,a,u){On[Dn++]=is,On[Dn++]=os,On[Dn++]=Wi,Wi=i;var f=is;i=os;var g=32-En(f)-1;f&=~(1<<g),u+=1;var v=32-En(a)+g;if(30<v){var S=g-g%5;v=(f&(1<<S)-1).toString(32),f>>=S,g-=S,is=1<<32-En(a)+g|u<<g|f,os=v+i}else is=1<<v|u<<g|f,os=i}function tp(i){i.return!==null&&(qi(i,1),h_(i,1,0))}function np(i){for(;i===Zc;)Zc=sa[--ia],sa[ia]=null,eh=sa[--ia],sa[ia]=null;for(;i===Wi;)Wi=On[--Dn],On[Dn]=null,os=On[--Dn],On[Dn]=null,is=On[--Dn],On[Dn]=null}var xn=null,kn=null,it=!1,Yn=null;function d_(i,a){var u=jn(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=i,a=i.deletions,a===null?(i.deletions=[u],i.flags|=16):a.push(u)}function f_(i,a){switch(i.tag){case 5:var u=i.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(i.stateNode=a,xn=i,kn=$s(a.firstChild),!0):!1;case 6:return a=i.pendingProps===""||a.nodeType!==3?null:a,a!==null?(i.stateNode=a,xn=i,kn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Wi!==null?{id:is,overflow:os}:null,i.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=jn(18,null,null,0),u.stateNode=a,u.return=i,i.child=u,xn=i,kn=null,!0):!1;default:return!1}}function rp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function sp(i){if(it){var a=kn;if(a){var u=a;if(!f_(i,a)){if(rp(i))throw Error(t(418));a=$s(u.nextSibling);var f=xn;a&&f_(i,a)?d_(f,u):(i.flags=i.flags&-4097|2,it=!1,xn=i)}}else{if(rp(i))throw Error(t(418));i.flags=i.flags&-4097|2,it=!1,xn=i}}}function p_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xn=i}function th(i){if(i!==xn)return!1;if(!it)return p_(i),it=!0,!1;var a;if((a=i.tag!==3)&&!(a=i.tag!==5)&&(a=i.type,a=a!=="head"&&a!=="body"&&!Jf(i.type,i.memoizedProps)),a&&(a=kn)){if(rp(i))throw m_(),Error(t(418));for(;a;)d_(i,a),a=$s(a.nextSibling)}if(p_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(a===0){kn=$s(i.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}i=i.nextSibling}kn=null}}else kn=xn?$s(i.stateNode.nextSibling):null;return!0}function m_(){for(var i=kn;i;)i=$s(i.nextSibling)}function oa(){kn=xn=null,it=!1}function ip(i){Yn===null?Yn=[i]:Yn.push(i)}var BA=K.ReactCurrentBatchConfig;function Kl(i,a,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,v=""+i;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(S){var N=g.refs;S===null?delete N[v]:N[v]=S},a._stringRef=v,a)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function nh(i,a){throw i=Object.prototype.toString.call(a),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i))}function g_(i){var a=i._init;return a(i._payload)}function y_(i){function a(H,$){if(i){var q=H.deletions;q===null?(H.deletions=[$],H.flags|=16):q.push($)}}function u(H,$){if(!i)return null;for(;$!==null;)a(H,$),$=$.sibling;return null}function f(H,$){for(H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function g(H,$){return H=Xs(H,$),H.index=0,H.sibling=null,H}function v(H,$,q){return H.index=q,i?(q=H.alternate,q!==null?(q=q.index,q<$?(H.flags|=2,$):q):(H.flags|=2,$)):(H.flags|=1048576,$)}function S(H){return i&&H.alternate===null&&(H.flags|=2),H}function N(H,$,q,ie){return $===null||$.tag!==6?($=Yp(q,H.mode,ie),$.return=H,$):($=g($,q),$.return=H,$)}function F(H,$,q,ie){var me=q.type;return me===P?ne(H,$,q.props.children,ie,q.key):$!==null&&($.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Mt&&g_(me)===$.type)?(ie=g($,q.props),ie.ref=Kl(H,$,q),ie.return=H,ie):(ie=xh(q.type,q.key,q.props,null,H.mode,ie),ie.ref=Kl(H,$,q),ie.return=H,ie)}function G(H,$,q,ie){return $===null||$.tag!==4||$.stateNode.containerInfo!==q.containerInfo||$.stateNode.implementation!==q.implementation?($=Qp(q,H.mode,ie),$.return=H,$):($=g($,q.children||[]),$.return=H,$)}function ne(H,$,q,ie,me){return $===null||$.tag!==7?($=eo(q,H.mode,ie,me),$.return=H,$):($=g($,q),$.return=H,$)}function re(H,$,q){if(typeof $=="string"&&$!==""||typeof $=="number")return $=Yp(""+$,H.mode,q),$.return=H,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case Y:return q=xh($.type,$.key,$.props,null,H.mode,q),q.ref=Kl(H,null,$),q.return=H,q;case X:return $=Qp($,H.mode,q),$.return=H,$;case Mt:var ie=$._init;return re(H,ie($._payload),q)}if(gt($)||fe($))return $=eo($,H.mode,q,null),$.return=H,$;nh(H,$)}return null}function ee(H,$,q,ie){var me=$!==null?$.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return me!==null?null:N(H,$,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Y:return q.key===me?F(H,$,q,ie):null;case X:return q.key===me?G(H,$,q,ie):null;case Mt:return me=q._init,ee(H,$,me(q._payload),ie)}if(gt(q)||fe(q))return me!==null?null:ne(H,$,q,ie,null);nh(H,q)}return null}function le(H,$,q,ie,me){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return H=H.get(q)||null,N($,H,""+ie,me);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Y:return H=H.get(ie.key===null?q:ie.key)||null,F($,H,ie,me);case X:return H=H.get(ie.key===null?q:ie.key)||null,G($,H,ie,me);case Mt:var we=ie._init;return le(H,$,q,we(ie._payload),me)}if(gt(ie)||fe(ie))return H=H.get(q)||null,ne($,H,ie,me,null);nh($,ie)}return null}function he(H,$,q,ie){for(var me=null,we=null,Ee=$,xe=$=0,Lt=null;Ee!==null&&xe<q.length;xe++){Ee.index>xe?(Lt=Ee,Ee=null):Lt=Ee.sibling;var He=ee(H,Ee,q[xe],ie);if(He===null){Ee===null&&(Ee=Lt);break}i&&Ee&&He.alternate===null&&a(H,Ee),$=v(He,$,xe),we===null?me=He:we.sibling=He,we=He,Ee=Lt}if(xe===q.length)return u(H,Ee),it&&qi(H,xe),me;if(Ee===null){for(;xe<q.length;xe++)Ee=re(H,q[xe],ie),Ee!==null&&($=v(Ee,$,xe),we===null?me=Ee:we.sibling=Ee,we=Ee);return it&&qi(H,xe),me}for(Ee=f(H,Ee);xe<q.length;xe++)Lt=le(Ee,H,xe,q[xe],ie),Lt!==null&&(i&&Lt.alternate!==null&&Ee.delete(Lt.key===null?xe:Lt.key),$=v(Lt,$,xe),we===null?me=Lt:we.sibling=Lt,we=Lt);return i&&Ee.forEach(function(Zs){return a(H,Zs)}),it&&qi(H,xe),me}function pe(H,$,q,ie){var me=fe(q);if(typeof me!="function")throw Error(t(150));if(q=me.call(q),q==null)throw Error(t(151));for(var we=me=null,Ee=$,xe=$=0,Lt=null,He=q.next();Ee!==null&&!He.done;xe++,He=q.next()){Ee.index>xe?(Lt=Ee,Ee=null):Lt=Ee.sibling;var Zs=ee(H,Ee,He.value,ie);if(Zs===null){Ee===null&&(Ee=Lt);break}i&&Ee&&Zs.alternate===null&&a(H,Ee),$=v(Zs,$,xe),we===null?me=Zs:we.sibling=Zs,we=Zs,Ee=Lt}if(He.done)return u(H,Ee),it&&qi(H,xe),me;if(Ee===null){for(;!He.done;xe++,He=q.next())He=re(H,He.value,ie),He!==null&&($=v(He,$,xe),we===null?me=He:we.sibling=He,we=He);return it&&qi(H,xe),me}for(Ee=f(H,Ee);!He.done;xe++,He=q.next())He=le(Ee,H,xe,He.value,ie),He!==null&&(i&&He.alternate!==null&&Ee.delete(He.key===null?xe:He.key),$=v(He,$,xe),we===null?me=He:we.sibling=He,we=He);return i&&Ee.forEach(function(ER){return a(H,ER)}),it&&qi(H,xe),me}function vt(H,$,q,ie){if(typeof q=="object"&&q!==null&&q.type===P&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case Y:e:{for(var me=q.key,we=$;we!==null;){if(we.key===me){if(me=q.type,me===P){if(we.tag===7){u(H,we.sibling),$=g(we,q.props.children),$.return=H,H=$;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Mt&&g_(me)===we.type){u(H,we.sibling),$=g(we,q.props),$.ref=Kl(H,we,q),$.return=H,H=$;break e}u(H,we);break}else a(H,we);we=we.sibling}q.type===P?($=eo(q.props.children,H.mode,ie,q.key),$.return=H,H=$):(ie=xh(q.type,q.key,q.props,null,H.mode,ie),ie.ref=Kl(H,$,q),ie.return=H,H=ie)}return S(H);case X:e:{for(we=q.key;$!==null;){if($.key===we)if($.tag===4&&$.stateNode.containerInfo===q.containerInfo&&$.stateNode.implementation===q.implementation){u(H,$.sibling),$=g($,q.children||[]),$.return=H,H=$;break e}else{u(H,$);break}else a(H,$);$=$.sibling}$=Qp(q,H.mode,ie),$.return=H,H=$}return S(H);case Mt:return we=q._init,vt(H,$,we(q._payload),ie)}if(gt(q))return he(H,$,q,ie);if(fe(q))return pe(H,$,q,ie);nh(H,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,$!==null&&$.tag===6?(u(H,$.sibling),$=g($,q),$.return=H,H=$):(u(H,$),$=Yp(q,H.mode,ie),$.return=H,H=$),S(H)):u(H,$)}return vt}var aa=y_(!0),v_=y_(!1),rh=Bs(null),sh=null,la=null,op=null;function ap(){op=la=sh=null}function lp(i){var a=rh.current;nt(rh),i._currentValue=a}function up(i,a,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===u)break;i=i.return}}function ua(i,a){sh=i,op=la=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&a)!==0&&(pn=!0),i.firstContext=null)}function Ln(i){var a=i._currentValue;if(op!==i)if(i={context:i,memoizedValue:a,next:null},la===null){if(sh===null)throw Error(t(308));la=i,sh.dependencies={lanes:0,firstContext:i}}else la=la.next=i;return a}var Ki=null;function cp(i){Ki===null?Ki=[i]:Ki.push(i)}function __(i,a,u,f){var g=a.interleaved;return g===null?(u.next=u,cp(a)):(u.next=g.next,g.next=u),a.interleaved=u,as(i,f)}function as(i,a){i.lanes|=a;var u=i.alternate;for(u!==null&&(u.lanes|=a),u=i,i=i.return;i!==null;)i.childLanes|=a,u=i.alternate,u!==null&&(u.childLanes|=a),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ws=!1;function hp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function w_(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ls(i,a){return{eventTime:i,lane:a,tag:0,payload:null,callback:null,next:null}}function qs(i,a,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(ze&2)!==0){var g=f.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),f.pending=a,as(i,u)}return g=f.interleaved,g===null?(a.next=a,cp(f)):(a.next=g.next,g.next=a),f.interleaved=a,as(i,u)}function ih(i,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Al(i,u)}}function E_(i,a){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?g=v=S:v=v.next=S,u=u.next}while(u!==null);v===null?g=v=a:v=v.next=a}else g=v=a;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=a:i.next=a,u.lastBaseUpdate=a}function oh(i,a,u,f){var g=i.updateQueue;Ws=!1;var v=g.firstBaseUpdate,S=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var F=N,G=F.next;F.next=null,S===null?v=G:S.next=G,S=F;var ne=i.alternate;ne!==null&&(ne=ne.updateQueue,N=ne.lastBaseUpdate,N!==S&&(N===null?ne.firstBaseUpdate=G:N.next=G,ne.lastBaseUpdate=F))}if(v!==null){var re=g.baseState;S=0,ne=G=F=null,N=v;do{var ee=N.lane,le=N.eventTime;if((f&ee)===ee){ne!==null&&(ne=ne.next={eventTime:le,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var he=i,pe=N;switch(ee=a,le=u,pe.tag){case 1:if(he=pe.payload,typeof he=="function"){re=he.call(le,re,ee);break e}re=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=pe.payload,ee=typeof he=="function"?he.call(le,re,ee):he,ee==null)break e;re=ae({},re,ee);break e;case 2:Ws=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,ee=g.effects,ee===null?g.effects=[N]:ee.push(N))}else le={eventTime:le,lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ne===null?(G=ne=le,F=re):ne=ne.next=le,S|=ee;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;ee=N,N=ee.next,ee.next=null,g.lastBaseUpdate=ee,g.shared.pending=null}}while(!0);if(ne===null&&(F=re),g.baseState=F,g.firstBaseUpdate=G,g.lastBaseUpdate=ne,a=g.shared.interleaved,a!==null){g=a;do S|=g.lane,g=g.next;while(g!==a)}else v===null&&(g.shared.lanes=0);Yi|=S,i.lanes=S,i.memoizedState=re}}function T_(i,a,u){if(i=a.effects,a.effects=null,i!==null)for(a=0;a<i.length;a++){var f=i[a],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var Gl={},Ar=Bs(Gl),Jl=Bs(Gl),Yl=Bs(Gl);function Gi(i){if(i===Gl)throw Error(t(174));return i}function dp(i,a){switch(Qe(Yl,a),Qe(Jl,i),Qe(Ar,Gl),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Po(null,"");break;default:i=i===8?a.parentNode:a,a=i.namespaceURI||null,i=i.tagName,a=Po(a,i)}nt(Ar),Qe(Ar,a)}function ca(){nt(Ar),nt(Jl),nt(Yl)}function S_(i){Gi(Yl.current);var a=Gi(Ar.current),u=Po(a,i.type);a!==u&&(Qe(Jl,i),Qe(Ar,u))}function fp(i){Jl.current===i&&(nt(Ar),nt(Jl))}var ot=Bs(0);function ah(i){for(var a=i;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var pp=[];function mp(){for(var i=0;i<pp.length;i++)pp[i]._workInProgressVersionPrimary=null;pp.length=0}var lh=K.ReactCurrentDispatcher,gp=K.ReactCurrentBatchConfig,Ji=0,at=null,kt=null,Ot=null,uh=!1,Ql=!1,Xl=0,zA=0;function Qt(){throw Error(t(321))}function yp(i,a){if(a===null)return!1;for(var u=0;u<a.length&&u<i.length;u++)if(!Jn(i[u],a[u]))return!1;return!0}function vp(i,a,u,f,g,v){if(Ji=v,at=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,lh.current=i===null||i.memoizedState===null?KA:GA,i=u(f,g),Ql){v=0;do{if(Ql=!1,Xl=0,25<=v)throw Error(t(301));v+=1,Ot=kt=null,a.updateQueue=null,lh.current=JA,i=u(f,g)}while(Ql)}if(lh.current=dh,a=kt!==null&&kt.next!==null,Ji=0,Ot=kt=at=null,uh=!1,a)throw Error(t(300));return i}function _p(){var i=Xl!==0;return Xl=0,i}function Rr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?at.memoizedState=Ot=i:Ot=Ot.next=i,Ot}function Vn(){if(kt===null){var i=at.alternate;i=i!==null?i.memoizedState:null}else i=kt.next;var a=Ot===null?at.memoizedState:Ot.next;if(a!==null)Ot=a,kt=i;else{if(i===null)throw Error(t(310));kt=i,i={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Ot===null?at.memoizedState=Ot=i:Ot=Ot.next=i}return Ot}function Zl(i,a){return typeof a=="function"?a(i):a}function wp(i){var a=Vn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=kt,g=f.baseQueue,v=u.pending;if(v!==null){if(g!==null){var S=g.next;g.next=v.next,v.next=S}f.baseQueue=g=v,u.pending=null}if(g!==null){v=g.next,f=f.baseState;var N=S=null,F=null,G=v;do{var ne=G.lane;if((Ji&ne)===ne)F!==null&&(F=F.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),f=G.hasEagerState?G.eagerState:i(f,G.action);else{var re={lane:ne,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};F===null?(N=F=re,S=f):F=F.next=re,at.lanes|=ne,Yi|=ne}G=G.next}while(G!==null&&G!==v);F===null?S=f:F.next=N,Jn(f,a.memoizedState)||(pn=!0),a.memoizedState=f,a.baseState=S,a.baseQueue=F,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do v=g.lane,at.lanes|=v,Yi|=v,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function Ep(i){var a=Vn(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,v=a.memoizedState;if(g!==null){u.pending=null;var S=g=g.next;do v=i(v,S.action),S=S.next;while(S!==g);Jn(v,a.memoizedState)||(pn=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,f]}function b_(){}function I_(i,a){var u=at,f=Vn(),g=a(),v=!Jn(f.memoizedState,g);if(v&&(f.memoizedState=g,pn=!0),f=f.queue,Tp(A_.bind(null,u,f,i),[i]),f.getSnapshot!==a||v||Ot!==null&&Ot.memoizedState.tag&1){if(u.flags|=2048,eu(9,k_.bind(null,u,f,g,a),void 0,null),Dt===null)throw Error(t(349));(Ji&30)!==0||x_(u,a,g)}return g}function x_(i,a,u){i.flags|=16384,i={getSnapshot:a,value:u},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.stores=[i]):(u=a.stores,u===null?a.stores=[i]:u.push(i))}function k_(i,a,u,f){a.value=u,a.getSnapshot=f,R_(a)&&C_(i)}function A_(i,a,u){return u(function(){R_(a)&&C_(i)})}function R_(i){var a=i.getSnapshot;i=i.value;try{var u=a();return!Jn(i,u)}catch{return!0}}function C_(i){var a=as(i,1);a!==null&&er(a,i,1,-1)}function P_(i){var a=Rr();return typeof i=="function"&&(i=i()),a.memoizedState=a.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zl,lastRenderedState:i},a.queue=i,i=i.dispatch=qA.bind(null,at,i),[a.memoizedState,i]}function eu(i,a,u,f){return i={tag:i,create:a,destroy:u,deps:f,next:null},a=at.updateQueue,a===null?(a={lastEffect:null,stores:null},at.updateQueue=a,a.lastEffect=i.next=i):(u=a.lastEffect,u===null?a.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,a.lastEffect=i)),i}function N_(){return Vn().memoizedState}function ch(i,a,u,f){var g=Rr();at.flags|=i,g.memoizedState=eu(1|a,u,void 0,f===void 0?null:f)}function hh(i,a,u,f){var g=Vn();f=f===void 0?null:f;var v=void 0;if(kt!==null){var S=kt.memoizedState;if(v=S.destroy,f!==null&&yp(f,S.deps)){g.memoizedState=eu(a,u,v,f);return}}at.flags|=i,g.memoizedState=eu(1|a,u,v,f)}function O_(i,a){return ch(8390656,8,i,a)}function Tp(i,a){return hh(2048,8,i,a)}function D_(i,a){return hh(4,2,i,a)}function L_(i,a){return hh(4,4,i,a)}function V_(i,a){if(typeof a=="function")return i=i(),a(i),function(){a(null)};if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function M_(i,a,u){return u=u!=null?u.concat([i]):null,hh(4,4,V_.bind(null,a,i),u)}function Sp(){}function j_(i,a){var u=Vn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&yp(a,f[1])?f[0]:(u.memoizedState=[i,a],i)}function U_(i,a){var u=Vn();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&yp(a,f[1])?f[0]:(i=i(),u.memoizedState=[i,a],i)}function F_(i,a,u){return(Ji&21)===0?(i.baseState&&(i.baseState=!1,pn=!0),i.memoizedState=u):(Jn(u,a)||(u=xl(),at.lanes|=u,Yi|=u,i.baseState=!0),a)}function HA(i,a){var u=Ue;Ue=u!==0&&4>u?u:4,i(!0);var f=gp.transition;gp.transition={};try{i(!1),a()}finally{Ue=u,gp.transition=f}}function $_(){return Vn().memoizedState}function WA(i,a,u){var f=Ys(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},B_(i))z_(a,u);else if(u=__(i,a,u,f),u!==null){var g=ln();er(u,i,f,g),H_(u,a,f)}}function qA(i,a,u){var f=Ys(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(B_(i))z_(a,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var S=a.lastRenderedState,N=v(S,u);if(g.hasEagerState=!0,g.eagerState=N,Jn(N,S)){var F=a.interleaved;F===null?(g.next=g,cp(a)):(g.next=F.next,F.next=g),a.interleaved=g;return}}catch{}finally{}u=__(i,a,g,f),u!==null&&(g=ln(),er(u,i,f,g),H_(u,a,f))}}function B_(i){var a=i.alternate;return i===at||a!==null&&a===at}function z_(i,a){Ql=uh=!0;var u=i.pending;u===null?a.next=a:(a.next=u.next,u.next=a),i.pending=a}function H_(i,a,u){if((u&4194240)!==0){var f=a.lanes;f&=i.pendingLanes,u|=f,a.lanes=u,Al(i,u)}}var dh={readContext:Ln,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},KA={readContext:Ln,useCallback:function(i,a){return Rr().memoizedState=[i,a===void 0?null:a],i},useContext:Ln,useEffect:O_,useImperativeHandle:function(i,a,u){return u=u!=null?u.concat([i]):null,ch(4194308,4,V_.bind(null,a,i),u)},useLayoutEffect:function(i,a){return ch(4194308,4,i,a)},useInsertionEffect:function(i,a){return ch(4,2,i,a)},useMemo:function(i,a){var u=Rr();return a=a===void 0?null:a,i=i(),u.memoizedState=[i,a],i},useReducer:function(i,a,u){var f=Rr();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:a},f.queue=i,i=i.dispatch=WA.bind(null,at,i),[f.memoizedState,i]},useRef:function(i){var a=Rr();return i={current:i},a.memoizedState=i},useState:P_,useDebugValue:Sp,useDeferredValue:function(i){return Rr().memoizedState=i},useTransition:function(){var i=P_(!1),a=i[0];return i=HA.bind(null,i[1]),Rr().memoizedState=i,[a,i]},useMutableSource:function(){},useSyncExternalStore:function(i,a,u){var f=at,g=Rr();if(it){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Dt===null)throw Error(t(349));(Ji&30)!==0||x_(f,a,u)}g.memoizedState=u;var v={value:u,getSnapshot:a};return g.queue=v,O_(A_.bind(null,f,v,i),[i]),f.flags|=2048,eu(9,k_.bind(null,f,v,u,a),void 0,null),u},useId:function(){var i=Rr(),a=Dt.identifierPrefix;if(it){var u=os,f=is;u=(f&~(1<<32-En(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=Xl++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=zA++,a=":"+a+"r"+u.toString(32)+":";return i.memoizedState=a},unstable_isNewReconciler:!1},GA={readContext:Ln,useCallback:j_,useContext:Ln,useEffect:Tp,useImperativeHandle:M_,useInsertionEffect:D_,useLayoutEffect:L_,useMemo:U_,useReducer:wp,useRef:N_,useState:function(){return wp(Zl)},useDebugValue:Sp,useDeferredValue:function(i){var a=Vn();return F_(a,kt.memoizedState,i)},useTransition:function(){var i=wp(Zl)[0],a=Vn().memoizedState;return[i,a]},useMutableSource:b_,useSyncExternalStore:I_,useId:$_,unstable_isNewReconciler:!1},JA={readContext:Ln,useCallback:j_,useContext:Ln,useEffect:Tp,useImperativeHandle:M_,useInsertionEffect:D_,useLayoutEffect:L_,useMemo:U_,useReducer:Ep,useRef:N_,useState:function(){return Ep(Zl)},useDebugValue:Sp,useDeferredValue:function(i){var a=Vn();return kt===null?a.memoizedState=i:F_(a,kt.memoizedState,i)},useTransition:function(){var i=Ep(Zl)[0],a=Vn().memoizedState;return[i,a]},useMutableSource:b_,useSyncExternalStore:I_,useId:$_,unstable_isNewReconciler:!1};function Qn(i,a){if(i&&i.defaultProps){a=ae({},a),i=i.defaultProps;for(var u in i)a[u]===void 0&&(a[u]=i[u]);return a}return a}function bp(i,a,u,f){a=i.memoizedState,u=u(f,a),u=u==null?a:ae({},a,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var fh={isMounted:function(i){return(i=i._reactInternals)?Kn(i)===i:!1},enqueueSetState:function(i,a,u){i=i._reactInternals;var f=ln(),g=Ys(i),v=ls(f,g);v.payload=a,u!=null&&(v.callback=u),a=qs(i,v,g),a!==null&&(er(a,i,g,f),ih(a,i,g))},enqueueReplaceState:function(i,a,u){i=i._reactInternals;var f=ln(),g=Ys(i),v=ls(f,g);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=qs(i,v,g),a!==null&&(er(a,i,g,f),ih(a,i,g))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var u=ln(),f=Ys(i),g=ls(u,f);g.tag=2,a!=null&&(g.callback=a),a=qs(i,g,f),a!==null&&(er(a,i,f,u),ih(a,i,f))}};function W_(i,a,u,f,g,v,S){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,v,S):a.prototype&&a.prototype.isPureReactComponent?!Fl(u,f)||!Fl(g,v):!0}function q_(i,a,u){var f=!1,g=zs,v=a.contextType;return typeof v=="object"&&v!==null?v=Ln(v):(g=fn(a)?Hi:Yt.current,f=a.contextTypes,v=(f=f!=null)?ra(i,g):zs),a=new a(u,v),i.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=fh,i.stateNode=a,a._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=v),a}function K_(i,a,u,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==i&&fh.enqueueReplaceState(a,a.state,null)}function Ip(i,a,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},hp(i);var v=a.contextType;typeof v=="object"&&v!==null?g.context=Ln(v):(v=fn(a)?Hi:Yt.current,g.context=ra(i,v)),g.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(bp(i,a,v,u),g.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&fh.enqueueReplaceState(g,g.state,null),oh(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ha(i,a){try{var u="",f=a;do u+=De(f),f=f.return;while(f);var g=u}catch(v){g=`
Error generating stack: `+v.message+`
`+v.stack}return{value:i,source:a,stack:g,digest:null}}function xp(i,a,u){return{value:i,source:null,stack:u??null,digest:a??null}}function kp(i,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var YA=typeof WeakMap=="function"?WeakMap:Map;function G_(i,a,u){u=ls(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){wh||(wh=!0,Bp=f),kp(i,a)},u}function J_(i,a,u){u=ls(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=a.value;u.payload=function(){return f(g)},u.callback=function(){kp(i,a)}}var v=i.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){kp(i,a),typeof f!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function Y_(i,a,u){var f=i.pingCache;if(f===null){f=i.pingCache=new YA;var g=new Set;f.set(a,g)}else g=f.get(a),g===void 0&&(g=new Set,f.set(a,g));g.has(u)||(g.add(u),i=cR.bind(null,i,a,u),a.then(i,i))}function Q_(i){do{var a;if((a=i.tag===13)&&(a=i.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return i;i=i.return}while(i!==null);return null}function X_(i,a,u,f,g){return(i.mode&1)===0?(i===a?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=ls(-1,1),a.tag=2,qs(u,a,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var QA=K.ReactCurrentOwner,pn=!1;function an(i,a,u,f){a.child=i===null?v_(a,null,u,f):aa(a,i.child,u,f)}function Z_(i,a,u,f,g){u=u.render;var v=a.ref;return ua(a,g),f=vp(i,a,u,f,v,g),u=_p(),i!==null&&!pn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,us(i,a,g)):(it&&u&&tp(a),a.flags|=1,an(i,a,f,g),a.child)}function ew(i,a,u,f,g){if(i===null){var v=u.type;return typeof v=="function"&&!Jp(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,tw(i,a,v,f,g)):(i=xh(u.type,null,f,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(v=i.child,(i.lanes&g)===0){var S=v.memoizedProps;if(u=u.compare,u=u!==null?u:Fl,u(S,f)&&i.ref===a.ref)return us(i,a,g)}return a.flags|=1,i=Xs(v,f),i.ref=a.ref,i.return=a,a.child=i}function tw(i,a,u,f,g){if(i!==null){var v=i.memoizedProps;if(Fl(v,f)&&i.ref===a.ref)if(pn=!1,a.pendingProps=f=v,(i.lanes&g)!==0)(i.flags&131072)!==0&&(pn=!0);else return a.lanes=i.lanes,us(i,a,g)}return Ap(i,a,u,f,g)}function nw(i,a,u){var f=a.pendingProps,g=f.children,v=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(fa,An),An|=u;else{if((u&1073741824)===0)return i=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:i,cachePool:null,transitions:null},a.updateQueue=null,Qe(fa,An),An|=i,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,Qe(fa,An),An|=f}else v!==null?(f=v.baseLanes|u,a.memoizedState=null):f=u,Qe(fa,An),An|=f;return an(i,a,g,u),a.child}function rw(i,a){var u=a.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Ap(i,a,u,f,g){var v=fn(u)?Hi:Yt.current;return v=ra(a,v),ua(a,g),u=vp(i,a,u,f,v,g),f=_p(),i!==null&&!pn?(a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~g,us(i,a,g)):(it&&f&&tp(a),a.flags|=1,an(i,a,u,g),a.child)}function sw(i,a,u,f,g){if(fn(u)){var v=!0;Qc(a)}else v=!1;if(ua(a,g),a.stateNode===null)mh(i,a),q_(a,u,f),Ip(a,u,f,g),f=!0;else if(i===null){var S=a.stateNode,N=a.memoizedProps;S.props=N;var F=S.context,G=u.contextType;typeof G=="object"&&G!==null?G=Ln(G):(G=fn(u)?Hi:Yt.current,G=ra(a,G));var ne=u.getDerivedStateFromProps,re=typeof ne=="function"||typeof S.getSnapshotBeforeUpdate=="function";re||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==f||F!==G)&&K_(a,S,f,G),Ws=!1;var ee=a.memoizedState;S.state=ee,oh(a,f,S,g),F=a.memoizedState,N!==f||ee!==F||dn.current||Ws?(typeof ne=="function"&&(bp(a,u,ne,f),F=a.memoizedState),(N=Ws||W_(a,u,N,f,ee,F,G))?(re||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=F),S.props=f,S.state=F,S.context=G,f=N):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{S=a.stateNode,w_(i,a),N=a.memoizedProps,G=a.type===a.elementType?N:Qn(a.type,N),S.props=G,re=a.pendingProps,ee=S.context,F=u.contextType,typeof F=="object"&&F!==null?F=Ln(F):(F=fn(u)?Hi:Yt.current,F=ra(a,F));var le=u.getDerivedStateFromProps;(ne=typeof le=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==re||ee!==F)&&K_(a,S,f,F),Ws=!1,ee=a.memoizedState,S.state=ee,oh(a,f,S,g);var he=a.memoizedState;N!==re||ee!==he||dn.current||Ws?(typeof le=="function"&&(bp(a,u,le,f),he=a.memoizedState),(G=Ws||W_(a,u,G,f,ee,he,F)||!1)?(ne||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(f,he,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(f,he,F)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=he),S.props=f,S.state=he,S.context=F,f=G):(typeof S.componentDidUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&ee===i.memoizedState||(a.flags|=1024),f=!1)}return Rp(i,a,u,f,v,g)}function Rp(i,a,u,f,g,v){rw(i,a);var S=(a.flags&128)!==0;if(!f&&!S)return g&&u_(a,u,!1),us(i,a,v);f=a.stateNode,QA.current=a;var N=S&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,i!==null&&S?(a.child=aa(a,i.child,null,v),a.child=aa(a,null,N,v)):an(i,a,N,v),a.memoizedState=f.state,g&&u_(a,u,!0),a.child}function iw(i){var a=i.stateNode;a.pendingContext?a_(i,a.pendingContext,a.pendingContext!==a.context):a.context&&a_(i,a.context,!1),dp(i,a.containerInfo)}function ow(i,a,u,f,g){return oa(),ip(g),a.flags|=256,an(i,a,u,f),a.child}var Cp={dehydrated:null,treeContext:null,retryLane:0};function Pp(i){return{baseLanes:i,cachePool:null,transitions:null}}function aw(i,a,u){var f=a.pendingProps,g=ot.current,v=!1,S=(a.flags&128)!==0,N;if((N=S)||(N=i!==null&&i.memoizedState===null?!1:(g&2)!==0),N?(v=!0,a.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Qe(ot,g&1),i===null)return sp(a),i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((a.mode&1)===0?a.lanes=1:i.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=f.children,i=f.fallback,v?(f=a.mode,v=a.child,S={mode:"hidden",children:S},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=S):v=kh(S,f,0,null),i=eo(i,f,u,null),v.return=a,i.return=a,v.sibling=i,a.child=v,a.child.memoizedState=Pp(u),a.memoizedState=Cp,i):Np(a,S));if(g=i.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return XA(i,a,S,f,N,g,u);if(v){v=f.fallback,S=a.mode,g=i.child,N=g.sibling;var F={mode:"hidden",children:f.children};return(S&1)===0&&a.child!==g?(f=a.child,f.childLanes=0,f.pendingProps=F,a.deletions=null):(f=Xs(g,F),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?v=Xs(N,v):(v=eo(v,S,u,null),v.flags|=2),v.return=a,f.return=a,f.sibling=v,a.child=f,f=v,v=a.child,S=i.child.memoizedState,S=S===null?Pp(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},v.memoizedState=S,v.childLanes=i.childLanes&~u,a.memoizedState=Cp,f}return v=i.child,i=v.sibling,f=Xs(v,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,i!==null&&(u=a.deletions,u===null?(a.deletions=[i],a.flags|=16):u.push(i)),a.child=f,a.memoizedState=null,f}function Np(i,a){return a=kh({mode:"visible",children:a},i.mode,0,null),a.return=i,i.child=a}function ph(i,a,u,f){return f!==null&&ip(f),aa(a,i.child,null,u),i=Np(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function XA(i,a,u,f,g,v,S){if(u)return a.flags&256?(a.flags&=-257,f=xp(Error(t(422))),ph(i,a,S,f)):a.memoizedState!==null?(a.child=i.child,a.flags|=128,null):(v=f.fallback,g=a.mode,f=kh({mode:"visible",children:f.children},g,0,null),v=eo(v,g,S,null),v.flags|=2,f.return=a,v.return=a,f.sibling=v,a.child=f,(a.mode&1)!==0&&aa(a,i.child,null,S),a.child.memoizedState=Pp(S),a.memoizedState=Cp,v);if((a.mode&1)===0)return ph(i,a,S,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,v=Error(t(419)),f=xp(v,f,void 0),ph(i,a,S,f)}if(N=(S&i.childLanes)!==0,pn||N){if(f=Dt,f!==null){switch(S&-S){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|S))!==0?0:g,g!==0&&g!==v.retryLane&&(v.retryLane=g,as(i,g),er(f,i,g,-1))}return Gp(),f=xp(Error(t(421))),ph(i,a,S,f)}return g.data==="$?"?(a.flags|=128,a.child=i.child,a=hR.bind(null,i),g._reactRetry=a,null):(i=v.treeContext,kn=$s(g.nextSibling),xn=a,it=!0,Yn=null,i!==null&&(On[Dn++]=is,On[Dn++]=os,On[Dn++]=Wi,is=i.id,os=i.overflow,Wi=a),a=Np(a,f.children),a.flags|=4096,a)}function lw(i,a,u){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),up(i.return,a,u)}function Op(i,a,u,f,g){var v=i.memoizedState;v===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=g)}function uw(i,a,u){var f=a.pendingProps,g=f.revealOrder,v=f.tail;if(an(i,a,f.children,u),f=ot.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&lw(i,u,a);else if(i.tag===19)lw(i,u,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Qe(ot,f),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)i=u.alternate,i!==null&&ah(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Op(a,!1,g,u,v);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&ah(i)===null){a.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Op(a,!0,u,null,v);break;case"together":Op(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function mh(i,a){(a.mode&1)===0&&i!==null&&(i.alternate=null,a.alternate=null,a.flags|=2)}function us(i,a,u){if(i!==null&&(a.dependencies=i.dependencies),Yi|=a.lanes,(u&a.childLanes)===0)return null;if(i!==null&&a.child!==i.child)throw Error(t(153));if(a.child!==null){for(i=a.child,u=Xs(i,i.pendingProps),a.child=u,u.return=a;i.sibling!==null;)i=i.sibling,u=u.sibling=Xs(i,i.pendingProps),u.return=a;u.sibling=null}return a.child}function ZA(i,a,u){switch(a.tag){case 3:iw(a),oa();break;case 5:S_(a);break;case 1:fn(a.type)&&Qc(a);break;case 4:dp(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,g=a.memoizedProps.value;Qe(rh,f._currentValue),f._currentValue=g;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Qe(ot,ot.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?aw(i,a,u):(Qe(ot,ot.current&1),i=us(i,a,u),i!==null?i.sibling:null);Qe(ot,ot.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(i.flags&128)!==0){if(f)return uw(i,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Qe(ot,ot.current),f)break;return null;case 22:case 23:return a.lanes=0,nw(i,a,u)}return us(i,a,u)}var cw,Dp,hw,dw;cw=function(i,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Dp=function(){},hw=function(i,a,u,f){var g=i.memoizedProps;if(g!==f){i=a.stateNode,Gi(Ar.current);var v=null;switch(u){case"input":g=Ro(i,g),f=Ro(i,f),v=[];break;case"select":g=ae({},g,{value:void 0}),f=ae({},f,{value:void 0}),v=[];break;case"textarea":g=ml(i,g),f=ml(i,f),v=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Gc)}qn(u,f);var S;u=null;for(G in g)if(!f.hasOwnProperty(G)&&g.hasOwnProperty(G)&&g[G]!=null)if(G==="style"){var N=g[G];for(S in N)N.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(s.hasOwnProperty(G)?v||(v=[]):(v=v||[]).push(G,null));for(G in f){var F=f[G];if(N=g!=null?g[G]:void 0,f.hasOwnProperty(G)&&F!==N&&(F!=null||N!=null))if(G==="style")if(N){for(S in N)!N.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in F)F.hasOwnProperty(S)&&N[S]!==F[S]&&(u||(u={}),u[S]=F[S])}else u||(v||(v=[]),v.push(G,u)),u=F;else G==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,N=N?N.__html:void 0,F!=null&&N!==F&&(v=v||[]).push(G,F)):G==="children"?typeof F!="string"&&typeof F!="number"||(v=v||[]).push(G,""+F):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(s.hasOwnProperty(G)?(F!=null&&G==="onScroll"&&tt("scroll",i),v||N===F||(v=[])):(v=v||[]).push(G,F))}u&&(v=v||[]).push("style",u);var G=v;(a.updateQueue=G)&&(a.flags|=4)}},dw=function(i,a,u,f){u!==f&&(a.flags|=4)};function tu(i,a){if(!it)switch(i.tailMode){case"hidden":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Xt(i){var a=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(a)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,a}function eR(i,a,u){var f=a.pendingProps;switch(np(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(a),null;case 1:return fn(a.type)&&Yc(),Xt(a),null;case 3:return f=a.stateNode,ca(),nt(dn),nt(Yt),mp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(th(a)?a.flags|=4:i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yn!==null&&(Wp(Yn),Yn=null))),Dp(i,a),Xt(a),null;case 5:fp(a);var g=Gi(Yl.current);if(u=a.type,i!==null&&a.stateNode!=null)hw(i,a,u,f,g),i.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Xt(a),null}if(i=Gi(Ar.current),th(a)){f=a.stateNode,u=a.type;var v=a.memoizedProps;switch(f[kr]=a,f[Wl]=v,i=(a.mode&1)!==0,u){case"dialog":tt("cancel",f),tt("close",f);break;case"iframe":case"object":case"embed":tt("load",f);break;case"video":case"audio":for(g=0;g<Bl.length;g++)tt(Bl[g],f);break;case"source":tt("error",f);break;case"img":case"image":case"link":tt("error",f),tt("load",f);break;case"details":tt("toggle",f);break;case"input":_c(f,v),tt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},tt("invalid",f);break;case"textarea":gl(f,v),tt("invalid",f)}qn(u,v),g=null;for(var S in v)if(v.hasOwnProperty(S)){var N=v[S];S==="children"?typeof N=="string"?f.textContent!==N&&(v.suppressHydrationWarning!==!0&&Kc(f.textContent,N,i),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(v.suppressHydrationWarning!==!0&&Kc(f.textContent,N,i),g=["children",""+N]):s.hasOwnProperty(S)&&N!=null&&S==="onScroll"&&tt("scroll",f)}switch(u){case"input":Ao(f),pl(f,v,!0);break;case"textarea":Ao(f),Is(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=Gc)}f=g,a.updateQueue=f,f!==null&&(a.flags|=4)}else{S=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=yl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=S.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=S.createElement(u,{is:f.is}):(i=S.createElement(u),u==="select"&&(S=i,f.multiple?S.multiple=!0:f.size&&(S.size=f.size))):i=S.createElementNS(i,u),i[kr]=a,i[Wl]=f,cw(i,a,!1,!1),a.stateNode=i;e:{switch(S=Oo(u,f),u){case"dialog":tt("cancel",i),tt("close",i),g=f;break;case"iframe":case"object":case"embed":tt("load",i),g=f;break;case"video":case"audio":for(g=0;g<Bl.length;g++)tt(Bl[g],i);g=f;break;case"source":tt("error",i),g=f;break;case"img":case"image":case"link":tt("error",i),tt("load",i),g=f;break;case"details":tt("toggle",i),g=f;break;case"input":_c(i,f),g=Ro(i,f),tt("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ae({},f,{value:void 0}),tt("invalid",i);break;case"textarea":gl(i,f),g=ml(i,f),tt("invalid",i);break;default:g=f}qn(u,g),N=g;for(v in N)if(N.hasOwnProperty(v)){var F=N[v];v==="style"?No(i,F):v==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&Ec(i,F)):v==="children"?typeof F=="string"?(u!=="textarea"||F!=="")&&Ri(i,F):typeof F=="number"&&Ri(i,""+F):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(s.hasOwnProperty(v)?F!=null&&v==="onScroll"&&tt("scroll",i):F!=null&&O(i,v,F,S))}switch(u){case"input":Ao(i),pl(i,f,!1);break;case"textarea":Ao(i),Is(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Be(f.value));break;case"select":i.multiple=!!f.multiple,v=f.value,v!=null?Wn(i,!!f.multiple,v,!1):f.defaultValue!=null&&Wn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Gc)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Xt(a),null;case 6:if(i&&a.stateNode!=null)dw(i,a,i.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=Gi(Yl.current),Gi(Ar.current),th(a)){if(f=a.stateNode,u=a.memoizedProps,f[kr]=a,(v=f.nodeValue!==u)&&(i=xn,i!==null))switch(i.tag){case 3:Kc(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Kc(f.nodeValue,u,(i.mode&1)!==0)}v&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[kr]=a,a.stateNode=f}return Xt(a),null;case 13:if(nt(ot),f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(it&&kn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)m_(),oa(),a.flags|=98560,v=!1;else if(v=th(a),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[kr]=a}else oa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Xt(a),v=!1}else Yn!==null&&(Wp(Yn),Yn=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(i===null||(ot.current&1)!==0?At===0&&(At=3):Gp())),a.updateQueue!==null&&(a.flags|=4),Xt(a),null);case 4:return ca(),Dp(i,a),i===null&&zl(a.stateNode.containerInfo),Xt(a),null;case 10:return lp(a.type._context),Xt(a),null;case 17:return fn(a.type)&&Yc(),Xt(a),null;case 19:if(nt(ot),v=a.memoizedState,v===null)return Xt(a),null;if(f=(a.flags&128)!==0,S=v.rendering,S===null)if(f)tu(v,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(S=ah(i),S!==null){for(a.flags|=128,tu(v,!1),f=S.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)v=u,i=f,v.flags&=14680066,S=v.alternate,S===null?(v.childLanes=0,v.lanes=i,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=S.childLanes,v.lanes=S.lanes,v.child=S.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=S.memoizedProps,v.memoizedState=S.memoizedState,v.updateQueue=S.updateQueue,v.type=S.type,i=S.dependencies,v.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Qe(ot,ot.current&1|2),a.child}i=i.sibling}v.tail!==null&&et()>pa&&(a.flags|=128,f=!0,tu(v,!1),a.lanes=4194304)}else{if(!f)if(i=ah(S),i!==null){if(a.flags|=128,f=!0,u=i.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),tu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!it)return Xt(a),null}else 2*et()-v.renderingStartTime>pa&&u!==1073741824&&(a.flags|=128,f=!0,tu(v,!1),a.lanes=4194304);v.isBackwards?(S.sibling=a.child,a.child=S):(u=v.last,u!==null?u.sibling=S:a.child=S,v.last=S)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=et(),a.sibling=null,u=ot.current,Qe(ot,f?u&1|2:u&1),a):(Xt(a),null);case 22:case 23:return Kp(),f=a.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(An&1073741824)!==0&&(Xt(a),a.subtreeFlags&6&&(a.flags|=8192)):Xt(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function tR(i,a){switch(np(a),a.tag){case 1:return fn(a.type)&&Yc(),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ca(),nt(dn),nt(Yt),mp(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 5:return fp(a),null;case 13:if(nt(ot),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(t(340));oa()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return nt(ot),null;case 4:return ca(),null;case 10:return lp(a.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var gh=!1,Zt=!1,nR=typeof WeakSet=="function"?WeakSet:Set,ce=null;function da(i,a){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){dt(i,a,f)}else u.current=null}function Lp(i,a,u){try{u()}catch(f){dt(i,a,f)}}var fw=!1;function rR(i,a){if(Kf=es,i=Wv(),Uf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var S=0,N=-1,F=-1,G=0,ne=0,re=i,ee=null;t:for(;;){for(var le;re!==u||g!==0&&re.nodeType!==3||(N=S+g),re!==v||f!==0&&re.nodeType!==3||(F=S+f),re.nodeType===3&&(S+=re.nodeValue.length),(le=re.firstChild)!==null;)ee=re,re=le;for(;;){if(re===i)break t;if(ee===u&&++G===g&&(N=S),ee===v&&++ne===f&&(F=S),(le=re.nextSibling)!==null)break;re=ee,ee=re.parentNode}re=le}u=N===-1||F===-1?null:{start:N,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Gf={focusedElem:i,selectionRange:u},es=!1,ce=a;ce!==null;)if(a=ce,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,ce=i;else for(;ce!==null;){a=ce;try{var he=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var pe=he.memoizedProps,vt=he.memoizedState,H=a.stateNode,$=H.getSnapshotBeforeUpdate(a.elementType===a.type?pe:Qn(a.type,pe),vt);H.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var q=a.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){dt(a,a.return,ie)}if(i=a.sibling,i!==null){i.return=a.return,ce=i;break}ce=a.return}return he=fw,fw=!1,he}function nu(i,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var v=g.destroy;g.destroy=void 0,v!==void 0&&Lp(a,u,v)}g=g.next}while(g!==f)}}function yh(i,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function Vp(i){var a=i.ref;if(a!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof a=="function"?a(i):a.current=i}}function pw(i){var a=i.alternate;a!==null&&(i.alternate=null,pw(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&(delete a[kr],delete a[Wl],delete a[Xf],delete a[UA],delete a[FA])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function mw(i){return i.tag===5||i.tag===3||i.tag===4}function gw(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||mw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Mp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(i,a):u.insertBefore(i,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(i,u)):(a=u,a.appendChild(i)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Gc));else if(f!==4&&(i=i.child,i!==null))for(Mp(i,a,u),i=i.sibling;i!==null;)Mp(i,a,u),i=i.sibling}function jp(i,a,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?u.insertBefore(i,a):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(jp(i,a,u),i=i.sibling;i!==null;)jp(i,a,u),i=i.sibling}var Ft=null,Xn=!1;function Ks(i,a,u){for(u=u.child;u!==null;)yw(i,a,u),u=u.sibling}function yw(i,a,u){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Di,u)}catch{}switch(u.tag){case 5:Zt||da(u,a);case 6:var f=Ft,g=Xn;Ft=null,Ks(i,a,u),Ft=f,Xn=g,Ft!==null&&(Xn?(i=Ft,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Ft.removeChild(u.stateNode));break;case 18:Ft!==null&&(Xn?(i=Ft,u=u.stateNode,i.nodeType===8?Qf(i.parentNode,u):i.nodeType===1&&Qf(i,u),Ms(i)):Qf(Ft,u.stateNode));break;case 4:f=Ft,g=Xn,Ft=u.stateNode.containerInfo,Xn=!0,Ks(i,a,u),Ft=f,Xn=g;break;case 0:case 11:case 14:case 15:if(!Zt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var v=g,S=v.destroy;v=v.tag,S!==void 0&&((v&2)!==0||(v&4)!==0)&&Lp(u,a,S),g=g.next}while(g!==f)}Ks(i,a,u);break;case 1:if(!Zt&&(da(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){dt(u,a,N)}Ks(i,a,u);break;case 21:Ks(i,a,u);break;case 22:u.mode&1?(Zt=(f=Zt)||u.memoizedState!==null,Ks(i,a,u),Zt=f):Ks(i,a,u);break;default:Ks(i,a,u)}}function vw(i){var a=i.updateQueue;if(a!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new nR),a.forEach(function(f){var g=dR.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Zn(i,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var v=i,S=a,N=S;e:for(;N!==null;){switch(N.tag){case 5:Ft=N.stateNode,Xn=!1;break e;case 3:Ft=N.stateNode.containerInfo,Xn=!0;break e;case 4:Ft=N.stateNode.containerInfo,Xn=!0;break e}N=N.return}if(Ft===null)throw Error(t(160));yw(v,S,g),Ft=null,Xn=!1;var F=g.alternate;F!==null&&(F.return=null),g.return=null}catch(G){dt(g,a,G)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)_w(a,i),a=a.sibling}function _w(i,a){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Zn(a,i),Cr(i),f&4){try{nu(3,i,i.return),yh(3,i)}catch(pe){dt(i,i.return,pe)}try{nu(5,i,i.return)}catch(pe){dt(i,i.return,pe)}}break;case 1:Zn(a,i),Cr(i),f&512&&u!==null&&da(u,u.return);break;case 5:if(Zn(a,i),Cr(i),f&512&&u!==null&&da(u,u.return),i.flags&32){var g=i.stateNode;try{Ri(g,"")}catch(pe){dt(i,i.return,pe)}}if(f&4&&(g=i.stateNode,g!=null)){var v=i.memoizedProps,S=u!==null?u.memoizedProps:v,N=i.type,F=i.updateQueue;if(i.updateQueue=null,F!==null)try{N==="input"&&v.type==="radio"&&v.name!=null&&Co(g,v),Oo(N,S);var G=Oo(N,v);for(S=0;S<F.length;S+=2){var ne=F[S],re=F[S+1];ne==="style"?No(g,re):ne==="dangerouslySetInnerHTML"?Ec(g,re):ne==="children"?Ri(g,re):O(g,ne,re,G)}switch(N){case"input":Ai(g,v);break;case"textarea":wc(g,v);break;case"select":var ee=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!v.multiple;var le=v.value;le!=null?Wn(g,!!v.multiple,le,!1):ee!==!!v.multiple&&(v.defaultValue!=null?Wn(g,!!v.multiple,v.defaultValue,!0):Wn(g,!!v.multiple,v.multiple?[]:"",!1))}g[Wl]=v}catch(pe){dt(i,i.return,pe)}}break;case 6:if(Zn(a,i),Cr(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,v=i.memoizedProps;try{g.nodeValue=v}catch(pe){dt(i,i.return,pe)}}break;case 3:if(Zn(a,i),Cr(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ms(a.containerInfo)}catch(pe){dt(i,i.return,pe)}break;case 4:Zn(a,i),Cr(i);break;case 13:Zn(a,i),Cr(i),g=i.child,g.flags&8192&&(v=g.memoizedState!==null,g.stateNode.isHidden=v,!v||g.alternate!==null&&g.alternate.memoizedState!==null||($p=et())),f&4&&vw(i);break;case 22:if(ne=u!==null&&u.memoizedState!==null,i.mode&1?(Zt=(G=Zt)||ne,Zn(a,i),Zt=G):Zn(a,i),Cr(i),f&8192){if(G=i.memoizedState!==null,(i.stateNode.isHidden=G)&&!ne&&(i.mode&1)!==0)for(ce=i,ne=i.child;ne!==null;){for(re=ce=ne;ce!==null;){switch(ee=ce,le=ee.child,ee.tag){case 0:case 11:case 14:case 15:nu(4,ee,ee.return);break;case 1:da(ee,ee.return);var he=ee.stateNode;if(typeof he.componentWillUnmount=="function"){f=ee,u=ee.return;try{a=f,he.props=a.memoizedProps,he.state=a.memoizedState,he.componentWillUnmount()}catch(pe){dt(f,u,pe)}}break;case 5:da(ee,ee.return);break;case 22:if(ee.memoizedState!==null){Tw(re);continue}}le!==null?(le.return=ee,ce=le):Tw(re)}ne=ne.sibling}e:for(ne=null,re=i;;){if(re.tag===5){if(ne===null){ne=re;try{g=re.stateNode,G?(v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(N=re.stateNode,F=re.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,N.style.display=As("display",S))}catch(pe){dt(i,i.return,pe)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=G?"":re.memoizedProps}catch(pe){dt(i,i.return,pe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===i)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===i)break e;for(;re.sibling===null;){if(re.return===null||re.return===i)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Zn(a,i),Cr(i),f&4&&vw(i);break;case 21:break;default:Zn(a,i),Cr(i)}}function Cr(i){var a=i.flags;if(a&2){try{e:{for(var u=i.return;u!==null;){if(mw(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Ri(g,""),f.flags&=-33);var v=gw(i);jp(i,v,g);break;case 3:case 4:var S=f.stateNode.containerInfo,N=gw(i);Mp(i,N,S);break;default:throw Error(t(161))}}catch(F){dt(i,i.return,F)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function sR(i,a,u){ce=i,ww(i)}function ww(i,a,u){for(var f=(i.mode&1)!==0;ce!==null;){var g=ce,v=g.child;if(g.tag===22&&f){var S=g.memoizedState!==null||gh;if(!S){var N=g.alternate,F=N!==null&&N.memoizedState!==null||Zt;N=gh;var G=Zt;if(gh=S,(Zt=F)&&!G)for(ce=g;ce!==null;)S=ce,F=S.child,S.tag===22&&S.memoizedState!==null?Sw(g):F!==null?(F.return=S,ce=F):Sw(g);for(;v!==null;)ce=v,ww(v),v=v.sibling;ce=g,gh=N,Zt=G}Ew(i)}else(g.subtreeFlags&8772)!==0&&v!==null?(v.return=g,ce=v):Ew(i)}}function Ew(i){for(;ce!==null;){var a=ce;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Zt||yh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Zt)if(u===null)f.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:Qn(a.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&T_(a,v,f);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}T_(a,S,u)}break;case 5:var N=a.stateNode;if(u===null&&a.flags&4){u=N;var F=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&u.focus();break;case"img":F.src&&(u.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var G=a.alternate;if(G!==null){var ne=G.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&Ms(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zt||a.flags&512&&Vp(a)}catch(ee){dt(a,a.return,ee)}}if(a===i){ce=null;break}if(u=a.sibling,u!==null){u.return=a.return,ce=u;break}ce=a.return}}function Tw(i){for(;ce!==null;){var a=ce;if(a===i){ce=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ce=u;break}ce=a.return}}function Sw(i){for(;ce!==null;){var a=ce;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{yh(4,a)}catch(F){dt(a,u,F)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var g=a.return;try{f.componentDidMount()}catch(F){dt(a,g,F)}}var v=a.return;try{Vp(a)}catch(F){dt(a,v,F)}break;case 5:var S=a.return;try{Vp(a)}catch(F){dt(a,S,F)}}}catch(F){dt(a,a.return,F)}if(a===i){ce=null;break}var N=a.sibling;if(N!==null){N.return=a.return,ce=N;break}ce=a.return}}var iR=Math.ceil,vh=K.ReactCurrentDispatcher,Up=K.ReactCurrentOwner,Mn=K.ReactCurrentBatchConfig,ze=0,Dt=null,Tt=null,$t=0,An=0,fa=Bs(0),At=0,ru=null,Yi=0,_h=0,Fp=0,su=null,mn=null,$p=0,pa=1/0,cs=null,wh=!1,Bp=null,Gs=null,Eh=!1,Js=null,Th=0,iu=0,zp=null,Sh=-1,bh=0;function ln(){return(ze&6)!==0?et():Sh!==-1?Sh:Sh=et()}function Ys(i){return(i.mode&1)===0?1:(ze&2)!==0&&$t!==0?$t&-$t:BA.transition!==null?(bh===0&&(bh=xl()),bh):(i=Ue,i!==0||(i=window.event,i=i===void 0?16:zo(i.type)),i)}function er(i,a,u,f){if(50<iu)throw iu=0,zp=null,Error(t(185));ji(i,u,f),((ze&2)===0||i!==Dt)&&(i===Dt&&((ze&2)===0&&(_h|=u),At===4&&Qs(i,$t)),gn(i,f),u===1&&ze===0&&(a.mode&1)===0&&(pa=et()+500,Xc&&Hs()))}function gn(i,a){var u=i.callbackNode;Mi(i,a);var f=Qr(i,i===Dt?$t:0);if(f===0)u!==null&&Vo(u),i.callbackNode=null,i.callbackPriority=0;else if(a=f&-f,i.callbackPriority!==a){if(u!=null&&Vo(u),a===1)i.tag===0?$A(Iw.bind(null,i)):c_(Iw.bind(null,i)),MA(function(){(ze&6)===0&&Hs()}),u=null;else{switch(yr(f)){case 1:u=Mo;break;case 4:u=Sl;break;case 16:u=Oi;break;case 536870912:u=jo;break;default:u=Oi}u=Ow(u,bw.bind(null,i))}i.callbackPriority=a,i.callbackNode=u}}function bw(i,a){if(Sh=-1,bh=0,(ze&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ma()&&i.callbackNode!==u)return null;var f=Qr(i,i===Dt?$t:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||a)a=Ih(i,f);else{a=f;var g=ze;ze|=2;var v=kw();(Dt!==i||$t!==a)&&(cs=null,pa=et()+500,Xi(i,a));do try{lR();break}catch(N){xw(i,N)}while(!0);ap(),vh.current=v,ze=g,Tt!==null?a=0:(Dt=null,$t=0,a=At)}if(a!==0){if(a===2&&(g=Il(i),g!==0&&(f=g,a=Hp(i,g))),a===1)throw u=ru,Xi(i,0),Qs(i,f),gn(i,et()),u;if(a===6)Qs(i,f);else{if(g=i.current.alternate,(f&30)===0&&!oR(g)&&(a=Ih(i,f),a===2&&(v=Il(i),v!==0&&(f=v,a=Hp(i,v))),a===1))throw u=ru,Xi(i,0),Qs(i,f),gn(i,et()),u;switch(i.finishedWork=g,i.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:Zi(i,mn,cs);break;case 3:if(Qs(i,f),(f&130023424)===f&&(a=$p+500-et(),10<a)){if(Qr(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){ln(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=Yf(Zi.bind(null,i,mn,cs),a);break}Zi(i,mn,cs);break;case 4:if(Qs(i,f),(f&4194240)===f)break;for(a=i.eventTimes,g=-1;0<f;){var S=31-En(f);v=1<<S,S=a[S],S>g&&(g=S),f&=~v}if(f=g,f=et()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*iR(f/1960))-f,10<f){i.timeoutHandle=Yf(Zi.bind(null,i,mn,cs),f);break}Zi(i,mn,cs);break;case 5:Zi(i,mn,cs);break;default:throw Error(t(329))}}}return gn(i,et()),i.callbackNode===u?bw.bind(null,i):null}function Hp(i,a){var u=su;return i.current.memoizedState.isDehydrated&&(Xi(i,a).flags|=256),i=Ih(i,a),i!==2&&(a=mn,mn=u,a!==null&&Wp(a)),i}function Wp(i){mn===null?mn=i:mn.push.apply(mn,i)}function oR(i){for(var a=i;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],v=g.getSnapshot;g=g.value;try{if(!Jn(v(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Qs(i,a){for(a&=~Fp,a&=~_h,i.suspendedLanes|=a,i.pingedLanes&=~a,i=i.expirationTimes;0<a;){var u=31-En(a),f=1<<u;i[u]=-1,a&=~f}}function Iw(i){if((ze&6)!==0)throw Error(t(327));ma();var a=Qr(i,0);if((a&1)===0)return gn(i,et()),null;var u=Ih(i,a);if(i.tag!==0&&u===2){var f=Il(i);f!==0&&(a=f,u=Hp(i,f))}if(u===1)throw u=ru,Xi(i,0),Qs(i,a),gn(i,et()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=a,Zi(i,mn,cs),gn(i,et()),null}function qp(i,a){var u=ze;ze|=1;try{return i(a)}finally{ze=u,ze===0&&(pa=et()+500,Xc&&Hs())}}function Qi(i){Js!==null&&Js.tag===0&&(ze&6)===0&&ma();var a=ze;ze|=1;var u=Mn.transition,f=Ue;try{if(Mn.transition=null,Ue=1,i)return i()}finally{Ue=f,Mn.transition=u,ze=a,(ze&6)===0&&Hs()}}function Kp(){An=fa.current,nt(fa)}function Xi(i,a){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,VA(u)),Tt!==null)for(u=Tt.return;u!==null;){var f=u;switch(np(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Yc();break;case 3:ca(),nt(dn),nt(Yt),mp();break;case 5:fp(f);break;case 4:ca();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:lp(f.type._context);break;case 22:case 23:Kp()}u=u.return}if(Dt=i,Tt=i=Xs(i.current,null),$t=An=a,At=0,ru=null,Fp=_h=Yi=0,mn=su=null,Ki!==null){for(a=0;a<Ki.length;a++)if(u=Ki[a],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,v=u.pending;if(v!==null){var S=v.next;v.next=g,f.next=S}u.pending=f}Ki=null}return i}function xw(i,a){do{var u=Tt;try{if(ap(),lh.current=dh,uh){for(var f=at.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}uh=!1}if(Ji=0,Ot=kt=at=null,Ql=!1,Xl=0,Up.current=null,u===null||u.return===null){At=1,ru=a,Tt=null;break}e:{var v=i,S=u.return,N=u,F=a;if(a=$t,N.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var G=F,ne=N,re=ne.tag;if((ne.mode&1)===0&&(re===0||re===11||re===15)){var ee=ne.alternate;ee?(ne.updateQueue=ee.updateQueue,ne.memoizedState=ee.memoizedState,ne.lanes=ee.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var le=Q_(S);if(le!==null){le.flags&=-257,X_(le,S,N,v,a),le.mode&1&&Y_(v,G,a),a=le,F=G;var he=a.updateQueue;if(he===null){var pe=new Set;pe.add(F),a.updateQueue=pe}else he.add(F);break e}else{if((a&1)===0){Y_(v,G,a),Gp();break e}F=Error(t(426))}}else if(it&&N.mode&1){var vt=Q_(S);if(vt!==null){(vt.flags&65536)===0&&(vt.flags|=256),X_(vt,S,N,v,a),ip(ha(F,N));break e}}v=F=ha(F,N),At!==4&&(At=2),su===null?su=[v]:su.push(v),v=S;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var H=G_(v,F,a);E_(v,H);break e;case 1:N=F;var $=v.type,q=v.stateNode;if((v.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Gs===null||!Gs.has(q)))){v.flags|=65536,a&=-a,v.lanes|=a;var ie=J_(v,N,a);E_(v,ie);break e}}v=v.return}while(v!==null)}Rw(u)}catch(me){a=me,Tt===u&&u!==null&&(Tt=u=u.return);continue}break}while(!0)}function kw(){var i=vh.current;return vh.current=dh,i===null?dh:i}function Gp(){(At===0||At===3||At===2)&&(At=4),Dt===null||(Yi&268435455)===0&&(_h&268435455)===0||Qs(Dt,$t)}function Ih(i,a){var u=ze;ze|=2;var f=kw();(Dt!==i||$t!==a)&&(cs=null,Xi(i,a));do try{aR();break}catch(g){xw(i,g)}while(!0);if(ap(),ze=u,vh.current=f,Tt!==null)throw Error(t(261));return Dt=null,$t=0,At}function aR(){for(;Tt!==null;)Aw(Tt)}function lR(){for(;Tt!==null&&!Ni();)Aw(Tt)}function Aw(i){var a=Nw(i.alternate,i,An);i.memoizedProps=i.pendingProps,a===null?Rw(i):Tt=a,Up.current=null}function Rw(i){var a=i;do{var u=a.alternate;if(i=a.return,(a.flags&32768)===0){if(u=eR(u,a,An),u!==null){Tt=u;return}}else{if(u=tR(u,a),u!==null){u.flags&=32767,Tt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{At=6,Tt=null;return}}if(a=a.sibling,a!==null){Tt=a;return}Tt=a=i}while(a!==null);At===0&&(At=5)}function Zi(i,a,u){var f=Ue,g=Mn.transition;try{Mn.transition=null,Ue=1,uR(i,a,u,f)}finally{Mn.transition=g,Ue=f}return null}function uR(i,a,u,f){do ma();while(Js!==null);if((ze&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var v=u.lanes|u.childLanes;if(Df(i,v),i===Dt&&(Tt=Dt=null,$t=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Eh||(Eh=!0,Ow(Oi,function(){return ma(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Mn.transition,Mn.transition=null;var S=Ue;Ue=1;var N=ze;ze|=4,Up.current=null,rR(i,u),_w(u,i),RA(Gf),es=!!Kf,Gf=Kf=null,i.current=u,sR(u),Yr(),ze=N,Ue=S,Mn.transition=v}else i.current=u;if(Eh&&(Eh=!1,Js=i,Th=g),v=i.pendingLanes,v===0&&(Gs=null),Nc(u.stateNode),gn(i,et()),a!==null)for(f=i.onRecoverableError,u=0;u<a.length;u++)g=a[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(wh)throw wh=!1,i=Bp,Bp=null,i;return(Th&1)!==0&&i.tag!==0&&ma(),v=i.pendingLanes,(v&1)!==0?i===zp?iu++:(iu=0,zp=i):iu=0,Hs(),null}function ma(){if(Js!==null){var i=yr(Th),a=Mn.transition,u=Ue;try{if(Mn.transition=null,Ue=16>i?16:i,Js===null)var f=!1;else{if(i=Js,Js=null,Th=0,(ze&6)!==0)throw Error(t(331));var g=ze;for(ze|=4,ce=i.current;ce!==null;){var v=ce,S=v.child;if((ce.flags&16)!==0){var N=v.deletions;if(N!==null){for(var F=0;F<N.length;F++){var G=N[F];for(ce=G;ce!==null;){var ne=ce;switch(ne.tag){case 0:case 11:case 15:nu(8,ne,v)}var re=ne.child;if(re!==null)re.return=ne,ce=re;else for(;ce!==null;){ne=ce;var ee=ne.sibling,le=ne.return;if(pw(ne),ne===G){ce=null;break}if(ee!==null){ee.return=le,ce=ee;break}ce=le}}}var he=v.alternate;if(he!==null){var pe=he.child;if(pe!==null){he.child=null;do{var vt=pe.sibling;pe.sibling=null,pe=vt}while(pe!==null)}}ce=v}}if((v.subtreeFlags&2064)!==0&&S!==null)S.return=v,ce=S;else e:for(;ce!==null;){if(v=ce,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:nu(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,ce=H;break e}ce=v.return}}var $=i.current;for(ce=$;ce!==null;){S=ce;var q=S.child;if((S.subtreeFlags&2064)!==0&&q!==null)q.return=S,ce=q;else e:for(S=$;ce!==null;){if(N=ce,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:yh(9,N)}}catch(me){dt(N,N.return,me)}if(N===S){ce=null;break e}var ie=N.sibling;if(ie!==null){ie.return=N.return,ce=ie;break e}ce=N.return}}if(ze=g,Hs(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Di,i)}catch{}f=!0}return f}finally{Ue=u,Mn.transition=a}}return!1}function Cw(i,a,u){a=ha(u,a),a=G_(i,a,1),i=qs(i,a,1),a=ln(),i!==null&&(ji(i,1,a),gn(i,a))}function dt(i,a,u){if(i.tag===3)Cw(i,i,u);else for(;a!==null;){if(a.tag===3){Cw(a,i,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Gs===null||!Gs.has(f))){i=ha(u,i),i=J_(a,i,1),a=qs(a,i,1),i=ln(),a!==null&&(ji(a,1,i),gn(a,i));break}}a=a.return}}function cR(i,a,u){var f=i.pingCache;f!==null&&f.delete(a),a=ln(),i.pingedLanes|=i.suspendedLanes&u,Dt===i&&($t&u)===u&&(At===4||At===3&&($t&130023424)===$t&&500>et()-$p?Xi(i,0):Fp|=u),gn(i,a)}function Pw(i,a){a===0&&((i.mode&1)===0?a=1:(a=Ds,Ds<<=1,(Ds&130023424)===0&&(Ds=4194304)));var u=ln();i=as(i,a),i!==null&&(ji(i,a,u),gn(i,u))}function hR(i){var a=i.memoizedState,u=0;a!==null&&(u=a.retryLane),Pw(i,u)}function dR(i,a){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),Pw(i,u)}var Nw;Nw=function(i,a,u){if(i!==null)if(i.memoizedProps!==a.pendingProps||dn.current)pn=!0;else{if((i.lanes&u)===0&&(a.flags&128)===0)return pn=!1,ZA(i,a,u);pn=(i.flags&131072)!==0}else pn=!1,it&&(a.flags&1048576)!==0&&h_(a,eh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;mh(i,a),i=a.pendingProps;var g=ra(a,Yt.current);ua(a,u),g=vp(null,a,f,i,g,u);var v=_p();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,fn(f)?(v=!0,Qc(a)):v=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,hp(a),g.updater=fh,a.stateNode=g,g._reactInternals=a,Ip(a,f,i,u),a=Rp(null,a,f,!0,v,u)):(a.tag=0,it&&v&&tp(a),an(null,a,g,u),a=a.child),a;case 16:f=a.elementType;e:{switch(mh(i,a),i=a.pendingProps,g=f._init,f=g(f._payload),a.type=f,g=a.tag=pR(f),i=Qn(f,i),g){case 0:a=Ap(null,a,f,i,u);break e;case 1:a=sw(null,a,f,i,u);break e;case 11:a=Z_(null,a,f,i,u);break e;case 14:a=ew(null,a,f,Qn(f.type,i),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),Ap(i,a,f,g,u);case 1:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),sw(i,a,f,g,u);case 3:e:{if(iw(a),i===null)throw Error(t(387));f=a.pendingProps,v=a.memoizedState,g=v.element,w_(i,a),oh(a,f,null,u);var S=a.memoizedState;if(f=S.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){g=ha(Error(t(423)),a),a=ow(i,a,f,u,g);break e}else if(f!==g){g=ha(Error(t(424)),a),a=ow(i,a,f,u,g);break e}else for(kn=$s(a.stateNode.containerInfo.firstChild),xn=a,it=!0,Yn=null,u=v_(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(oa(),f===g){a=us(i,a,u);break e}an(i,a,f,u)}a=a.child}return a;case 5:return S_(a),i===null&&sp(a),f=a.type,g=a.pendingProps,v=i!==null?i.memoizedProps:null,S=g.children,Jf(f,g)?S=null:v!==null&&Jf(f,v)&&(a.flags|=32),rw(i,a),an(i,a,S,u),a.child;case 6:return i===null&&sp(a),null;case 13:return aw(i,a,u);case 4:return dp(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=aa(a,null,f,u):an(i,a,f,u),a.child;case 11:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),Z_(i,a,f,g,u);case 7:return an(i,a,a.pendingProps,u),a.child;case 8:return an(i,a,a.pendingProps.children,u),a.child;case 12:return an(i,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,g=a.pendingProps,v=a.memoizedProps,S=g.value,Qe(rh,f._currentValue),f._currentValue=S,v!==null)if(Jn(v.value,S)){if(v.children===g.children&&!dn.current){a=us(i,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var N=v.dependencies;if(N!==null){S=v.child;for(var F=N.firstContext;F!==null;){if(F.context===f){if(v.tag===1){F=ls(-1,u&-u),F.tag=2;var G=v.updateQueue;if(G!==null){G=G.shared;var ne=G.pending;ne===null?F.next=F:(F.next=ne.next,ne.next=F),G.pending=F}}v.lanes|=u,F=v.alternate,F!==null&&(F.lanes|=u),up(v.return,u,a),N.lanes|=u;break}F=F.next}}else if(v.tag===10)S=v.type===a.type?null:v.child;else if(v.tag===18){if(S=v.return,S===null)throw Error(t(341));S.lanes|=u,N=S.alternate,N!==null&&(N.lanes|=u),up(S,u,a),S=v.sibling}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===a){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}an(i,a,g.children,u),a=a.child}return a;case 9:return g=a.type,f=a.pendingProps.children,ua(a,u),g=Ln(g),f=f(g),a.flags|=1,an(i,a,f,u),a.child;case 14:return f=a.type,g=Qn(f,a.pendingProps),g=Qn(f.type,g),ew(i,a,f,g,u);case 15:return tw(i,a,a.type,a.pendingProps,u);case 17:return f=a.type,g=a.pendingProps,g=a.elementType===f?g:Qn(f,g),mh(i,a),a.tag=1,fn(f)?(i=!0,Qc(a)):i=!1,ua(a,u),q_(a,f,g),Ip(a,f,g,u),Rp(null,a,f,!0,i,u);case 19:return uw(i,a,u);case 22:return nw(i,a,u)}throw Error(t(156,a.tag))};function Ow(i,a){return Tl(i,a)}function fR(i,a,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(i,a,u,f){return new fR(i,a,u,f)}function Jp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function pR(i){if(typeof i=="function")return Jp(i)?1:0;if(i!=null){if(i=i.$$typeof,i===B)return 11;if(i===mt)return 14}return 2}function Xs(i,a){var u=i.alternate;return u===null?(u=jn(i.tag,a,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=a,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,a=i.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function xh(i,a,u,f,g,v){var S=2;if(f=i,typeof i=="function")Jp(i)&&(S=1);else if(typeof i=="string")S=5;else e:switch(i){case P:return eo(u.children,g,v,a);case A:S=8,g|=8;break;case C:return i=jn(12,u,a,g|2),i.elementType=C,i.lanes=v,i;case L:return i=jn(13,u,a,g),i.elementType=L,i.lanes=v,i;case Fe:return i=jn(19,u,a,g),i.elementType=Fe,i.lanes=v,i;case Ce:return kh(u,g,v,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:S=10;break e;case M:S=9;break e;case B:S=11;break e;case mt:S=14;break e;case Mt:S=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return a=jn(S,u,a,g),a.elementType=i,a.type=f,a.lanes=v,a}function eo(i,a,u,f){return i=jn(7,i,f,a),i.lanes=u,i}function kh(i,a,u,f){return i=jn(22,i,f,a),i.elementType=Ce,i.lanes=u,i.stateNode={isHidden:!1},i}function Yp(i,a,u){return i=jn(6,i,null,a),i.lanes=u,i}function Qp(i,a,u){return a=jn(4,i.children!==null?i.children:[],i.key,a),a.lanes=u,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function mR(i,a,u,f,g){this.tag=a,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kl(0),this.expirationTimes=kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kl(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Xp(i,a,u,f,g,v,S,N,F){return i=new mR(i,a,u,N,F),a===1?(a=1,v===!0&&(a|=8)):a=0,v=jn(3,null,null,a),i.current=v,v.stateNode=i,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(v),i}function gR(i,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:f==null?null:""+f,children:i,containerInfo:a,implementation:u}}function Dw(i){if(!i)return zs;i=i._reactInternals;e:{if(Kn(i)!==i||i.tag!==1)throw Error(t(170));var a=i;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(fn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(fn(u))return l_(i,u,a)}return a}function Lw(i,a,u,f,g,v,S,N,F){return i=Xp(u,f,!0,i,g,v,S,N,F),i.context=Dw(null),u=i.current,f=ln(),g=Ys(u),v=ls(f,g),v.callback=a??null,qs(u,v,g),i.current.lanes=g,ji(i,g,f),gn(i,f),i}function Ah(i,a,u,f){var g=a.current,v=ln(),S=Ys(g);return u=Dw(u),a.context===null?a.context=u:a.pendingContext=u,a=ls(v,S),a.payload={element:i},f=f===void 0?null:f,f!==null&&(a.callback=f),i=qs(g,a,S),i!==null&&(er(i,g,S,v),ih(i,g,S)),S}function Rh(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Vw(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<a?u:a}}function Zp(i,a){Vw(i,a),(i=i.alternate)&&Vw(i,a)}function yR(){return null}var Mw=typeof reportError=="function"?reportError:function(i){console.error(i)};function em(i){this._internalRoot=i}Ch.prototype.render=em.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(t(409));Ah(i,a,null,null)},Ch.prototype.unmount=em.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Qi(function(){Ah(null,i,null,null)}),a[rs]=null}};function Ch(i){this._internalRoot=i}Ch.prototype.unstable_scheduleHydration=function(i){if(i){var a=Pl();i={blockedOn:null,target:i,priority:a};for(var u=0;u<Tn.length&&a!==0&&a<Tn[u].priority;u++);Tn.splice(u,0,i),u===0&&$o(i)}};function tm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Ph(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function jw(){}function vR(i,a,u,f,g){if(g){if(typeof f=="function"){var v=f;f=function(){var G=Rh(S);v.call(G)}}var S=Lw(a,f,i,0,null,!1,!1,"",jw);return i._reactRootContainer=S,i[rs]=S.current,zl(i.nodeType===8?i.parentNode:i),Qi(),S}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var G=Rh(F);N.call(G)}}var F=Xp(i,0,!1,null,null,!1,!1,"",jw);return i._reactRootContainer=F,i[rs]=F.current,zl(i.nodeType===8?i.parentNode:i),Qi(function(){Ah(a,F,u,f)}),F}function Nh(i,a,u,f,g){var v=u._reactRootContainer;if(v){var S=v;if(typeof g=="function"){var N=g;g=function(){var F=Rh(S);N.call(F)}}Ah(a,S,i,g)}else S=vR(u,a,i,g,f);return Rh(S)}Rl=function(i){switch(i.tag){case 3:var a=i.stateNode;if(a.current.memoizedState.isDehydrated){var u=We(a.pendingLanes);u!==0&&(Al(a,u|1),gn(a,et()),(ze&6)===0&&(pa=et()+500,Hs()))}break;case 13:Qi(function(){var f=as(i,1);if(f!==null){var g=ln();er(f,i,1,g)}}),Zp(i,1)}},Uo=function(i){if(i.tag===13){var a=as(i,134217728);if(a!==null){var u=ln();er(a,i,134217728,u)}Zp(i,134217728)}},Cl=function(i){if(i.tag===13){var a=Ys(i),u=as(i,a);if(u!==null){var f=ln();er(u,i,a,f)}Zp(i,a)}},Pl=function(){return Ue},Nl=function(i,a){var u=Ue;try{return Ue=i,a()}finally{Ue=u}},Kr=function(i,a,u){switch(a){case"input":if(Ai(i,u),a=u.name,u.type==="radio"&&a!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==i&&f.form===i.form){var g=Jc(f);if(!g)throw Error(t(90));fl(f),Ai(f,g)}}}break;case"textarea":wc(i,u);break;case"select":a=u.value,a!=null&&Wn(i,!!u.multiple,a,!1)}},Sc=qp,bc=Qi;var _R={usingClientEntryPoint:!1,Events:[ql,ta,Jc,Cs,Ps,qp]},ou={findFiberByHostInstance:zi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wR={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Pc(i),i===null?null:i.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||yR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oh.isDisabled&&Oh.supportsFiber)try{Di=Oh.inject(wR),wn=Oh}catch{}}return yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_R,yn.createPortal=function(i,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tm(a))throw Error(t(200));return gR(i,a,null,u)},yn.createRoot=function(i,a){if(!tm(i))throw Error(t(299));var u=!1,f="",g=Mw;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Xp(i,1,!1,null,null,u,!1,f,g),i[rs]=a.current,zl(i.nodeType===8?i.parentNode:i),new em(a)},yn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Pc(a),i=i===null?null:i.stateNode,i},yn.flushSync=function(i){return Qi(i)},yn.hydrate=function(i,a,u){if(!Ph(a))throw Error(t(200));return Nh(null,i,a,!0,u)},yn.hydrateRoot=function(i,a,u){if(!tm(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,v="",S=Mw;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=Lw(a,null,i,1,u??null,g,!1,v,S),i[rs]=a.current,zl(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Ch(a)},yn.render=function(i,a,u){if(!Ph(a))throw Error(t(200));return Nh(null,i,a,!1,u)},yn.unmountComponentAtNode=function(i){if(!Ph(i))throw Error(t(40));return i._reactRootContainer?(Qi(function(){Nh(null,null,i,!1,function(){i._reactRootContainer=null,i[rs]=null})}),!0):!1},yn.unstable_batchedUpdates=qp,yn.unstable_renderSubtreeIntoContainer=function(i,a,u,f){if(!Ph(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Nh(i,a,u,!1,f)},yn.version="18.3.1-next-f1338f8080-20240426",yn}var qw;function AR(){if(qw)return sm.exports;qw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sm.exports=kR(),sm.exports}var Kw;function RR(){if(Kw)return Dh;Kw=1;var n=AR();return Dh.createRoot=n.createRoot,Dh.hydrateRoot=n.hydrateRoot,Dh}var CR=RR(),j=ty();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Gw="popstate";function PR(n={}){function e(r,s){let{pathname:o,search:l,hash:c}=r.location;return Km("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Pu(s)}return OR(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $r(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NR(){return Math.random().toString(36).substring(2,10)}function Jw(n,e){return{usr:n.state,key:n.key,idx:e}}function Km(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?el(e):e,state:t,key:e&&e.key||r||NR()}}function Pu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function el(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function OR(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,c="POP",h=null,p=m();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function m(){return(l.state||{idx:null}).idx}function y(){c="POP";let x=m(),D=x==null?null:x-p;p=x,h&&h({action:c,location:I.location,delta:D})}function w(x,D){c="PUSH";let U=Km(I.location,x,D);p=m()+1;let O=Jw(U,p),K=I.createHref(U);try{l.pushState(O,"",K)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;s.location.assign(K)}o&&h&&h({action:c,location:I.location,delta:1})}function E(x,D){c="REPLACE";let U=Km(I.location,x,D);p=m();let O=Jw(U,p),K=I.createHref(U);l.replaceState(O,"",K),o&&h&&h({action:c,location:I.location,delta:0})}function b(x){return DR(x)}let I={get action(){return c},get location(){return n(s,l)},listen(x){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(Gw,y),h=x,()=>{s.removeEventListener(Gw,y),h=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let D=b(x);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:w,replace:E,go(x){return l.go(x)}};return I}function DR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Pu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function TS(n,e,t="/"){return LR(n,e,t,!1)}function LR(n,e,t,r){let s=typeof e=="string"?el(e):e,o=ms(s.pathname||"/",t);if(o==null)return null;let l=SS(n);VR(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=KR(o);c=WR(l[h],p,r)}return c}function SS(n,e=[],t=[],r="",s=!1){let o=(l,c,h=s,p)=>{let m={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&h)return;ut(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let y=ps([r,m.relativePath]),w=t.concat(m);l.children&&l.children.length>0&&(ut(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),SS(l.children,e,w,y,h)),!(l.path==null&&!l.index)&&e.push({path:y,score:zR(y,l.index),routesMeta:w})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of bS(l.path))o(l,c,!0,p)}),e}function bS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=bS(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),s&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function VR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var MR=/^:[\w-]+$/,jR=3,UR=2,FR=1,$R=10,BR=-2,Yw=n=>n==="*";function zR(n,e){let t=n.split("/"),r=t.length;return t.some(Yw)&&(r+=BR),e&&(r+=UR),t.filter(s=>!Yw(s)).reduce((s,o)=>s+(MR.test(o)?jR:o===""?FR:$R),r)}function HR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function WR(n,e,t=!1){let{routesMeta:r}=n,s={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",y=wd({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},m),w=h.route;if(!y&&p&&t&&!r[r.length-1].route.index&&(y=wd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!y)return null;Object.assign(s,y.params),l.push({params:s,pathname:ps([o,y.pathname]),pathnameBase:QR(ps([o,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(o=ps([o,y.pathnameBase]))}return l}function wd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=qR(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((p,{paramName:m,isOptional:y},w)=>{if(m==="*"){let b=c[w]||"";l=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const E=c[w];return y&&!E?p[m]=void 0:p[m]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function qR(n,e=!1,t=!0){$r(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function KR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $r(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ms(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var GR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function JR(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?el(n):n,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=Qw(t.substring(1),"/"):o=Qw(t,e)):o=e,{pathname:o,search:XR(r),hash:ZR(s)}}function Qw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function am(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IS(n){let e=YR(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function xS(n,e,t,r=!1){let s;typeof n=="string"?s=el(n):(s={...n},ut(!s.pathname||!s.pathname.includes("?"),am("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),am("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),am("#","search","hash",s)));let o=n===""||s.pathname==="",l=o?"/":s.pathname,c;if(l==null)c=t;else{let y=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),y-=1;s.pathname=w.join("/")}c=y>=0?e[y]:"/"}let h=JR(s,c),p=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||m)&&(h.pathname+="/"),h}var ps=n=>n.join("/").replace(/\/\/+/g,"/"),QR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,eC=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function tC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function nC(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function AS(n,e){let t=n;if(typeof t!="string"||!GR.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if(kS)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),c=ms(l.pathname,e);l.origin===o.origin&&c!=null?t=c+l.search+l.hash:s=!0}catch{$r(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var RS=["POST","PUT","PATCH","DELETE"];new Set(RS);var rC=["GET",...RS];new Set(rC);var tl=j.createContext(null);tl.displayName="DataRouter";var ef=j.createContext(null);ef.displayName="DataRouterState";var sC=j.createContext(!1),CS=j.createContext({isTransitioning:!1});CS.displayName="ViewTransition";var iC=j.createContext(new Map);iC.displayName="Fetchers";var oC=j.createContext(null);oC.displayName="Await";var Hn=j.createContext(null);Hn.displayName="Navigation";var tc=j.createContext(null);tc.displayName="Location";var Es=j.createContext({outlet:null,matches:[],isDataRoute:!1});Es.displayName="Route";var ny=j.createContext(null);ny.displayName="RouteError";var PS="REACT_ROUTER_ERROR",aC="REDIRECT",lC="ROUTE_ERROR_RESPONSE";function uC(n){if(n.startsWith(`${PS}:${aC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function cC(n){if(n.startsWith(`${PS}:${lC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new eC(e.status,e.statusText,e.data)}catch{}}function hC(n,{relative:e}={}){ut(nc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(Hn),{hash:s,pathname:o,search:l}=rc(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:ps([t,o])),r.createHref({pathname:c,search:l,hash:s})}function nc(){return j.useContext(tc)!=null}function Ts(){return ut(nc(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(tc).location}var NS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function OS(n){j.useContext(Hn).static||j.useLayoutEffect(n)}function nl(){let{isDataRoute:n}=j.useContext(Es);return n?bC():dC()}function dC(){ut(nc(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(tl),{basename:e,navigator:t}=j.useContext(Hn),{matches:r}=j.useContext(Es),{pathname:s}=Ts(),o=JSON.stringify(IS(r)),l=j.useRef(!1);return OS(()=>{l.current=!0}),j.useCallback((h,p={})=>{if($r(l.current,NS),!l.current)return;if(typeof h=="number"){t.go(h);return}let m=xS(h,JSON.parse(o),s,p.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ps([e,m.pathname])),(p.replace?t.replace:t.push)(m,p.state,p)},[e,t,o,s,n])}j.createContext(null);function rc(n,{relative:e}={}){let{matches:t}=j.useContext(Es),{pathname:r}=Ts(),s=JSON.stringify(IS(t));return j.useMemo(()=>xS(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function fC(n,e){return DS(n,e)}function DS(n,e,t,r,s){var U;ut(nc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=j.useContext(Hn),{matches:l}=j.useContext(Es),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",m=c?c.pathnameBase:"/",y=c&&c.route;{let O=y&&y.path||"";VS(p,!y||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let w=Ts(),E;if(e){let O=typeof e=="string"?el(e):e;ut(m==="/"||((U=O.pathname)==null?void 0:U.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${O.pathname}" was given in the \`location\` prop.`),E=O}else E=w;let b=E.pathname||"/",I=b;if(m!=="/"){let O=m.replace(/^\//,"").split("/");I="/"+b.replace(/^\//,"").split("/").slice(O.length).join("/")}let x=TS(n,{pathname:I});$r(y||x!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),$r(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let D=vC(x&&x.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:ps([m,o.encodeLocation?o.encodeLocation(O.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?m:ps([m,o.encodeLocation?o.encodeLocation(O.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:O.pathnameBase])})),l,t,r,s);return e&&D?j.createElement(tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},D):D}function pC(){let n=SC(),e=tC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:o},"ErrorBoundary")," or"," ",j.createElement("code",{style:o},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:s},t):null,l)}var mC=j.createElement(pC,null),LS=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=cC(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Es.Provider,{value:this.props.routeContext},j.createElement(ny.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(gC,{error:n},e):e}};LS.contextType=sC;var lm=new WeakMap;function gC({children:n,error:e}){let{basename:t}=j.useContext(Hn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=uC(e.digest);if(r){let s=lm.get(e);if(s)throw s;let o=AS(r.location,t);if(kS&&!lm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw lm.set(e,l),l}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function yC({routeContext:n,match:e,children:t}){let r=j.useContext(tl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Es.Provider,{value:n},t)}function vC(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let m=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);ut(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,h=-1;if(t)for(let m=0;m<o.length;m++){let y=o[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=m),y.route.id){let{loaderData:w,errors:E}=t,b=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!E||E[y.route.id]===void 0);if(y.route.lazy||b){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let p=t&&r?(m,y)=>{var w,E;r(m,{location:t.location,params:((E=(w=t.matches)==null?void 0:w[0])==null?void 0:E.params)??{},unstable_pattern:nC(t.matches),errorInfo:y})}:void 0;return o.reduceRight((m,y,w)=>{let E,b=!1,I=null,x=null;t&&(E=l&&y.route.id?l[y.route.id]:void 0,I=y.route.errorElement||mC,c&&(h<0&&w===0?(VS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,x=null):h===w&&(b=!0,x=y.route.hydrateFallbackElement||null)));let D=e.concat(o.slice(0,w+1)),U=()=>{let O;return E?O=I:b?O=x:y.route.Component?O=j.createElement(y.route.Component,null):y.route.element?O=y.route.element:O=m,j.createElement(yC,{match:y,routeContext:{outlet:m,matches:D,isDataRoute:t!=null},children:O})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?j.createElement(LS,{location:t.location,revalidation:t.revalidation,component:I,error:E,children:U(),routeContext:{outlet:null,matches:D,isDataRoute:!0},onError:p}):U()},null)}function ry(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _C(n){let e=j.useContext(tl);return ut(e,ry(n)),e}function wC(n){let e=j.useContext(ef);return ut(e,ry(n)),e}function EC(n){let e=j.useContext(Es);return ut(e,ry(n)),e}function sy(n){let e=EC(n),t=e.matches[e.matches.length-1];return ut(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function TC(){return sy("useRouteId")}function SC(){var r;let n=j.useContext(ny),e=wC("useRouteError"),t=sy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function bC(){let{router:n}=_C("useNavigate"),e=sy("useNavigate"),t=j.useRef(!1);return OS(()=>{t.current=!0}),j.useCallback(async(s,o={})=>{$r(t.current,NS),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...o}))},[n,e])}var Xw={};function VS(n,e,t){!e&&!Xw[n]&&(Xw[n]=!0,$r(!1,t))}j.memo(IC);function IC({routes:n,future:e,state:t,onError:r}){return DS(n,void 0,t,r,e)}function Ta(n){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:o=!1,unstable_useTransitions:l}){ut(!nc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:c,navigator:s,static:o,unstable_useTransitions:l,future:{}}),[c,s,o,l]);typeof t=="string"&&(t=el(t));let{pathname:p="/",search:m="",hash:y="",state:w=null,key:E="default"}=t,b=j.useMemo(()=>{let I=ms(p,c);return I==null?null:{location:{pathname:I,search:m,hash:y,state:w,key:E},navigationType:r}},[c,p,m,y,w,E,r]);return $r(b!=null,`<Router basename="${c}"> is not able to match the URL "${p}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:j.createElement(Hn.Provider,{value:h},j.createElement(tc.Provider,{children:e,value:b}))}function kC({children:n,location:e}){return fC(Gm(n),e)}function Gm(n,e=[]){let t=[];return j.Children.forEach(n,(r,s)=>{if(!j.isValidElement(r))return;let o=[...e,s];if(r.type===j.Fragment){t.push.apply(t,Gm(r.props.children,o));return}ut(r.type===Ta,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Gm(r.props.children,o)),t.push(l)}),t}var nd="get",rd="application/x-www-form-urlencoded";function tf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function AC(n){return tf(n)&&n.tagName.toLowerCase()==="button"}function RC(n){return tf(n)&&n.tagName.toLowerCase()==="form"}function CC(n){return tf(n)&&n.tagName.toLowerCase()==="input"}function PC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function NC(n,e){return n.button===0&&(!e||e==="_self")&&!PC(n)}var Lh=null;function OC(){if(Lh===null)try{new FormData(document.createElement("form"),0),Lh=!1}catch{Lh=!0}return Lh}var DC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function um(n){return n!=null&&!DC.has(n)?($r(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rd}"`),null):n}function LC(n,e){let t,r,s,o,l;if(RC(n)){let c=n.getAttribute("action");r=c?ms(c,e):null,t=n.getAttribute("method")||nd,s=um(n.getAttribute("enctype"))||rd,o=new FormData(n)}else if(AC(n)||CC(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?ms(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||nd,s=um(n.getAttribute("formenctype"))||um(c.getAttribute("enctype"))||rd,o=new FormData(c,n),!OC()){let{name:p,type:m,value:y}=n;if(m==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,y)}}else{if(tf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nd,r=null,s=rd,l=n}return o&&s==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function iy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function VC(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&ms(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function MC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function jC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function UC(n,e,t){let r=await Promise.all(n.map(async s=>{let o=e.routes[s.route.id];if(o){let l=await MC(o,t);return l.links?l.links():[]}return[]}));return zC(r.flat(1).filter(jC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Zw(n,e,t,r,s,o){let l=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,c=(h,p)=>{var m;return t[p].pathname!==h.pathname||((m=t[p].route.path)==null?void 0:m.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):o==="data"?e.filter((h,p)=>{var y;let m=r.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function FC(n,e,{includeHydrateFallback:t}={}){return $C(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let o=[s.module];return s.clientActionModule&&(o=o.concat(s.clientActionModule)),s.clientLoaderModule&&(o=o.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(o=o.concat(s.hydrateFallbackModule)),s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function $C(n){return[...new Set(n)]}function BC(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function zC(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let o=JSON.stringify(BC(s));return t.has(o)||(t.add(o),r.push({key:o,link:s})),r},[])}function MS(){let n=j.useContext(tl);return iy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function HC(){let n=j.useContext(ef);return iy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var oy=j.createContext(void 0);oy.displayName="FrameworkContext";function jS(){let n=j.useContext(oy);return iy(n,"You must render this element inside a <HydratedRouter> element"),n}function WC(n,e){let t=j.useContext(oy),[r,s]=j.useState(!1),[o,l]=j.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:m,onTouchStart:y}=e,w=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let I=D=>{D.forEach(U=>{l(U.isIntersecting)})},x=new IntersectionObserver(I,{threshold:.5});return w.current&&x.observe(w.current),()=>{x.disconnect()}}},[n]),j.useEffect(()=>{if(r){let I=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(I)}}},[r]);let E=()=>{s(!0)},b=()=>{s(!1),l(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:lu(c,E),onBlur:lu(h,b),onMouseEnter:lu(p,E),onMouseLeave:lu(m,b),onTouchStart:lu(y,E)}]:[!1,w,{}]}function lu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function qC({page:n,...e}){let{router:t}=MS(),r=j.useMemo(()=>TS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(GC,{page:n,matches:r,...e}):null}function KC(n){let{manifest:e,routeModules:t}=jS(),[r,s]=j.useState([]);return j.useEffect(()=>{let o=!1;return UC(n,e,t).then(l=>{o||s(l)}),()=>{o=!0}},[n,e,t]),r}function GC({page:n,matches:e,...t}){let r=Ts(),{future:s,manifest:o,routeModules:l}=jS(),{basename:c}=MS(),{loaderData:h,matches:p}=HC(),m=j.useMemo(()=>Zw(n,e,p,o,r,"data"),[n,e,p,o,r]),y=j.useMemo(()=>Zw(n,e,p,o,r,"assets"),[n,e,p,o,r]),w=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,x=!1;if(e.forEach(U=>{var K;let O=o.routes[U.route.id];!O||!O.hasLoader||(!m.some(Y=>Y.route.id===U.route.id)&&U.route.id in h&&((K=l[U.route.id])!=null&&K.shouldRevalidate)||O.hasClientLoader?x=!0:I.add(U.route.id))}),I.size===0)return[];let D=VC(n,c,s.unstable_trailingSlashAwareDataRequests,"data");return x&&I.size>0&&D.searchParams.set("_routes",e.filter(U=>I.has(U.route.id)).map(U=>U.route.id).join(",")),[D.pathname+D.search]},[c,s.unstable_trailingSlashAwareDataRequests,h,r,o,m,e,n,l]),E=j.useMemo(()=>FC(y,o),[y,o]),b=KC(y);return j.createElement(j.Fragment,null,w.map(I=>j.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),E.map(I=>j.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),b.map(({key:I,link:x})=>j.createElement("link",{key:I,nonce:t.nonce,...x,crossOrigin:x.crossOrigin??t.crossOrigin})))}function JC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var YC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{YC&&(window.__reactRouterVersion="7.13.0")}catch{}function QC({basename:n,children:e,unstable_useTransitions:t,window:r}){let s=j.useRef();s.current==null&&(s.current=PR({window:r,v5Compat:!0}));let o=s.current,[l,c]=j.useState({action:o.action,location:o.location}),h=j.useCallback(p=>{t===!1?c(p):j.startTransition(()=>c(p))},[t]);return j.useLayoutEffect(()=>o.listen(h),[o,h]),j.createElement(xC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:t})}var US=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ay=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:w,...E},b){let{basename:I,unstable_useTransitions:x}=j.useContext(Hn),D=typeof p=="string"&&US.test(p),U=AS(p,I);p=U.to;let O=hC(p,{relative:s}),[K,Y,X]=WC(r,E),P=tP(p,{replace:l,state:c,target:h,preventScrollReset:m,relative:s,viewTransition:y,unstable_defaultShouldRevalidate:w,unstable_useTransitions:x});function A(V){e&&e(V),V.defaultPrevented||P(V)}let C=j.createElement("a",{...E,...X,href:U.absoluteURL||O,onClick:U.isExternal||o?e:A,ref:JC(b,Y),target:h,"data-discover":!D&&t==="render"?"true":void 0});return K&&!D?j.createElement(j.Fragment,null,C,j.createElement(qC,{page:O})):C});ay.displayName="Link";var XC=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:l,viewTransition:c,children:h,...p},m){let y=rc(l,{relative:p.relative}),w=Ts(),E=j.useContext(ef),{navigator:b,basename:I}=j.useContext(Hn),x=E!=null&&oP(y)&&c===!0,D=b.encodeLocation?b.encodeLocation(y).pathname:y.pathname,U=w.pathname,O=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;t||(U=U.toLowerCase(),O=O?O.toLowerCase():null,D=D.toLowerCase()),O&&I&&(O=ms(O,I)||O);const K=D!=="/"&&D.endsWith("/")?D.length-1:D.length;let Y=U===D||!s&&U.startsWith(D)&&U.charAt(K)==="/",X=O!=null&&(O===D||!s&&O.startsWith(D)&&O.charAt(D.length)==="/"),P={isActive:Y,isPending:X,isTransitioning:x},A=Y?e:void 0,C;typeof r=="function"?C=r(P):C=[r,Y?"active":null,X?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(P):o;return j.createElement(ay,{...p,"aria-current":A,className:C,ref:m,style:V,to:l,viewTransition:c},typeof h=="function"?h(P):h)});XC.displayName="NavLink";var ZC=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:o,method:l=nd,action:c,onSubmit:h,relative:p,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:w,...E},b)=>{let{unstable_useTransitions:I}=j.useContext(Hn),x=sP(),D=iP(c,{relative:p}),U=l.toLowerCase()==="get"?"get":"post",O=typeof c=="string"&&US.test(c),K=Y=>{if(h&&h(Y),Y.defaultPrevented)return;Y.preventDefault();let X=Y.nativeEvent.submitter,P=(X==null?void 0:X.getAttribute("formmethod"))||l,A=()=>x(X||Y.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:s,state:o,relative:p,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:w});I&&t!==!1?j.startTransition(()=>A()):A()};return j.createElement("form",{ref:b,method:U,action:D,onSubmit:r?h:K,...E,"data-discover":!O&&n==="render"?"true":void 0})});ZC.displayName="Form";function eP(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FS(n){let e=j.useContext(tl);return ut(e,eP(n)),e}function tP(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let p=nl(),m=Ts(),y=rc(n,{relative:o});return j.useCallback(w=>{if(NC(w,e)){w.preventDefault();let E=t!==void 0?t:Pu(m)===Pu(y),b=()=>p(n,{replace:E,state:r,preventScrollReset:s,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});h?j.startTransition(()=>b()):b()}},[m,p,y,t,r,e,n,s,o,l,c,h])}var nP=0,rP=()=>`__${String(++nP)}__`;function sP(){let{router:n}=FS("useSubmit"),{basename:e}=j.useContext(Hn),t=TC(),r=n.fetch,s=n.navigate;return j.useCallback(async(o,l={})=>{let{action:c,method:h,encType:p,formData:m,body:y}=LC(o,e);if(l.navigate===!1){let w=l.fetcherKey||rP();await r(w,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:y,formMethod:l.method||h,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:y,formMethod:l.method||h,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function iP(n,{relative:e}={}){let{basename:t}=j.useContext(Hn),r=j.useContext(Es);ut(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),o={...rc(n||".",{relative:e})},l=Ts();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(m=>m==="")){c.delete("index"),h.filter(y=>y).forEach(y=>c.append("index",y));let m=c.toString();o.search=m?`?${m}`:""}}return(!n||n===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ps([t,o.pathname])),Pu(o)}function oP(n,{relative:e}={}){let t=j.useContext(CS);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=FS("useViewTransitionState"),s=rc(n,{relative:e});if(!t.isTransitioning)return!1;let o=ms(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ms(t.nextLocation.pathname,r)||t.nextLocation.pathname;return wd(s.pathname,l)!=null||wd(s.pathname,o)!=null}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lP=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),e0=n=>{const e=lP(n);return e.charAt(0).toUpperCase()+e.slice(1)},$S=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var uP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:l,...c},h)=>j.createElement("svg",{ref:h,...uP,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:$S("lucide",s),...c},[...l.map(([p,m])=>j.createElement(p,m)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=(n,e)=>{const t=j.forwardRef(({className:r,...s},o)=>j.createElement(cP,{ref:o,iconNode:e,className:$S(`lucide-${aP(e0(n))}`,`lucide-${n}`,r),...s}));return t.displayName=e0(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],dP=_n("arrow-right",hP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],pP=_n("facebook",fP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],ly=_n("heart",mP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Jm=_n("instagram",gP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],vP=_n("menu",yP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],wP=_n("package",_P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],TP=_n("rotate-ccw",EP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],bP=_n("search",SP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],xP=_n("shopping-bag",IP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kP=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],AP=_n("star",kP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],CP=_n("truck",RP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],NP=_n("twitter",PP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],DP=_n("x",OP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],VP=_n("zap",LP),uy=j.createContext({});function cy(n){const e=j.useRef(null);return e.current===null&&(e.current=n()),e.current}const BS=typeof window<"u",zS=BS?j.useLayoutEffect:j.useEffect,nf=j.createContext(null);function hy(n,e){n.indexOf(e)===-1&&n.push(e)}function Ed(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Br=(n,e,t)=>t>e?e:t<n?n:t;let dy=()=>{};const gs={},HS=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function WS(n){return typeof n=="object"&&n!==null}const qS=n=>/^0[^.\s]+$/u.test(n);function KS(n){let e;return()=>(e===void 0&&(e=n()),e)}const zn=n=>n,MP=(n,e)=>t=>e(n(t)),sc=(...n)=>n.reduce(MP),Nu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class fy{constructor(){this.subscriptions=[]}add(e){return hy(this.subscriptions,e),()=>Ed(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ur=n=>n*1e3,Bn=n=>n/1e3;function GS(n,e){return e?n*(1e3/e):0}const JS=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,jP=1e-7,UP=12;function FP(n,e,t,r,s){let o,l,c=0;do l=e+(t-e)/2,o=JS(l,r,s)-n,o>0?t=l:e=l;while(Math.abs(o)>jP&&++c<UP);return l}function ic(n,e,t,r){if(n===e&&t===r)return zn;const s=o=>FP(o,0,1,n,t);return o=>o===0||o===1?o:JS(s(o),e,r)}const YS=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,QS=n=>e=>1-n(1-e),XS=ic(.33,1.53,.69,.99),py=QS(XS),ZS=YS(py),eb=n=>(n*=2)<1?.5*py(n):.5*(2-Math.pow(2,-10*(n-1))),my=n=>1-Math.sin(Math.acos(n)),tb=QS(my),nb=YS(my),$P=ic(.42,0,1,1),BP=ic(0,0,.58,1),rb=ic(.42,0,.58,1),zP=n=>Array.isArray(n)&&typeof n[0]!="number",sb=n=>Array.isArray(n)&&typeof n[0]=="number",HP={linear:zn,easeIn:$P,easeInOut:rb,easeOut:BP,circIn:my,circInOut:nb,circOut:tb,backIn:py,backInOut:ZS,backOut:XS,anticipate:eb},WP=n=>typeof n=="string",t0=n=>{if(sb(n)){dy(n.length===4);const[e,t,r,s]=n;return ic(e,t,r,s)}else if(WP(n))return HP[n];return n},Vh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function qP(n,e){let t=new Set,r=new Set,s=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function h(m){l.has(m)&&(p.schedule(m),n()),m(c)}const p={schedule:(m,y=!1,w=!1)=>{const b=w&&s?t:r;return y&&l.add(m),b.has(m)||b.add(m),m},cancel:m=>{r.delete(m),l.delete(m)},process:m=>{if(c=m,s){o=!0;return}s=!0,[t,r]=[r,t],t.forEach(h),t.clear(),s=!1,o&&(o=!1,p.process(m))}};return p}const KP=40;function ib(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Vh.reduce((O,K)=>(O[K]=qP(o),O),{}),{setup:c,read:h,resolveKeyframes:p,preUpdate:m,update:y,preRender:w,render:E,postRender:b}=l,I=()=>{const O=gs.useManualTiming?s.timestamp:performance.now();t=!1,gs.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(O-s.timestamp,KP),1)),s.timestamp=O,s.isProcessing=!0,c.process(s),h.process(s),p.process(s),m.process(s),y.process(s),w.process(s),E.process(s),b.process(s),s.isProcessing=!1,t&&e&&(r=!1,n(I))},x=()=>{t=!0,r=!0,s.isProcessing||n(I)};return{schedule:Vh.reduce((O,K)=>{const Y=l[K];return O[K]=(X,P=!1,A=!1)=>(t||x(),Y.schedule(X,P,A)),O},{}),cancel:O=>{for(let K=0;K<Vh.length;K++)l[Vh[K]].cancel(O)},state:s,steps:l}}const{schedule:Ze,cancel:yi,state:Ht,steps:cm}=ib(typeof requestAnimationFrame<"u"?requestAnimationFrame:zn,!0);let sd;function GP(){sd=void 0}const un={now:()=>(sd===void 0&&un.set(Ht.isProcessing||gs.useManualTiming?Ht.timestamp:performance.now()),sd),set:n=>{sd=n,queueMicrotask(GP)}},ob=n=>e=>typeof e=="string"&&e.startsWith(n),ab=ob("--"),JP=ob("var(--"),gy=n=>JP(n)?YP.test(n.split("/*")[0].trim()):!1,YP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function n0(n){return typeof n!="string"?!1:n.split("/*")[0].includes("var(--")}const rl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Ou={...rl,transform:n=>Br(0,1,n)},Mh={...rl,default:1},_u=n=>Math.round(n*1e5)/1e5,yy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function QP(n){return n==null}const XP=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,vy=(n,e)=>t=>!!(typeof t=="string"&&XP.test(t)&&t.startsWith(n)||e&&!QP(t)&&Object.prototype.hasOwnProperty.call(t,e)),lb=(n,e,t)=>r=>{if(typeof r!="string")return r;const[s,o,l,c]=r.match(yy);return{[n]:parseFloat(s),[e]:parseFloat(o),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},ZP=n=>Br(0,255,n),hm={...rl,transform:n=>Math.round(ZP(n))},uo={test:vy("rgb","red"),parse:lb("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+hm.transform(n)+", "+hm.transform(e)+", "+hm.transform(t)+", "+_u(Ou.transform(r))+")"};function e1(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ym={test:vy("#"),parse:e1,transform:uo.transform},oc=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ti=oc("deg"),Or=oc("%"),de=oc("px"),t1=oc("vh"),n1=oc("vw"),r0={...Or,parse:n=>Or.parse(n)/100,transform:n=>Or.transform(n*100)},Pa={test:vy("hsl","hue"),parse:lb("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Or.transform(_u(e))+", "+Or.transform(_u(t))+", "+_u(Ou.transform(r))+")"},It={test:n=>uo.test(n)||Ym.test(n)||Pa.test(n),parse:n=>uo.test(n)?uo.parse(n):Pa.test(n)?Pa.parse(n):Ym.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?uo.transform(n):Pa.transform(n),getAnimatableNone:n=>{const e=It.parse(n);return e.alpha=0,It.transform(e)}},r1=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function s1(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(yy))==null?void 0:e.length)||0)+(((t=n.match(r1))==null?void 0:t.length)||0)>0}const ub="number",cb="color",i1="var",o1="var(",s0="${}",a1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Du(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},s=[];let o=0;const c=e.replace(a1,h=>(It.test(h)?(r.color.push(o),s.push(cb),t.push(It.parse(h))):h.startsWith(o1)?(r.var.push(o),s.push(i1),t.push(h)):(r.number.push(o),s.push(ub),t.push(parseFloat(h))),++o,s0)).split(s0);return{values:t,split:c,indexes:r,types:s}}function hb(n){return Du(n).values}function db(n){const{split:e,types:t}=Du(n),r=e.length;return s=>{let o="";for(let l=0;l<r;l++)if(o+=e[l],s[l]!==void 0){const c=t[l];c===ub?o+=_u(s[l]):c===cb?o+=It.transform(s[l]):o+=s[l]}return o}}const l1=n=>typeof n=="number"?0:It.test(n)?It.getAnimatableNone(n):n;function u1(n){const e=hb(n);return db(n)(e.map(l1))}const cr={test:s1,parse:hb,createTransformer:db,getAnimatableNone:u1};function dm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function c1({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,o=0,l=0;if(!e)s=o=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,h=2*t-c;s=dm(h,c,n+1/3),o=dm(h,c,n),l=dm(h,c,n-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:r}}function Td(n,e){return t=>t>0?e:n}const lt=(n,e,t)=>n+(e-n)*t,fm=(n,e,t)=>{const r=n*n,s=t*(e*e-r)+r;return s<0?0:Math.sqrt(s)},h1=[Ym,uo,Pa],d1=n=>h1.find(e=>e.test(n));function i0(n){const e=d1(n);if(!e)return!1;let t=e.parse(n);return e===Pa&&(t=c1(t)),t}const o0=(n,e)=>{const t=i0(n),r=i0(e);if(!t||!r)return Td(n,e);const s={...t};return o=>(s.red=fm(t.red,r.red,o),s.green=fm(t.green,r.green,o),s.blue=fm(t.blue,r.blue,o),s.alpha=lt(t.alpha,r.alpha,o),uo.transform(s))},Qm=new Set(["none","hidden"]);function f1(n,e){return Qm.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function p1(n,e){return t=>lt(n,e,t)}function _y(n){return typeof n=="number"?p1:typeof n=="string"?gy(n)?Td:It.test(n)?o0:y1:Array.isArray(n)?fb:typeof n=="object"?It.test(n)?o0:m1:Td}function fb(n,e){const t=[...n],r=t.length,s=n.map((o,l)=>_y(o)(o,e[l]));return o=>{for(let l=0;l<r;l++)t[l]=s[l](o);return t}}function m1(n,e){const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=_y(n[s])(n[s],e[s]));return s=>{for(const o in r)t[o]=r[o](s);return t}}function g1(n,e){const t=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],l=n.indexes[o][r[o]],c=n.values[l]??0;t[s]=c,r[o]++}return t}const y1=(n,e)=>{const t=cr.createTransformer(e),r=Du(n),s=Du(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?Qm.has(n)&&!s.values.length||Qm.has(e)&&!r.values.length?f1(n,e):sc(fb(g1(r,s),s.values),t):Td(n,e)};function pb(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?lt(n,e,t):_y(n)(n,e)}const v1=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>Ze.update(e,t),stop:()=>yi(e),now:()=>Ht.isProcessing?Ht.timestamp:un.now()}},mb=(n,e,t=10)=>{let r="";const s=Math.max(Math.round(e/t),2);for(let o=0;o<s;o++)r+=Math.round(n(o/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Sd=2e4;function wy(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<Sd;)e+=t,r=n.next(e);return e>=Sd?1/0:e}function _1(n,e=100,t){const r=t({...n,keyframes:[0,e]}),s=Math.min(wy(r),Sd);return{type:"keyframes",ease:o=>r.next(s*o).value/e,duration:Bn(s)}}const w1=5;function gb(n,e,t){const r=Math.max(e-w1,0);return GS(t-n(r),e-r)}const pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},pm=.001;function E1({duration:n=pt.duration,bounce:e=pt.bounce,velocity:t=pt.velocity,mass:r=pt.mass}){let s,o,l=1-e;l=Br(pt.minDamping,pt.maxDamping,l),n=Br(pt.minDuration,pt.maxDuration,Bn(n)),l<1?(s=p=>{const m=p*l,y=m*n,w=m-t,E=Xm(p,l),b=Math.exp(-y);return pm-w/E*b},o=p=>{const y=p*l*n,w=y*t+t,E=Math.pow(l,2)*Math.pow(p,2)*n,b=Math.exp(-y),I=Xm(Math.pow(p,2),l);return(-s(p)+pm>0?-1:1)*((w-E)*b)/I}):(s=p=>{const m=Math.exp(-p*n),y=(p-t)*n+1;return-pm+m*y},o=p=>{const m=Math.exp(-p*n),y=(t-p)*(n*n);return m*y});const c=5/n,h=S1(s,o,c);if(n=ur(n),isNaN(h))return{stiffness:pt.stiffness,damping:pt.damping,duration:n};{const p=Math.pow(h,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:n}}}const T1=12;function S1(n,e,t){let r=t;for(let s=1;s<T1;s++)r=r-n(r)/e(r);return r}function Xm(n,e){return n*Math.sqrt(1-e*e)}const b1=["duration","bounce"],I1=["stiffness","damping","mass"];function a0(n,e){return e.some(t=>n[t]!==void 0)}function x1(n){let e={velocity:pt.velocity,stiffness:pt.stiffness,damping:pt.damping,mass:pt.mass,isResolvedFromDuration:!1,...n};if(!a0(n,I1)&&a0(n,b1))if(e.velocity=0,n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),s=r*r,o=2*Br(.05,1,1-(n.bounce||0))*Math.sqrt(s);e={...e,mass:pt.mass,stiffness:s,damping:o}}else{const t=E1({...n,velocity:0});e={...e,...t,mass:pt.mass},e.isResolvedFromDuration=!0}return e}function bd(n=pt.visualDuration,e=pt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:s}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:h,damping:p,mass:m,duration:y,velocity:w,isResolvedFromDuration:E}=x1({...t,velocity:-Bn(t.velocity||0)}),b=w||0,I=p/(2*Math.sqrt(h*m)),x=l-o,D=Bn(Math.sqrt(h/m)),U=Math.abs(x)<5;r||(r=U?pt.restSpeed.granular:pt.restSpeed.default),s||(s=U?pt.restDelta.granular:pt.restDelta.default);let O;if(I<1){const Y=Xm(D,I);O=X=>{const P=Math.exp(-I*D*X);return l-P*((b+I*D*x)/Y*Math.sin(Y*X)+x*Math.cos(Y*X))}}else if(I===1)O=Y=>l-Math.exp(-D*Y)*(x+(b+D*x)*Y);else{const Y=D*Math.sqrt(I*I-1);O=X=>{const P=Math.exp(-I*D*X),A=Math.min(Y*X,300);return l-P*((b+I*D*x)*Math.sinh(A)+Y*x*Math.cosh(A))/Y}}const K={calculatedDuration:E&&y||null,next:Y=>{const X=O(Y);if(E)c.done=Y>=y;else{let P=Y===0?b:0;I<1&&(P=Y===0?ur(b):gb(O,Y,X));const A=Math.abs(P)<=r,C=Math.abs(l-X)<=s;c.done=A&&C}return c.value=c.done?l:X,c},toString:()=>{const Y=Math.min(wy(K),Sd),X=mb(P=>K.next(Y*P).value,Y,30);return Y+"ms "+X},toTransition:()=>{}};return K}bd.applyToOptions=n=>{const e=_1(n,100,bd);return n.ease=e.ease,n.duration=ur(e.duration),n.type="keyframes",n};function Zm({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:h,restDelta:p=.5,restSpeed:m}){const y=n[0],w={done:!1,value:y},E=A=>c!==void 0&&A<c||h!==void 0&&A>h,b=A=>c===void 0?h:h===void 0||Math.abs(c-A)<Math.abs(h-A)?c:h;let I=t*e;const x=y+I,D=l===void 0?x:l(x);D!==x&&(I=D-y);const U=A=>-I*Math.exp(-A/r),O=A=>D+U(A),K=A=>{const C=U(A),V=O(A);w.done=Math.abs(C)<=p,w.value=w.done?D:V};let Y,X;const P=A=>{E(w.value)&&(Y=A,X=bd({keyframes:[w.value,b(w.value)],velocity:gb(O,A,w.value),damping:s,stiffness:o,restDelta:p,restSpeed:m}))};return P(0),{calculatedDuration:null,next:A=>{let C=!1;return!X&&Y===void 0&&(C=!0,K(A),P(A)),Y!==void 0&&A>=Y?X.next(A-Y):(!C&&K(A),w)}}}function k1(n,e,t){const r=[],s=t||gs.mix||pb,o=n.length-1;for(let l=0;l<o;l++){let c=s(n[l],n[l+1]);if(e){const h=Array.isArray(e)?e[l]||zn:e;c=sc(h,c)}r.push(c)}return r}function A1(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const o=n.length;if(dy(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=k1(e,r,s),h=c.length,p=m=>{if(l&&m<n[0])return e[0];let y=0;if(h>1)for(;y<n.length-2&&!(m<n[y+1]);y++);const w=Nu(n[y],n[y+1],m);return c[y](w)};return t?m=>p(Br(n[0],n[o-1],m)):p}function R1(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Nu(0,e,r);n.push(lt(t,1,s))}}function C1(n){const e=[0];return R1(e,n.length-1),e}function P1(n,e){return n.map(t=>t*e)}function N1(n,e){return n.map(()=>e||rb).splice(0,n.length-1)}function wu({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=zP(r)?r.map(t0):t0(r),o={done:!1,value:e[0]},l=P1(t&&t.length===e.length?t:C1(e),n),c=A1(l,e,{ease:Array.isArray(s)?s:N1(e,s)});return{calculatedDuration:n,next:h=>(o.value=c(h),o.done=h>=n,o)}}const O1=n=>n!==null;function Ey(n,{repeat:e,repeatType:t="loop"},r,s=1){const o=n.filter(O1),c=s<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||r===void 0?o[c]:r}const D1={decay:Zm,inertia:Zm,tween:wu,keyframes:wu,spring:bd};function yb(n){typeof n.type=="string"&&(n.type=D1[n.type])}class Ty{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const L1=n=>n/100;class Sy extends Ty{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:t}=this.options;t&&t.updatedAt!==un.now()&&this.tick(un.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;yb(e);const{type:t=wu,repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const h=t||wu;h!==wu&&typeof c[0]!="number"&&(this.mixKeyframes=sc(L1,pb(c[0],c[1])),c=[0,100]);const p=h({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=h({...e,keyframes:[...c].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=wy(p));const{calculatedDuration:m}=p;this.calculatedDuration=m,this.resolvedDuration=m+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=p}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:h}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:m,repeat:y,repeatType:w,repeatDelay:E,type:b,onUpdate:I,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const D=this.currentTime-p*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?D<0:D>s;this.currentTime=Math.max(D,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let O=this.currentTime,K=r;if(y){const A=Math.min(this.currentTime,s)/c;let C=Math.floor(A),V=A%1;!V&&A>=1&&(V=1),V===1&&C--,C=Math.min(C,y+1),!!(C%2)&&(w==="reverse"?(V=1-V,E&&(V-=E/c)):w==="mirror"&&(K=l)),O=Br(0,1,V)*c}const Y=U?{done:!1,value:m[0]}:K.next(O);o&&(Y.value=o(Y.value));let{done:X}=Y;!U&&h!==null&&(X=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&X);return P&&b!==Zm&&(Y.value=Ey(m,this.options,x,this.speed)),I&&I(Y.value),P&&this.finish(),Y}then(e,t){return this.finished.then(e,t)}get duration(){return Bn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bn(e)}get time(){return Bn(this.currentTime)}set time(e){var t;e=ur(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(un.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Bn(this.currentTime))}play(){var s,o;if(this.isStopped)return;const{driver:e=v1,startTime:t}=this.options;this.driver||(this.driver=e(l=>this.tick(l))),(o=(s=this.options).onPlay)==null||o.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(un.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function V1(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const co=n=>n*180/Math.PI,eg=n=>{const e=co(Math.atan2(n[1],n[0]));return tg(e)},M1={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:eg,rotateZ:eg,skewX:n=>co(Math.atan(n[1])),skewY:n=>co(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},tg=n=>(n=n%360,n<0&&(n+=360),n),l0=eg,u0=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),c0=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),j1={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:u0,scaleY:c0,scale:n=>(u0(n)+c0(n))/2,rotateX:n=>tg(co(Math.atan2(n[6],n[5]))),rotateY:n=>tg(co(Math.atan2(-n[2],n[0]))),rotateZ:l0,rotate:l0,skewX:n=>co(Math.atan(n[4])),skewY:n=>co(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function ng(n){return n.includes("scale")?1:0}function rg(n,e){if(!n||n==="none")return ng(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(t)r=j1,s=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=M1,s=c}if(!s)return ng(e);const o=r[e],l=s[1].split(",").map(F1);return typeof o=="function"?o(l):l[o]}const U1=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return rg(t,e)};function F1(n){return parseFloat(n.trim())}const sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],il=new Set(sl),h0=n=>n===rl||n===de,$1=new Set(["x","y","z"]),B1=sl.filter(n=>!$1.has(n));function z1(n){const e=[];return B1.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const ui={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>rg(e,"x"),y:(n,{transform:e})=>rg(e,"y")};ui.translateX=ui.x;ui.translateY=ui.y;const po=new Set;let sg=!1,ig=!1,og=!1;function vb(){if(ig){const n=Array.from(po).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const s=z1(r);s.length&&(t.set(r,s),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=t.get(r);s&&s.forEach(([o,l])=>{var c;(c=r.getValue(o))==null||c.set(l)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ig=!1,sg=!1,po.forEach(n=>n.complete(og)),po.clear()}function _b(){po.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(ig=!0)})}function H1(){og=!0,_b(),vb(),og=!1}class by{constructor(e,t,r,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(po.add(this),sg||(sg=!0,Ze.read(_b),Ze.resolveKeyframes(vb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(e[0]===null){const o=s==null?void 0:s.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const c=r.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&o===void 0&&s.set(e[0])}V1(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),po.delete(this)}cancel(){this.state==="scheduled"&&(po.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const W1=n=>n.startsWith("--");function q1(n,e,t){W1(e)?n.style.setProperty(e,t):n.style[e]=t}const K1={};function wb(n,e){const t=KS(n);return()=>K1[e]??t()}const G1=wb(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),Eb=wb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),du=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,d0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:du([0,.65,.55,1]),circOut:du([.55,0,1,.45]),backIn:du([.31,.01,.66,-.59]),backOut:du([.33,1.53,.69,.99])};function Tb(n,e){if(n)return typeof n=="function"?Eb()?mb(n,e):"ease-out":sb(n)?du(n):Array.isArray(n)?n.map(t=>Tb(t,e)||d0.easeOut):d0[n]}function J1(n,e,t,{delay:r=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:h}={},p=void 0){const m={[e]:t};h&&(m.offset=h);const y=Tb(c,s);Array.isArray(y)&&(m.easing=y);const w={delay:r,duration:s,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return p&&(w.pseudoElement=p),n.animate(m,w)}function Sb(n){return typeof n=="function"&&"applyToOptions"in n}function Y1({type:n,...e}){return Sb(n)&&Eb()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class bb extends Ty{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:h}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,dy(typeof e.type!="string");const p=Y1(e);this.animation=J1(t,r,s,p,o),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const m=Ey(s,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):q1(t,r,m),this.animation.cancel()}h==null||h(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r,s;const e=(t=this.options)==null?void 0:t.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((s=(r=this.animation).commitStyles)==null||s.call(r))}get duration(){var t,r;const e=((r=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:r.call(t).duration)||0;return Bn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Bn(e)}get time(){return Bn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ur(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&G1()?(this.animation.timeline=e,zn):t(this)}}const Ib={anticipate:eb,backInOut:ZS,circInOut:nb};function Q1(n){return n in Ib}function X1(n){typeof n.ease=="string"&&Q1(n.ease)&&(n.ease=Ib[n.ease])}const mm=10;class Z1 extends bb{constructor(e){X1(e),yb(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Sy({...l,autoplay:!1}),h=Math.max(mm,un.now()-this.startTime),p=Br(0,mm,h-mm);t.setWithVelocity(c.sample(Math.max(0,h-p)).value,c.sample(h).value,p),c.stop()}}const f0=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(cr.test(n)||n==="0")&&!n.startsWith("url("));function eN(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function tN(n,e,t,r){const s=n[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=f0(s,e),c=f0(o,e);return!l||!c?!1:eN(n)||(t==="spring"||Sb(t))&&r}function ag(n){n.duration=0,n.type="keyframes"}const nN=new Set(["opacity","clipPath","filter","transform"]),rN=KS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function sN(n){var m;const{motionValue:e,name:t,repeatDelay:r,repeatType:s,damping:o,type:l}=n;if(!(((m=e==null?void 0:e.owner)==null?void 0:m.current)instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:p}=e.owner.getProps();return rN()&&t&&nN.has(t)&&(t!=="transform"||!p)&&!h&&!r&&s!=="mirror"&&o!==0&&l!=="inertia"}const iN=40;class oN extends Ty{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:h,motionValue:p,element:m,...y}){var b;super(),this.stop=()=>{var I,x;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=un.now();const w={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:o,repeatType:l,name:h,motionValue:p,element:m,...y},E=(m==null?void 0:m.KeyframeResolver)||by;this.keyframeResolver=new E(c,(I,x,D)=>this.onKeyframesResolved(I,x,w,!D),h,p,m),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,r,s){var x,D;this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:h,isHandoff:p,onUpdate:m}=r;this.resolvedAt=un.now(),tN(e,o,l,c)||((gs.instantAnimations||!h)&&(m==null||m(Ey(e,r,t))),e[0]=e[e.length-1],ag(r),r.repeat=0);const w={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>iN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},E=!p&&sN(w),b=(D=(x=w.motionValue)==null?void 0:x.owner)==null?void 0:D.current,I=E?new Z1({...w,element:b}):new Sy(w);I.finished.then(()=>{this.notifyFinished()}).catch(zn),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),H1()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function xb(n,e,t,r=0,s=1){const o=Array.from(n).sort((p,m)=>p.sortNodePosition(m)).indexOf(e),l=n.size,c=(l-1)*r;return typeof t=="function"?t(o,l):s===1?o*r:c-o*r}const aN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lN(n){const e=aN.exec(n);if(!e)return[,];const[,t,r,s]=e;return[`--${t??r}`,s]}function kb(n,e,t=1){const[r,s]=lN(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const l=o.trim();return HS(l)?parseFloat(l):l}return gy(s)?kb(s,e,t+1):s}const uN={type:"spring",stiffness:500,damping:25,restSpeed:10},cN=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),hN={type:"keyframes",duration:.8},dN={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fN=(n,{keyframes:e})=>e.length>2?hN:il.has(n)?n.startsWith("scale")?cN(e[1]):uN:dN,pN=n=>n!==null;function mN(n,{repeat:e,repeatType:t="loop"},r){const s=n.filter(pN),o=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[o]}function Ab(n,e){if(n!=null&&n.inherit&&e){const{inherit:t,...r}=n;return{...e,...r}}return n}function Iy(n,e){const t=(n==null?void 0:n[e])??(n==null?void 0:n.default)??n;return t!==n?Ab(t,n):t}function gN({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:c,from:h,elapsed:p,...m}){return!!Object.keys(m).length}const xy=(n,e,t,r={},s,o)=>l=>{const c=Iy(r,n)||{},h=c.delay||r.delay||0;let{elapsed:p=0}=r;p=p-ur(h);const m={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-p,onUpdate:w=>{e.set(w),c.onUpdate&&c.onUpdate(w)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:s};gN(c)||Object.assign(m,fN(n,m)),m.duration&&(m.duration=ur(m.duration)),m.repeatDelay&&(m.repeatDelay=ur(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let y=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(ag(m),m.delay===0&&(y=!0)),(gs.instantAnimations||gs.skipAnimations||s!=null&&s.shouldSkipAnimations)&&(y=!0,ag(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const w=mN(m.keyframes,c);if(w!==void 0){Ze.update(()=>{m.onUpdate(w),m.onComplete()});return}}return c.isSync?new Sy(m):new oN(m)};function p0(n){const e=[{},{}];return n==null||n.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function ky(n,e,t,r){if(typeof e=="function"){const[s,o]=p0(r);e=e(t!==void 0?t:n.custom,s,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[s,o]=p0(r);e=e(t!==void 0?t:n.custom,s,o)}return e}function ja(n,e,t){const r=n.getProps();return ky(r,e,t!==void 0?t:r.custom,n)}const Rb=new Set(["width","height","top","left","right","bottom",...sl]),m0=30,yN=n=>!isNaN(parseFloat(n));class vN{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const s=un.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=un.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=yN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new fy);const r=this.events[e].add(t);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>m0)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,m0);return GS(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ka(n,e){return new vN(n,e)}const lg=n=>Array.isArray(n);function _N(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ka(t))}function wN(n){return lg(n)?n[n.length-1]||0:n}function EN(n,e){const t=ja(n,e);let{transitionEnd:r={},transition:s={},...o}=t||{};o={...o,...r};for(const l in o){const c=wN(o[l]);_N(n,l,c)}}const rn=n=>!!(n&&n.getVelocity);function TN(n){return!!(rn(n)&&n.add)}function ug(n,e){const t=n.getValue("willChange");if(TN(t))return t.add(e);if(!t&&gs.WillChange){const r=new gs.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function Ay(n){return n.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const SN="framerAppearId",Cb="data-"+Ay(SN);function Pb(n){return n.props[Cb]}function bN({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function Nb(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:o,transitionEnd:l,...c}=e;const h=n.getDefaultTransition();o=o?Ab(o,h):h;const p=o==null?void 0:o.reduceMotion;r&&(o=r);const m=[],y=s&&n.animationState&&n.animationState.getState()[s];for(const w in c){const E=n.getValue(w,n.latestValues[w]??null),b=c[w];if(b===void 0||y&&bN(y,w))continue;const I={delay:t,...Iy(o||{},w)},x=E.get();if(x!==void 0&&!E.isAnimating&&!Array.isArray(b)&&b===x&&!I.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const K=Pb(n);if(K){const Y=window.MotionHandoffAnimation(K,w,Ze);Y!==null&&(I.startTime=Y,D=!0)}}ug(n,w);const U=p??n.shouldReduceMotion;E.start(xy(w,E,b,U&&Rb.has(w)?{type:!1}:I,n,D));const O=E.animation;O&&m.push(O)}if(l){const w=()=>Ze.update(()=>{l&&EN(n,l)});m.length?Promise.all(m).then(w):w()}return m}function cg(n,e,t={}){var h;const r=ja(n,e,t.type==="exit"?(h=n.presenceContext)==null?void 0:h.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(Nb(n,r,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:m=0,staggerChildren:y,staggerDirection:w}=s;return IN(n,e,p,m,y,w,t)}:()=>Promise.resolve(),{when:c}=s;if(c){const[p,m]=c==="beforeChildren"?[o,l]:[l,o];return p().then(()=>m())}else return Promise.all([o(),l(t.delay)])}function IN(n,e,t=0,r=0,s=0,o=1,l){const c=[];for(const h of n.variantChildren)h.notify("AnimationStart",e),c.push(cg(h,e,{...l,delay:t+(typeof r=="function"?0:r)+xb(n.variantChildren,h,r,s,o)}).then(()=>h.notify("AnimationComplete",e)));return Promise.all(c)}function xN(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>cg(n,o,t));r=Promise.all(s)}else if(typeof e=="string")r=cg(n,e,t);else{const s=typeof e=="function"?ja(n,e,t.custom):e;r=Promise.all(Nb(n,s,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}const kN={test:n=>n==="auto",parse:n=>n},Ob=n=>e=>e.test(n),Db=[rl,de,Or,ti,n1,t1,kN],g0=n=>Db.find(Ob(n));function AN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||qS(n):!0}const RN=new Set(["brightness","contrast","saturate","opacity"]);function CN(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(yy)||[];if(!r)return n;const s=t.replace(r,"");let o=RN.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+s+")"}const PN=/\b([a-z-]*)\(.*?\)/gu,hg={...cr,getAnimatableNone:n=>{const e=n.match(PN);return e?e.map(CN).join(" "):n}},dg={...cr,getAnimatableNone:n=>{const e=cr.parse(n);return cr.createTransformer(n)(e.map(r=>typeof r=="number"?0:typeof r=="object"?{...r,alpha:1}:r))}},y0={...rl,transform:Math.round},NN={rotate:ti,rotateX:ti,rotateY:ti,rotateZ:ti,scale:Mh,scaleX:Mh,scaleY:Mh,scaleZ:Mh,skew:ti,skewX:ti,skewY:ti,distance:de,translateX:de,translateY:de,translateZ:de,x:de,y:de,z:de,perspective:de,transformPerspective:de,opacity:Ou,originX:r0,originY:r0,originZ:de},Ry={borderWidth:de,borderTopWidth:de,borderRightWidth:de,borderBottomWidth:de,borderLeftWidth:de,borderRadius:de,borderTopLeftRadius:de,borderTopRightRadius:de,borderBottomRightRadius:de,borderBottomLeftRadius:de,width:de,maxWidth:de,height:de,maxHeight:de,top:de,right:de,bottom:de,left:de,inset:de,insetBlock:de,insetBlockStart:de,insetBlockEnd:de,insetInline:de,insetInlineStart:de,insetInlineEnd:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,paddingBlock:de,paddingBlockStart:de,paddingBlockEnd:de,paddingInline:de,paddingInlineStart:de,paddingInlineEnd:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,marginBlock:de,marginBlockStart:de,marginBlockEnd:de,marginInline:de,marginInlineStart:de,marginInlineEnd:de,fontSize:de,backgroundPositionX:de,backgroundPositionY:de,...NN,zIndex:y0,fillOpacity:Ou,strokeOpacity:Ou,numOctaves:y0},ON={...Ry,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:hg,WebkitFilter:hg,mask:dg,WebkitMask:dg},Lb=n=>ON[n],DN=new Set([hg,dg]);function Vb(n,e){let t=Lb(n);return DN.has(t)||(t=cr),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const LN=new Set(["auto","none","0"]);function VN(n,e,t){let r=0,s;for(;r<n.length&&!s;){const o=n[r];typeof o=="string"&&!LN.has(o)&&Du(o).values.length&&(s=n[r]),r++}if(s&&t)for(const o of e)n[o]=Vb(t,s)}class MN extends by{constructor(e,t,r,s,o){super(e,t,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let y=e[m];if(typeof y=="string"&&(y=y.trim(),gy(y))){const w=kb(y,t.current);w!==void 0&&(e[m]=w),m===e.length-1&&(this.finalKeyframe=y)}}if(this.resolveNoneKeyframes(),!Rb.has(r)||e.length!==2)return;const[s,o]=e,l=g0(s),c=g0(o),h=n0(s),p=n0(o);if(h!==p&&ui[r]){this.needsMeasurement=!0;return}if(l!==c)if(h0(l)&&h0(c))for(let m=0;m<e.length;m++){const y=e[m];typeof y=="string"&&(e[m]=parseFloat(y))}else ui[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||AN(e[s]))&&r.push(s);r.length&&VN(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ui[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var c;const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,l=r[o];r[o]=ui[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),(c=this.removedTransforms)!=null&&c.length&&this.removedTransforms.forEach(([h,p])=>{e.getValue(h).set(p)}),this.resolveNoneKeyframes()}}const jN=new Set(["opacity","clipPath","filter","transform"]);function Mb(n,e,t){if(n==null)return[];if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const s=(t==null?void 0:t[n])??r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n).filter(r=>r!=null)}const jb=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function fg(n){return WS(n)&&"offsetHeight"in n}const{schedule:Cy}=ib(queueMicrotask,!1),rr={x:!1,y:!1};function Ub(){return rr.x||rr.y}function UN(n){return n==="x"||n==="y"?rr[n]?null:(rr[n]=!0,()=>{rr[n]=!1}):rr.x||rr.y?null:(rr.x=rr.y=!0,()=>{rr.x=rr.y=!1})}function Fb(n,e){const t=Mb(n),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[t,s,()=>r.abort()]}function FN(n){return!(n.pointerType==="touch"||Ub())}function $N(n,e,t={}){const[r,s,o]=Fb(n,t);return r.forEach(l=>{let c=!1,h=!1,p;const m=()=>{l.removeEventListener("pointerleave",b)},y=x=>{p&&(p(x),p=void 0),m()},w=x=>{c=!1,window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",w),h&&(h=!1,y(x))},E=()=>{c=!0,window.addEventListener("pointerup",w,s),window.addEventListener("pointercancel",w,s)},b=x=>{if(x.pointerType!=="touch"){if(c){h=!0;return}y(x)}},I=x=>{if(!FN(x))return;h=!1;const D=e(l,x);typeof D=="function"&&(p=D,l.addEventListener("pointerleave",b,s))};l.addEventListener("pointerenter",I,s),l.addEventListener("pointerdown",E,s)}),o}const $b=(n,e)=>e?n===e?!0:$b(n,e.parentElement):!1,Py=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,BN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zN(n){return BN.has(n.tagName)||n.isContentEditable===!0}const HN=new Set(["INPUT","SELECT","TEXTAREA"]);function WN(n){return HN.has(n.tagName)||n.isContentEditable===!0}const id=new WeakSet;function v0(n){return e=>{e.key==="Enter"&&n(e)}}function gm(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const qN=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=v0(()=>{if(id.has(t))return;gm(t,"down");const s=v0(()=>{gm(t,"up")}),o=()=>gm(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function _0(n){return Py(n)&&!Ub()}const w0=new WeakSet;function KN(n,e,t={}){const[r,s,o]=Fb(n,t),l=c=>{const h=c.currentTarget;if(!_0(c)||w0.has(c))return;id.add(h),t.stopPropagation&&w0.add(c);const p=e(h,c),m=(E,b)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",w),id.has(h)&&id.delete(h),_0(E)&&typeof p=="function"&&p(E,{success:b})},y=E=>{m(E,h===window||h===document||t.useGlobalTarget||$b(h,E.target))},w=E=>{m(E,!1)};window.addEventListener("pointerup",y,s),window.addEventListener("pointercancel",w,s)};return r.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,s),fg(c)&&(c.addEventListener("focus",p=>qN(p,s)),!zN(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function Ny(n){return WS(n)&&"ownerSVGElement"in n}const od=new WeakMap;let ni;const Bb=(n,e,t)=>(r,s)=>s&&s[0]?s[0][n+"Size"]:Ny(r)&&"getBBox"in r?r.getBBox()[e]:r[t],GN=Bb("inline","width","offsetWidth"),JN=Bb("block","height","offsetHeight");function YN({target:n,borderBoxSize:e}){var t;(t=od.get(n))==null||t.forEach(r=>{r(n,{get width(){return GN(n,e)},get height(){return JN(n,e)}})})}function QN(n){n.forEach(YN)}function XN(){typeof ResizeObserver>"u"||(ni=new ResizeObserver(QN))}function ZN(n,e){ni||XN();const t=Mb(n);return t.forEach(r=>{let s=od.get(r);s||(s=new Set,od.set(r,s)),s.add(e),ni==null||ni.observe(r)}),()=>{t.forEach(r=>{const s=od.get(r);s==null||s.delete(e),s!=null&&s.size||ni==null||ni.unobserve(r)})}}const ad=new Set;let Na;function eO(){Na=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};ad.forEach(e=>e(n))},window.addEventListener("resize",Na)}function tO(n){return ad.add(n),Na||eO(),()=>{ad.delete(n),!ad.size&&typeof Na=="function"&&(window.removeEventListener("resize",Na),Na=void 0)}}function E0(n,e){return typeof n=="function"?tO(n):ZN(n,e)}function nO(n){return Ny(n)&&n.tagName==="svg"}const rO=[...Db,It,cr],sO=n=>rO.find(Ob(n)),T0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Oa=()=>({x:T0(),y:T0()}),S0=()=>({min:0,max:0}),Ct=()=>({x:S0(),y:S0()}),iO=new WeakMap;function rf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Lu(n){return typeof n=="string"||Array.isArray(n)}const Oy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dy=["initial",...Oy];function sf(n){return rf(n.animate)||Dy.some(e=>Lu(n[e]))}function zb(n){return!!(sf(n)||n.variants)}function oO(n,e,t){for(const r in e){const s=e[r],o=t[r];if(rn(s))n.addValue(r,s);else if(rn(o))n.addValue(r,Ka(s,{owner:n}));else if(o!==s)if(n.hasValue(r)){const l=n.getValue(r);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=n.getStaticValue(r);n.addValue(r,Ka(l!==void 0?l:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const pg={current:null},Hb={current:!1},aO=typeof window<"u";function lO(){if(Hb.current=!0,!!aO)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>pg.current=n.matches;n.addEventListener("change",e),e()}else pg.current=!1}const b0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Id={};function Wb(n){Id=n}function uO(){return Id}class cO{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:l,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=by,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=un.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,Ze.render(this.render,!1,!0))};const{latestValues:p,renderState:m}=c;this.latestValues=p,this.baseTarget={...p},this.initialValues=t.initial?{...p}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=sf(t),this.isVariantNode=zb(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(t,{},this);for(const E in w){const b=w[E];p[E]!==void 0&&rn(b)&&b.set(p[E])}}mount(e){var t,r;if(this.hasBeenMounted)for(const s in this.initialValues)(t=this.values.get(s))==null||t.jump(this.initialValues[s]),this.latestValues[s]=this.initialValues[s];this.current=e,iO.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Hb.current||lO(),this.shouldReduceMotion=pg.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),yi(this.notifyUpdate),yi(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){if(this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)(),t.accelerate&&jN.has(e)&&this.current instanceof HTMLElement){const{factory:l,keyframes:c,times:h,ease:p,duration:m}=t.accelerate,y=new bb({element:this.current,name:e,keyframes:c,times:h,ease:p,duration:ur(m)}),w=l(y);this.valueSubscriptions.set(e,()=>{w(),y.cancel()});return}const r=il.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Id){const t=Id[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ct()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<b0.length;r++){const s=b0[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=e[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=oO(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ka(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(HS(r)||qS(r))?r=parseFloat(r):!sO(r)&&cr.test(t)&&(r=Vb(e,t)),this.setBaseTarget(e,rn(r)?r.get():r)),rn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var o;const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const l=ky(this.props,t,(o=this.presenceContext)==null?void 0:o.custom);l&&(r=l[e])}if(t&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!rn(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new fy),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Cy.render(this.render)}}class qb extends cO{constructor(){super(...arguments),this.KeyframeResolver=MN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){const r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;rn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Kb({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function hO({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function dO(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function ym(n){return n===void 0||n===1}function mg({scale:n,scaleX:e,scaleY:t}){return!ym(n)||!ym(e)||!ym(t)}function so(n){return mg(n)||Gb(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Gb(n){return I0(n.x)||I0(n.y)}function I0(n){return n&&n!=="0%"}function xd(n,e,t){const r=n-t,s=e*r;return t+s}function x0(n,e,t,r,s){return s!==void 0&&(n=xd(n,s,r)),xd(n,t,r)+e}function gg(n,e=0,t=1,r,s){n.min=x0(n.min,e,t,r,s),n.max=x0(n.max,e,t,r,s)}function Jb(n,{x:e,y:t}){gg(n.x,e.translate,e.scale,e.originPoint),gg(n.y,t.translate,t.scale,t.originPoint)}const k0=.999999999999,A0=1.0000000000001;function fO(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let o,l;for(let c=0;c<s;c++){o=t[c],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&La(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,Jb(n,l)),r&&so(o.latestValues)&&La(n,o.latestValues))}e.x<A0&&e.x>k0&&(e.x=1),e.y<A0&&e.y>k0&&(e.y=1)}function Da(n,e){n.min=n.min+e,n.max=n.max+e}function R0(n,e,t,r,s=.5){const o=lt(n.min,n.max,s);gg(n,e,t,o,r)}function La(n,e){R0(n.x,e.x,e.scaleX,e.scale,e.originX),R0(n.y,e.y,e.scaleY,e.scale,e.originY)}function Yb(n,e){return Kb(dO(n.getBoundingClientRect(),e))}function pO(n,e,t){const r=Yb(n,t),{scroll:s}=e;return s&&(Da(r.x,s.offset.x),Da(r.y,s.offset.y)),r}const mO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},gO=sl.length;function yO(n,e,t){let r="",s=!0;for(let o=0;o<gO;o++){const l=sl[o],c=n[l];if(c===void 0)continue;let h=!0;if(typeof c=="number")h=c===(l.startsWith("scale")?1:0);else{const p=parseFloat(c);h=l.startsWith("scale")?p===1:p===0}if(!h||t){const p=jb(c,Ry[l]);if(!h){s=!1;const m=mO[l]||l;r+=`${m}(${p}) `}t&&(e[l]=p)}}return r=r.trim(),t?r=t(e,s?"":r):s&&(r="none"),r}function Ly(n,e,t){const{style:r,vars:s,transformOrigin:o}=n;let l=!1,c=!1;for(const h in e){const p=e[h];if(il.has(h)){l=!0;continue}else if(ab(h)){s[h]=p;continue}else{const m=jb(p,Ry[h]);h.startsWith("origin")?(c=!0,o[h]=m):r[h]=m}}if(e.transform||(l||t?r.transform=yO(e,n.transform,t):r.transform&&(r.transform="none")),c){const{originX:h="50%",originY:p="50%",originZ:m=0}=o;r.transformOrigin=`${h} ${p} ${m}`}}function Qb(n,{style:e,vars:t},r,s){const o=n.style;let l;for(l in e)o[l]=e[l];s==null||s.applyProjectionStyles(o,r);for(l in t)o.setProperty(l,t[l])}function C0(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const uu={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(de.test(n))n=parseFloat(n);else return n;const t=C0(n,e.target.x),r=C0(n,e.target.y);return`${t}% ${r}%`}},vO={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=cr.parse(n);if(s.length>5)return r;const o=cr.createTransformer(n),l=typeof s[0]!="number"?1:0,c=t.x.scale*e.x,h=t.y.scale*e.y;s[0+l]/=c,s[1+l]/=h;const p=lt(c,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=p),typeof s[3+l]=="number"&&(s[3+l]/=p),o(s)}},yg={borderRadius:{...uu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uu,borderTopRightRadius:uu,borderBottomLeftRadius:uu,borderBottomRightRadius:uu,boxShadow:vO};function Xb(n,{layout:e,layoutId:t}){return il.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!yg[n]||n==="opacity")}function Vy(n,e,t){var l;const r=n.style,s=e==null?void 0:e.style,o={};if(!r)return o;for(const c in r)(rn(r[c])||s&&rn(s[c])||Xb(c,n)||((l=t==null?void 0:t.getValue(c))==null?void 0:l.liveStyle)!==void 0)&&(o[c]=r[c]);return o}function _O(n){return window.getComputedStyle(n)}class wO extends qb{constructor(){super(...arguments),this.type="html",this.renderInstance=Qb}readValueFromInstance(e,t){var r;if(il.has(t))return(r=this.projection)!=null&&r.isProjecting?ng(t):U1(e,t);{const s=_O(e),o=(ab(t)?s.getPropertyValue(t):s[t])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Yb(e,t)}build(e,t,r){Ly(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Vy(e,t,r)}}const EO={offset:"stroke-dashoffset",array:"stroke-dasharray"},TO={offset:"strokeDashoffset",array:"strokeDasharray"};function SO(n,e,t=1,r=0,s=!0){n.pathLength=1;const o=s?EO:TO;n[o.offset]=`${-r}`,n[o.array]=`${e} ${t}`}const bO=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Zb(n,{attrX:e,attrY:t,attrScale:r,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...c},h,p,m){if(Ly(n,c,p),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:w}=n;y.transform&&(w.transform=y.transform,delete y.transform),(w.transform||y.transformOrigin)&&(w.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),w.transform&&(w.transformBox=(m==null?void 0:m.transformBox)??"fill-box",delete y.transformBox);for(const E of bO)y[E]!==void 0&&(w[E]=y[E],delete y[E]);e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),s!==void 0&&SO(y,s,o,l,!1)}const eI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function IO(n,e,t,r){Qb(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(eI.has(s)?s:Ay(s),e.attrs[s])}function nI(n,e,t){const r=Vy(n,e,t);for(const s in n)if(rn(n[s])||rn(e[s])){const o=sl.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=n[s]}return r}class xO extends qb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ct}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(il.has(t)){const r=Lb(t);return r&&r.default||0}return t=eI.has(t)?t:Ay(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return nI(e,t,r)}build(e,t,r){Zb(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){IO(e,t,r,s)}mount(e){this.isSVGTag=tI(e.tagName),super.mount(e)}}const kO=Dy.length;function rI(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?rI(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<kO;t++){const r=Dy[t],s=n.props[r];(Lu(s)||s===!1)&&(e[r]=s)}return e}function sI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const AO=[...Oy].reverse(),RO=Oy.length;function CO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>xN(n,t,r)))}function PO(n){let e=CO(n),t=P0(),r=!0;const s=h=>(p,m)=>{var w;const y=ja(n,m,h==="exit"?(w=n.presenceContext)==null?void 0:w.custom:void 0);if(y){const{transition:E,transitionEnd:b,...I}=y;p={...p,...I,...b}}return p};function o(h){e=h(n)}function l(h){const{props:p}=n,m=rI(n.parent)||{},y=[],w=new Set;let E={},b=1/0;for(let x=0;x<RO;x++){const D=AO[x],U=t[D],O=p[D]!==void 0?p[D]:m[D],K=Lu(O),Y=D===h?U.isActive:null;Y===!1&&(b=x);let X=O===m[D]&&O!==p[D]&&K;if(X&&r&&n.manuallyAnimateOnMount&&(X=!1),U.protectedKeys={...E},!U.isActive&&Y===null||!O&&!U.prevProp||rf(O)||typeof O=="boolean")continue;if(D==="exit"&&U.isActive&&Y!==!0){U.prevResolvedValues&&(E={...E,...U.prevResolvedValues});continue}const P=NO(U.prevProp,O);let A=P||D===h&&U.isActive&&!X&&K||x>b&&K,C=!1;const V=Array.isArray(O)?O:[O];let M=V.reduce(s(D),{});Y===!1&&(M={});const{prevResolvedValues:B={}}=U,L={...B,...M},Fe=Ce=>{A=!0,w.has(Ce)&&(C=!0,w.delete(Ce)),U.needsAnimating[Ce]=!0;const se=n.getValue(Ce);se&&(se.liveStyle=!1)};for(const Ce in L){const se=M[Ce],fe=B[Ce];if(E.hasOwnProperty(Ce))continue;let ae=!1;lg(se)&&lg(fe)?ae=!sI(se,fe):ae=se!==fe,ae?se!=null?Fe(Ce):w.add(Ce):se!==void 0&&w.has(Ce)?Fe(Ce):U.protectedKeys[Ce]=!0}U.prevProp=O,U.prevResolvedValues=M,U.isActive&&(E={...E,...M}),r&&n.blockInitialAnimation&&(A=!1);const mt=X&&P;A&&(!mt||C)&&y.push(...V.map(Ce=>{const se={type:D};if(typeof Ce=="string"&&r&&!mt&&n.manuallyAnimateOnMount&&n.parent){const{parent:fe}=n,ae=ja(fe,Ce);if(fe.enteringChildren&&ae){const{delayChildren:z}=ae.transition||{};se.delay=xb(fe.enteringChildren,n,z)}}return{animation:Ce,options:se}}))}if(w.size){const x={};if(typeof p.initial!="boolean"){const D=ja(n,Array.isArray(p.initial)?p.initial[0]:p.initial);D&&D.transition&&(x.transition=D.transition)}w.forEach(D=>{const U=n.getBaseTarget(D),O=n.getValue(D);O&&(O.liveStyle=!0),x[D]=U??null}),y.push({animation:x})}let I=!!y.length;return r&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(y):Promise.resolve()}function c(h,p){var y;if(t[h].isActive===p)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(w=>{var E;return(E=w.animationState)==null?void 0:E.setActive(h,p)}),t[h].isActive=p;const m=l(h);for(const w in t)t[w].protectedKeys={};return m}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=P0()}}}function NO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!sI(e,n):!1}function to(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P0(){return{animate:to(!0),whileInView:to(),whileHover:to(),whileTap:to(),whileDrag:to(),whileFocus:to(),exit:to()}}function N0(n,e){n.min=e.min,n.max=e.max}function tr(n,e){N0(n.x,e.x),N0(n.y,e.y)}function O0(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}const iI=1e-4,OO=1-iI,DO=1+iI,oI=.01,LO=0-oI,VO=0+oI;function cn(n){return n.max-n.min}function MO(n,e,t){return Math.abs(n-e)<=t}function D0(n,e,t,r=.5){n.origin=r,n.originPoint=lt(e.min,e.max,n.origin),n.scale=cn(t)/cn(e),n.translate=lt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=OO&&n.scale<=DO||isNaN(n.scale))&&(n.scale=1),(n.translate>=LO&&n.translate<=VO||isNaN(n.translate))&&(n.translate=0)}function Eu(n,e,t,r){D0(n.x,e.x,t.x,r?r.originX:void 0),D0(n.y,e.y,t.y,r?r.originY:void 0)}function L0(n,e,t){n.min=t.min+e.min,n.max=n.min+cn(e)}function jO(n,e,t){L0(n.x,e.x,t.x),L0(n.y,e.y,t.y)}function V0(n,e,t){n.min=e.min-t.min,n.max=n.min+cn(e)}function kd(n,e,t){V0(n.x,e.x,t.x),V0(n.y,e.y,t.y)}function M0(n,e,t,r,s){return n-=e,n=xd(n,1/t,r),s!==void 0&&(n=xd(n,1/s,r)),n}function UO(n,e=0,t=1,r=.5,s,o=n,l=n){if(Or.test(e)&&(e=parseFloat(e),e=lt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=lt(o.min,o.max,r);n===o&&(c-=e),n.min=M0(n.min,e,t,c,s),n.max=M0(n.max,e,t,c,s)}function j0(n,e,[t,r,s],o,l){UO(n,e[t],e[r],e[s],e.scale,o,l)}const FO=["x","scaleX","originX"],$O=["y","scaleY","originY"];function U0(n,e,t,r){j0(n.x,e,FO,t?t.x:void 0,r?r.x:void 0),j0(n.y,e,$O,t?t.y:void 0,r?r.y:void 0)}function F0(n){return n.translate===0&&n.scale===1}function aI(n){return F0(n.x)&&F0(n.y)}function $0(n,e){return n.min===e.min&&n.max===e.max}function BO(n,e){return $0(n.x,e.x)&&$0(n.y,e.y)}function B0(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function lI(n,e){return B0(n.x,e.x)&&B0(n.y,e.y)}function z0(n){return cn(n.x)/cn(n.y)}function H0(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}function Pr(n){return[n("x"),n("y")]}function zO(n,e,t){let r="";const s=n.x.translate/e.x,o=n.y.translate/e.y,l=(t==null?void 0:t.z)||0;if((s||o||l)&&(r=`translate3d(${s}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:p,rotate:m,rotateX:y,rotateY:w,skewX:E,skewY:b}=t;p&&(r=`perspective(${p}px) ${r}`),m&&(r+=`rotate(${m}deg) `),y&&(r+=`rotateX(${y}deg) `),w&&(r+=`rotateY(${w}deg) `),E&&(r+=`skewX(${E}deg) `),b&&(r+=`skewY(${b}deg) `)}const c=n.x.scale*e.x,h=n.y.scale*e.y;return(c!==1||h!==1)&&(r+=`scale(${c}, ${h})`),r||"none"}const uI=["TopLeft","TopRight","BottomLeft","BottomRight"],HO=uI.length,W0=n=>typeof n=="string"?parseFloat(n):n,q0=n=>typeof n=="number"||de.test(n);function WO(n,e,t,r,s,o){s?(n.opacity=lt(0,t.opacity??1,qO(r)),n.opacityExit=lt(e.opacity??1,0,KO(r))):o&&(n.opacity=lt(e.opacity??1,t.opacity??1,r));for(let l=0;l<HO;l++){const c=`border${uI[l]}Radius`;let h=K0(e,c),p=K0(t,c);if(h===void 0&&p===void 0)continue;h||(h=0),p||(p=0),h===0||p===0||q0(h)===q0(p)?(n[c]=Math.max(lt(W0(h),W0(p),r),0),(Or.test(p)||Or.test(h))&&(n[c]+="%")):n[c]=p}(e.rotate||t.rotate)&&(n.rotate=lt(e.rotate||0,t.rotate||0,r))}function K0(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const qO=cI(0,.5,tb),KO=cI(.5,.95,zn);function cI(n,e,t){return r=>r<n?0:r>e?1:t(Nu(n,e,r))}function GO(n,e,t){const r=rn(n)?n:Ka(n);return r.start(xy("",r,e,t)),r.animation}function Vu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const JO=(n,e)=>n.depth-e.depth;class YO{constructor(){this.children=[],this.isDirty=!1}add(e){hy(this.children,e),this.isDirty=!0}remove(e){Ed(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JO),this.isDirty=!1,this.children.forEach(e)}}function QO(n,e){const t=un.now(),r=({timestamp:s})=>{const o=s-t;o>=e&&(yi(r),n(o-e))};return Ze.setup(r,!0),()=>yi(r)}function ld(n){return rn(n)?n.get():n}class XO{constructor(){this.members=[]}add(e){hy(this.members,e);for(let t=this.members.length-1;t>=0;t--){const r=this.members[t];if(r===e||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&Ed(this.members,r)}e.scheduleRender()}remove(e){if(Ed(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const o=this.members[s],l=o.instance;if(o.isPresent!==!1&&(!l||l.isConnected!==!1)){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();const s=r.options.layoutDependency,o=e.options.layoutDependency;if(!(s!==void 0&&o!==void 0&&s===o)){const h=r.instance;h&&h.isConnected===!1&&!r.snapshot||(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0))}const{crossfade:c}=e.options;c===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const ud={hasAnimatedSinceResize:!0,hasEverUpdated:!1},vm=["","X","Y","Z"],ZO=1e3;let eD=0;function _m(n,e,t,r){const{latestValues:s}=e;s[n]&&(t[n]=s[n],e.setStaticValue(n,0),r&&(r[n]=0))}function hI(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Pb(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Ze,!(s||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&hI(r)}function dI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(l={},c=e==null?void 0:e()){this.id=eD++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(rD),this.nodes.forEach(aD),this.nodes.forEach(lD),this.nodes.forEach(sD)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new YO)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new fy),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const h=this.eventHandlers.get(l);h&&h.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Ny(l)&&!nO(l),this.instance=l;const{layoutId:c,layout:h,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||c)&&(this.isLayoutDirty=!0),n){let m,y=0;const w=()=>this.root.updateBlockedByResize=!1;Ze.read(()=>{y=window.innerWidth}),n(l,()=>{const E=window.innerWidth;E!==y&&(y=E,this.root.updateBlockedByResize=!0,m&&m(),m=QO(w,250),ud.hasAnimatedSinceResize&&(ud.hasAnimatedSinceResize=!1,this.nodes.forEach(Y0)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&p&&(c||h)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:y,hasRelativeLayoutChanged:w,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||p.getDefaultTransition()||fD,{onLayoutAnimationStart:I,onLayoutAnimationComplete:x}=p.getProps(),D=!this.targetLayout||!lI(this.targetLayout,E),U=!y&&w;if(this.options.layoutRoot||this.resumeFrom||U||y&&(D||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const O={...Iy(b,"layout"),onPlay:I,onComplete:x};(p.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O),this.setAnimationOrigin(m,U)}else y||Y0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uD),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const y=this.path[m];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:h}=this.options;if(c===void 0&&!h)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(G0);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(J0);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(oD),this.nodes.forEach(tD),this.nodes.forEach(nD)):this.nodes.forEach(J0),this.clearAllSnapshots();const c=un.now();Ht.delta=Br(0,1e3/60,c-Ht.timestamp),Ht.timestamp=c,Ht.isProcessing=!0,cm.update.process(Ht),cm.preRender.process(Ht),cm.render.process(Ht),Ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Cy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iD),this.sharedNodes.forEach(cD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cn(this.snapshot.measuredBox.x)&&!cn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ct(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!aI(this.projectionDelta),h=this.getTransformTemplate(),p=h?h(this.latestValues,""):void 0,m=p!==this.prevTransformTemplateValue;l&&this.instance&&(c||so(this.latestValues)||m)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let h=this.removeElementScroll(c);return l&&(h=this.removeTransform(h)),pD(h),{animationId:this.root.animationId,measuredBox:c,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:l}=this.options;if(!l)return Ct();const c=l.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(mD))){const{scroll:m}=this.root;m&&(Da(c.x,m.offset.x),Da(c.y,m.offset.y))}return c}removeElementScroll(l){var h;const c=Ct();if(tr(c,l),(h=this.scroll)!=null&&h.wasRoot)return c;for(let p=0;p<this.path.length;p++){const m=this.path[p],{scroll:y,options:w}=m;m!==this.root&&y&&w.layoutScroll&&(y.wasRoot&&tr(c,l),Da(c.x,y.offset.x),Da(c.y,y.offset.y))}return c}applyTransform(l,c=!1){const h=Ct();tr(h,l);for(let p=0;p<this.path.length;p++){const m=this.path[p];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&La(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),so(m.latestValues)&&La(h,m.latestValues)}return so(this.latestValues)&&La(h,this.latestValues),h}removeTransform(l){const c=Ct();tr(c,l);for(let h=0;h<this.path.length;h++){const p=this.path[h];if(!p.instance||!so(p.latestValues))continue;mg(p.latestValues)&&p.updateSnapshot();const m=Ct(),y=p.measurePageBox();tr(m,y),U0(c,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,m)}return so(this.latestValues)&&U0(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var E;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:y}=this.options;if(!this.layout||!(m||y))return;this.resolvedRelativeTargetAt=Ht.timestamp;const w=this.getClosestProjectingParent();w&&this.linkedParentVersion!==w.layoutVersion&&!w.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(w&&w.layout?this.createRelativeTarget(w,this.layout.layoutBox,w.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ct(),this.targetWithTransforms=Ct()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),Jb(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,w&&!!w.resumingFrom==!!this.resumingFrom&&!w.options.layoutScroll&&w.target&&this.animationProgress!==1?this.createRelativeTarget(w,this.target,w.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||mg(this.parent.latestValues)||Gb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,c,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ct(),this.relativeTargetOrigin=Ct(),kd(this.relativeTargetOrigin,c,h),tr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var b;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===Ht.timestamp&&(h=!1),h)return;const{layout:p,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||m))return;tr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,w=this.treeScale.y;fO(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ct());const{target:E}=l;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(O0(this.prevProjectionDelta.x,this.projectionDelta.x),O0(this.prevProjectionDelta.y,this.projectionDelta.y)),Eu(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==w||!H0(this.projectionDelta.x,this.prevProjectionDelta.x)||!H0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var c;if((c=this.options.visualElement)==null||c.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Oa(),this.projectionDelta=Oa(),this.projectionDeltaWithTransform=Oa()}setAnimationOrigin(l,c=!1){const h=this.snapshot,p=h?h.latestValues:{},m={...this.latestValues},y=Oa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const w=Ct(),E=h?h.source:void 0,b=this.layout?this.layout.source:void 0,I=E!==b,x=this.getStack(),D=!x||x.members.length<=1,U=!!(I&&!D&&this.options.crossfade===!0&&!this.path.some(dD));this.animationProgress=0;let O;this.mixTargetDelta=K=>{const Y=K/1e3;Q0(y.x,l.x,Y),Q0(y.y,l.y,Y),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(kd(w,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hD(this.relativeTarget,this.relativeTargetOrigin,w,Y),O&&BO(this.relativeTarget,O)&&(this.isProjectionDirty=!1),O||(O=Ct()),tr(O,this.relativeTarget)),I&&(this.animationValues=m,WO(m,p,this.latestValues,Y,U,D)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Y},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){var c,h,p;this.notifyListeners("animationStart"),(c=this.currentAnimation)==null||c.stop(),(p=(h=this.resumingFrom)==null?void 0:h.currentAnimation)==null||p.stop(),this.pendingAnimation&&(yi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{ud.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ka(0)),this.motionValue.jump(0,!1),this.currentAnimation=GO(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:m=>{this.mixTargetDelta(m),l.onUpdate&&l.onUpdate(m)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:h,layout:p,latestValues:m}=l;if(!(!c||!h||!p)){if(this!==l&&this.layout&&p&&fI(this.options.animationType,this.layout.layoutBox,p.layoutBox)){h=this.target||Ct();const y=cn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+y;const w=cn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+w}tr(c,h),La(c,m),Eu(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new XO),this.sharedNodes.get(l).add(c);const p=c.options.initialPromotionConfig;c.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var c;const{layoutId:l}=this.options;return l?((c=this.getStack())==null?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:l}=this.options;return l?(c=this.getStack())==null?void 0:c.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:h}={}){const p=this.getStack();p&&p.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(c=!0),!c)return;const p={};h.z&&_m("z",l,p,this.animationValues);for(let m=0;m<vm.length;m++)_m(`rotate${vm[m]}`,l,p,this.animationValues),_m(`skew${vm[m]}`,l,p,this.animationValues);l.render();for(const m in p)l.setStaticValue(m,p[m]),this.animationValues&&(this.animationValues[m]=p[m]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=ld(c==null?void 0:c.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=ld(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!so(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const m=p.animationValues||p.latestValues;this.applyTransformsToTarget();let y=zO(this.projectionDeltaWithTransform,this.treeScale,m);h&&(y=h(m,y)),l.transform=y;const{x:w,y:E}=this.projectionDelta;l.transformOrigin=`${w.origin*100}% ${E.origin*100}% 0`,p.animationValues?l.opacity=p===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:l.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in yg){if(m[b]===void 0)continue;const{correct:I,applyTo:x,isCSSVariable:D}=yg[b],U=y==="none"?m[b]:I(m[b],p);if(x){const O=x.length;for(let K=0;K<O;K++)l[x[K]]=U}else D?this.options.visualElement.renderState.vars[b]=U:l[b]=U}this.options.layoutId&&(l.pointerEvents=p===this?ld(c==null?void 0:c.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var c;return(c=l.currentAnimation)==null?void 0:c.stop()}),this.root.nodes.forEach(G0),this.root.sharedNodes.clear()}}}function tD(n){n.updateLayout()}function nD(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:o}=n.options,l=e.source!==n.layout.source;o==="size"?Pr(y=>{const w=l?e.measuredBox[y]:e.layoutBox[y],E=cn(w);w.min=r[y].min,w.max=w.min+E}):fI(o,e.layoutBox,r)&&Pr(y=>{const w=l?e.measuredBox[y]:e.layoutBox[y],E=cn(r[y]);w.max=w.min+E,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+E)});const c=Oa();Eu(c,r,e.layoutBox);const h=Oa();l?Eu(h,n.applyTransform(s,!0),e.measuredBox):Eu(h,r,e.layoutBox);const p=!aI(c);let m=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:w,layout:E}=y;if(w&&E){const b=Ct();kd(b,e.layoutBox,w.layoutBox);const I=Ct();kd(I,r,E.layoutBox),lI(b,I)||(m=!0),y.options.layoutRoot&&(n.relativeTarget=I,n.relativeTargetOrigin=b,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:h,layoutDelta:c,hasLayoutChanged:p,hasRelativeLayoutChanged:m})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function rD(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function sD(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function iD(n){n.clearSnapshot()}function G0(n){n.clearMeasurements()}function J0(n){n.isLayoutDirty=!1}function oD(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Y0(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function aD(n){n.resolveTargetDelta()}function lD(n){n.calcProjection()}function uD(n){n.resetSkewAndRotation()}function cD(n){n.removeLeadSnapshot()}function Q0(n,e,t){n.translate=lt(e.translate,0,t),n.scale=lt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function X0(n,e,t,r){n.min=lt(e.min,t.min,r),n.max=lt(e.max,t.max,r)}function hD(n,e,t,r){X0(n.x,e.x,t.x,r),X0(n.y,e.y,t.y,r)}function dD(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const fD={duration:.45,ease:[.4,0,.1,1]},Z0=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),eE=Z0("applewebkit/")&&!Z0("chrome/")?Math.round:zn;function tE(n){n.min=eE(n.min),n.max=eE(n.max)}function pD(n){tE(n.x),tE(n.y)}function fI(n,e,t){return n==="position"||n==="preserve-aspect"&&!MO(z0(e),z0(t),.2)}function mD(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const gD=dI({attachResizeListener:(n,e)=>Vu(n,"resize",e),measureScroll:()=>{var n,e;return{x:document.documentElement.scrollLeft||((n=document.body)==null?void 0:n.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),wm={current:void 0},pI=dI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!wm.current){const n=new gD({});n.mount(window),n.setOptions({layoutScroll:!0}),wm.current=n}return wm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),My=j.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function nE(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function yD(...n){return e=>{let t=!1;const r=n.map(s=>{const o=nE(s,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():nE(n[s],null)}}}}function vD(...n){return j.useCallback(yD(...n),n)}class _D extends j.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=t.offsetParent,s=fg(r)&&r.offsetWidth||0,o=fg(r)&&r.offsetHeight||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=s-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function wD({children:n,isPresent:e,anchorX:t,anchorY:r,root:s,pop:o}){var w;const l=j.useId(),c=j.useRef(null),h=j.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=j.useContext(My),m=((w=n.props)==null?void 0:w.ref)??(n==null?void 0:n.ref),y=vD(c,m);return j.useInsertionEffect(()=>{const{width:E,height:b,top:I,left:x,right:D,bottom:U}=h.current;if(e||o===!1||!c.current||!E||!b)return;const O=t==="left"?`left: ${x}`:`right: ${D}`,K=r==="bottom"?`bottom: ${U}`:`top: ${I}`;c.current.dataset.motionPopId=l;const Y=document.createElement("style");p&&(Y.nonce=p);const X=s??document.head;return X.appendChild(Y),Y.sheet&&Y.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${E}px !important;
            height: ${b}px !important;
            ${O}px !important;
            ${K}px !important;
          }
        `),()=>{X.contains(Y)&&X.removeChild(Y)}},[e]),k.jsx(_D,{isPresent:e,childRef:c,sizeRef:h,pop:o,children:o===!1?n:j.cloneElement(n,{ref:y})})}const ED=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:l,anchorX:c,anchorY:h,root:p})=>{const m=cy(TD),y=j.useId();let w=!0,E=j.useMemo(()=>(w=!1,{id:y,initial:e,isPresent:t,custom:s,onExitComplete:b=>{m.set(b,!0);for(const I of m.values())if(!I)return;r&&r()},register:b=>(m.set(b,!1),()=>m.delete(b))}),[t,m,r]);return o&&w&&(E={...E}),j.useMemo(()=>{m.forEach((b,I)=>m.set(I,!1))},[t]),j.useEffect(()=>{!t&&!m.size&&r&&r()},[t]),n=k.jsx(wD,{pop:l==="popLayout",isPresent:t,anchorX:c,anchorY:h,root:p,children:n}),k.jsx(nf.Provider,{value:E,children:n})};function TD(){return new Map}function mI(n=!0){const e=j.useContext(nf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,o=j.useId();j.useEffect(()=>{if(n)return s(o)},[n]);const l=j.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,l]:[!0]}const jh=n=>n.key||"";function rE(n){const e=[];return j.Children.forEach(n,t=>{j.isValidElement(t)&&e.push(t)}),e}const SD=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",anchorY:h="top",root:p})=>{const[m,y]=mI(l),w=j.useMemo(()=>rE(n),[n]),E=l&&!m?[]:w.map(jh),b=j.useRef(!0),I=j.useRef(w),x=cy(()=>new Map),D=j.useRef(new Set),[U,O]=j.useState(w),[K,Y]=j.useState(w);zS(()=>{b.current=!1,I.current=w;for(let A=0;A<K.length;A++){const C=jh(K[A]);E.includes(C)?(x.delete(C),D.current.delete(C)):x.get(C)!==!0&&x.set(C,!1)}},[K,E.length,E.join("-")]);const X=[];if(w!==U){let A=[...w];for(let C=0;C<K.length;C++){const V=K[C],M=jh(V);E.includes(M)||(A.splice(C,0,V),X.push(V))}return o==="wait"&&X.length&&(A=X),Y(rE(A)),O(w),null}const{forceRender:P}=j.useContext(uy);return k.jsx(k.Fragment,{children:K.map(A=>{const C=jh(A),V=l&&!m?!1:w===K||E.includes(C),M=()=>{if(D.current.has(C))return;if(D.current.add(C),x.has(C))x.set(C,!0);else return;let B=!0;x.forEach(L=>{L||(B=!1)}),B&&(P==null||P(),Y(I.current),l&&(y==null||y()),r&&r())};return k.jsx(ED,{isPresent:V,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:o,root:p,onExitComplete:V?void 0:M,anchorX:c,anchorY:h,children:A},C)})})},gI=j.createContext({strict:!1}),sE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let iE=!1;function bD(){if(iE)return;const n={};for(const e in sE)n[e]={isEnabled:t=>sE[e].some(r=>!!t[r])};Wb(n),iE=!0}function yI(){return bD(),uO()}function ID(n){const e=yI();for(const t in n)e[t]={...e[t],...n[t]};Wb(e)}const xD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Ad(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||xD.has(n)}let vI=n=>!Ad(n);function kD(n){typeof n=="function"&&(vI=e=>e.startsWith("on")?!Ad(e):n(e))}try{kD(require("@emotion/is-prop-valid").default)}catch{}function AD(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(vI(s)||t===!0&&Ad(s)||!e&&!Ad(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}const of=j.createContext({});function RD(n,e){if(sf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Lu(t)?t:void 0,animate:Lu(r)?r:void 0}}return n.inherit!==!1?e:{}}function CD(n){const{initial:e,animate:t}=RD(n,j.useContext(of));return j.useMemo(()=>({initial:e,animate:t}),[oE(e),oE(t)])}function oE(n){return Array.isArray(n)?n.join(" "):n}const jy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function _I(n,e,t){for(const r in e)!rn(e[r])&&!Xb(r,t)&&(n[r]=e[r])}function PD({transformTemplate:n},e){return j.useMemo(()=>{const t=jy();return Ly(t,e,n),Object.assign({},t.vars,t.style)},[e])}function ND(n,e){const t=n.style||{},r={};return _I(r,t,n),Object.assign(r,PD(n,e)),r}function OD(n,e){const t={},r=ND(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const wI=()=>({...jy(),attrs:{}});function DD(n,e,t,r){const s=j.useMemo(()=>{const o=wI();return Zb(o,e,tI(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};_I(o,n.style,n),s.style={...o,...s.style}}return s}const LD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uy(n){return typeof n!="string"||n.includes("-")?!1:!!(LD.indexOf(n)>-1||/[A-Z]/u.test(n))}function VD(n,e,t,{latestValues:r},s,o=!1,l){const h=(l??Uy(n)?DD:OD)(e,r,s,n),p=AD(e,typeof n=="string",o),m=n!==j.Fragment?{...p,...h,ref:t}:{},{children:y}=e,w=j.useMemo(()=>rn(y)?y.get():y,[y]);return j.createElement(n,{...m,children:w})}function MD({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,s){return{latestValues:jD(t,r,s,n),renderState:e()}}function jD(n,e,t,r){const s={},o=r(n,{});for(const w in o)s[w]=ld(o[w]);let{initial:l,animate:c}=n;const h=sf(n),p=zb(n);e&&p&&!h&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let m=t?t.initial===!1:!1;m=m||l===!1;const y=m?c:l;if(y&&typeof y!="boolean"&&!rf(y)){const w=Array.isArray(y)?y:[y];for(let E=0;E<w.length;E++){const b=ky(n,w[E]);if(b){const{transitionEnd:I,transition:x,...D}=b;for(const U in D){let O=D[U];if(Array.isArray(O)){const K=m?O.length-1:0;O=O[K]}O!==null&&(s[U]=O)}for(const U in I)s[U]=I[U]}}}return s}const EI=n=>(e,t)=>{const r=j.useContext(of),s=j.useContext(nf),o=()=>MD(n,e,r,s);return t?o():cy(o)},UD=EI({scrapeMotionValuesFromProps:Vy,createRenderState:jy}),FD=EI({scrapeMotionValuesFromProps:nI,createRenderState:wI}),$D=Symbol.for("motionComponentSymbol");function BD(n,e,t){const r=j.useRef(t);j.useInsertionEffect(()=>{r.current=t});const s=j.useRef(null);return j.useCallback(o=>{var c;o&&((c=n.onMount)==null||c.call(n,o)),e&&(o?e.mount(o):e.unmount());const l=r.current;if(typeof l=="function")if(o){const h=l(o);typeof h=="function"&&(s.current=h)}else s.current?(s.current(),s.current=null):l(o);else l&&(l.current=o)},[e])}const TI=j.createContext({});function Sa(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zD(n,e,t,r,s,o){var O,K;const{visualElement:l}=j.useContext(of),c=j.useContext(gI),h=j.useContext(nf),p=j.useContext(My),m=p.reducedMotion,y=p.skipAnimations,w=j.useRef(null),E=j.useRef(!1);r=r||c.renderer,!w.current&&r&&(w.current=r(n,{visualState:e,parent:l,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m,skipAnimations:y,isSVG:o}),E.current&&w.current&&(w.current.manuallyAnimateOnMount=!0));const b=w.current,I=j.useContext(TI);b&&!b.projection&&s&&(b.type==="html"||b.type==="svg")&&HD(w.current,t,s,I);const x=j.useRef(!1);j.useInsertionEffect(()=>{b&&x.current&&b.update(t,h)});const D=t[Cb],U=j.useRef(!!D&&!((O=window.MotionHandoffIsComplete)!=null&&O.call(window,D))&&((K=window.MotionHasOptimisedAnimation)==null?void 0:K.call(window,D)));return zS(()=>{E.current=!0,b&&(x.current=!0,window.MotionIsMounted=!0,b.updateFeatures(),b.scheduleRenderMicrotask(),U.current&&b.animationState&&b.animationState.animateChanges())}),j.useEffect(()=>{b&&(!U.current&&b.animationState&&b.animationState.animateChanges(),U.current&&(queueMicrotask(()=>{var Y;(Y=window.MotionHandoffMarkAsComplete)==null||Y.call(window,D)}),U.current=!1),b.enteringChildren=void 0)}),b}function HD(n,e,t,r){const{layoutId:s,layout:o,drag:l,dragConstraints:c,layoutScroll:h,layoutRoot:p,layoutCrossfade:m}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:SI(n.parent)),n.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||c&&Sa(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:m,layoutScroll:h,layoutRoot:p})}function SI(n){if(n)return n.options.allowProjection!==!1?n.projection:SI(n.parent)}function Em(n,{forwardMotionProps:e=!1,type:t}={},r,s){r&&ID(r);const o=t?t==="svg":Uy(n),l=o?FD:UD;function c(p,m){let y;const w={...j.useContext(My),...p,layoutId:WD(p)},{isStatic:E}=w,b=CD(p),I=l(p,E);if(!E&&BS){qD();const x=KD(w);y=x.MeasureLayout,b.visualElement=zD(n,I,w,s,x.ProjectionNode,o)}return k.jsxs(of.Provider,{value:b,children:[y&&b.visualElement?k.jsx(y,{visualElement:b.visualElement,...w}):null,VD(n,p,BD(I,b.visualElement,m),I,E,e,o)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const h=j.forwardRef(c);return h[$D]=n,h}function WD({layoutId:n}){const e=j.useContext(uy).id;return e&&n!==void 0?e+"-"+n:n}function qD(n,e){j.useContext(gI).strict}function KD(n){const e=yI(),{drag:t,layout:r}=e;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(n)||r!=null&&r.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function GD(n,e){if(typeof Proxy>"u")return Em;const t=new Map,r=(o,l)=>Em(o,l,n,e),s=(o,l)=>r(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?r:(t.has(l)||t.set(l,Em(l,void 0,n,e)),t.get(l))})}const JD=(n,e)=>e.isSVG??Uy(n)?new xO(e):new wO(e,{allowProjection:n!==j.Fragment});class YD extends Ii{constructor(e){super(e),e.animationState||(e.animationState=PO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();rf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let QD=0;class XD extends Ii{constructor(){super(...arguments),this.id=QD++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ZD={animation:{Feature:YD},exit:{Feature:XD}};function ac(n){return{point:{x:n.pageX,y:n.pageY}}}const e2=n=>e=>Py(e)&&n(e,ac(e));function Tu(n,e,t,r){return Vu(n,e,e2(t),r)}const bI=({current:n})=>n?n.ownerDocument.defaultView:null,aE=(n,e)=>Math.abs(n-e);function t2(n,e){const t=aE(n.x,e.x),r=aE(n.y,e.y);return Math.sqrt(t**2+r**2)}const lE=new Set(["auto","scroll"]);class II{constructor(e,t,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=E=>{this.handleScroll(E.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Sm(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,I=t2(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!I)return;const{point:x}=E,{timestamp:D}=Ht;this.history.push({...x,timestamp:D});const{onStart:U,onMove:O}=this.handlers;b||(U&&U(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,E)},this.handlePointerMove=(E,b)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Tm(b,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(E,b)=>{this.end();const{onEnd:I,onSessionEnd:x,resumeAnimation:D}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=Sm(E.type==="pointercancel"?this.lastMoveEventInfo:Tm(b,this.transformPagePoint),this.history);this.startEvent&&I&&I(E,U),x&&x(E,U)},!Py(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=l,this.contextWindow=s||window;const h=ac(e),p=Tm(h,this.transformPagePoint),{point:m}=p,{timestamp:y}=Ht;this.history=[{...m,timestamp:y}];const{onSessionStart:w}=t;w&&w(e,Sm(p,this.history)),this.removeListeners=sc(Tu(this.contextWindow,"pointermove",this.handlePointerMove),Tu(this.contextWindow,"pointerup",this.handlePointerUp),Tu(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(e){let t=e.parentElement;for(;t;){const r=getComputedStyle(t);(lE.has(r.overflowX)||lE.has(r.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0}),window.addEventListener("scroll",this.onWindowScroll),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const t=this.scrollPositions.get(e);if(!t)return;const r=e===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},o={x:s.x-t.x,y:s.y-t.y};o.x===0&&o.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(e,s),Ze.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),yi(this.updatePoint)}}function Tm(n,e){return e?{point:e(n.point)}:n}function uE(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Sm({point:n},e){return{point:n,delta:uE(n,xI(e)),offset:uE(n,n2(e)),velocity:r2(e,.1)}}function n2(n){return n[0]}function xI(n){return n[n.length-1]}function r2(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=xI(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>ur(e)));)t--;if(!r)return{x:0,y:0};r===n[0]&&n.length>2&&s.timestamp-r.timestamp>ur(e)*2&&(r=n[1]);const o=Bn(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function s2(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?lt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?lt(t,n,r.max):Math.min(n,t)),n}function cE(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function i2(n,{top:e,left:t,bottom:r,right:s}){return{x:cE(n.x,t,s),y:cE(n.y,e,r)}}function hE(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function o2(n,e){return{x:hE(n.x,e.x),y:hE(n.y,e.y)}}function a2(n,e){let t=.5;const r=cn(n),s=cn(e);return s>r?t=Nu(e.min,e.max-r,n.min):r>s&&(t=Nu(n.min,n.max-s,e.min)),Br(0,1,t)}function l2(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const vg=.35;function u2(n=vg){return n===!1?n=0:n===!0&&(n=vg),{x:dE(n,"left","right"),y:dE(n,"top","bottom")}}function dE(n,e,t){return{min:fE(n,e),max:fE(n,t)}}function fE(n,e){return typeof n=="number"?n:n[e]||0}const c2=new WeakMap;class h2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ct(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=y=>{t&&this.snapToCursor(ac(y).point),this.stopAnimation()},l=(y,w)=>{const{drag:E,dragPropagation:b,onDragStart:I}=this.getProps();if(E&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=UN(E),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=w,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Pr(D=>{let U=this.getAxisMotionValue(D).get()||0;if(Or.test(U)){const{projection:O}=this.visualElement;if(O&&O.layout){const K=O.layout.layoutBox[D];K&&(U=cn(K)*(parseFloat(U)/100))}}this.originPoint[D]=U}),I&&Ze.update(()=>I(y,w),!1,!0),ug(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},c=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w;const{dragPropagation:E,dragDirectionLock:b,onDirectionLock:I,onDrag:x}=this.getProps();if(!E&&!this.openDragLock)return;const{offset:D}=w;if(b&&this.currentDirection===null){this.currentDirection=f2(D),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",w.point,D),this.updateAxis("y",w.point,D),this.visualElement.render(),x&&Ze.update(()=>x(y,w),!1,!0)},h=(y,w)=>{this.latestPointerEvent=y,this.latestPanInfo=w,this.stop(y,w),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>{const{dragSnapToOrigin:y}=this.getProps();(y||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new II(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:h,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:r,contextWindow:bI(this.visualElement),element:this.visualElement.current})}stop(e,t){const r=e||this.latestPointerEvent,s=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!r)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Ze.postRender(()=>c(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Uh(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=s2(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,s=this.constraints;e&&Sa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=i2(r.layoutBox,e):this.constraints=!1,this.elastic=u2(t),s!==this.constraints&&!Sa(e)&&r&&this.constraints&&!this.hasMutatedConstraints&&Pr(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=l2(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Sa(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=pO(r,s.root,this.visualElement.getTransformPagePoint());let l=o2(s.layout.layoutBox,o);if(t){const c=t(hO(l));this.hasMutatedConstraints=!!c,c&&(l=Kb(c))}return l}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),h=this.constraints||{},p=Pr(m=>{if(!Uh(m,t,this.currentDirection))return;let y=h&&h[m]||{};l&&(y={min:0,max:0});const w=s?200:1e6,E=s?40:1e7,b={type:"inertia",velocity:r?e[m]:0,bounceStiffness:w,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(m,b)});return Promise.all(p).then(c)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return ug(this.visualElement,e),r.start(xy(e,r,0,t,this.visualElement,!1))}stopAnimation(){Pr(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Pr(t=>{const{drag:r}=this.getProps();if(!Uh(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(t);if(s&&s.layout){const{min:l,max:c}=s.layout.layoutBox[t],h=o.get()||0;o.set(e[t]-lt(l,c,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Sa(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Pr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const h=c.get();s[l]=a2({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),Pr(l=>{if(!Uh(l,e,null))return;const c=this.getAxisMotionValue(l),{min:h,max:p}=this.constraints[l];c.set(lt(h,p,s[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;c2.set(this.visualElement,this);const e=this.visualElement.current,t=Tu(e,"pointerdown",p=>{const{drag:m,dragListener:y=!0}=this.getProps(),w=p.target,E=w!==e&&WN(w);m&&y&&!E&&this.start(p)});let r;const s=()=>{const{dragConstraints:p}=this.getProps();Sa(p)&&p.current&&(this.constraints=this.resolveRefConstraints(),r||(r=d2(e,p.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ze.read(s);const c=Vu(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:p,hasLayoutChanged:m})=>{this.isDragging&&m&&(Pr(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=p[y].translate,w.set(w.get()+p[y].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),h&&h(),r&&r()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=vg,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function pE(n){let e=!0;return()=>{if(e){e=!1;return}n()}}function d2(n,e,t){const r=E0(n,pE(t)),s=E0(e,pE(t));return()=>{r(),s()}}function Uh(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function f2(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class p2 extends Ii{constructor(e){super(e),this.removeGroupControls=zn,this.removeListeners=zn,this.controls=new h2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||zn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const bm=n=>(e,t)=>{n&&Ze.update(()=>n(e,t),!1,!0)};class m2 extends Ii{constructor(){super(...arguments),this.removePointerDownListener=zn}onPointerDown(e){this.session=new II(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:bm(e),onStart:bm(t),onMove:bm(r),onEnd:(o,l)=>{delete this.session,s&&Ze.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Tu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Im=!1;class g2 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;o&&(t.group&&t.group.add(o),r&&r.register&&s&&r.register(o),Im&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),ud.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:o}=this.props,{projection:l}=r;return l&&(l.isPresent=o,e.layoutDependency!==t&&l.setOptions({...l.options,layoutDependency:t}),Im=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Ze.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Cy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;Im=!0,s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kI(n){const[e,t]=mI(),r=j.useContext(uy);return k.jsx(g2,{...n,layoutGroup:r,switchLayoutGroup:j.useContext(TI),isPresent:e,safeToRemove:t})}const y2={pan:{Feature:m2},drag:{Feature:p2,ProjectionNode:pI,MeasureLayout:kI}};function mE(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,o=r[s];o&&Ze.postRender(()=>o(e,ac(e)))}class v2 extends Ii{mount(){const{current:e}=this.node;e&&(this.unmount=$N(e,(t,r)=>(mE(this.node,r,"Start"),s=>mE(this.node,s,"End"))))}unmount(){}}class _2 extends Ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sc(Vu(this.node.current,"focus",()=>this.onFocus()),Vu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gE(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),o=r[s];o&&Ze.postRender(()=>o(e,ac(e)))}class w2 extends Ii{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:t,propagate:r}=this.node.props;this.unmount=KN(e,(s,o)=>(gE(this.node,o,"Start"),(l,{success:c})=>gE(this.node,l,c?"End":"Cancel")),{useGlobalTarget:t,stopPropagation:(r==null?void 0:r.tap)===!1})}unmount(){}}const _g=new WeakMap,xm=new WeakMap,E2=n=>{const e=_g.get(n.target);e&&e(n)},T2=n=>{n.forEach(E2)};function S2({root:n,...e}){const t=n||document;xm.has(t)||xm.set(t,{});const r=xm.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(T2,{root:n,...e})),r[s]}function b2(n,e,t){const r=S2(e);return _g.set(n,t),r.observe(n),()=>{_g.delete(n),r.unobserve(n)}}const I2={some:0,all:1};class x2 extends Ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:I2[s]},c=h=>{const{isIntersecting:p}=h;if(this.isInView===p||(this.isInView=p,o&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:m,onViewportLeave:y}=this.node.getProps(),w=p?m:y;w&&w(h)};return b2(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(k2(e,t))&&this.startObserver()}unmount(){}}function k2({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const A2={inView:{Feature:x2},tap:{Feature:w2},focus:{Feature:_2},hover:{Feature:v2}},R2={layout:{ProjectionNode:pI,MeasureLayout:kI}},C2={...ZD,...A2,...y2,...R2},ve=GD(C2,JD),P2="/assets/logo-CxIzqSfl.png";function N2(){const n=nl(),[e,t]=j.useState(!1),[r,s]=j.useState(!1);j.useEffect(()=>{const l=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const o=["Shop","Collections","About","Contact","Admin"];return k.jsxs(ve.header,{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${e?"bg-black/95 backdrop-blur-sm py-4":"bg-transparent py-6"}`,initial:{y:-100},animate:{y:0},transition:{duration:.6},children:[k.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("div",{className:"flex flex-row gap-3 items-center",children:k.jsxs(ay,{to:"/",className:"flex flex-row gap-3 items-center",children:[k.jsx("img",{src:P2,alt:"Infinity Vibe Logo",className:"h-12"}),k.jsx(ve.div,{className:"text-2xl tracking-wider cursor-pointer",whileHover:{scale:1.05},children:k.jsx("span",{className:"font-bold",children:"Infinity Vibe"})})]})}),k.jsx("nav",{className:"hidden md:flex items-center gap-8",children:o.map(l=>k.jsxs(ve.div,{className:"text-sm tracking-widest hover:text-gray-400 transition-colors relative group cursor-pointer",whileHover:{y:-2},onClick:()=>{n(l==="Shop"||l==="Collections"?"/products":l==="Contact"?"/contact":l==="Admin"?"/admin":"/")},children:[l,k.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-px bg-white transition-all duration-300 group-hover:w-full"})]},l))}),k.jsxs("div",{className:"flex items-center gap-6",children:[k.jsx(ve.button,{className:"hidden md:block hover:text-gray-400 transition-colors",whileHover:{scale:1.1},whileTap:{scale:.95},children:k.jsx(bP,{size:20})}),k.jsx(ve.button,{className:"hover:text-gray-400 transition-colors relative",whileHover:{scale:1.1},whileTap:{scale:.95},children:k.jsx(ly,{size:20})}),k.jsxs(ve.button,{className:"hover:text-gray-400 transition-colors relative",whileHover:{scale:1.1},whileTap:{scale:.95},children:[k.jsx(xP,{size:20}),k.jsx("span",{className:"absolute -top-2 -right-2 bg-white text-black text-xs w-5 h-5 rounded-full flex items-center justify-center",children:"0"})]}),k.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?k.jsx(DP,{size:24}):k.jsx(vP,{size:24})})]})]})}),k.jsx(SD,{children:r&&k.jsx(ve.div,{className:"md:hidden bg-black border-t border-white/10 mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:k.jsx("nav",{className:"container mx-auto px-6 py-8 flex flex-col gap-6",children:o.map((l,c)=>k.jsx(ve.div,{className:"text-lg tracking-widest hover:text-gray-400 transition-colors cursor-pointer",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:c*.1},onClick:()=>{s(!1),n(l==="Shop"||l==="Collections"?"/products":l==="Contact"?"/contact":l==="Admin"?"/admin":"/")},children:l},l))})})})]})}const Fh={shop:["New Arrivals","Collections","Sale","Gift Cards"],about:["Our Story","Sustainability","Press","Careers"],support:["Contact Us","FAQs","Shipping & Returns","Size Guide"],legal:["Privacy Policy","Terms of Service","Cookie Policy"]};function O2(){return k.jsx("footer",{className:"bg-black border-t border-white/10",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12 py-16",children:[k.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-12 mb-12",children:[k.jsxs("div",{className:"lg:col-span-1",children:[k.jsx(ve.div,{className:"text-3xl tracking-wider mb-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},children:k.jsx("span",{className:"font-bold",children:"Infinity Vibe"})}),k.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Premium streetwear for those who dare to be different."}),k.jsx("div",{className:"flex gap-4",children:[{icon:Jm,href:"https://instagram.com/infinity_vibe.1"},{icon:pP,href:"https://facebook.com"},{icon:NP,href:"https://twitter.com"}].map((n,e)=>k.jsx(ve.a,{href:n.href,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 border border-white/20 hover:border-white hover:bg-white hover:text-black transition-all duration-300 flex items-center justify-center",whileHover:{scale:1.1,rotate:360},transition:{duration:.3},children:k.jsx(n.icon,{size:18})},e))})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"SHOP"}),k.jsx("ul",{className:"space-y-3",children:Fh.shop.map((n,e)=>k.jsx(ve.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:k.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"ABOUT"}),k.jsx("ul",{className:"space-y-3",children:Fh.about.map((n,e)=>k.jsx(ve.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:k.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"SUPPORT"}),k.jsx("ul",{className:"space-y-3",children:Fh.support.map((n,e)=>k.jsx(ve.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:k.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-sm tracking-widest mb-6",children:"LEGAL"}),k.jsx("ul",{className:"space-y-3",children:Fh.legal.map((n,e)=>k.jsx(ve.li,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:e*.05},children:k.jsx("a",{href:"#",className:"text-sm text-gray-400 hover:text-white transition-colors",children:n})},e))})]})]}),k.jsxs("div",{className:"pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-4",children:[k.jsx("p",{className:"text-sm text-gray-500",children:" 2026 Infinity Vibe. All rights reserved."}),k.jsx("a",{href:"https://texsky.vercel.app/",target:"_blank",rel:"noopener noreferrer",children:k.jsx("p",{className:"text-sm text-gray-500",children:"Designed and developed by Texsky."})})]})]})})}function D2(){const n=nl();return k.jsxs("section",{className:"relative h-screen w-full bg-black overflow-hidden",children:[k.jsxs("div",{className:"absolute inset-0",children:[k.jsx("img",{src:"https://images.unsplash.com/photo-1650464595868-fd12e3047d33?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxibGFjayUyMHdoaXRlJTIwZmFzaGlvbiUyMG1vZGVsJTIwcG9ydHJhaXR8ZW58MXx8fHwxNzcxOTk3MTc5fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",alt:"Fashion Model",className:"w-full h-full object-cover object-center grayscale"}),k.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/70 via-black/40 to-black/90"})]}),k.jsxs("div",{className:"relative h-full flex flex-col items-center justify-center px-6 text-center",children:[k.jsxs(ve.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"max-w-5xl",children:[k.jsxs(ve.h1,{className:"text-5xl md:text-7xl lg:text-8xl mb-6 tracking-tight leading-none",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},children:["WE DON'T FOLLOW TRENDS.",k.jsx("br",{}),k.jsx("span",{className:"italic",children:"WE CREATE THEM."})]}),k.jsx(ve.p,{className:"text-lg md:text-xl text-gray-400 mb-12 max-w-2xl mx-auto tracking-wide",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:"Premium streetwear crafted for those who stand different."}),k.jsxs(ve.div,{className:"flex flex-col sm:flex-row items-center justify-center gap-6",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.8},children:[k.jsx(ve.button,{className:"px-10 py-4 bg-white text-black tracking-widest text-sm hover:bg-black hover:text-white border-2 border-white transition-all duration-300 min-w-[220px]",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"SHOP THE DROP"}),k.jsx(ve.button,{className:"px-10 py-4 bg-transparent text-white tracking-widest text-sm border-2 border-white hover:bg-white hover:text-black transition-all duration-300 min-w-[220px]",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"EXPLORE COLLECTION"})]})]}),k.jsx(ve.div,{className:"absolute bottom-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:1.5},children:k.jsx(ve.div,{className:"w-px h-16 bg-white/50",animate:{height:[40,64,40]},transition:{duration:2,repeat:1/0}})})]})]})}const L2=()=>{};var yE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},V2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=n[t++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=n[t++],l=n[t++],c=n[t++],h=((s&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},RI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const o=n[s],l=s+1<n.length,c=l?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let w=(c&15)<<2|p>>6,E=p&63;h||(E=64,l||(w=64)),r.push(t[m],t[y],t[w],t[E])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):V2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const o=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,o==null||c==null||p==null||y==null)throw new M2;const w=o<<2|c>>4;if(r.push(w),p!==64){const E=c<<4&240|p>>2;if(r.push(E),y!==64){const b=p<<6&192|y;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class M2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j2=function(n){const e=AI(n);return RI.encodeByteArray(e,!0)},Rd=function(n){return j2(n).replace(/\./g,"")},CI=function(n){try{return RI.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=()=>U2().__FIREBASE_DEFAULTS__,$2=()=>{if(typeof process>"u"||typeof yE>"u")return;const n=yE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},B2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&CI(n[1]);return e&&JSON.parse(e)},af=()=>{try{return L2()||F2()||$2()||B2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},PI=n=>{var e,t;return(t=(e=af())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},NI=n=>{const e=PI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},OI=()=>{var n;return(n=af())==null?void 0:n.config},DI=n=>{var e;return(e=af())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z2=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Fy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Rd(JSON.stringify(t)),Rd(JSON.stringify(l)),""].join(".")}const Su={};function H2(){const n={prod:[],emulator:[]};for(const e of Object.keys(Su))Su[e]?n.emulator.push(e):n.prod.push(e);return n}function W2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let vE=!1;function $y(n,e){if(typeof window>"u"||typeof document>"u"||!Eo(window.location.host)||Su[n]===e||Su[n]||vE)return;Su[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=H2().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,E){w.setAttribute("width","24"),w.setAttribute("id",E),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{vE=!0,l()},w}function m(w,E){w.setAttribute("id",E),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function y(){const w=W2(r),E=t("text"),b=document.getElementById(E)||document.createElement("span"),I=t("learnmore"),x=document.getElementById(I)||document.createElement("a"),D=t("preprendIcon"),U=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const O=w.element;c(O),m(x,I);const K=p();h(U,D),O.append(U,b,x,K),document.body.appendChild(O)}o?(b.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function K2(){var e;const n=(e=af())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function G2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J2(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Y2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q2(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function X2(){return!K2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z2(){try{return typeof indexedDB=="object"}catch{return!1}}function eL(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="FirebaseError";class qr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tL,Object.setPrototypeOf(this,qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lc.prototype.create)}}class lc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?nL(o,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new qr(s,c,r)}}function nL(n,e){return n.replace(rL,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const rL=/\{\$([^}]+)}/g;function sL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function mo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const o=n[s],l=e[s];if(_E(o)&&_E(l)){if(!mo(o,l))return!1}else if(o!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function _E(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function pu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function iL(n,e){const t=new oL(n,e);return t.subscribe.bind(t)}class oL{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");aL(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=km),s.error===void 0&&(s.error=km),s.complete===void 0&&(s.complete=km);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aL(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n){return n&&n._delegate?n._delegate:n}class vi{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new z2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cL(e))try{this.getOrInitializeService({instanceIdentifier:io})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=io){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=io){return this.instances.has(e)}getOptions(e=io){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=io){return this.component?this.component.multipleInstances?e:io:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uL(n){return n===io?void 0:n}function cL(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lL(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ve||(Ve={}));const dL={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},fL=Ve.INFO,pL={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},mL=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=pL[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class By{constructor(e){this.name=e,this._logLevel=fL,this._logHandler=mL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const gL=(n,e)=>e.some(t=>n instanceof t);let wE,EE;function yL(){return wE||(wE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vL(){return EE||(EE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VI=new WeakMap,wg=new WeakMap,MI=new WeakMap,Am=new WeakMap,zy=new WeakMap;function _L(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(hi(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&VI.set(t,n)}).catch(()=>{}),zy.set(e,n),e}function wL(n){if(wg.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});wg.set(n,e)}let Eg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||MI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function EL(n){Eg=n(Eg)}function TL(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Rm(this),e,...t);return MI.set(r,e.sort?e.sort():[e]),hi(r)}:vL().includes(n)?function(...e){return n.apply(Rm(this),e),hi(VI.get(this))}:function(...e){return hi(n.apply(Rm(this),e))}}function SL(n){return typeof n=="function"?TL(n):(n instanceof IDBTransaction&&wL(n),gL(n,yL())?new Proxy(n,Eg):n)}function hi(n){if(n instanceof IDBRequest)return _L(n);if(Am.has(n))return Am.get(n);const e=SL(n);return e!==n&&(Am.set(n,e),zy.set(e,n)),e}const Rm=n=>zy.get(n);function bL(n,e,{blocked:t,upgrade:r,blocking:s,terminated:o}={}){const l=indexedDB.open(n,e),c=hi(l);return r&&l.addEventListener("upgradeneeded",h=>{r(hi(l.result),h.oldVersion,h.newVersion,hi(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}const IL=["get","getKey","getAll","getAllKeys","count"],xL=["put","add","delete","clear"],Cm=new Map;function TE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Cm.get(e))return Cm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=xL.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||IL.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,s?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),s&&h.done]))[0]};return Cm.set(e,o),o}EL(n=>({...n,get:(e,t,r)=>TE(e,t)||n.get(e,t,r),has:(e,t)=>!!TE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AL(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function AL(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tg="@firebase/app",SE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new By("@firebase/app"),RL="@firebase/app-compat",CL="@firebase/analytics-compat",PL="@firebase/analytics",NL="@firebase/app-check-compat",OL="@firebase/app-check",DL="@firebase/auth",LL="@firebase/auth-compat",VL="@firebase/database",ML="@firebase/data-connect",jL="@firebase/database-compat",UL="@firebase/functions",FL="@firebase/functions-compat",$L="@firebase/installations",BL="@firebase/installations-compat",zL="@firebase/messaging",HL="@firebase/messaging-compat",WL="@firebase/performance",qL="@firebase/performance-compat",KL="@firebase/remote-config",GL="@firebase/remote-config-compat",JL="@firebase/storage",YL="@firebase/storage-compat",QL="@firebase/firestore",XL="@firebase/ai",ZL="@firebase/firestore-compat",eV="firebase",tV="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg="[DEFAULT]",nV={[Tg]:"fire-core",[RL]:"fire-core-compat",[PL]:"fire-analytics",[CL]:"fire-analytics-compat",[OL]:"fire-app-check",[NL]:"fire-app-check-compat",[DL]:"fire-auth",[LL]:"fire-auth-compat",[VL]:"fire-rtdb",[ML]:"fire-data-connect",[jL]:"fire-rtdb-compat",[UL]:"fire-fn",[FL]:"fire-fn-compat",[$L]:"fire-iid",[BL]:"fire-iid-compat",[zL]:"fire-fcm",[HL]:"fire-fcm-compat",[WL]:"fire-perf",[qL]:"fire-perf-compat",[KL]:"fire-rc",[GL]:"fire-rc-compat",[JL]:"fire-gcs",[YL]:"fire-gcs-compat",[QL]:"fire-fst",[ZL]:"fire-fst-compat",[XL]:"fire-vertex","fire-js":"fire-js",[eV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new Map,rV=new Map,bg=new Map;function bE(n,e){try{n.container.addComponent(e)}catch(t){ys.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function go(n){const e=n.name;if(bg.has(e))return ys.debug(`There were multiple attempts to register component ${e}.`),!1;bg.set(e,n);for(const t of Mu.values())bE(t,n);for(const t of rV.values())bE(t,n);return!0}function lf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Un(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},di=new lc("app","Firebase",sV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=tV;function jI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Sg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw di.create("bad-app-name",{appName:String(s)});if(t||(t=OI()),!t)throw di.create("no-options");const o=Mu.get(s);if(o){if(mo(t,o.options)&&mo(r,o.config))return o;throw di.create("duplicate-app",{appName:s})}const l=new hL(s);for(const h of bg.values())l.addComponent(h);const c=new iV(t,r,l);return Mu.set(s,c),c}function uf(n=Sg){const e=Mu.get(n);if(!e&&n===Sg&&OI())return jI();if(!e)throw di.create("no-app",{appName:n});return e}function oV(){return Array.from(Mu.values())}function Dr(n,e,t){let r=nV[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ys.warn(l.join(" "));return}go(new vi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="firebase-heartbeat-database",lV=1,ju="firebase-heartbeat-store";let Pm=null;function UI(){return Pm||(Pm=bL(aV,lV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ju)}catch(t){console.warn(t)}}}}).catch(n=>{throw di.create("idb-open",{originalErrorMessage:n.message})})),Pm}async function uV(n){try{const t=(await UI()).transaction(ju),r=await t.objectStore(ju).get(FI(n));return await t.done,r}catch(e){if(e instanceof qr)ys.warn(e.message);else{const t=di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ys.warn(t.message)}}}async function IE(n,e){try{const r=(await UI()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,FI(n)),await r.done}catch(t){if(t instanceof qr)ys.warn(t.message);else{const r=di.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ys.warn(r.message)}}}function FI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=1024,hV=30;class dV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pV(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=xE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>hV){const l=mV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=xE(),{heartbeatsToSend:r,unsentEntries:s}=fV(this._heartbeatsCache.heartbeats),o=Rd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ys.warn(t),""}}}function xE(){return new Date().toISOString().substring(0,10)}function fV(n,e=cV){const t=[];let r=n.slice();for(const s of n){const o=t.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),kE(t)>e){o.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),kE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class pV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z2()?eL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await uV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return IE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kE(n){return Rd(JSON.stringify({version:2,heartbeats:n})).length}function mV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n){go(new vi("platform-logger",e=>new kL(e),"PRIVATE")),go(new vi("heartbeat",e=>new dV(e),"PRIVATE")),Dr(Tg,SE,n),Dr(Tg,SE,"esm2020"),Dr("fire-js","")}gV("");var AE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fi,$I;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,A){function C(){}C.prototype=A.prototype,P.F=A.prototype,P.prototype=new C,P.prototype.constructor=P,P.D=function(V,M,B){for(var L=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)L[Fe-2]=arguments[Fe];return A.prototype[M].apply(V,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,A,C){C||(C=0);const V=Array(16);if(typeof A=="string")for(var M=0;M<16;++M)V[M]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(M=0;M<16;++M)V[M]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=P.g[0],C=P.g[1],M=P.g[2];let B=P.g[3],L;L=A+(B^C&(M^B))+V[0]+3614090360&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(M^A&(C^M))+V[1]+3905402710&4294967295,B=A+(L<<12&4294967295|L>>>20),L=M+(C^B&(A^C))+V[2]+606105819&4294967295,M=B+(L<<17&4294967295|L>>>15),L=C+(A^M&(B^A))+V[3]+3250441966&4294967295,C=M+(L<<22&4294967295|L>>>10),L=A+(B^C&(M^B))+V[4]+4118548399&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(M^A&(C^M))+V[5]+1200080426&4294967295,B=A+(L<<12&4294967295|L>>>20),L=M+(C^B&(A^C))+V[6]+2821735955&4294967295,M=B+(L<<17&4294967295|L>>>15),L=C+(A^M&(B^A))+V[7]+4249261313&4294967295,C=M+(L<<22&4294967295|L>>>10),L=A+(B^C&(M^B))+V[8]+1770035416&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(M^A&(C^M))+V[9]+2336552879&4294967295,B=A+(L<<12&4294967295|L>>>20),L=M+(C^B&(A^C))+V[10]+4294925233&4294967295,M=B+(L<<17&4294967295|L>>>15),L=C+(A^M&(B^A))+V[11]+2304563134&4294967295,C=M+(L<<22&4294967295|L>>>10),L=A+(B^C&(M^B))+V[12]+1804603682&4294967295,A=C+(L<<7&4294967295|L>>>25),L=B+(M^A&(C^M))+V[13]+4254626195&4294967295,B=A+(L<<12&4294967295|L>>>20),L=M+(C^B&(A^C))+V[14]+2792965006&4294967295,M=B+(L<<17&4294967295|L>>>15),L=C+(A^M&(B^A))+V[15]+1236535329&4294967295,C=M+(L<<22&4294967295|L>>>10),L=A+(M^B&(C^M))+V[1]+4129170786&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^M&(A^C))+V[6]+3225465664&4294967295,B=A+(L<<9&4294967295|L>>>23),L=M+(A^C&(B^A))+V[11]+643717713&4294967295,M=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(M^B))+V[0]+3921069994&4294967295,C=M+(L<<20&4294967295|L>>>12),L=A+(M^B&(C^M))+V[5]+3593408605&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^M&(A^C))+V[10]+38016083&4294967295,B=A+(L<<9&4294967295|L>>>23),L=M+(A^C&(B^A))+V[15]+3634488961&4294967295,M=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(M^B))+V[4]+3889429448&4294967295,C=M+(L<<20&4294967295|L>>>12),L=A+(M^B&(C^M))+V[9]+568446438&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^M&(A^C))+V[14]+3275163606&4294967295,B=A+(L<<9&4294967295|L>>>23),L=M+(A^C&(B^A))+V[3]+4107603335&4294967295,M=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(M^B))+V[8]+1163531501&4294967295,C=M+(L<<20&4294967295|L>>>12),L=A+(M^B&(C^M))+V[13]+2850285829&4294967295,A=C+(L<<5&4294967295|L>>>27),L=B+(C^M&(A^C))+V[2]+4243563512&4294967295,B=A+(L<<9&4294967295|L>>>23),L=M+(A^C&(B^A))+V[7]+1735328473&4294967295,M=B+(L<<14&4294967295|L>>>18),L=C+(B^A&(M^B))+V[12]+2368359562&4294967295,C=M+(L<<20&4294967295|L>>>12),L=A+(C^M^B)+V[5]+4294588738&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^M)+V[8]+2272392833&4294967295,B=A+(L<<11&4294967295|L>>>21),L=M+(B^A^C)+V[11]+1839030562&4294967295,M=B+(L<<16&4294967295|L>>>16),L=C+(M^B^A)+V[14]+4259657740&4294967295,C=M+(L<<23&4294967295|L>>>9),L=A+(C^M^B)+V[1]+2763975236&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^M)+V[4]+1272893353&4294967295,B=A+(L<<11&4294967295|L>>>21),L=M+(B^A^C)+V[7]+4139469664&4294967295,M=B+(L<<16&4294967295|L>>>16),L=C+(M^B^A)+V[10]+3200236656&4294967295,C=M+(L<<23&4294967295|L>>>9),L=A+(C^M^B)+V[13]+681279174&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^M)+V[0]+3936430074&4294967295,B=A+(L<<11&4294967295|L>>>21),L=M+(B^A^C)+V[3]+3572445317&4294967295,M=B+(L<<16&4294967295|L>>>16),L=C+(M^B^A)+V[6]+76029189&4294967295,C=M+(L<<23&4294967295|L>>>9),L=A+(C^M^B)+V[9]+3654602809&4294967295,A=C+(L<<4&4294967295|L>>>28),L=B+(A^C^M)+V[12]+3873151461&4294967295,B=A+(L<<11&4294967295|L>>>21),L=M+(B^A^C)+V[15]+530742520&4294967295,M=B+(L<<16&4294967295|L>>>16),L=C+(M^B^A)+V[2]+3299628645&4294967295,C=M+(L<<23&4294967295|L>>>9),L=A+(M^(C|~B))+V[0]+4096336452&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~M))+V[7]+1126891415&4294967295,B=A+(L<<10&4294967295|L>>>22),L=M+(A^(B|~C))+V[14]+2878612391&4294967295,M=B+(L<<15&4294967295|L>>>17),L=C+(B^(M|~A))+V[5]+4237533241&4294967295,C=M+(L<<21&4294967295|L>>>11),L=A+(M^(C|~B))+V[12]+1700485571&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~M))+V[3]+2399980690&4294967295,B=A+(L<<10&4294967295|L>>>22),L=M+(A^(B|~C))+V[10]+4293915773&4294967295,M=B+(L<<15&4294967295|L>>>17),L=C+(B^(M|~A))+V[1]+2240044497&4294967295,C=M+(L<<21&4294967295|L>>>11),L=A+(M^(C|~B))+V[8]+1873313359&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~M))+V[15]+4264355552&4294967295,B=A+(L<<10&4294967295|L>>>22),L=M+(A^(B|~C))+V[6]+2734768916&4294967295,M=B+(L<<15&4294967295|L>>>17),L=C+(B^(M|~A))+V[13]+1309151649&4294967295,C=M+(L<<21&4294967295|L>>>11),L=A+(M^(C|~B))+V[4]+4149444226&4294967295,A=C+(L<<6&4294967295|L>>>26),L=B+(C^(A|~M))+V[11]+3174756917&4294967295,B=A+(L<<10&4294967295|L>>>22),L=M+(A^(B|~C))+V[2]+718787259&4294967295,M=B+(L<<15&4294967295|L>>>17),L=C+(B^(M|~A))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+A&4294967295,P.g[1]=P.g[1]+(M+(L<<21&4294967295|L>>>11))&4294967295,P.g[2]=P.g[2]+M&4294967295,P.g[3]=P.g[3]+B&4294967295}r.prototype.v=function(P,A){A===void 0&&(A=P.length);const C=A-this.blockSize,V=this.C;let M=this.h,B=0;for(;B<A;){if(M==0)for(;B<=C;)s(this,P,B),B+=this.blockSize;if(typeof P=="string"){for(;B<A;)if(V[M++]=P.charCodeAt(B++),M==this.blockSize){s(this,V),M=0;break}}else for(;B<A;)if(V[M++]=P[B++],M==this.blockSize){s(this,V),M=0;break}}this.h=M,this.o+=A},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var A=1;A<P.length-8;++A)P[A]=0;A=this.o*8;for(var C=P.length-8;C<P.length;++C)P[C]=A&255,A/=256;for(this.v(P),P=Array(16),A=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)P[A++]=this.g[C]>>>V&255;return P};function o(P,A){var C=c;return Object.prototype.hasOwnProperty.call(C,P)?C[P]:C[P]=A(P)}function l(P,A){this.h=A;const C=[];let V=!0;for(let M=P.length-1;M>=0;M--){const B=P[M]|0;V&&B==A||(C[M]=B,V=!1)}this.g=C}var c={};function h(P){return-128<=P&&P<128?o(P,function(A){return new l([A|0],A<0?-1:0)}):new l([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return x(p(-P));const A=[];let C=1;for(let V=0;P>=C;V++)A[V]=P/C|0,C*=4294967296;return new l(A,0)}function m(P,A){if(P.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(P.charAt(0)=="-")return x(m(P.substring(1),A));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=p(Math.pow(A,8));let V=y;for(let B=0;B<P.length;B+=8){var M=Math.min(8,P.length-B);const L=parseInt(P.substring(B,B+M),A);M<8?(M=p(Math.pow(A,M)),V=V.j(M).add(p(L))):(V=V.j(C),V=V.add(p(L)))}return V}var y=h(0),w=h(1),E=h(16777216);n=l.prototype,n.m=function(){if(I(this))return-x(this).m();let P=0,A=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);P+=(V>=0?V:4294967296+V)*A,A*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(I(this))return"-"+x(this).toString(P);const A=p(Math.pow(P,6));var C=this;let V="";for(;;){const M=K(C,A).g;C=D(C,M.j(A));let B=((C.g.length>0?C.g[0]:C.h)>>>0).toString(P);if(C=M,b(C))return B+V;for(;B.length<6;)B="0"+B;V=B+V}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(let A=0;A<P.g.length;A++)if(P.g[A]!=0)return!1;return!0}function I(P){return P.h==-1}n.l=function(P){return P=D(this,P),I(P)?-1:b(P)?0:1};function x(P){const A=P.g.length,C=[];for(let V=0;V<A;V++)C[V]=~P.g[V];return new l(C,~P.h).add(w)}n.abs=function(){return I(this)?x(this):this},n.add=function(P){const A=Math.max(this.g.length,P.g.length),C=[];let V=0;for(let M=0;M<=A;M++){let B=V+(this.i(M)&65535)+(P.i(M)&65535),L=(B>>>16)+(this.i(M)>>>16)+(P.i(M)>>>16);V=L>>>16,B&=65535,L&=65535,C[M]=L<<16|B}return new l(C,C[C.length-1]&-2147483648?-1:0)};function D(P,A){return P.add(x(A))}n.j=function(P){if(b(this)||b(P))return y;if(I(this))return I(P)?x(this).j(x(P)):x(x(this).j(P));if(I(P))return x(this.j(x(P)));if(this.l(E)<0&&P.l(E)<0)return p(this.m()*P.m());const A=this.g.length+P.g.length,C=[];for(var V=0;V<2*A;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let M=0;M<P.g.length;M++){const B=this.i(V)>>>16,L=this.i(V)&65535,Fe=P.i(M)>>>16,mt=P.i(M)&65535;C[2*V+2*M]+=L*mt,U(C,2*V+2*M),C[2*V+2*M+1]+=B*mt,U(C,2*V+2*M+1),C[2*V+2*M+1]+=L*Fe,U(C,2*V+2*M+1),C[2*V+2*M+2]+=B*Fe,U(C,2*V+2*M+2)}for(P=0;P<A;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=A;P<2*A;P++)C[P]=0;return new l(C,0)};function U(P,A){for(;(P[A]&65535)!=P[A];)P[A+1]+=P[A]>>>16,P[A]&=65535,A++}function O(P,A){this.g=P,this.h=A}function K(P,A){if(b(A))throw Error("division by zero");if(b(P))return new O(y,y);if(I(P))return A=K(x(P),A),new O(x(A.g),x(A.h));if(I(A))return A=K(P,x(A)),new O(x(A.g),A.h);if(P.g.length>30){if(I(P)||I(A))throw Error("slowDivide_ only works with positive integers.");for(var C=w,V=A;V.l(P)<=0;)C=Y(C),V=Y(V);var M=X(C,1),B=X(V,1);for(V=X(V,2),C=X(C,2);!b(V);){var L=B.add(V);L.l(P)<=0&&(M=M.add(C),B=L),V=X(V,1),C=X(C,1)}return A=D(P,M.j(A)),new O(M,A)}for(M=y;P.l(A)>=0;){for(C=Math.max(1,Math.floor(P.m()/A.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),B=p(C),L=B.j(A);I(L)||L.l(P)>0;)C-=V,B=p(C),L=B.j(A);b(B)&&(B=w),M=M.add(B),P=D(P,L)}return new O(M,P)}n.B=function(P){return K(this,P).h},n.and=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)&P.i(V);return new l(C,this.h&P.h)},n.or=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)|P.i(V);return new l(C,this.h|P.h)},n.xor=function(P){const A=Math.max(this.g.length,P.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)^P.i(V);return new l(C,this.h^P.h)};function Y(P){const A=P.g.length+1,C=[];for(let V=0;V<A;V++)C[V]=P.i(V)<<1|P.i(V-1)>>>31;return new l(C,P.h)}function X(P,A){const C=A>>5;A%=32;const V=P.g.length-C,M=[];for(let B=0;B<V;B++)M[B]=A>0?P.i(B+C)>>>A|P.i(B+C+1)<<32-A:P.i(B+C);return new l(M,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$I=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=m,fi=l}).apply(typeof AE<"u"?AE:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BI,mu,zI,cd,Ig,HI,WI,qI;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var _=0;_<d.length;++_){var T=d[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(d,_){if(_)e:{var T=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var W=d[R];if(!(W in T))break e;T=T[W]}d=d[d.length-1],R=T[d],_=_(R),_!=R&&_!=null&&e(T,d,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(_){var T=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&T.push([R,_[R]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,T){return d.call.apply(d.bind,arguments)}function p(d,_,T){return p=h,p.apply(null,arguments)}function m(d,_){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function y(d,_){function T(){}T.prototype=_.prototype,d.Z=_.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(R,W,J){for(var oe=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)oe[Ae-2]=arguments[Ae];return _.prototype[W].apply(R,oe)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function E(d){const _=d.length;if(_>0){const T=Array(_);for(let R=0;R<_;R++)T[R]=d[R];return T}return[]}function b(d,_){for(let R=1;R<arguments.length;R++){const W=arguments[R];var T=typeof W;if(T=T!="object"?T:W?Array.isArray(W)?"array":T:"null",T=="array"||T=="object"&&typeof W.length=="number"){T=d.length||0;const J=W.length||0;d.length=T+J;for(let oe=0;oe<J;oe++)d[T+oe]=W[oe]}else d.push(W)}}class I{constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function x(d){l.setTimeout(()=>{throw d},0)}function D(){var d=P;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class U{constructor(){this.h=this.g=null}add(_,T){const R=O.get();R.set(_,T),this.h?this.h.next=R:this.g=R,this.h=R}}var O=new I(()=>new K,d=>d.reset());class K{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,X=!1,P=new U,A=()=>{const d=Promise.resolve(void 0);Y=()=>{d.then(C)}};function C(){for(var d;d=D();){try{d.h.call(d.g)}catch(T){x(T)}var _=O;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}X=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};l.addEventListener("test",T,_),l.removeEventListener("test",T,_)}catch{}return d})();function L(d){return/^[\s\xa0]*$/.test(d)}function Fe(d,_){M.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}y(Fe,M),Fe.prototype.init=function(d,_){const T=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(T=="mouseover"?_=d.fromElement:T=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var mt="closure_listenable_"+(Math.random()*1e6|0),Mt=0;function Ce(d,_,T,R,W){this.listener=d,this.proxy=null,this.src=_,this.type=T,this.capture=!!R,this.ha=W,this.key=++Mt,this.da=this.fa=!1}function se(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function fe(d,_,T){for(const R in d)_.call(T,d[R],R,d)}function ae(d,_){for(const T in d)_.call(void 0,d[T],T,d)}function z(d){const _={};for(const T in d)_[T]=d[T];return _}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(d,_){let T,R;for(let W=1;W<arguments.length;W++){R=arguments[W];for(T in R)d[T]=R[T];for(let J=0;J<Z.length;J++)T=Z[J],Object.prototype.hasOwnProperty.call(R,T)&&(d[T]=R[T])}}function Ne(d){this.src=d,this.g={},this.h=0}Ne.prototype.add=function(d,_,T,R,W){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const oe=Le(d,_,R,W);return oe>-1?(_=d[oe],T||(_.fa=!1)):(_=new Ce(_,this.src,J,!!R,W),_.fa=T,d.push(_)),_};function De(d,_){const T=_.type;if(T in d.g){var R=d.g[T],W=Array.prototype.indexOf.call(R,_,void 0),J;(J=W>=0)&&Array.prototype.splice.call(R,W,1),J&&(se(_),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Le(d,_,T,R){for(let W=0;W<d.length;++W){const J=d[W];if(!J.da&&J.listener==_&&J.capture==!!T&&J.ha==R)return W}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Be={};function Je(d,_,T,R,W){if(Array.isArray(_)){for(let J=0;J<_.length;J++)Je(d,_[J],T,R,W);return null}return T=pl(T),d&&d[mt]?d.J(_,T,c(R)?!!R.capture:!1,W):on(d,_,T,!1,R,W)}function on(d,_,T,R,W,J){if(!_)throw Error("Invalid event type");const oe=c(W)?!!W.capture:!!W;let Ae=Co(d);if(Ae||(d[qe]=Ae=new Ne(d)),T=Ae.add(_,T,R,oe,J),T.proxy)return T;if(R=Ao(),T.proxy=R,R.src=d,R.listener=T,d.addEventListener)B||(W=oe),W===void 0&&(W=!1),d.addEventListener(_.toString(),R,W);else if(d.attachEvent)d.attachEvent(Ro(_.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ao(){function d(T){return _.call(d.src,d.listener,T)}const _=_c;return d}function fl(d,_,T,R,W){if(Array.isArray(_))for(var J=0;J<_.length;J++)fl(d,_[J],T,R,W);else R=c(R)?!!R.capture:!!R,T=pl(T),d&&d[mt]?(d=d.i,J=String(_).toString(),J in d.g&&(_=d.g[J],T=Le(_,T,R,W),T>-1&&(se(_[T]),Array.prototype.splice.call(_,T,1),_.length==0&&(delete d.g[J],d.h--)))):d&&(d=Co(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Le(_,T,R,W)),(T=d>-1?_[d]:null)&&bs(T))}function bs(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[mt])De(_.i,d);else{var T=d.type,R=d.proxy;_.removeEventListener?_.removeEventListener(T,R,d.capture):_.detachEvent?_.detachEvent(Ro(T),R):_.addListener&&_.removeListener&&_.removeListener(R),(T=Co(_))?(De(T,d),T.h==0&&(T.src=null,_[qe]=null)):se(d)}}}function Ro(d){return d in Be?Be[d]:Be[d]="on"+d}function _c(d,_){if(d.da)d=!0;else{_=new Fe(_,this);const T=d.listener,R=d.ha||d.src;d.fa&&bs(d),d=T.call(R,_)}return d}function Co(d){return d=d[qe],d instanceof Ne?d:null}var Ai="__closure_events_fn_"+(Math.random()*1e9>>>0);function pl(d){return typeof d=="function"?d:(d[Ai]||(d[Ai]=function(_){return d.handleEvent(_)}),d[Ai])}function wt(){V.call(this),this.i=new Ne(this),this.M=this,this.G=null}y(wt,V),wt.prototype[mt]=!0,wt.prototype.removeEventListener=function(d,_,T,R){fl(this,d,_,T,R)};function gt(d,_){var T,R=d.G;if(R)for(T=[];R;R=R.G)T.push(R);if(d=d.M,R=_.type||_,typeof _=="string")_=new M(_,d);else if(_ instanceof M)_.target=_.target||d;else{var W=_;_=new M(R,d),Pe(_,W)}W=!0;let J,oe;if(T)for(oe=T.length-1;oe>=0;oe--)J=_.g=T[oe],W=Wn(J,R,!0,_)&&W;if(J=_.g=d,W=Wn(J,R,!0,_)&&W,W=Wn(J,R,!1,_)&&W,T)for(oe=0;oe<T.length;oe++)J=_.g=T[oe],W=Wn(J,R,!1,_)&&W}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const T=d.g[_];for(let R=0;R<T.length;R++)se(T[R]);delete d.g[_],d.h--}}this.G=null},wt.prototype.J=function(d,_,T,R){return this.i.add(String(d),_,!1,T,R)},wt.prototype.K=function(d,_,T,R){return this.i.add(String(d),_,!0,T,R)};function Wn(d,_,T,R){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let W=!0;for(let J=0;J<_.length;++J){const oe=_[J];if(oe&&!oe.da&&oe.capture==T){const Ae=oe.listener,yt=oe.ha||oe.src;oe.fa&&De(d.i,oe),W=Ae.call(yt,R)!==!1&&W}}return W&&!R.defaultPrevented}function ml(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function gl(d){d.g=ml(()=>{d.g=null,d.i&&(d.i=!1,gl(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class wc extends V{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:gl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Is(d){V.call(this),this.h=d,this.g={}}y(Is,V);var yl=[];function Po(d){fe(d.g,function(_,T){this.g.hasOwnProperty(T)&&bs(_)},d),d.g={}}Is.prototype.N=function(){Is.Z.N.call(this),Po(this)},Is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=l.JSON.stringify,Ec=l.JSON.parse,Ri=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function ks(){}function Tc(){}var As={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function No(){M.call(this,"d")}y(No,M);function vl(){M.call(this,"c")}y(vl,M);var qn={},Oo=null;function Rs(){return Oo=Oo||new wt}qn.Ia="serverreachability";function Do(d){M.call(this,qn.Ia,d)}y(Do,M);function Kr(d){const _=Rs();gt(_,new Do(_))}qn.STAT_EVENT="statevent";function Gr(d,_){M.call(this,qn.STAT_EVENT,d),this.stat=_}y(Gr,M);function ht(d){const _=Rs();gt(_,new Gr(_,d))}qn.Ja="timingevent";function _l(d,_){M.call(this,qn.Ja,d),this.size=_}y(_l,M);function Cs(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function Ps(){this.g=!0}Ps.prototype.ua=function(){this.g=!1};function Sc(d,_,T,R,W,J){d.info(function(){if(d.g)if(J){var oe="",Ae=J.split("&");for(let Ge=0;Ge<Ae.length;Ge++){var yt=Ae[Ge].split("=");if(yt.length>1){const Et=yt[0];yt=yt[1];const In=Et.split("_");oe=In.length>=2&&In[1]=="type"?oe+(Et+"="+yt+"&"):oe+(Et+"=redacted&")}}}else oe=null;else oe=J;return"XMLHTTP REQ ("+R+") [attempt "+W+"]: "+_+`
`+T+`
`+oe})}function bc(d,_,T,R,W,J,oe){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+W+"]: "+_+`
`+T+`
`+J+" "+oe})}function fr(d,_,T,R){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ci(d,T)+(R?" "+R:"")})}function Ic(d,_){d.info(function(){return"TIMEOUT: "+_})}Ps.prototype.info=function(){};function Ci(d,_){if(!d.g)return _;if(!_)return null;try{const J=JSON.parse(_);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var T=J[d];if(!(T.length<2)){var R=T[1];if(Array.isArray(R)&&!(R.length<1)){var W=R[0];if(W!="noop"&&W!="stop"&&W!="close")for(let oe=1;oe<R.length;oe++)R[oe]=""}}}}return xs(J)}catch{return _}}var Ns={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Os={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function Jr(){}y(Jr,ks),Jr.prototype.g=function(){return new XMLHttpRequest},xc=new Jr;function pr(d){return encodeURIComponent(String(d))}function Lo(d){var _=1;d=d.split(":");const T=[];for(;_>0&&d.length;)T.push(d.shift()),_--;return d.length&&T.push(d.join(":")),T}function Pn(d,_,T,R){this.j=d,this.i=_,this.l=T,this.S=R||1,this.V=new Is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kc}function kc(){this.i=null,this.g="",this.h=!1}var Ac={},wl={};function Kn(d,_,T){d.M=1,d.A=Qr(Nn(_)),d.u=T,d.R=!0,El(d,null)}function El(d,_){d.F=Date.now(),Pi(d),d.B=Nn(d.A);var T=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Pl(T.i,"t",R),d.C=0,T=d.j.L,d.h=new kc,d.g=jc(d.j,T?_:null,!d.u),d.P>0&&(d.O=new wc(p(d.Y,d,d.g),d.P)),_=d.V,T=d.g,R=d.ba;var W="readystatechange";Array.isArray(W)||(W&&(yl[0]=W.toString()),W=yl);for(let J=0;J<W.length;J++){const oe=Je(T,W[J],R||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=d.J?z(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Kr(),Sc(d.i,d.v,d.B,d.l,d.S,d.u)}Pn.prototype.ba=function(d){d=d.target;const _=this.O;_&&Er(d)==3?_.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const Ae=Er(this.g),yt=this.g.ya(),Ge=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Vc(this.g)))){this.K||Ae!=4||yt==7||(yt==8||Ge<=0?Kr(3):Kr(2)),Vo(this);var _=this.g.ca();this.X=_;var T=Rc(this);if(this.o=_==200,bc(this.i,this.v,this.B,this.l,this.S,Ae,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,W=this.g;if((R=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(R)){var J=R;break t}}J=null}if(d=J)fr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,et(this,d);else{this.o=!1,this.m=3,ht(12),Yr(this),Ni(this);break e}}if(this.R){d=!0;let Et;for(;!this.K&&this.C<T.length;)if(Et=Pc(this,T),Et==wl){Ae==4&&(this.m=4,ht(14),d=!1),fr(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Ac){this.m=4,ht(15),fr(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else fr(this.i,this.l,Et,null),et(this,Et);if(Cc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||T.length!=0||this.h.h||(this.m=1,ht(16),d=!1),this.o=this.o&&d,!d)fr(this.i,this.l,T,"[Invalid Chunked Response]"),Yr(this),Ni(this);else if(T.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),$i(oe),oe.P=!0,ht(11))}}else fr(this.i,this.l,T,null),et(this,T);Ae==4&&Yr(this),this.o&&!this.K&&(Ae==4?qo(this.j,this):(this.o=!1,Pi(this)))}else Ol(this.g),_==400&&T.indexOf("Unknown SID")>0?(this.m=3,ht(12)):(this.m=0,ht(13)),Yr(this),Ni(this)}}}catch{}finally{}};function Rc(d){if(!Cc(d))return d.g.la();const _=Vc(d.g);if(_==="")return"";let T="";const R=_.length,W=Er(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Yr(d),Ni(d),"";d.h.i=new l.TextDecoder}for(let J=0;J<R;J++)d.h.h=!0,T+=d.h.i.decode(_[J],{stream:!(W&&J==R-1)});return _.length=0,d.h.g+=T,d.C=0,d.h.g}function Cc(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Pc(d,_){var T=d.C,R=_.indexOf(`
`,T);return R==-1?wl:(T=Number(_.substring(T,R)),isNaN(T)?Ac:(R+=1,R+T>_.length?wl:(_=_.slice(R,R+T),d.C=R+T,_)))}Pn.prototype.cancel=function(){this.K=!0,Yr(this)};function Pi(d){d.T=Date.now()+d.H,Tl(d,d.H)}function Tl(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Cs(p(d.aa,d),_)}function Vo(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ic(this.i,this.B),this.M!=2&&(Kr(),ht(17)),Yr(this),this.m=2,Ni(this)):Tl(this,this.T-d)};function Ni(d){d.j.I==0||d.K||qo(d.j,d)}function Yr(d){Vo(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,Po(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function et(d,_){try{var T=d.j;if(T.I!=0&&(T.g==d||bl(T.h,d))){if(!d.L&&bl(T.h,d)&&T.I==3){try{var R=T.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var W=R;if(W[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)Wo(T),Sn(T);else break e;br(T),ht(18)}}else T.xa=W[1],0<T.xa-T.K&&W[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Cs(p(T.Va,T),6e3));Oi(T.h)<=1&&T.ta&&(T.ta=void 0)}else bn(T,11)}else if((d.L||T.g==d)&&Wo(T),!L(_))for(W=T.Ba.g.parse(_),_=0;_<W.length;_++){let Ge=W[_];const Et=Ge[0];if(!(Et<=T.K))if(T.K=Et,Ge=Ge[1],T.I==2)if(Ge[0]=="c"){T.M=Ge[1],T.ba=Ge[2];const In=Ge[3];In!=null&&(T.ka=In,T.j.info("VER="+T.ka));const ns=Ge[4];ns!=null&&(T.za=ns,T.j.info("SVER="+T.za));const Ir=Ge[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(R=1.5*Ir,T.O=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const xr=d.g;if(xr){const Jo=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jo){var J=R.h;J.g||Jo.indexOf("spdy")==-1&&Jo.indexOf("quic")==-1&&Jo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(jo(J,J.h),J.h=null))}if(R.G){const Vl=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Vl&&(R.wa=Vl,We(R.J,R.G,Vl))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),R=T;var oe=d;if(R.na=Ll(R,R.L?R.ba:null,R.W),oe.L){Di(R.h,oe);var Ae=oe,yt=R.O;yt&&(Ae.H=yt),Ae.D&&(Vo(Ae),Pi(Ae)),R.g=oe}else Jt(R);T.i.length>0&&ts(T)}else Ge[0]!="stop"&&Ge[0]!="close"||bn(T,7);else T.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?bn(T,7):zo(T):Ge[0]!="noop"&&T.l&&T.l.qa(Ge),T.A=0)}}Kr(4)}catch{}}var Of=class{constructor(d,_){this.g=d,this.map=_}};function Mo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Oi(d){return d.h?1:d.g?d.g.size:0}function bl(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function jo(d,_){d.g?d.g.add(_):d.h=_}function Di(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Mo.prototype.cancel=function(){if(this.i=wn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function wn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const T of d.g.values())_=_.concat(T.G);return _}return E(d.i)}var Nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function En(d,_){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const R=d[T].indexOf("=");let W,J=null;R>=0?(W=d[T].substring(0,R),J=d[T].substring(R+1)):W=d[T],_(W,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function mr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof mr?(this.l=d.l,Li(this,d.j),this.o=d.o,this.g=d.g,gr(this,d.u),this.h=d.h,Ds(this,Nl(d.i)),this.m=d.m):d&&(_=String(d).match(Nc))?(this.l=!1,Li(this,_[1]||"",!0),this.o=Vi(_[2]||""),this.g=Vi(_[3]||"",!0),gr(this,_[4]),this.h=Vi(_[5]||"",!0),Ds(this,_[6]||"",!0),this.m=Vi(_[7]||"")):(this.l=!1,this.i=new Ue(null,this.l))}mr.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Mi(_,xl,!0),":");var T=this.g;return(T||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Mi(_,xl,!0),"@"),d.push(pr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Mi(T,T.charAt(0)=="/"?ji:kl,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Mi(T,Al)),d.join("")},mr.prototype.resolve=function(d){const _=Nn(this);let T=!!d.j;T?Li(_,d.j):T=!!d.o,T?_.o=d.o:T=!!d.g,T?_.g=d.g:T=d.u!=null;var R=d.h;if(T)gr(_,d.u);else if(T=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var W=_.h.lastIndexOf("/");W!=-1&&(R=_.h.slice(0,W+1)+R)}if(W=R,W==".."||W==".")R="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){R=W.lastIndexOf("/",0)==0,W=W.split("/");const J=[];for(let oe=0;oe<W.length;){const Ae=W[oe++];Ae=="."?R&&oe==W.length&&J.push(""):Ae==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&oe==W.length&&J.push("")):(J.push(Ae),R=!0)}R=J.join("/")}else R=W}return T?_.h=R:T=d.i.toString()!=="",T?Ds(_,Nl(d.i)):T=!!d.m,T&&(_.m=d.m),_};function Nn(d){return new mr(d)}function Li(d,_,T){d.j=T?Vi(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function gr(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Ds(d,_,T){_ instanceof Ue?(d.i=_,Fo(d.i,d.l)):(T||(_=Mi(_,Df)),d.i=new Ue(_,d.l))}function We(d,_,T){d.i.set(_,T)}function Qr(d){return We(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Vi(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Mi(d,_,T){return typeof d=="string"?(d=encodeURI(d).replace(_,Il),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Il(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var xl=/[#\/\?@]/g,kl=/[#\?:]/g,ji=/[#\?]/g,Df=/[#\?@]/g,Al=/#/g;function Ue(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function yr(d){d.g||(d.g=new Map,d.h=0,d.i&&En(d.i,function(_,T){d.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}n=Ue.prototype,n.add=function(d,_){yr(this),this.i=null,d=vr(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(_),this.h+=1,this};function Rl(d,_){yr(d),_=vr(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Uo(d,_){return yr(d),_=vr(d,_),d.g.has(_)}n.forEach=function(d,_){yr(this),this.g.forEach(function(T,R){T.forEach(function(W){d.call(_,W,R,this)},this)},this)};function Cl(d,_){yr(d);let T=[];if(typeof _=="string")Uo(d,_)&&(T=T.concat(d.g.get(vr(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)T=T.concat(d[_]);return T}n.set=function(d,_){return yr(this),this.i=null,d=vr(this,d),Uo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=Cl(this,d),d.length>0?String(d[0]):_):_};function Pl(d,_,T){Rl(d,_),T.length>0&&(d.i=null,d.g.set(vr(d,_),E(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var T=_[R];const W=pr(T);T=Cl(this,T);for(let J=0;J<T.length;J++){let oe=W;T[J]!==""&&(oe+="="+pr(T[J])),d.push(oe)}}return this.i=d.join("&")};function Nl(d){const _=new Ue;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function vr(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Fo(d,_){_&&!d.j&&(yr(d),d.i=null,d.g.forEach(function(T,R){const W=R.toLowerCase();R!=W&&(Rl(this,R),Pl(this,W,T))},d)),d.j=_}function _r(d,_){const T=new Ps;if(l.Image){const R=new Image;R.onload=m(jt,T,"TestLoadImage: loaded",!0,_,R),R.onerror=m(jt,T,"TestLoadImage: error",!1,_,R),R.onabort=m(jt,T,"TestLoadImage: abort",!1,_,R),R.ontimeout=m(jt,T,"TestLoadImage: timeout",!1,_,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else _(!1)}function wr(d,_){const T=new Ps,R=new AbortController,W=setTimeout(()=>{R.abort(),jt(T,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:R.signal}).then(J=>{clearTimeout(W),J.ok?jt(T,"TestPingServer: ok",!0,_):jt(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(W),jt(T,"TestPingServer: error",!1,_)})}function jt(d,_,T,R,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),R(T)}catch{}}function Ui(){this.g=new Ri}function Xr(d){this.i=d.Sb||null,this.h=d.ab||!1}y(Xr,ks),Xr.prototype.g=function(){return new Tn(this.i,this.h)};function Tn(d,_){wt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Tn,wt),n=Tn.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Gn(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oc(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oc(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ls(this):Gn(this),this.readyState==3&&Oc(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Ls(this))},n.Na=function(d){this.g&&(this.response=d,Ls(this))},n.ga=function(){this.g&&Ls(this)};function Ls(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Gn(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=_.next();return d.join(`\r
`)};function Gn(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Dc(d){let _="";return fe(d,function(T,R){_+=R,_+=":",_+=T,_+=`\r
`}),_}function $o(d,_,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=Dc(T),typeof d=="string"?T!=null&&pr(T):We(d,_,T))}function Ye(d){wt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Ye,wt);var Lc=/^https?$/i,Lf=["POST","PUT"];n=Ye.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(J){Vs(this,J);return}if(d=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var W in R)T.set(W,R[W]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())T.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(J=>J.toLowerCase()=="content-type"),W=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Lf,_,void 0)>=0)||R||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,oe]of T)this.g.setRequestHeader(J,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Vs(this,J)}};function Vs(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Ms(d),es(d)}function Ms(d){d.A||(d.A=!0,gt(d,"complete"),gt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,gt(this,"complete"),gt(this,"abort"),es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),Ye.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zr(this):this.Xa())},n.Xa=function(){Zr(this)};function Zr(d){if(d.h&&typeof o<"u"){if(d.v&&Er(d)==4)setTimeout(d.Ca.bind(d),0);else if(gt(d,"readystatechange"),Er(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var R;if(R=J===0){let oe=String(d.D).match(Nc)[1]||null;!oe&&l.self&&l.self.location&&(oe=l.self.location.protocol.slice(0,-1)),R=!Lc.test(oe?oe.toLowerCase():"")}T=R}if(T)gt(d,"complete"),gt(d,"success");else{d.o=6;try{var W=Er(d)>2?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.ca()+"]",Ms(d)}}finally{es(d)}}}}function es(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,_||gt(d,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Er(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Er(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),Ec(_)}};function Vc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(d){const _={};d=(d.g&&Er(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(L(d[R]))continue;var T=Lo(d[R]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const J=_[W]||[];_[W]=J,J.push(T)}ae(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Tr(d,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||_}function Bo(d){this.za=0,this.i=[],this.j=new Ps,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Tr("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Tr("baseRetryDelayMs",5e3,d),this.Za=Tr("retryDelaySeedMs",1e4,d),this.Ta=Tr("forwardChannelMaxRetries",2,d),this.va=Tr("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Mo(d&&d.concurrentRequestLimit),this.Ba=new Ui,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Bo.prototype,n.ka=8,n.I=1,n.connect=function(d,_,T,R){ht(0),this.W=d,this.H=_||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.J=Ll(this,null,this.W),ts(this)};function zo(d){if(Ho(d),d.I==3){var _=d.V++,T=Nn(d.J);if(We(T,"SID",d.M),We(T,"RID",_),We(T,"TYPE","terminate"),Sr(d,T),_=new Pn(d,d.j,_),_.M=2,_.A=Qr(Nn(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!T&&l.Image&&(new Image().src=_.A,T=!0),T||(_.g=jc(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Pi(_)}Bi(d)}function Sn(d){d.g&&($i(d),d.g.cancel(),d.g=null)}function Ho(d){Sn(d),d.v&&(l.clearTimeout(d.v),d.v=null),Wo(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function ts(d){if(!Sl(d.h)&&!d.m){d.m=!0;var _=d.Ea;Y||A(),X||(Y(),X=!0),P.add(_,d),d.D=0}}function Mc(d,_){return Oi(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Cs(p(d.Ea,d,_),Ko(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const W=new Pn(this,this.j,d);let J=this.o;if(this.U&&(J?(J=z(J),Pe(J,this.U)):J=this.U),this.u!==null||this.R||(W.J=J,J=null),this.S)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=Dl(this,W,_),T=Nn(this.J),We(T,"RID",d),We(T,"CVER",22),this.G&&We(T,"X-HTTP-Session-Id",this.G),Sr(this,T),J&&(this.R?_="headers="+pr(Dc(J))+"&"+_:this.u&&$o(T,this.u,J)),jo(this.h,W),this.Ra&&We(T,"TYPE","init"),this.S?(We(T,"$req",_),We(T,"SID","null"),W.U=!0,Kn(W,T,null)):Kn(W,T,_),this.I=2}}else this.I==3&&(d?Fi(this,d):this.i.length==0||Sl(this.h)||Fi(this))};function Fi(d,_){var T;_?T=_.l:T=d.V++;const R=Nn(d.J);We(R,"SID",d.M),We(R,"RID",T),We(R,"AID",d.K),Sr(d,R),d.u&&d.o&&$o(R,d.u,d.o),T=new Pn(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),_&&(d.i=_.G.concat(d.i)),_=Dl(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),jo(d.h,T),Kn(T,R,_)}function Sr(d,_){d.H&&fe(d.H,function(T,R){We(_,R,T)}),d.l&&fe({},function(T,R){We(_,R,T)})}function Dl(d,_,T){T=Math.min(d.i.length,T);const R=d.l?p(d.l.Ka,d.l,d):null;e:{var W=d.i;let Ae=-1;for(;;){const yt=["count="+T];Ae==-1?T>0?(Ae=W[0].g,yt.push("ofs="+Ae)):Ae=0:yt.push("ofs="+Ae);let Ge=!0;for(let Et=0;Et<T;Et++){var J=W[Et].g;const In=W[Et].map;if(J-=Ae,J<0)Ae=Math.max(0,W[Et].g-100),Ge=!1;else try{J="req"+J+"_"||"";try{var oe=In instanceof Map?In:Object.entries(In);for(const[ns,Ir]of oe){let xr=Ir;c(Ir)&&(xr=xs(Ir)),yt.push(J+ns+"="+encodeURIComponent(xr))}}catch(ns){throw yt.push(J+"type="+encodeURIComponent("_badmap")),ns}}catch{R&&R(In)}}if(Ge){oe=yt.join("&");break e}}oe=void 0}return d=d.i.splice(0,T),_.G=d,oe}function Jt(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;Y||A(),X||(Y(),X=!0),P.add(_,d),d.A=0}}function br(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Cs(p(d.Da,d),Ko(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,js(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Cs(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ht(10),Sn(this),js(this))};function $i(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function js(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=Nn(d.na);We(_,"RID","rpc"),We(_,"SID",d.M),We(_,"AID",d.K),We(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&We(_,"TO",d.ia),We(_,"TYPE","xmlhttp"),Sr(d,_),d.u&&d.o&&$o(_,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=Qr(Nn(_)),T.u=null,T.R=!0,El(T,d)}n.Va=function(){this.C!=null&&(this.C=null,Sn(this),br(this),ht(19))};function Wo(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function qo(d,_){var T=null;if(d.g==_){Wo(d),$i(d),d.g=null;var R=2}else if(bl(d.h,_))T=_.G,Di(d.h,_),R=1;else return;if(d.I!=0){if(_.o)if(R==1){T=_.u?_.u.length:0,_=Date.now()-_.F;var W=d.D;R=Rs(),gt(R,new _l(R,T)),ts(d)}else Jt(d);else if(W=_.m,W==3||W==0&&_.X>0||!(R==1&&Mc(d,_)||R==2&&br(d)))switch(T&&T.length>0&&(_=d.h,_.i=_.i.concat(T)),W){case 1:bn(d,5);break;case 4:bn(d,10);break;case 3:bn(d,6);break;default:bn(d,2)}}}function Ko(d,_){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*_}function bn(d,_){if(d.j.info("Error code "+_),_==2){var T=p(d.bb,d),R=d.Ua;const W=!R;R=new mr(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Li(R,"https"),Qr(R),W?_r(R.toString(),T):wr(R.toString(),T)}else ht(2);d.I=0,d.l&&d.l.pa(_),Bi(d),Ho(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Bi(d){if(d.I=0,d.ja=[],d.l){const _=wn(d.h);(_.length!=0||d.i.length!=0)&&(b(d.ja,_),b(d.ja,d.i),d.h.i.length=0,E(d.i),d.i.length=0),d.l.oa()}}function Ll(d,_,T){var R=T instanceof mr?Nn(T):new mr(T);if(R.g!="")_&&(R.g=_+"."+R.g),gr(R,R.u);else{var W=l.location;R=W.protocol,_=_?_+"."+W.hostname:W.hostname,W=+W.port;const J=new mr(null);R&&Li(J,R),_&&(J.g=_),W&&gr(J,W),T&&(J.h=T),R=J}return T=d.G,_=d.wa,T&&_&&We(R,T,_),We(R,"VER",d.ka),Sr(d,R),R}function jc(d,_,T){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new Ye(new Xr({ab:T})):new Ye(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uc(){}n=Uc.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Go(){}Go.prototype.g=function(d,_){return new Ut(d,_)};function Ut(d,_){wt.call(this),this.g=new Bo(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!L(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Us(this)}y(Ut,wt),Ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){zo(this.g)},Ut.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=xs(d),d=T);_.i.push(new Of(_.Ya++,d)),_.I==3&&ts(_)},Ut.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,Ut.Z.N.call(this)};function Fc(d){No.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const T in _){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}y(Fc,No);function $c(){vl.call(this),this.status=1}y($c,vl);function Us(d){this.g=d}y(Us,Uc),Us.prototype.ra=function(){gt(this.g,"a")},Us.prototype.qa=function(d){gt(this.g,new Fc(d))},Us.prototype.pa=function(d){gt(this.g,new $c)},Us.prototype.oa=function(){gt(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,qI=function(){return new Go},WI=function(){return Rs()},HI=qn,Ig={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ns.NO_ERROR=0,Ns.TIMEOUT=8,Ns.HTTP_ERROR=6,cd=Ns,Os.COMPLETE="complete",zI=Os,Tc.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",wt.prototype.listen=wt.prototype.J,mu=Tc,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,BI=Ye}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="12.9.0";function yV(n){ol=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new By("@firebase/firestore");function ba(){return yo.logLevel}function ue(n,...e){if(yo.logLevel<=Ve.DEBUG){const t=e.map(Hy);yo.debug(`Firestore (${ol}): ${n}`,...t)}}function vs(n,...e){if(yo.logLevel<=Ve.ERROR){const t=e.map(Hy);yo.error(`Firestore (${ol}): ${n}`,...t)}}function vo(n,...e){if(yo.logLevel<=Ve.WARN){const t=e.map(Hy);yo.warn(`Firestore (${ol}): ${n}`,...t)}}function Hy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,KI(n,r,t)}function KI(n,e,t){let r=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw vs(r),new Error(r)}function Ke(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||KI(e,s,r)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class _V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wV{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new pi,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},c=h=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new pi)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new GI(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class EV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class TV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new EV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class RE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const r=o=>{o.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ue("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new RE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new RE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=bV(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<t&&(r+=e.charAt(s[o]%62))}return r}}function Me(n,e){return n<e?-1:n>e?1:0}function xg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),o=e.charAt(r);if(s!==o)return Nm(s)===Nm(o)?Me(s,o):Nm(s)?1:-1}return Me(n.length,e.length)}const IV=55296,xV=57343;function Nm(n){const e=n.charCodeAt(0);return e>=IV&&e<=xV}function Ga(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="__name__";class Nr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ie(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Nr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Nr?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const o=Nr.compareSegments(e.get(s),t.get(s));if(o!==0)return o}return Me(e.length,t.length)}static compareSegments(e,t){const r=Nr.isNumericId(e),s=Nr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Nr.extractNumericId(e).compare(Nr.extractNumericId(t)):xg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return fi.fromString(e.substring(4,e.length-2))}}class rt extends Nr{construct(e,t,r){return new rt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new rt(t)}static emptyPath(){return new rt([])}}const kV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends Nr{construct(e,t,r){return new qt(e,t,r)}static isValidIdentifier(e){return kV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===CE}static keyField(){return new qt([CE])}static fromServerFormat(e){const t=[];let r="",s=0;const o=()=>{if(r.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(o(),s++)}if(o(),l)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(t)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(rt.fromString(e))}static fromName(e){return new _e(rt.fromString(e).popFirst(5))}static empty(){return new _e(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(n,e,t){if(!t)throw new ye(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AV(n,e,t,r){if(e===!0&&r===!0)throw new ye(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PE(n){if(!_e.isDocumentKey(n))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NE(n){if(_e.isDocumentKey(n))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YI(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function qy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function Uu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qy(n);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function cc(n,e){if(!YI(n))throw new ye(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ye(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=-62135596800,DE=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*DE);return new st(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<OE)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/DE}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cc(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-OE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:xt("string",st._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new st(0,0))}static max(){return new ke(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=-1;function RV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=ke.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new _i(s,_e.empty(),e)}function CV(n){return new _i(n.readTime,n.key,Fu)}class _i{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new _i(ke.min(),_e.empty(),Fu)}static max(){return new _i(ke.max(),_e.empty(),Fu)}}function PV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function al(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==NV)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Q(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Q?t:Q.resolve(t)}catch(t){return Q.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Q.reject(t)}static resolve(e){return new Q(((t,r)=>{t(e)}))}static reject(e){return new Q(((t,r)=>{r(e)}))}static waitFor(e){return new Q(((t,r)=>{let s=0,o=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++o,l&&o===s&&t()}),(h=>r(h)))})),l=!0,o===s&&t()}))}static or(e){let t=Q.resolve(!1);for(const r of e)t=t.next((s=>s?Q.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,o)=>{r.push(t.call(this,s,o))})),this.waitFor(r)}static mapArray(e,t){return new Q(((r,s)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next((m=>{l[p]=m,++c,c===o&&r(l)}),(m=>s(m)))}}))}static doWhile(e,t){return new Q(((r,s)=>{const o=()=>{e()===!0?t().next((()=>{o()}),s):r()};o()}))}}function DV(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ll(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}cf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky=-1;function hf(n){return n==null}function Cd(n){return n===0&&1/n==-1/0}function LV(n){return typeof n=="number"&&Number.isInteger(n)&&!Cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="";function VV(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=LE(e)),e=MV(n.get(t),e);return LE(e)}function MV(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const o=n.charAt(s);switch(o){case"\0":t+="";break;case QI:t+="";break;default:t+=o}}return t}function LE(n){return n+QI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function XI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,t){this.comparator=e,this.root=t||Wt.EMPTY}insert(e,t){return new ct(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bh(this.root,e,this.comparator,!0)}}class Bh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,t,r,s,o){this.key=e,this.value=t,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=o??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,o){return new Wt(e??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,t,r),null):o===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,r,s,o){return this}insert(e,t,r){return new Wt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ME(this.data.getIterator())}getIteratorFrom(e){return new ME(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nt(this.comparator);return t.data=e,t}}class ME{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new or([])}unionWith(e){let t=new Nt(qt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ga(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ZI("Invalid base64 string: "+o):o}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const jV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wi(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=jV.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ei(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="server_timestamp",tx="__type__",nx="__previous_value__",rx="__local_write_time__";function Gy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[tx])==null?void 0:r.stringValue)===ex}function df(n){const e=n.mapValue.fields[nx];return Gy(e)?df(e):e}function $u(n){const e=wi(n.mapValue.fields[rx].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,t,r,s,o,l,c,h,p,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=m,this.apiKey=y}}const Pd="(default)";class Bu{constructor(e,t){this.projectId=e,this.database=t||Pd}static empty(){return new Bu("","")}get isDefaultDatabase(){return this.database===Pd}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}function FV(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="__type__",$V="__max__",zh={mapValue:{}},ix="__vector__",Nd="value";function Ti(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gy(n)?4:zV(n)?9007199254740991:BV(n)?10:11:Ie(28295,{value:n})}function zr(n,e){if(n===e)return!0;const t=Ti(n);if(t!==Ti(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $u(n).isEqual($u(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=wi(s.timestampValue),c=wi(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,o){return Ei(s.bytesValue).isEqual(Ei(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,o){return _t(s.geoPointValue.latitude)===_t(o.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(o.geoPointValue.longitude)})(n,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return _t(s.integerValue)===_t(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=_t(s.doubleValue),c=_t(o.doubleValue);return l===c?Cd(l)===Cd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Ga(n.arrayValue.values||[],e.arrayValue.values||[],zr);case 10:case 11:return(function(s,o){const l=s.mapValue.fields||{},c=o.mapValue.fields||{};if(VE(l)!==VE(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!zr(l[h],c[h])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function zu(n,e){return(n.values||[]).find((t=>zr(t,e)))!==void 0}function Ja(n,e){if(n===e)return 0;const t=Ti(n),r=Ti(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=_t(o.integerValue||o.doubleValue),h=_t(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return jE(n.timestampValue,e.timestampValue);case 4:return jE($u(n),$u(e));case 5:return xg(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=Ei(o),h=Ei(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const m=Me(c[p],h[p]);if(m!==0)return m}return Me(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Me(_t(o.latitude),_t(l.latitude));return c!==0?c:Me(_t(o.longitude),_t(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UE(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var w,E,b,I;const c=o.fields||{},h=l.fields||{},p=(w=c[Nd])==null?void 0:w.arrayValue,m=(E=h[Nd])==null?void 0:E.arrayValue,y=Me(((b=p==null?void 0:p.values)==null?void 0:b.length)||0,((I=m==null?void 0:m.values)==null?void 0:I.length)||0);return y!==0?y:UE(p,m)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===zh.mapValue&&l===zh.mapValue)return 0;if(o===zh.mapValue)return 1;if(l===zh.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},m=Object.keys(p);h.sort(),m.sort();for(let y=0;y<h.length&&y<m.length;++y){const w=xg(h[y],m[y]);if(w!==0)return w;const E=Ja(c[h[y]],p[m[y]]);if(E!==0)return E}return Me(h.length,m.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function jE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=wi(n),r=wi(e),s=Me(t.seconds,r.seconds);return s!==0?s:Me(t.nanos,r.nanos)}function UE(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const o=Ja(t[s],r[s]);if(o)return o}return Me(t.length,r.length)}function Ya(n){return kg(n)}function kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=wi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ei(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=kg(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const l of r)o?o=!1:s+=",",s+=`${l}:${kg(t.fields[l])}`;return s+"}"})(n.mapValue):Ie(61005,{value:n})}function hd(n){switch(Ti(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=df(n);return e?16+hd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ei(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+hd(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return So(r.fields,((o,l)=>{s+=o.length+hd(l)})),s})(n.mapValue);default:throw Ie(13486,{value:n})}}function Ag(n){return!!n&&"integerValue"in n}function Jy(n){return!!n&&"arrayValue"in n}function FE(n){return!!n&&"nullValue"in n}function $E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function dd(n){return!!n&&"mapValue"in n}function BV(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[sx])==null?void 0:r.stringValue)===ix}function bu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=bu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bu(n.arrayValue.values[t]);return e}return{...n}}function zV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$V}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!dd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(t)}setAll(e){let t=qt.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=bu(l):s.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,s)}delete(e){const t=this.field(e.popLast());dd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];dd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){So(t,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Fn(bu(this.value))}}function ox(n){const e=[];return So(n.fields,((t,r)=>{const s=new qt([t]);if(dd(r)){const o=ox(r.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)})),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,r,s,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new nn(e,0,ke.min(),ke.min(),ke.min(),Fn.empty(),0)}static newFoundDocument(e,t,r,s){return new nn(e,1,t,ke.min(),r,s,0)}static newNoDocument(e,t){return new nn(e,2,t,ke.min(),ke.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,ke.min(),ke.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t){this.position=e,this.inclusive=t}}function BE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const o=e[s],l=n.position[s];if(o.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=Ja(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function zE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!zr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t="asc"){this.field=e,this.dir=t}}function HV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{}class Pt extends ax{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new qV(e,t,r):t==="array-contains"?new JV(e,r):t==="in"?new YV(e,r):t==="not-in"?new QV(e,r):t==="array-contains-any"?new XV(e,r):new Pt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new KV(e,r):new GV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ja(t,this.value)):t!==null&&Ti(this.value)===Ti(t)&&this.matchesComparison(Ja(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hr extends ax{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Hr(e,t)}matches(e){return lx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lx(n){return n.op==="and"}function ux(n){return WV(n)&&lx(n)}function WV(n){for(const e of n.filters)if(e instanceof Hr)return!1;return!0}function Rg(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Ya(n.value);if(ux(n))return n.filters.map((e=>Rg(e))).join(",");{const e=n.filters.map((t=>Rg(t))).join(",");return`${n.op}(${e})`}}function cx(n,e){return n instanceof Pt?(function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&zr(r.value,s.value)})(n,e):n instanceof Hr?(function(r,s){return s instanceof Hr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,l,c)=>o&&cx(l,s.filters[c])),!0):!1})(n,e):void Ie(19439)}function hx(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ya(t.value)}`})(n):n instanceof Hr?(function(t){return t.op.toString()+" {"+t.getFilters().map(hx).join(" ,")+"}"})(n):"Filter"}class qV extends Pt{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class KV extends Pt{constructor(e,t){super(e,"in",t),this.keys=dx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class GV extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=dx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class JV extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jy(t)&&zu(t.arrayValue,this.value)}}class YV extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&zu(this.value.arrayValue,t)}}class QV extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!zu(this.value.arrayValue,t)}}class XV extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>zu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e,t=null,r=[],s=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function HE(n,e=null,t=[],r=[],s=null,o=null,l=null){return new ZV(n,e,t,r,s,o,l)}function Yy(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Rg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Ya(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Ya(r))).join(",")),e.Te=t}return e.Te}function Qy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!HV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!cx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zE(n.startAt,e.startAt)&&zE(n.endAt,e.endAt)}function Cg(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t=null,r=[],s=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function eM(n,e,t,r,s,o,l,c){return new ff(n,e,t,r,s,o,l,c)}function fx(n){return new ff(n)}function WE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function tM(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nM(n){return n.collectionGroup!==null}function Iu(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Nt(qt.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Dd(o,r))})),t.has(qt.keyField().canonicalString())||e.Ie.push(new Dd(qt.keyField(),r))}return e.Ie}function Lr(n){const e=Re(n);return e.Ee||(e.Ee=rM(e,Iu(n))),e.Ee}function rM(n,e){if(n.limitType==="F")return HE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Dd(s.field,o)}));const t=n.endAt?new Od(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Od(n.startAt.position,n.startAt.inclusive):null;return HE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Pg(n,e,t){return new ff(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pf(n,e){return Qy(Lr(n),Lr(e))&&n.limitType===e.limitType}function px(n){return`${Yy(Lr(n))}|lt:${n.limitType}`}function Ia(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>hx(s))).join(", ")}]`),hf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Ya(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Ya(s))).join(",")),`Target(${r})`})(Lr(n))}; limitType=${n.limitType})`}function mf(n,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):_e.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,s){for(const o of Iu(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,h){const p=BE(l,c,h);return l.inclusive?p<=0:p<0})(r.startAt,Iu(r),s)||r.endAt&&!(function(l,c,h){const p=BE(l,c,h);return l.inclusive?p>=0:p>0})(r.endAt,Iu(r),s))})(n,e)}function sM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mx(n){return(e,t)=>{let r=!1;for(const s of Iu(n)){const o=iM(s,e,t);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function iM(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?Ja(h,p):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return XI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=new ct(_e.comparator);function _s(){return oM}const gx=new ct(_e.comparator);function gu(...n){let e=gx;for(const t of n)e=e.insert(t.key,t);return e}function yx(n){let e=gx;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ho(){return xu()}function vx(){return xu()}function xu(){return new bo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const aM=new ct(_e.comparator),lM=new Nt(_e.comparator);function je(...n){let e=lM;for(const t of n)e=e.add(t);return e}const uM=new Nt(Me);function cM(){return uM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cd(e)?"-0":e}}function _x(n){return{integerValue:""+n}}function hM(n,e){return LV(e)?_x(e):Xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this._=void 0}}function dM(n,e,t){return n instanceof Ld?(function(s,o){const l={fields:{[tx]:{stringValue:ex},[rx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Gy(o)&&(o=df(o)),o&&(l.fields[nx]=o),{mapValue:l}})(t,e):n instanceof Hu?Ex(n,e):n instanceof Wu?Tx(n,e):(function(s,o){const l=wx(s,o),c=qE(l)+qE(s.Ae);return Ag(l)&&Ag(s.Ae)?_x(c):Xy(s.serializer,c)})(n,e)}function fM(n,e,t){return n instanceof Hu?Ex(n,e):n instanceof Wu?Tx(n,e):t}function wx(n,e){return n instanceof Vd?(function(r){return Ag(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Ld extends gf{}class Hu extends gf{constructor(e){super(),this.elements=e}}function Ex(n,e){const t=Sx(e);for(const r of n.elements)t.some((s=>zr(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Wu extends gf{constructor(e){super(),this.elements=e}}function Tx(n,e){let t=Sx(e);for(const r of n.elements)t=t.filter((s=>!zr(s,r)));return{arrayValue:{values:t}}}class Vd extends gf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function qE(n){return _t(n.integerValue||n.doubleValue)}function Sx(n){return Jy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function pM(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Hu&&s instanceof Hu||r instanceof Wu&&s instanceof Wu?Ga(r.elements,s.elements,zr):r instanceof Vd&&s instanceof Vd?zr(r.Ae,s.Ae):r instanceof Ld&&s instanceof Ld})(n.transform,e.transform)}class mM{constructor(e,t){this.version=e,this.transformResults=t}}class Vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vr}static exists(e){return new Vr(void 0,e)}static updateTime(e){return new Vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class yf{}function bx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Zy(n.key,Vr.none()):new hc(n.key,n.data,Vr.none());{const t=n.data,r=Fn.empty();let s=new Nt(qt.comparator);for(let o of e.fields)if(!s.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),s=s.add(o)}return new Io(n.key,r,new or(s.toArray()),Vr.none())}}function gM(n,e,t){n instanceof hc?(function(s,o,l){const c=s.value.clone(),h=GE(s.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Io?(function(s,o,l){if(!fd(s.precondition,o))return void o.convertToUnknownDocument(l.version);const c=GE(s.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(Ix(s)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function ku(n,e,t,r){return n instanceof hc?(function(o,l,c,h){if(!fd(o.precondition,l))return c;const p=o.value.clone(),m=JE(o.fieldTransforms,h,l);return p.setAll(m),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Io?(function(o,l,c,h){if(!fd(o.precondition,l))return c;const p=JE(o.fieldTransforms,h,l),m=l.data;return m.setAll(Ix(o)),m.setAll(p),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(o,l,c){return fd(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function yM(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),o=wx(r.transform,s||null);o!=null&&(t===null&&(t=Fn.empty()),t.set(r.field,o))}return t||null}function KE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ga(r,s,((o,l)=>pM(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hc extends yf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Io extends yf{constructor(e,t,r,s,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Ix(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function GE(n,e,t){const r=new Map;Ke(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const o=n[s],l=o.transform,c=e.data.field(o.field);r.set(o.field,fM(l,c,t[s]))}return r}function JE(n,e,t){const r=new Map;for(const s of n){const o=s.transform,l=t.data.field(s.field);r.set(s.field,dM(o,l,e))}return r}class Zy extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vM extends yf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&gM(o,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vx();return this.mutations.forEach((s=>{const o=e.get(s.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(s.key)?null:c;const h=bx(l,c);h!==null&&r.set(s.key,h),l.isValidDocument()||l.convertToNoDocument(ke.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),je())}isEqual(e){return this.batchId===e.batchId&&Ga(this.mutations,e.mutations,((t,r)=>KE(t,r)))&&Ga(this.baseMutations,e.baseMutations,((t,r)=>KE(t,r)))}}class ev{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return aM})();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,r[l].version);return new ev(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,$e;function TM(n){switch(n){case te.OK:return Ie(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function xx(n){if(n===void 0)return vs("GRPC error has no .code"),te.UNKNOWN;switch(n){case St.OK:return te.OK;case St.CANCELLED:return te.CANCELLED;case St.UNKNOWN:return te.UNKNOWN;case St.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case St.INTERNAL:return te.INTERNAL;case St.UNAVAILABLE:return te.UNAVAILABLE;case St.UNAUTHENTICATED:return te.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case St.NOT_FOUND:return te.NOT_FOUND;case St.ALREADY_EXISTS:return te.ALREADY_EXISTS;case St.PERMISSION_DENIED:return te.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case St.ABORTED:return te.ABORTED;case St.OUT_OF_RANGE:return te.OUT_OF_RANGE;case St.UNIMPLEMENTED:return te.UNIMPLEMENTED;case St.DATA_LOSS:return te.DATA_LOSS;default:return Ie(39323,{code:n})}}($e=St||(St={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=new fi([4294967295,4294967295],0);function YE(n){const e=SM().encode(n),t=new $I;return t.update(e),new Uint8Array(t.digest())}function QE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new fi([t,r],0),new fi([s,o],0)]}class tv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yu(`Invalid padding: ${t}`);if(r<0)throw new yu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=fi.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(fi.fromNumber(r)));return s.compare(bM)===1&&(s=new fi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=YE(e),[r,s]=QE(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new tv(o,s,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=YE(e),[r,s]=QE(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,s,o);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,r,s,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new vf(ke.min(),s,new ct(Me),_s(),je())}}class dc{constructor(e,t,r,s,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new dc(r,t,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class kx{constructor(e,t){this.targetId=e,this.Ce=t}}class Ax{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class XE{constructor(){this.ve=0,this.Fe=ZE(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),t=je(),r=je();return this.Fe.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:o})}})),new dc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=ZE()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class IM{constructor(e){this.Ge=e,this.ze=new Map,this.je=_s(),this.He=Hh(),this.Je=Hh(),this.Ze=new ct(Me)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const o=s.target;if(Cg(o))if(r===0){const l=new _e(o.path);this.et(t,l,nn.newNoDocument(l,ke.min()))}else Ke(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=t;let l,c;try{l=Ei(r).toUint8Array()}catch(h){if(h instanceof ZI)return vo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new tv(l,s,o)}catch(h){return vo(h instanceof yu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Cg(c.target)){const h=new _e(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,nn.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.Ke())}}));let r=je();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const s=new vf(e,t,this.Ze,this.je,r);return this.je=_s(),this.He=Hh(),this.Je=Hh(),this.Ze=new ct(Me),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new XE,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Nt(Me),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Nt(Me),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new XE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Hh(){return new ct(_e.comparator)}function ZE(){return new ct(_e.comparator)}const xM={asc:"ASCENDING",desc:"DESCENDING"},kM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AM={and:"AND",or:"OR"};class RM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ng(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function Md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rx(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function CM(n,e){return Md(n,e.toTimestamp())}function Mr(n){return Ke(!!n,49232),ke.fromTimestamp((function(t){const r=wi(t);return new st(r.seconds,r.nanos)})(n))}function nv(n,e){return Og(n,e).canonicalString()}function Og(n,e){const t=(function(s){return new rt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Cx(n){const e=rt.fromString(n);return Ke(Lx(e),10190,{key:e.toString()}),e}function Dg(n,e){return nv(n.databaseId,e.path)}function Om(n,e){const t=Cx(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(Nx(t))}function Px(n,e){return nv(n.databaseId,e)}function PM(n){const e=Cx(n);return e.length===4?rt.emptyPath():Nx(e)}function Lg(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Nx(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function eT(n,e,t){return{name:Dg(n,e),fields:t.value.mapValue.fields}}function NM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ie(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(p,m){return p.useProto3Json?(Ke(m===void 0||typeof m=="string",58123),Gt.fromBase64String(m||"")):(Ke(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Gt.fromUint8Array(m||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const m=p.code===void 0?te.UNKNOWN:xx(p.code);return new ye(m,p.message||"")})(l);t=new Ax(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Om(n,r.document.name),o=Mr(r.document.updateTime),l=r.document.createTime?Mr(r.document.createTime):ke.min(),c=new Fn({mapValue:{fields:r.document.fields}}),h=nn.newFoundDocument(s,o,l,c),p=r.targetIds||[],m=r.removedTargetIds||[];t=new pd(p,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Om(n,r.document),o=r.readTime?Mr(r.readTime):ke.min(),l=nn.newNoDocument(s,o),c=r.removedTargetIds||[];t=new pd([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Om(n,r.document),o=r.removedTargetIds||[];t=new pd([],o,s,null)}else{if(!("filter"in e))return Ie(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,l=new EM(s,o),c=r.targetId;t=new kx(c,l)}}return t}function OM(n,e){let t;if(e instanceof hc)t={update:eT(n,e.key,e.value)};else if(e instanceof Zy)t={delete:Dg(n,e.key)};else if(e instanceof Io)t={update:eT(n,e.key,e.data),updateMask:BM(e.fieldMask)};else{if(!(e instanceof vM))return Ie(16599,{dt:e.type});t={verify:Dg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof Ld)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Hu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Wu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ie(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:CM(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ie(27497)})(n,e.precondition)),t}function DM(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(s,o){let l=s.updateTime?Mr(s.updateTime):Mr(o);return l.isEqual(ke.min())&&(l=Mr(o)),new mM(l,s.transformResults||[])})(t,e)))):[]}function LM(n,e){return{documents:[Px(n,e.path)]}}function VM(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Px(n,s);const o=(function(p){if(p.length!==0)return Dx(Hr.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((m=>(function(w){return{field:xa(w.field),direction:UM(w.dir)}})(m)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Ng(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function MM(n){let e=PM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const m=t.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];t.where&&(o=(function(y){const w=Ox(y);return w instanceof Hr&&ux(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((w=>(function(b){return new Dd(ka(b.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(w)))})(t.orderBy));let c=null;t.limit&&(c=(function(y){let w;return w=typeof y=="object"?y.value:y,hf(w)?null:w})(t.limit));let h=null;t.startAt&&(h=(function(y){const w=!!y.before,E=y.values||[];return new Od(E,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const w=!y.before,E=y.values||[];return new Od(E,w)})(t.endAt)),eM(e,s,l,o,c,"F",h,p)}function jM(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Ox(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ka(t.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ka(t.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ka(t.unaryFilter.field);return Pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ka(t.unaryFilter.field);return Pt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(ka(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Hr.create(t.compositeFilter.filters.map((r=>Ox(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function UM(n){return xM[n]}function FM(n){return kM[n]}function $M(n){return AM[n]}function xa(n){return{fieldPath:n.canonicalString()}}function ka(n){return qt.fromServerFormat(n.fieldPath)}function Dx(n){return n instanceof Pt?(function(t){if(t.op==="=="){if($E(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NAN"}};if(FE(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if($E(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NOT_NAN"}};if(FE(t.value))return{unaryFilter:{field:xa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xa(t.field),op:FM(t.op),value:t.value}}})(n):n instanceof Hr?(function(t){const r=t.getFilters().map((s=>Dx(s)));return r.length===1?r[0]:{compositeFilter:{op:$M(t.op),filters:r}}})(n):Ie(54877,{filter:n})}function BM(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Lx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Vx(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,t,r,s,o=ke.min(),l=ke.min(),c=Gt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new ci(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ci(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.yt=e}}function HM(n){const e=MM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(){this.Sn=new qM}addToCollectionParentIndex(e,t){return this.Sn.add(t),Q.resolve()}getCollectionParents(e,t){return Q.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Q.resolve()}deleteFieldIndex(e,t){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,t){return Q.resolve()}getDocumentsMatchingTarget(e,t){return Q.resolve(null)}getIndexType(e,t){return Q.resolve(0)}getFieldIndexes(e,t){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,t){return Q.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return Q.resolve(_i.min())}updateCollectionGroup(e,t,r){return Q.resolve()}updateIndexEntries(e,t){return Q.resolve()}}class qM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Nt(rt.comparator),o=!s.has(r);return this.index[t]=s.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mx=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(Mx,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Qa(0)}static ar(){return new Qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="LruGarbageCollector",KM=1048576;function rT([n,e],[t,r]){const s=Me(n,t);return s===0?Me(e,r):s}class GM{constructor(e){this.Pr=e,this.buffer=new Nt(rT),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();rT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ue(nT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ll(t)?ue(nT,"Ignoring IndexedDB error during garbage collection: ",t):await al(t)}await this.Ar(3e5)}))}}class YM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Q.resolve(cf.ce);const r=new GM(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(tT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,o,l,c,h,p;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,l=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,c=Date.now(),this.removeTargets(e,r,t)))).next((y=>(o=y,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(p=Date.now(),ba()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-m}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${y} documents in `+(p-h)+`ms
Total Duration: ${p-m}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y}))))}}function QM(n,e){return new YM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.changes=new bo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Q.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&ku(r.mutation,s,or.empty(),st.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,je()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=je()){const s=ho();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((o=>{let l=gu();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=ho();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,je())))}populateOverlays(e,t,r){const s=[];return r.forEach((o=>{t.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,s){let o=_s();const l=xu(),c=(function(){return xu()})();return t.forEach(((h,p)=>{const m=r.get(p.key);s.has(p.key)&&(m===void 0||m.mutation instanceof Io)?o=o.insert(p.key,p):m!==void 0?(l.set(p.key,m.mutation.getFieldMask()),ku(m.mutation,p,m.mutation.getFieldMask(),st.now())):l.set(p.key,or.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((p,m)=>l.set(p,m))),t.forEach(((p,m)=>c.set(p,new ZM(m,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=xu();let s=new ct(((l,c)=>l-c)),o=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let m=r.get(h)||or.empty();m=c.applyToLocalView(p,m),r.set(h,m);const y=(s.get(c.batchId)||je()).add(h);s=s.insert(c.batchId,y)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,m=h.value,y=vx();m.forEach((w=>{if(!o.has(w)){const E=bx(t.get(w),r.get(w));E!==null&&y.set(w,E),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,y))}return Q.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return tM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-o.size):Q.resolve(ho());let c=Fu,h=o;return l.next((p=>Q.forEach(p,((m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?Q.resolve():this.remoteDocumentCache.getEntry(e,m).next((w=>{h=h.insert(m,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,h,p,je()))).next((m=>({batchId:c,changes:yx(m)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let s=gu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const o=t.collectionGroup;let l=gu();return this.indexManager.getCollectionParents(e,o).next((c=>Q.forEach(c,(h=>{const p=(function(y,w){return new ff(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((m=>{m.forEach(((y,w)=>{l=l.insert(y,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,s)))).next((l=>{o.forEach(((h,p)=>{const m=p.getKey();l.get(m)===null&&(l=l.insert(m,nn.newInvalidDocument(m)))}));let c=gu();return l.forEach(((h,p)=>{const m=o.get(h);m!==void 0&&ku(m.mutation,p,or.empty(),st.now()),mf(t,p)&&(c=c.insert(h,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Q.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Mr(s.createTime)}})(t)),Q.resolve()}getNamedQuery(e,t){return Q.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:HM(s.bundledQuery),readTime:Mr(s.readTime)}})(t)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this.overlays=new ct(_e.comparator),this.Lr=new Map}getOverlay(e,t){return Q.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ho();return Q.forEach(t,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,o)=>{this.bt(e,t,o)})),Q.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),Q.resolve()}getOverlaysForCollection(e,t,r){const s=ho(),o=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return Q.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let o=new ct(((p,m)=>p-m));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let m=o.get(p.largestBatchId);m===null&&(m=ho(),o=o.insert(p.largestBatchId,m)),m.set(p.getKey(),p)}}const c=ho(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,m)=>c.set(p,m))),!(c.size()>=s)););return Q.resolve(c)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new wM(t,r));let o=this.Lr.get(t);o===void 0&&(o=je(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(){this.kr=new Nt(Vt.Kr),this.qr=new Nt(Vt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Vt(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Vt(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new rt([])),r=new Vt(t,e),s=new Vt(t,e+1),o=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new rt([])),r=new Vt(t,e),s=new Vt(t,e+1);let o=je();return this.qr.forEachInRange([r,s],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Vt(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Me(e.Hr,t.Hr)}static Ur(e,t){return Me(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Nt(Vt.Kr)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new _M(o,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Jr=this.Jr.add(new Vt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,t){return Q.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),o=s<0?0:s;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Ky:this.Yn-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vt(t,0),s=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,s],(l=>{const c=this.Zr(l.Hr);o.push(c)})),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nt(Me);return t.forEach((s=>{const o=new Vt(s,0),l=new Vt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(c=>{r=r.add(c.Hr)}))})),Q.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let o=r;_e.isDocumentKey(o)||(o=o.child(""));const l=new Vt(new _e(o),0);let c=new Nt(Me);return this.Jr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(h.Hr)),!0)}),l),Q.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ke(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Q.forEach(t.mutations,(s=>{const o=new Vt(s.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Vt(t,0),s=this.Jr.firstAfterOrEqual(r);return Q.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e){this.ti=e,this.docs=(function(){return new ct(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),o=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Q.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let r=_s();return t.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():nn.newInvalidDocument(s))})),Q.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let o=_s();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:m}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||PV(CV(m),r)<=0||(s.has(m.key)||mf(t,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,t,r,s){Ie(9500)}ni(e,t){return Q.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new oj(this)}getSize(e){return Q.resolve(this.size)}}class oj extends XM{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),Q.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e){this.persistence=e,this.ri=new bo((t=>Yy(t)),Qy),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.ii=0,this.si=new rv,this.targetCount=0,this.oi=Qa._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),Q.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Qa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Q.resolve()}updateTargetData(e,t){return this.lr(t),Q.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,t,r){let s=0;const o=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),Q.waitFor(o).next((()=>s))}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return Q.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),Q.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,o=[];return s&&t.forEach((l=>{o.push(s.markPotentiallyOrphaned(e,l))})),Q.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Q.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return Q.resolve(r)}containsKey(e,t){return Q.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t){this._i={},this.overlays={},this.ai=new cf(0),this.ui=!1,this.ui=!0,this.ci=new rj,this.referenceDelegate=e(this),this.li=new aj(this),this.indexManager=new WM,this.remoteDocumentCache=(function(s){return new ij(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new zM(t),this.Pi=new tj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new sj(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const s=new lj(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((o=>this.referenceDelegate.Ii(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,t){return Q.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class lj extends OV{constructor(e){super(),this.currentSequenceNumber=e}}class sv{constructor(e){this.persistence=e,this.Ri=new rv,this.Ai=null}static Vi(e){return new sv(e)}get di(){if(this.Ai)return this.Ai;throw Ie(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),Q.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Q.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.di,(r=>{const s=_e.fromPath(r);return this.mi(e,s).next((o=>{o||t.removeEntry(s,ke.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Q.or([()=>Q.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class jd{constructor(e,t){this.persistence=e,this.fi=new bo((r=>VV(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=QM(this,t)}static Vi(e,t){return new jd(e,t)}Ti(){}Ii(e){return Q.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return Q.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((o=>o?Q.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(r++,o.removeEntry(l,ke.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Q.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Q.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=hd(e.data.value)),t}wr(e,t,r){return Q.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return Q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=je(),s=je();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new iv(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return X2()?8:DV(sn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const o={result:null};return this.gs(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,t,s,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new uj;return this.ys(e,t,l).next((c=>{if(o.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>o.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(ba()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ia(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Q.resolve()):(ba()<=Ve.DEBUG&&ue("QueryEngine","Query:",Ia(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ba()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ia(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Lr(t))):Q.resolve())}gs(e,t){if(WE(t))return Q.resolve(null);let r=Lr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Pg(t,null,"F"),r=Lr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=je(...o);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.bs(t,c);return this.Ss(t,p,l,h.readTime)?this.gs(e,Pg(t,null,"F")):this.Ds(e,p,t,h)}))))})))))}ps(e,t,r,s){return WE(t)||s.isEqual(ke.min())?Q.resolve(null):this.fs.getDocuments(e,r).next((o=>{const l=this.bs(t,o);return this.Ss(t,l,r,s)?Q.resolve(null):(ba()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ia(t)),this.Ds(e,l,t,RV(s,Fu)).next((c=>c)))}))}bs(e,t){let r=new Nt(mx(e));return t.forEach(((s,o)=>{mf(e,o)&&(r=r.add(o))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ys(e,t,r){return ba()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ia(t)),this.fs.getDocumentsMatchingQuery(e,t,_i.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="LocalStore",hj=3e8;class dj{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new ct(Me),this.Fs=new bo((o=>Yy(o)),Qy),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ej(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function fj(n,e,t,r){return new dj(n,e,t,r)}async function Ux(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let h=je();for(const p of s){l.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}for(const p of o){c.push(p.batchId);for(const m of p.mutations)h=h.add(m.key)}return t.localDocuments.getDocuments(r,h).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function pj(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,p,m){const y=p.batch,w=y.keys();let E=Q.resolve();return w.forEach((b=>{E=E.next((()=>m.getEntry(h,b))).next((I=>{const x=p.docVersions.get(b);Ke(x!==null,48541),I.version.compareTo(x)<0&&(y.applyToRemoteDocument(I,p),I.isValidDocument()&&(I.setReadTime(p.commitVersion),m.addEntry(I)))}))})),E.next((()=>c.mutationQueue.removeMutationBatch(h,y)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=je();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function Fx(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function mj(n,e){const t=Re(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((m,y)=>{const w=s.get(y);if(!w)return;c.push(t.li.removeMatchingKeys(o,m.removedDocuments,y).next((()=>t.li.addMatchingKeys(o,m.addedDocuments,y))));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?E=E.withResumeToken(Gt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,r)),s=s.insert(y,E),(function(I,x,D){return I.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=hj?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(w,E,m)&&c.push(t.li.updateTargetData(o,E))}));let h=_s(),p=je();if(e.documentUpdates.forEach((m=>{e.resolvedLimboDocuments.has(m)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,m))})),c.push(gj(o,l,e.documentUpdates).next((m=>{h=m.Bs,p=m.Ls}))),!r.isEqual(ke.min())){const m=t.li.getLastRemoteSnapshotVersion(o).next((y=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(m)}return Q.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,p))).next((()=>h))})).then((o=>(t.vs=s,o)))}function gj(n,e,t){let r=je(),s=je();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=_s();return t.forEach(((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(c)),h.isNoDocument()&&h.version.isEqual(ke.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ue(ov,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)})),{Bs:l,Ls:s}}))}function yj(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ky),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function vj(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((o=>o?(s=o,Q.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new ci(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Vg(n,e,t){const r=Re(n),s=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!ll(l))throw l;ue(ov,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function sT(n,e,t){const r=Re(n);let s=ke.min(),o=je();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,p,m){const y=Re(h),w=y.Fs.get(m);return w!==void 0?Q.resolve(y.vs.get(w)):y.li.getTargetData(p,m)})(r,l,Lr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:ke.min(),t?o:je()))).next((c=>(_j(r,sM(e),c),{documents:c,ks:o})))))}function _j(n,e,t){let r=n.Ms.get(e)||ke.min();t.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Ms.set(e,r)}class iT{constructor(){this.activeTargetIds=cM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wj{constructor(){this.vo=new iT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new iT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="ConnectivityMonitor";class aT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ue(oT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ue(oT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wh=null;function Mg(){return Wh===null?Wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Wh++,"0x"+Wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="RestConnection",Tj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Sj{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Pd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,o){const l=Mg(),c=this.Qo(e,t.toUriEncodedString());ue(Dm,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,s,o);const{host:p}=new URL(c),m=Eo(p);return this.zo(e,c,h,r,m).then((y=>(ue(Dm,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw vo(Dm,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",r),y}))}jo(e,t,r,s,o,l){return this.Wo(e,t,r,s,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ol})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Qo(e,t){const r=Tj[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection",cu=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class Ua extends Sj{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ua.c_){const e=WI();cu(e,HI.STAT_EVENT,(t=>{t.stat===Ig.PROXY?ue(en,"STAT_EVENT: detected buffering proxy"):t.stat===Ig.NOPROXY&&ue(en,"STAT_EVENT: detected no buffering proxy")})),Ua.c_=!0}}zo(e,t,r,s,o){const l=Mg();return new Promise(((c,h)=>{const p=new BI;p.setWithCredentials(!0),p.listenOnce(zI.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case cd.NO_ERROR:const y=p.getResponseJson();ue(en,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case cd.TIMEOUT:ue(en,`RPC '${e}' ${l} timed out`),h(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case cd.HTTP_ERROR:const w=p.getStatus();if(ue(en,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let E=p.getResponseJson();Array.isArray(E)&&(E=E[0]);const b=E==null?void 0:E.error;if(b&&b.status&&b.message){const I=(function(D){const U=D.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(U)>=0?U:te.UNKNOWN})(b.status);h(new ye(I,b.message))}else h(new ye(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ye(te.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ue(en,`RPC '${e}' ${l} completed.`)}}));const m=JSON.stringify(s);ue(en,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",m,r,15)}))}T_(e,t,r){const s=Mg(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=o.join("");ue(en,`Creating RPC '${e}' stream ${s}: ${p}`,c);const m=l.createWebChannel(p,c);this.I_(m);let y=!1,w=!1;const E=new bj({Ho:b=>{w?ue(en,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(y||(ue(en,`Opening RPC '${e}' stream ${s} transport.`),m.open(),y=!0),ue(en,`RPC '${e}' stream ${s} sending:`,b),m.send(b))},Jo:()=>m.close()});return cu(m,mu.EventType.OPEN,(()=>{w||(ue(en,`RPC '${e}' stream ${s} transport opened.`),E.i_())})),cu(m,mu.EventType.CLOSE,(()=>{w||(w=!0,ue(en,`RPC '${e}' stream ${s} transport closed`),E.o_(),this.E_(m))})),cu(m,mu.EventType.ERROR,(b=>{w||(w=!0,vo(en,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),E.o_(new ye(te.UNAVAILABLE,"The operation could not be completed")))})),cu(m,mu.EventType.MESSAGE,(b=>{var I;if(!w){const x=b.data[0];Ke(!!x,16349);const D=x,U=(D==null?void 0:D.error)||((I=D[0])==null?void 0:I.error);if(U){ue(en,`RPC '${e}' stream ${s} received error:`,U);const O=U.status;let K=(function(P){const A=St[P];if(A!==void 0)return xx(A)})(O),Y=U.message;O==="NOT_FOUND"&&Y.includes("database")&&Y.includes("does not exist")&&Y.includes(this.databaseId.database)&&vo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),K===void 0&&(K=te.INTERNAL,Y="Unknown error status: "+O+" with message "+U.message),w=!0,E.o_(new ye(K,Y)),m.close()}else ue(en,`RPC '${e}' stream ${s} received:`,x),E.__(x)}})),Ua.u_(),setTimeout((()=>{E.s_()}),0),E}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return qI()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(n){return new Ua(n)}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return new RM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ua.c_=!1;class $x{constructor(e,t,r=1e3,s=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="PersistentStream";class Bx{constructor(e,t,r,s,o,l,c,h){this.Ci=e,this.b_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $x(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(vs(t.toString()),vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new ye(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ue(lT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ue(lT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class xj extends Bx{constructor(e,t,r,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=NM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ke.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?ke.min():l.readTime?Mr(l.readTime):ke.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Lg(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Cg(h)?{documents:LM(o,h)}:{query:VM(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=Rx(o,l.resumeToken);const p=Ng(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(ke.min())>0){c.readTime=Md(o,l.snapshotVersion.toTimestamp());const p=Ng(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=jM(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Lg(this.serializer),t.removeTarget=e,this.K_(t)}}class kj extends Bx{constructor(e,t,r,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DM(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Lg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>OM(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{}class Rj extends Aj{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,Og(t,r),s,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(te.UNKNOWN,o.toString())}))}jo(e,t,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,Og(t,r),s,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(te.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Cj(n,e,t,r){return new Rj(n,e,t,r)}class Pj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(vs(t),this.aa=!1):ue("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="RemoteStore";class Nj{constructor(e,t,r,s,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{xo(this)&&(ue(_o,"Restarting streams for network reachability change."),await(async function(h){const p=Re(h);p.Ea.add(4),await fc(p),p.Va.set("Unknown"),p.Ea.delete(4),await wf(p)})(this))}))})),this.Va=new Pj(r,s)}}async function wf(n){if(xo(n))for(const e of n.Ra)await e(!0)}async function fc(n){for(const e of n.Ra)await e(!1)}function zx(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cv(t)?uv(t):ul(t).O_()&&lv(t,e))}function av(n,e){const t=Re(n),r=ul(t);t.Ia.delete(e),r.O_()&&Hx(t,e),t.Ia.size===0&&(r.O_()?r.L_():xo(t)&&t.Va.set("Unknown"))}function lv(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ul(n).Z_(e)}function Hx(n,e){n.da.$e(e),ul(n).X_(e)}function uv(n){n.da=new IM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ul(n).start(),n.Va.ua()}function cv(n){return xo(n)&&!ul(n).x_()&&n.Ia.size>0}function xo(n){return Re(n).Ea.size===0}function Wx(n){n.da=void 0}async function Oj(n){n.Va.set("Online")}async function Dj(n){n.Ia.forEach(((e,t)=>{lv(n,e)}))}async function Lj(n,e){Wx(n),cv(n)?(n.Va.ha(e),uv(n)):n.Va.set("Unknown")}async function Vj(n,e,t){if(n.Va.set("Online"),e instanceof Ax&&e.state===2&&e.cause)try{await(async function(s,o){const l=o.cause;for(const c of o.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(r){ue(_o,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ud(n,r)}else if(e instanceof pd?n.da.Xe(e):e instanceof kx?n.da.st(e):n.da.tt(e),!t.isEqual(ke.min()))try{const r=await Fx(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.da.Tt(l);return c.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(p);m&&o.Ia.set(p,m.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,p)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Gt.EMPTY_BYTE_STRING,m.snapshotVersion)),Hx(o,h);const y=new ci(m.target,h,p,m.sequenceNumber);lv(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){ue(_o,"Failed to raise snapshot:",r),await Ud(n,r)}}async function Ud(n,e,t){if(!ll(e))throw e;n.Ea.add(1),await fc(n),n.Va.set("Offline"),t||(t=()=>Fx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ue(_o,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await wf(n)}))}function qx(n,e){return e().catch((t=>Ud(n,t,e)))}async function Ef(n){const e=Re(n),t=Si(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ky;for(;Mj(e);)try{const s=await yj(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,jj(e,s)}catch(s){await Ud(e,s)}Kx(e)&&Gx(e)}function Mj(n){return xo(n)&&n.Ta.length<10}function jj(n,e){n.Ta.push(e);const t=Si(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Kx(n){return xo(n)&&!Si(n).x_()&&n.Ta.length>0}function Gx(n){Si(n).start()}async function Uj(n){Si(n).ra()}async function Fj(n){const e=Si(n);for(const t of n.Ta)e.ea(t.mutations)}async function $j(n,e,t){const r=n.Ta.shift(),s=ev.from(r,e,t);await qx(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ef(n)}async function Bj(n,e){e&&Si(n).Y_&&await(async function(r,s){if((function(l){return TM(l)&&l!==te.ABORTED})(s.code)){const o=r.Ta.shift();Si(r).B_(),await qx(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Ef(r)}})(n,e),Kx(n)&&Gx(n)}async function uT(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ue(_o,"RemoteStore received new credentials");const r=xo(t);t.Ea.add(3),await fc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await wf(t)}async function zj(n,e){const t=Re(n);e?(t.Ea.delete(2),await wf(t)):e||(t.Ea.add(2),await fc(t),t.Va.set("Unknown"))}function ul(n){return n.ma||(n.ma=(function(t,r,s){const o=Re(t);return o.sa(),new xj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Oj.bind(null,n),Yo:Dj.bind(null,n),t_:Lj.bind(null,n),J_:Vj.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),cv(n)?uv(n):n.Va.set("Unknown")):(await n.ma.stop(),Wx(n))}))),n.ma}function Si(n){return n.fa||(n.fa=(function(t,r,s){const o=Re(t);return o.sa(),new kj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Uj.bind(null,n),t_:Bj.bind(null,n),ta:Fj.bind(null,n),na:$j.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Ef(n)):(await n.fa.stop(),n.Ta.length>0&&(ue(_o,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t,r,s,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,o){const l=Date.now()+r,c=new hv(e,t,l,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dv(n,e){if(vs("AsyncQueue",`${e}: ${n}`),ll(n))return new ye(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{static emptySet(e){return new Fa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=gu(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.ga=new ct(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Xa{constructor(e,t,r,s,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Xa(e,t,Fa.emptySet(t),l,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class Wj{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Re(t),o=s.queries;s.queries=hT(),o.forEach(((l,c)=>{for(const h of c.ba)h.onError(r)}))})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function hT(){return new bo((n=>px(n)),pf)}async function qj(n,e){const t=Re(n);let r=3;const s=e.query;let o=t.queries.get(s);o?!o.Sa()&&e.Da()&&(r=2):(o=new Hj,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(s,!0);break;case 1:o.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=dv(l,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&fv(t)}async function Kj(n,e){const t=Re(n),r=e.query;let s=3;const o=t.queries.get(r);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?s=e.Da()?0:1:!o.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Gj(n,e){const t=Re(n);let r=!1;for(const s of e){const o=s.query,l=t.queries.get(o);if(l){for(const c of l.ba)c.Fa(s)&&(r=!0);l.wa=s}}r&&fv(t)}function Jj(n,e,t){const r=Re(n),s=r.queries.get(e);if(s)for(const o of s.ba)o.onError(t);r.queries.delete(e)}function fv(n){n.Ca.forEach((e=>{e.next()}))}var jg,dT;(dT=jg||(jg={})).Ma="default",dT.Cache="cache";class Yj{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.key=e}}class Yx{constructor(e){this.key=e}}class Qj{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=je(),this.mutatedKeys=je(),this.eu=mx(e),this.tu=new Fa(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new cT,s=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((m,y)=>{const w=s.get(m),E=mf(this.query,y)?y:null,b=!!w&&this.mutatedKeys.has(w.key),I=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let x=!1;w&&E?w.data.isEqual(E.data)?b!==I&&(r.track({type:3,doc:E}),x=!0):this.su(w,E)||(r.track({type:2,doc:E}),x=!0,(h&&this.eu(E,h)>0||p&&this.eu(E,p)<0)&&(c=!0)):!w&&E?(r.track({type:0,doc:E}),x=!0):w&&!E&&(r.track({type:1,doc:w}),x=!0,(h||p)&&(c=!0)),x&&(E?(l=l.add(E),o=I?o.add(m):o.delete(m)):(l=l.delete(m),o=o.delete(m)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const m=this.query.limitType==="F"?l.last():l.first();l=l.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{tu:l,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((m,y)=>(function(E,b){const I=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Vt:x})}};return I(E)-I(b)})(m.type,y.type)||this.eu(m.doc,y.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],h=this.Ya.size===0&&this.current&&!s?1:0,p=h!==this.Xa;return this.Xa=h,l.length!==0||p?{snapshot:new Xa(this.query,e.tu,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=je(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new Yx(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new Jx(r))})),t}cu(e){this.Za=e.ks,this.Ya=je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const pv="SyncEngine";class Xj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Zj{constructor(e){this.key=e,this.hu=!1}}class e4{constructor(e,t,r,s,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new bo((c=>px(c)),pf),this.Iu=new Map,this.Eu=new Set,this.Ru=new ct(_e.comparator),this.Au=new Map,this.Vu=new rv,this.du={},this.mu=new Map,this.fu=Qa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function t4(n,e,t=!0){const r=nk(n);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await Qx(r,e,t,!0),s}async function n4(n,e){const t=nk(n);await Qx(t,e,!0,!1)}async function Qx(n,e,t,r){const s=await vj(n.localStore,Lr(e)),o=s.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await r4(n,e,o,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&zx(n.remoteStore,s),c}async function r4(n,e,t,r,s){n.pu=(y,w,E)=>(async function(I,x,D,U){let O=x.view.ru(D);O.Ss&&(O=await sT(I.localStore,x.query,!1).then((({documents:P})=>x.view.ru(P,O))));const K=U&&U.targetChanges.get(x.targetId),Y=U&&U.targetMismatches.get(x.targetId)!=null,X=x.view.applyChanges(O,I.isPrimaryClient,K,Y);return pT(I,x.targetId,X.au),X.snapshot})(n,y,w,E);const o=await sT(n.localStore,e,!0),l=new Qj(e,o.ks),c=l.ru(o.documents),h=dc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(c,n.isPrimaryClient,h);pT(n,t,p.au);const m=new Xj(e,t,l);return n.Tu.set(e,m),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function s4(n,e,t){const r=Re(n),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter((l=>!pf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Vg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&av(r.remoteStore,s.targetId),Ug(r,s.targetId)})).catch(al)):(Ug(r,s.targetId),await Vg(r.localStore,s.targetId,!0))}async function i4(n,e){const t=Re(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),av(t.remoteStore,r.targetId))}async function o4(n,e,t){const r=f4(n);try{const s=await(function(l,c){const h=Re(l),p=st.now(),m=c.reduce(((E,b)=>E.add(b.key)),je());let y,w;return h.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let b=_s(),I=je();return h.xs.getEntries(E,m).next((x=>{b=x,b.forEach(((D,U)=>{U.isValidDocument()||(I=I.add(D))}))})).next((()=>h.localDocuments.getOverlayedDocuments(E,b))).next((x=>{y=x;const D=[];for(const U of c){const O=yM(U,y.get(U.key).overlayedDocument);O!=null&&D.push(new Io(U.key,O,ox(O.value.mapValue),Vr.exists(!0)))}return h.mutationQueue.addMutationBatch(E,p,D,c)})).next((x=>{w=x;const D=x.applyToLocalDocumentSet(y,I);return h.documentOverlayCache.saveOverlays(E,x.batchId,D)}))})).then((()=>({batchId:w.batchId,changes:yx(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,h){let p=l.du[l.currentUser.toKey()];p||(p=new ct(Me)),p=p.insert(c,h),l.du[l.currentUser.toKey()]=p})(r,s.batchId,t),await pc(r,s.changes),await Ef(r.remoteStore)}catch(s){const o=dv(s,"Failed to persist write");t.reject(o)}}async function Xx(n,e){const t=Re(n);try{const r=await mj(t.localStore,e);e.targetChanges.forEach(((s,o)=>{const l=t.Au.get(o);l&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?Ke(l.hu,14607):s.removedDocuments.size>0&&(Ke(l.hu,42227),l.hu=!1))})),await pc(t,r,e)}catch(r){await al(r)}}function fT(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const h=Re(l);h.onlineState=c;let p=!1;h.queries.forEach(((m,y)=>{for(const w of y.ba)w.va(c)&&(p=!0)})),p&&fv(h)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function a4(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),o=s&&s.key;if(o){let l=new ct(_e.comparator);l=l.insert(o,nn.newNoDocument(o,ke.min()));const c=je().add(o),h=new vf(ke.min(),new Map,new ct(Me),l,c);await Xx(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),mv(r)}else await Vg(r.localStore,e,!1).then((()=>Ug(r,e,t))).catch(al)}async function l4(n,e){const t=Re(n),r=e.batch.batchId;try{const s=await pj(t.localStore,e);ek(t,r,null),Zx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await pc(t,s)}catch(s){await al(s)}}async function u4(n,e,t){const r=Re(n);try{const s=await(function(l,c){const h=Re(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let m;return h.mutationQueue.lookupMutationBatch(p,c).next((y=>(Ke(y!==null,37113),m=y.keys(),h.mutationQueue.removeMutationBatch(p,y)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,m,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,m))).next((()=>h.localDocuments.getDocuments(p,m)))}))})(r.localStore,e);ek(r,e,t),Zx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await pc(r,s)}catch(s){await al(s)}}function Zx(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ek(n,e,t){const r=Re(n);let s=r.du[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(t?o.reject(t):o.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Ug(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||tk(n,r)}))}function tk(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(av(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),mv(n))}function pT(n,e,t){for(const r of t)r instanceof Jx?(n.Vu.addReference(r.key,e),c4(n,r)):r instanceof Yx?(ue(pv,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||tk(n,r.key)):Ie(19791,{wu:r})}function c4(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ue(pv,"New document in limbo: "+t),n.Eu.add(r),mv(n))}function mv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(rt.fromString(e)),r=n.fu.next();n.Au.set(r,new Zj(t)),n.Ru=n.Ru.insert(t,r),zx(n.remoteStore,new ci(Lr(fx(t.path)),r,"TargetPurposeLimboResolution",cf.ce))}}async function pc(n,e,t){const r=Re(n),s=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,t).then((p=>{var m;if((p||t)&&r.isPrimaryClient){const y=p?!p.fromCache:(m=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(h.targetId,y?"current":"not-current")}if(p){s.push(p);const y=iv.Es(h.targetId,p);o.push(y)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(h,p){const m=Re(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>Q.forEach(p,(w=>Q.forEach(w.Ts,(E=>m.persistence.referenceDelegate.addReference(y,w.targetId,E))).next((()=>Q.forEach(w.Is,(E=>m.persistence.referenceDelegate.removeReference(y,w.targetId,E)))))))))}catch(y){if(!ll(y))throw y;ue(ov,"Failed to update sequence numbers: "+y)}for(const y of p){const w=y.targetId;if(!y.fromCache){const E=m.vs.get(w),b=E.snapshotVersion,I=E.withLastLimboFreeSnapshotVersion(b);m.vs=m.vs.insert(w,I)}}})(r.localStore,o))}async function h4(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ue(pv,"User change. New user:",e.toKey());const r=await Ux(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new ye(te.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pc(t,r.Ns)}}function d4(n,e){const t=Re(n),r=t.Au.get(e);if(r&&r.hu)return je().add(r.key);{let s=je();const o=t.Iu.get(e);if(!o)return s;for(const l of o){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function nk(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=a4.bind(null,e),e.Pu.J_=Gj.bind(null,e.eventManager),e.Pu.yu=Jj.bind(null,e.eventManager),e}function f4(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u4.bind(null,e),e}class Fd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_f(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return fj(this.persistence,new cj,e.initialUser,this.serializer)}Cu(e){return new jx(sv.Vi,this.serializer)}Du(e){return new wj}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fd.provider={build:()=>new Fd};class p4 extends Fd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof jd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new JM(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new jx((r=>jd.Vi(r,t)),this.serializer)}}class Fg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=h4.bind(null,this.syncEngine),await zj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Wj})()}createDatastore(e){const t=_f(e.databaseInfo.databaseId),r=Ij(e.databaseInfo);return Cj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,o,l,c){return new Nj(r,s,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>fT(this.syncEngine,t,0)),(function(){return aT.v()?new aT:new Ej})())}createSyncEngine(e,t){return(function(s,o,l,c,h,p,m){const y=new e4(s,o,l,c,h,p);return m&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const o=Re(s);ue(_o,"RemoteStore shutting down."),o.Ea.add(5),await fc(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Fg.provider={build:()=>new Fg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class g4{constructor(e,t,r,s,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=tn.UNAUTHENTICATED,this.clientId=Wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ue(bi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ue(bi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=dv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vm(n,e){n.asyncQueue.verifyOperationInProgress(),ue(bi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Ux(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function mT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await y4(n);ue(bi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>uT(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>uT(e.remoteStore,s))),n._onlineComponents=e}async function y4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(bi,"Using user provided OfflineComponentProvider");try{await Vm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;vo("Error using user provided cache. Falling back to memory cache: "+t),await Vm(n,new Fd)}}else ue(bi,"Using default OfflineComponentProvider"),await Vm(n,new p4(void 0));return n._offlineComponents}async function rk(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(bi,"Using user provided OnlineComponentProvider"),await mT(n,n._uninitializedComponentsProvider._online)):(ue(bi,"Using default OnlineComponentProvider"),await mT(n,new Fg))),n._onlineComponents}function v4(n){return rk(n).then((e=>e.syncEngine))}async function _4(n){const e=await rk(n),t=e.eventManager;return t.onListen=t4.bind(null,e.syncEngine),t.onUnlisten=s4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=n4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=i4.bind(null,e.syncEngine),t}function w4(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,p){const m=new m4({next:w=>{m.Nu(),l.enqueueAndForget((()=>Kj(o,y))),w.fromCache&&h.source==="server"?p.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),y=new Yj(c,m,{includeMetadataChanges:!0,Ka:!0});return qj(o,y)})(await _4(n),n.asyncQueue,e,t,r))),r.promise}function E4(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((async()=>o4(await v4(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4="ComponentProvider",gT=new Map;function S4(n,e,t,r,s){return new UV(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,sk(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="firestore.googleapis.com",yT=!0;class vT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ik,this.ssl=yT}else this.host=e.host,this.ssl=e.ssl??yT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KM)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sk(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new vV;switch(r.type){case"firstParty":return new TV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=gT.get(t);r&&(ue(T4,"Removing Datastore"),gT.delete(t),r.terminate())})(this),Promise.resolve()}}function b4(n,e,t,r={}){var p;n=Uu(n,Tf);const s=Eo(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Fy(`https://${c}`),$y("Firestore",!0)),o.host!==ik&&o.host!==c&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:s,emulatorOptions:r};if(!mo(h,l)&&(n._setSettings(h),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=tn.MOCK_USER;else{m=LI(r.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ye(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new tn(w)}n._authCredentials=new _V(new GI(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sf(this.firestore,e,this._query)}}class Kt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(cc(t,Kt._jsonSchema))return new Kt(e,r||null,new _e(rt.fromString(t.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:xt("string",Kt._jsonSchemaVersion),referencePath:xt("string")};class mi extends Sf{constructor(e,t,r){super(e,t,fx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new _e(e))}withConverter(e){return new mi(this.firestore,e,this._path)}}function gv(n,e,...t){if(n=hn(n),JI("collection","path",e),n instanceof Tf){const r=rt.fromString(e,...t);return NE(r),new mi(n,null,r)}{if(!(n instanceof Kt||n instanceof mi))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(e,...t));return NE(r),new mi(n.firestore,null,r)}}function ok(n,e,...t){if(n=hn(n),arguments.length===1&&(e=Wy.newId()),JI("doc","path",e),n instanceof Tf){const r=rt.fromString(e,...t);return PE(r),new Kt(n,null,new _e(r))}{if(!(n instanceof Kt||n instanceof mi))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(rt.fromString(e,...t));return PE(r),new Kt(n.firestore,n instanceof mi?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="AsyncQueue";class wT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $x(this,"async_queue_retry"),this._c=()=>{const r=Lm();r&&ue(_T,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Lm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new pi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ll(e))throw e;ue(_T,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,vs("INTERNAL UNHANDLED ERROR: ",ET(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=hv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&Ie(47125,{Pc:ET(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ET(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class bf extends Tf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new wT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wT(e),this._firestoreClient=void 0,await e}}}function I4(n,e){const t=typeof n=="object"?n:uf(),r=typeof n=="string"?n:Pd,s=lf(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=NI("firestore");o&&b4(s,...o)}return s}function ak(n){if(n._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||x4(n),n._firestoreClient}function x4(n){var r,s,o,l;const e=n._freezeSettings(),t=S4(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new g4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $n(Gt.fromBase64String(e))}catch(t){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cc(e,$n._jsonSchema))return $n.fromBase64String(e.bytes)}}$n._jsonSchemaVersion="firestore/bytes/1.0",$n._jsonSchema={type:xt("string",$n._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(cc(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:xt("string",jr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cc(e,hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new hr(e.vectorValues);throw new ye(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hr._jsonSchemaVersion="firestore/vectorValue/1.0",hr._jsonSchema={type:xt("string",hr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=/^__.*__$/;class A4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Io(e,this.data,this.fieldMask,t,this.fieldTransforms):new hc(e,this.data,t,this.fieldTransforms)}}function ck(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{dataSource:n})}}class yv{constructor(e,t,r,s,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new yv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $d(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(ck(this.dataSource)&&k4.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class R4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_f(e)}createContext(e,t,r,s=!1){return new yv({dataSource:e,methodName:t,targetDoc:r,path:qt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C4(n){const e=n._freezeSettings(),t=_f(n._databaseId);return new R4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function P4(n,e,t,r,s,o={}){const l=n.createContext(o.merge||o.mergeFields?2:0,e,t,s);pk("Data must be an object, but it was:",l,r);const c=dk(r,l);let h,p;if(o.merge)h=new or(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const w=vv(e,y,t);if(!l.contains(w))throw new ye(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);D4(m,w)||m.push(w)}h=new or(m),p=l.fieldTransforms.filter((y=>h.covers(y.field)))}else h=null,p=l.fieldTransforms;return new A4(new Fn(c),h,p)}function hk(n,e){if(fk(n=hn(n)))return pk("Unsupported field value:",e,n),dk(n,e);if(n instanceof uk)return(function(r,s){if(!ck(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const o=[];let l=0;for(const c of r){let h=hk(c,s.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,s){if((r=hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hM(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=st.fromDate(r);return{timestampValue:Md(s.serializer,o)}}if(r instanceof st){const o=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Md(s.serializer,o)}}if(r instanceof jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $n)return{bytesValue:Rx(s.serializer,r._byteString)};if(r instanceof Kt){const o=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof hr)return(function(l,c){const h=l instanceof hr?l.toArray():l;return{mapValue:{fields:{[sx]:{stringValue:ix},[Nd]:{arrayValue:{values:h.map((m=>{if(typeof m!="number")throw c.createError("VectorValues must only contain numeric values.");return Xy(c.serializer,m)}))}}}}}})(r,s);if(Vx(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${qy(r)}`)})(n,e)}function dk(n,e){const t={};return XI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((r,s)=>{const o=hk(s,e.childContextForField(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function fk(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof jr||n instanceof $n||n instanceof Kt||n instanceof uk||n instanceof hr||Vx(n))}function pk(n,e,t){if(!fk(t)||!YI(t)){const r=qy(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function vv(n,e,t){if((e=hn(e))instanceof lk)return e._internalPath;if(typeof e=="string")return O4(n,e);throw $d("Field path arguments must be of type string or ",n,!1,void 0,t)}const N4=new RegExp("[~\\*/\\[\\]]");function O4(n,e,t){if(e.search(N4)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lk(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $d(n,e,t,r,s){const o=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${s}`),h+=")"),new ye(te.INVALID_ARGUMENT,c+n+h)}function D4(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{convertValue(e,t="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ei(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return So(e,((s,o)=>{r[s]=this.convertValue(o,t)})),r}convertVectorValue(e){var r,s,o;const t=(o=(s=(r=e.fields)==null?void 0:r[Nd].arrayValue)==null?void 0:s.values)==null?void 0:o.map((l=>_t(l.doubleValue)));return new hr(t)}convertGeoPoint(e){return new jr(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=df(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){const t=wi(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=rt.fromString(e);Ke(Lx(r),9688,{name:e});const s=new Bu(r.get(1),r.get(3)),o=new _e(r.popFirst(5));return s.isEqual(t)||vs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4 extends L4{constructor(e){super(),this.firestore=e}convertBytes(e){return new $n(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,t)}}const TT="@firebase/firestore",ST="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,r,s,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new M4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(vv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class M4 extends mk{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function U4(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class qh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends mk{constructor(e,t,r,s,o,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new md(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=$a._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:xt("string",$a._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class md extends $a{data(e={}){return super.data(e)}}class Ba{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new qh(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new md(this._firestore,this._userDataWriter,r.key,r,new qh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const h=new md(s._firestore,s._userDataWriter,c.doc.key,c.doc,new qh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new md(s._firestore,s._userDataWriter,c.doc.key,c.doc,new qh(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,m=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),m=l.indexOf(c.doc.key)),{type:F4(c.type),doc:h,oldIndex:p,newIndex:m}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ba._jsonSchemaVersion="firestore/querySnapshot/1.0",Ba._jsonSchema={type:xt("string",Ba._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};function _v(n){n=Uu(n,Sf);const e=Uu(n.firestore,bf),t=ak(e),r=new V4(e);return j4(n._query),w4(t,n._query).then((s=>new Ba(e,r,n,s)))}function $4(n){return gk(Uu(n.firestore,bf),[new Zy(n._key,Vr.none())])}function B4(n,e){const t=Uu(n.firestore,bf),r=ok(n),s=U4(n.converter,e),o=C4(n.firestore);return gk(t,[P4(o,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Vr.exists(!1))]).then((()=>r))}function gk(n,e){const t=ak(n);return E4(t,e)}(function(e,t=!0){yV(To),go(new vi("firestore",((r,{instanceIdentifier:s,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new bf(new wV(r.getProvider("auth-internal")),new SV(l,r.getProvider("app-check-internal")),FV(l,s),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),Dr(TT,ST,e),Dr(TT,ST,"esm2020")})();var z4="firebase",H4="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dr(z4,H4,"app");function yk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W4=yk,vk=new lc("auth","Firebase",yk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=new By("@firebase/auth");function q4(n,...e){Bd.logLevel<=Ve.WARN&&Bd.warn(`Auth (${To}): ${n}`,...e)}function gd(n,...e){Bd.logLevel<=Ve.ERROR&&Bd.error(`Auth (${To}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,...e){throw wv(n,...e)}function Ur(n,...e){return wv(n,...e)}function _k(n,e,t){const r={...W4(),[e]:t};return new lc("auth","Firebase",r).create(e,{appName:n.name})}function gi(n){return _k(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wv(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return vk.create(n,...e)}function be(n,e,...t){if(!n)throw wv(e,...t)}function ds(n){const e="INTERNAL ASSERTION FAILED: "+n;throw gd(e),new Error(e)}function ws(n,e){n||ds(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function K4(){return bT()==="http:"||bT()==="https:"}function bT(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K4()||J2()||"connection"in navigator)?navigator.onLine:!0}function J4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=q2()||Y2()}get(){return G4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n,e){ws(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ds("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ds("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ds("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],X4=new mc(3e4,6e4);function ko(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function xi(n,e,t,r,s={}){return Ek(n,s,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=uc({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...o};return G2()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Eo(n.emulatorConfig.host)&&(p.credentials="include"),wk.fetch()(await Tk(n,n.config.apiHost,t,c),p)})}async function Ek(n,e,t){n._canInitEmulator=!1;const r={...Y4,...e};try{const s=new eU(n),o=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Kh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Kh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Kh(n,"user-disabled",l);const m=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw _k(n,m,p);dr(n,m)}}catch(s){if(s instanceof qr)throw s;dr(n,"network-request-failed",{message:String(s)})}}async function If(n,e,t,r,s={}){const o=await xi(n,e,t,r,s);return"mfaPendingCredential"in o&&dr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function Tk(n,e,t,r){const s=`${e}${t}?${r}`,o=n,l=o.config.emulator?Ev(n.config,s):`${n.config.apiScheme}://${s}`;return Q4.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function Z4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ur(this.auth,"network-request-failed")),X4.get())})}}function Kh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Ur(n,e,r);return s.customData._tokenResponse=t,s}function IT(n){return n!==void 0&&n.enterprise!==void 0}class tU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Z4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nU(n,e){return xi(n,"GET","/v2/recaptchaConfig",ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(n,e){return xi(n,"POST","/v1/accounts:delete",e)}async function zd(n,e){return xi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Au(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sU(n,e=!1){const t=hn(n),r=await t.getIdToken(e),s=Tv(r);be(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Au(Mm(s.auth_time)),issuedAtTime:Au(Mm(s.iat)),expirationTime:Au(Mm(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Mm(n){return Number(n)*1e3}function Tv(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return gd("JWT malformed, contained fewer than 3 sections"),null;try{const s=CI(t);return s?JSON.parse(s):(gd("Failed to decode base64 JWT payload"),null)}catch(s){return gd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function xT(n){const e=Tv(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof qr&&iU(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function iU({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Au(this.lastLoginAt),this.creationTime=Au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(n){var y;const e=n.auth,t=await n.getIdToken(),r=await qu(n,zd(e,{idToken:t}));be(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=(y=s.providerUserInfo)!=null&&y.length?Sk(s.providerUserInfo):[],l=lU(n.providerData,o),c=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Bg(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,m)}async function aU(n){const e=hn(n);await Hd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lU(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Sk(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(n,e){const t=await Ek(n,{},async()=>{const r=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=n.config,l=await Tk(n,s,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&Eo(n.emulatorConfig.host)&&(h.credentials="include"),wk.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function cU(n,e){return xi(n,"POST","/v2/accounts:revokeToken",ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=xT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:o}=await uU(e,t);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:o}=t,l=new za;return r&&(be(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(be(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(be(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return ds("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new oU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Bg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await qu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sU(this,e)}reload(){return aU(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Hd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(gi(this.auth));const e=await this.getIdToken();return await qu(this,rU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,m=t.lastLoginAt??void 0,{uid:y,emailVerified:w,isAnonymous:E,providerData:b,stsTokenManager:I}=t;be(y&&I,e,"internal-error");const x=za.fromJSON(this.name,I);be(typeof y=="string",e,"internal-error"),ei(r,e.name),ei(s,e.name),be(typeof w=="boolean",e,"internal-error"),be(typeof E=="boolean",e,"internal-error"),ei(o,e.name),ei(l,e.name),ei(c,e.name),ei(h,e.name),ei(p,e.name),ei(m,e.name);const D=new ar({uid:y,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:E,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:x,createdAt:p,lastLoginAt:m});return b&&Array.isArray(b)&&(D.providerData=b.map(U=>({...U}))),h&&(D._redirectEventId=h),D}static async _fromIdTokenResponse(e,t,r=!1){const s=new za;s.updateFromServerResponse(t);const o=new ar({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hd(o),o}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];be(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Sk(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new za;c.updateFromIdToken(r);const h=new ar({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Bg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;function fs(n){ws(n instanceof Function,"Expected a class definition");let e=kT.get(n);return e?(ws(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bk.type="NONE";const AT=bk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(n,e,t){return`firebase:${n}:${e}:${t}`}class Ha{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=yd(this.userKey,s.apiKey,o),this.fullPersistenceKey=yd("persistence",s.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zd(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ha(fs(AT),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=s[0]||fs(AT);const l=yd(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const m=await p._get(l);if(m){let y;if(typeof m=="string"){const w=await zd(e,{idToken:m}).catch(()=>{});if(!w)break;y=await ar._fromGetAccountInfoResponse(e,w,m)}else y=ar._fromJSON(e,m);p!==o&&(c=y),o=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ha(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ha(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ak(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ik(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ck(e))return"Blackberry";if(Pk(e))return"Webos";if(xk(e))return"Safari";if((e.includes("chrome/")||kk(e))&&!e.includes("edge/"))return"Chrome";if(Rk(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ik(n=sn()){return/firefox\//i.test(n)}function xk(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kk(n=sn()){return/crios\//i.test(n)}function Ak(n=sn()){return/iemobile/i.test(n)}function Rk(n=sn()){return/android/i.test(n)}function Ck(n=sn()){return/blackberry/i.test(n)}function Pk(n=sn()){return/webos/i.test(n)}function Sv(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hU(n=sn()){var e;return Sv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function dU(){return Q2()&&document.documentMode===10}function Nk(n=sn()){return Sv(n)||Rk(n)||Pk(n)||Ck(n)||/windows phone/i.test(n)||Ak(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n,e=[]){let t;switch(n){case"Browser":t=RT(sn());break;case"Worker":t=`${RT(sn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pU(n,e={}){return xi(n,"GET","/v2/passwordPolicy",ko(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=6;class gU{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??mU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CT(this),this.idTokenSubscription=new CT(this),this.beforeStateQueue=new fU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zd(this,{idToken:e}),r=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(gi(this));const t=e?hn(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pU(this),t=new gU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await cU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,s);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ok(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&q4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cl(n){return hn(n)}class CT{constructor(e){this.auth=e,this.observer=null,this.addObserver=iL(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vU(n){xf=n}function Dk(n){return xf.loadJS(n)}function _U(){return xf.recaptchaEnterpriseScript}function wU(){return xf.gapiScript}function EU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class TU{constructor(){this.enterprise=new SU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class SU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const bU="recaptcha-enterprise",Lk="NO_RECAPTCHA";class IU{constructor(e){this.type=bU,this.auth=cl(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{nU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new tU(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function s(o,l,c){const h=window.grecaptcha;IT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(Lk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TU().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&IT(window.grecaptcha))s(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=_U();h.length!==0&&(h+=c),Dk(h).then(()=>{s(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function PT(n,e,t,r=!1,s=!1){const o=new IU(n);let l;if(s)l=Lk;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function NT(n,e,t,r,s){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await PT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await PT(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xU(n,e){const t=lf(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),o=t.getOptions();if(mo(o,e??{}))return s;dr(s,"already-initialized")}return t.initialize({options:e})}function kU(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function AU(n,e,t){const r=cl(n);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Vk(e),{host:l,port:c}=RU(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},m=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(mo(p,r.config.emulator)&&mo(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Eo(l)?(Fy(`${o}//${l}${h}`),$y("Auth",!0)):CU()}function Vk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function RU(n){const e=Vk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:OT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:OT(l)}}}function OT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function CU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ds("not implemented")}_getIdTokenResponse(e){return ds("not implemented")}_linkToIdToken(e,t){return ds("not implemented")}_getReauthenticationResolver(e){return ds("not implemented")}}async function PU(n,e){return xi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,e){return If(n,"POST","/v1/accounts:signInWithPassword",ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(n,e){return If(n,"POST","/v1/accounts:signInWithEmailLink",ko(n,e))}async function DU(n,e){return If(n,"POST","/v1/accounts:signInWithEmailLink",ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends bv{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ku(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ku(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NT(e,t,"signInWithPassword",NU);case"emailLink":return OU(e,{email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return NT(e,r,"signUpPassword",PU);case"emailLink":return DU(e,{idToken:t,email:this._email,oobCode:this._password});default:dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n,e){return If(n,"POST","/v1/accounts:signInWithIdp",ko(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU="http://localhost";class wo extends bv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=t;if(!r||!s)return null;const l=new wo(r,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Wa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Wa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Wa(e,t)}buildRequest(){const e={requestUri:LU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MU(n){const e=fu(pu(n)).link,t=e?fu(pu(e)).deep_link_id:null,r=fu(pu(n)).deep_link_id;return(r?fu(pu(r)).link:null)||r||t||e||n}class Iv{constructor(e){const t=fu(pu(e)),r=t.apiKey??null,s=t.oobCode??null,o=VU(t.mode??null);be(r&&s&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=MU(e);try{return new Iv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.providerId=hl.PROVIDER_ID}static credential(e,t){return Ku._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Iv.parseLink(t);return be(r,"argument-error"),Ku._fromEmailAndCode(e,r.code,r.tenantId)}}hl.PROVIDER_ID="password";hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Mk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends gc{constructor(){super("facebook.com")}static credential(e){return wo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.FACEBOOK_SIGN_IN_METHOD="facebook.com";si.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends gc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ii.credential(t,r)}catch{return null}}}ii.GOOGLE_SIGN_IN_METHOD="google.com";ii.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends gc{constructor(){super("github.com")}static credential(e){return wo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends gc{constructor(){super("twitter.com")}static credential(e,t){return wo._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ai.credential(t,r)}catch{return null}}}ai.TWITTER_SIGN_IN_METHOD="twitter.com";ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const o=await ar._fromIdTokenResponse(e,r,s),l=DT(r);return new Za({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=DT(r);return new Za({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function DT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd extends qr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Wd(e,t,r,s)}}function jk(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wd._fromErrorAndOperation(n,o,e,r):o})}async function jU(n,e,t=!1){const r=await qu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Za._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(n,e,t=!1){const{auth:r}=n;if(Un(r.app))return Promise.reject(gi(r));const s="reauthenticate";try{const o=await qu(n,jk(r,s,e,n),t);be(o.idToken,r,"internal-error");const l=Tv(o.idToken);be(l,r,"internal-error");const{sub:c}=l;return be(n.uid===c,r,"user-mismatch"),Za._forOperation(n,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&dr(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(n,e,t=!1){if(Un(n.app))return Promise.reject(gi(n));const r="signIn",s=await jk(n,r,e),o=await Za._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(o.user),o}async function FU(n,e){return Uk(cl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $U(n){const e=cl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function BU(n,e,t){return Un(n.app)?Promise.reject(gi(n)):FU(hn(n),hl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$U(n),r})}function zU(n,e,t,r){return hn(n).onIdTokenChanged(e,t,r)}function HU(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}function WU(n,e,t,r){return hn(n).onAuthStateChanged(e,t,r)}function qU(n){return hn(n).signOut()}const qd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(qd,"1"),this.storage.removeItem(qd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KU=1e3,GU=10;class $k extends Fk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);dU()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GU):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},KU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$k.type="LOCAL";const JU=$k;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk extends Fk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Bk.type="SESSION";const zk=Bk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:o}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await YU(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xv(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=xv("",20);s.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(y){const w=y;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function XU(n){Fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function ZU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function eF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function tF(){return Hk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="firebaseLocalStorageDb",nF=1,Kd="firebaseLocalStorage",qk="fbase_key";class yc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Af(n,e){return n.transaction([Kd],e?"readwrite":"readonly").objectStore(Kd)}function rF(){const n=indexedDB.deleteDatabase(Wk);return new yc(n).toPromise()}function zg(){const n=indexedDB.open(Wk,nF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Kd,{keyPath:qk})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Kd)?e(r):(r.close(),await rF(),e(await zg()))})})}async function LT(n,e,t){const r=Af(n,!0).put({[qk]:e,value:t});return new yc(r).toPromise()}async function sF(n,e){const t=Af(n,!1).get(e),r=await new yc(t).toPromise();return r===void 0?null:r.value}function VT(n,e){const t=Af(n,!0).delete(e);return new yc(t).toPromise()}const iF=800,oF=3;class Kk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>oF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(tF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await ZU(),!this.activeServiceWorker)return;this.sender=new QU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||eF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zg();return await LT(e,qd,"1"),await VT(e,qd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>LT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>sF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>VT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Af(s,!1).getAll();return new yc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kk.type="LOCAL";const aF=Kk;new mc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lF(n,e){return e?fs(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends bv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Wa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function uF(n){return Uk(n.auth,new kv(n),n.bypassAuthState)}function cF(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),UU(t,new kv(n),n.bypassAuthState)}async function hF(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),jU(t,new kv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uF;case"linkViaPopup":case"linkViaRedirect":return hF;case"reauthViaPopup":case"reauthViaRedirect":return cF;default:dr(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new mc(2e3,1e4);class Va extends Gk{constructor(e,t,r,s,o){super(e,t,s,o),this.provider=r,this.authWindow=null,this.pollId=null,Va.currentPopupAction&&Va.currentPopupAction.cancel(),Va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=xv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ur(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ur(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ur(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dF.get())};e()}}Va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF="pendingRedirect",vd=new Map;class pF extends Gk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=vd.get(this.auth._key());if(!e){try{const r=await mF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}vd.set(this.auth._key(),e)}return this.bypassAuthState||vd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mF(n,e){const t=vF(e),r=yF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function gF(n,e){vd.set(n._key(),e)}function yF(n){return fs(n._redirectPersistence)}function vF(n){return yd(fF,n.config.apiKey,n.name)}async function _F(n,e,t=!1){if(Un(n.app))return Promise.reject(gi(n));const r=cl(n),s=lF(r,e),l=await new pF(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF=600*1e3;class EF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TF(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Jk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ur(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wF&&this.cachedEventUids.clear(),this.cachedEventUids.has(MT(e))}saveEventToCache(e){this.cachedEventUids.add(MT(e)),this.lastProcessedEventTime=Date.now()}}function MT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Jk({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TF(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF(n,e={}){return xi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IF=/^https?/;async function xF(n){if(n.config.emulator)return;const{authorizedDomains:e}=await SF(n);for(const t of e)try{if(kF(t))return}catch{}dr(n,"unauthorized-domain")}function kF(n){const e=$g(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!IF.test(t))return!1;if(bF.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=new mc(3e4,6e4);function jT(){const n=Fr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function RF(n){return new Promise((e,t)=>{var s,o,l;function r(){jT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jT(),t(Ur(n,"network-request-failed"))},timeout:AF.get()})}if((o=(s=Fr().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=Fr().gapi)!=null&&l.load)r();else{const c=EU("iframefcb");return Fr()[c]=()=>{gapi.load?r():t(Ur(n,"network-request-failed"))},Dk(`${wU()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw _d=null,e})}let _d=null;function CF(n){return _d=_d||RF(n),_d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PF=new mc(5e3,15e3),NF="__/auth/iframe",OF="emulator/auth/iframe",DF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VF(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Ev(e,OF):`https://${n.config.authDomain}/${NF}`,r={apiKey:e.apiKey,appName:n.name,v:To},s=LF.get(n.config.apiHost);s&&(r.eid=s);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${uc(r).slice(1)}`}async function MF(n){const e=await CF(n),t=Fr().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:VF(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DF,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const l=Ur(n,"network-request-failed"),c=Fr().setTimeout(()=>{o(l)},PF.get());function h(){Fr().clearTimeout(c),s(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UF=500,FF=600,$F="_blank",BF="http://localhost";class UT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zF(n,e,t,r=UF,s=FF){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...jF,width:r.toString(),height:s.toString(),top:o,left:l},p=sn().toLowerCase();t&&(c=kk(p)?$F:t),Ik(p)&&(e=e||BF,h.scrollbars="yes");const m=Object.entries(h).reduce((w,[E,b])=>`${w}${E}=${b},`,"");if(hU(p)&&c!=="_self")return HF(e||"",c),new UT(null);const y=window.open(e||"",c,m);be(y,n,"popup-blocked");try{y.focus()}catch{}return new UT(y)}function HF(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="__/auth/handler",qF="emulator/auth/handler",KF=encodeURIComponent("fac");async function FT(n,e,t,r,s,o){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:To,eventId:s};if(e instanceof Mk){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",sL(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))l[m]=y}if(e instanceof gc){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(l.scopes=m.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const h=await n._getAppCheckToken(),p=h?`#${KF}=${encodeURIComponent(h)}`:"";return`${GF(n)}?${uc(c).slice(1)}${p}`}function GF({config:n}){return n.emulator?Ev(n,qF):`https://${n.authDomain}/${WF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="webStorageSupport";class JF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zk,this._completeRedirectFn=_F,this._overrideRedirectResult=gF}async _openPopup(e,t,r,s){var l;ws((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await FT(e,t,r,$g(),s);return zF(e,o,xv())}async _openRedirect(e,t,r,s){await this._originValidation(e);const o=await FT(e,t,r,$g(),s);return XU(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:o}=this.eventManagers[t];return s?Promise.resolve(s):(ws(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await MF(e),r=new EF(e);return t.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(jm,{type:jm},s=>{var l;const o=(l=s==null?void 0:s[0])==null?void 0:l[jm];o!==void 0&&t(!!o),dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xF(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Nk()||xk()||Sv()}}const YF=JF;var $T="@firebase/auth",BT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ZF(n){go(new vi("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;be(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ok(n)},p=new yU(r,s,o,h);return kU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),go(new vi("auth-internal",e=>{const t=cl(e.getProvider("auth").getImmediate());return(r=>new QF(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dr($T,BT,XF(n)),Dr($T,BT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=300,t3=DI("authIdTokenMaxAge")||e3;let zT=null;const n3=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>t3)return;const s=t==null?void 0:t.token;zT!==s&&(zT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function r3(n=uf()){const e=lf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=xU(n,{popupRedirectResolver:YF,persistence:[aF,JU,zk]}),r=DI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=n3(o.toString());HU(t,l,()=>l(t.currentUser)),zU(t,c=>l(c))}}const s=PI("auth");return s&&AU(t,`http://${s}`),t}function s3(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}vU({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const o=Ur("internal-error");o.customData=s,t(o)},r.type="text/javascript",r.charset="UTF-8",s3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ZF("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="firebasestorage.googleapis.com",i3="storageBucket",o3=120*1e3,a3=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki=class Qk extends qr{constructor(e,t,r=0){super(Um(e),`Firebase Storage: ${t} (${Um(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qk.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Um(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var Wr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wr||(Wr={}));function Um(n){return"storage/"+n}function l3(){const n="An unknown error occurred, please check the error payload for server response.";return new ki(Wr.UNKNOWN,n)}function u3(){return new ki(Wr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c3(){return new ki(Wr.CANCELED,"User canceled the upload/download.")}function h3(n){return new ki(Wr.INVALID_URL,"Invalid URL '"+n+"'.")}function d3(n){return new ki(Wr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function HT(n){return new ki(Wr.INVALID_ARGUMENT,n)}function Xk(){return new ki(Wr.APP_DELETED,"The Firebase app was deleted.")}function f3(n){return new ki(Wr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=lr.makeFromUrl(e,t)}catch{return new lr(e,"")}if(r.path==="")return r;throw d3(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),h={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const m="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",E=new RegExp(`^https?://${y}/${m}/b/${s}/o${w}`,"i"),b={bucket:1,path:3},I=t===Yk?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",D=new RegExp(`^https?://${I}/${s}/${x}`,"i"),O=[{regex:c,indices:h,postModify:o},{regex:E,indices:b,postModify:p},{regex:D,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<O.length;K++){const Y=O[K],X=Y.regex.exec(e);if(X){const P=X[Y.indices.bucket];let A=X[Y.indices.path];A||(A=""),r=new lr(P,A),Y.postModify(r);break}}if(r==null)throw h3(e);return r}}class p3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(n,e,t){let r=1,s=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function m(...x){p||(p=!0,e.apply(null,x))}function y(x){s=setTimeout(()=>{s=null,n(E,h())},x)}function w(){o&&clearTimeout(o)}function E(x,...D){if(p){w();return}if(x){w(),m.call(null,x,...D);return}if(h()||l){w(),m.call(null,x,...D);return}r<64&&(r*=2);let O;c===1?(c=2,O=0):O=(r+Math.random())*1e3,y(O)}let b=!1;function I(x){b||(b=!0,w(),!p&&(s!==null?(x||(c=2),clearTimeout(s),y(0)):x||(c=1)))}return y(0),o=setTimeout(()=>{l=!0,I(!0)},t),I}function g3(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n){return n!==void 0}function WT(n,e,t,r){if(r<e)throw HT(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw HT(`Invalid value for '${n}'. Expected ${t} or less.`)}function v3(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Gd;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Gd||(Gd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,t,r,s,o,l,c,h,p,m,y,w=!0,E=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=m,this.connectionFactory_=y,this.retry=w,this.isUsingEmulator=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((b,I)=>{this.resolve_=b,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Gd.NO_ERROR,h=o.getStatus();if(!c||_3(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Gd.ABORT;r(!1,new Gh(!1,null,m));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Gh(p,o))})},t=(r,s)=>{const o=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());y3(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=l3();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(s.canceled){const h=this.appDelete_?Xk():c3();l(h)}else{const h=u3();l(h)}};this.canceled_?t(!1,new Gh(!1,null,!0)):this.backoffId_=m3(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function E3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function T3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function S3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function b3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function I3(n,e,t,r,s,o,l=!0,c=!1){const h=v3(n.urlParams),p=n.url+h,m=Object.assign({},n.headers);return S3(m,e),E3(m,t),T3(m,o),b3(m,r),new w3(p,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function k3(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t){this._service=e,t instanceof lr?this._location=t:this._location=lr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Jd(e,t)}get root(){const e=new lr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k3(this._location.path)}get storage(){return this._service}get parent(){const e=x3(this._location.path);if(e===null)return null;const t=new lr(this._location.bucket,e);return new Jd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw f3(e)}}function qT(n,e){const t=e==null?void 0:e[i3];return t==null?null:lr.makeFromBucketSpec(t,n)}function A3(n,e,t,r={}){n.host=`${e}:${t}`;const s=Eo(e);s&&(Fy(`https://${n.host}/b`),$y("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:LI(o,n.app.options.projectId))}class R3{constructor(e,t,r,s,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=Yk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o3,this._maxUploadRetryTime=a3,this._requests=new Set,s!=null?this._bucket=lr.makeFromBucketSpec(s,this._host):this._bucket=qT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=lr.makeFromBucketSpec(this._url,e):this._bucket=qT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){WT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){WT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jd(this,e)}_makeRequest(e,t,r,s,o=!0){if(this._deleted)return new p3(Xk());{const l=I3(e,this._appId,r,s,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const KT="@firebase/storage",GT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="storage";function C3(n=uf(),e){n=hn(n);const r=lf(n,Zk).getImmediate({identifier:e}),s=NI("storage");return s&&P3(r,...s),r}function P3(n,e,t,r={}){A3(n,e,t,r)}function N3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new R3(t,r,s,e,To)}function O3(){go(new vi(Zk,N3,"PUBLIC").setMultipleInstances(!0)),Dr(KT,GT,""),Dr(KT,GT,"esm2020")}O3();const D3={apiKey:"AIzaSyDoMv7fz9vUbyOXhiNUdgEfIWLgiNe7zRw",authDomain:"infinity-vibe.firebaseapp.com",projectId:"infinity-vibe",storageBucket:"infinity-vibe.firebasestorage.app",messagingSenderId:"52478226145",appId:"1:52478226145:web:3605eaaaa6fb6e371f11a0",measurementId:"G-EGYX83Z6EJ"},Av=oV().length?uf():jI(D3),Yd=I4(Av),Hg=r3(Av);C3(Av);function L3(){const n=nl(),[e,t]=j.useState([]),[r,s]=j.useState(null),[o,l]=j.useState(new Set),[c,h]=j.useState(!0),[p,m]=j.useState(null);j.useEffect(()=>{(async()=>{h(!0),m(null);try{const I=(await _v(gv(Yd,"products"))).docs.map(x=>{const D=x.data();return{id:x.id,...D}});t(I)}catch(b){console.error(b),m("Failed to load featured products.")}finally{h(!1)}})()},[]);const y=e.slice(0,4),w=E=>{const b=new Set(o);b.has(E)?b.delete(E):b.add(E),l(b)};return k.jsx("section",{className:"py-24 bg-black",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[k.jsxs(ve.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[k.jsx("h2",{className:"text-4xl md:text-6xl mb-4 tracking-tight",children:"FEATURED COLLECTION"}),k.jsx("p",{className:"text-gray-400 tracking-wide",children:"Limited drops. Exclusive pieces."})]}),c?k.jsx("div",{className:"py-12 text-center",children:k.jsx("p",{className:"text-gray-500 tracking-widest text-sm",children:"LOADING FEATURED PRODUCTS..."})}):p?k.jsx("div",{className:"py-12 text-center",children:k.jsx("p",{className:"text-red-400 tracking-widest text-sm",children:p})}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:y.map((E,b)=>k.jsxs(ve.div,{className:"group relative overflow-hidden bg-zinc-900 cursor-pointer",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:b*.1},onMouseEnter:()=>s(E.id),onMouseLeave:()=>s(null),children:[E.badge&&k.jsx("div",{className:"absolute top-4 left-4 z-10 bg-white text-black px-3 py-1 text-xs tracking-widest",children:E.badge}),k.jsx(ve.button,{className:"absolute top-4 right-4 z-10 bg-black/50 backdrop-blur-sm p-2 rounded-full",onClick:()=>w(E.id),whileHover:{scale:1.1},whileTap:{scale:.9},children:k.jsx(ly,{size:20,className:`transition-colors ${o.has(E.id)?"fill-white text-white":"text-white"}`})}),k.jsx("div",{className:"aspect-[3/4] overflow-hidden",children:k.jsx(ve.img,{src:E.image,alt:E.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500",animate:{scale:r===E.id?1.1:1},transition:{duration:.6}})}),k.jsxs(ve.div,{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black via-black/95 to-transparent p-6",initial:{opacity:0,y:20},animate:{opacity:r===E.id?1:0,y:r===E.id?0:20},transition:{duration:.3},children:[k.jsx("h3",{className:"text-lg tracking-widest mb-2",children:E.name}),k.jsx("p",{className:"text-2xl mb-3",children:E.price}),k.jsx("button",{onClick:I=>{I.stopPropagation(),w(E.id)},className:"mt-1 w-full border border-white/40 text-[10px] tracking-[0.2em] py-2 hover:bg-white hover:text-black transition-colors",children:o.has(E.id)?"REMOVE FROM WISHLIST":"ADD TO WISHLIST"})]})]},E.id))}),k.jsx(ve.div,{className:"text-center mt-12",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:.4},children:k.jsx(ve.button,{className:"px-12 py-4 border-2 border-white hover:bg-white hover:text-black transition-all duration-300 tracking-widest text-sm",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),children:"VIEW ALL PRODUCTS"})})]})})}function V3(){return k.jsx("section",{className:"py-24 bg-black",children:k.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center",children:[k.jsxs(ve.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[k.jsxs("h2",{className:"text-4xl md:text-6xl mb-6 tracking-tight leading-tight",children:["THIS IS MORE",k.jsx("br",{}),"THAN FASHION."]}),k.jsx("div",{className:"w-20 h-px bg-white mb-8"}),k.jsx("p",{className:"text-lg text-gray-400 mb-6 leading-relaxed",children:"We create pieces that speak louder than words. Every stitch, every fabric choice, every design decision is intentional. This isn't about following the crowdit's about defining your own path."}),k.jsx("p",{className:"text-lg text-gray-400 mb-8 leading-relaxed",children:"Born from the streets, refined in the studio. Infinity Vibe represents the intersection of raw authenticity and premium craftsmanship. We don't compromise on quality, and neither should you."}),k.jsx("blockquote",{className:"border-l-2 border-white pl-6 py-2 italic text-xl mb-8",children:'"Wear who you are."'}),k.jsx(ve.button,{className:"px-10 py-4 bg-white text-black tracking-widest text-sm hover:bg-transparent hover:text-white border-2 border-white transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"OUR STORY"})]}),k.jsxs(ve.div,{className:"relative",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.8},children:[k.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:k.jsx("img",{src:"https://images.unsplash.com/photo-1621423938441-5a7346cb2213?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtaW5pbWFsJTIwZmFzaGlvbiUyMHBob3RvZ3JhcGh5JTIwYnd8ZW58MXx8fHwxNzcxOTk3MTg0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",alt:"Brand Story",className:"w-full h-full object-cover grayscale"})}),k.jsx("div",{className:"absolute -bottom-6 -right-6 w-32 h-32 border-2 border-white/20 -z-10"})]})]})})})}const M3=[{icon:wP,title:"Premium Quality Fabrics",description:"Sourced from the finest materials worldwide"},{icon:VP,title:"Limited Edition Drops",description:"Exclusive pieces, never mass-produced"},{icon:CP,title:"Shipping & Delivery",description:"Coming soon for online orders"},{icon:TP,title:"Returns & Exchanges",description:"Coming soon with flexible options"}];function j3(){return k.jsx("section",{className:"py-24 bg-zinc-950",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[k.jsxs(ve.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[k.jsx("h2",{className:"text-4xl md:text-6xl mb-4 tracking-tight",children:"WHY CHOOSE INFINITY VIBE"}),k.jsx("p",{className:"text-gray-400 tracking-wide",children:"Premium quality meets uncompromising style"})]}),k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:M3.map((n,e)=>k.jsxs(ve.div,{className:"text-center p-8 border border-white/10 hover:border-white/30 transition-all duration-300 group",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.1},whileHover:{y:-10},children:[k.jsx(ve.div,{className:"inline-flex items-center justify-center w-16 h-16 border-2 border-white mb-6 group-hover:bg-white group-hover:text-black transition-all duration-300",whileHover:{rotate:360},transition:{duration:.6},children:k.jsx(n.icon,{size:28,strokeWidth:1.5})}),k.jsx("h3",{className:"text-lg tracking-widest mb-3",children:n.title}),k.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:n.description})]},e))})]})})}const U3=[{id:1,name:"Vijay S.",review:"The fit is insane. Pure quality.",rating:5},{id:2,name:"Tharun kumar K.",review:"Minimal. Bold. Perfect.",rating:5},{id:3,name:"Zubair",review:"Feels luxury. Worth every penny.",rating:5}];function F3(){return k.jsx("section",{className:"py-24 bg-black",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[k.jsxs(ve.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[k.jsx("h2",{className:"text-4xl md:text-6xl mb-4 tracking-tight",children:"WHAT THEY SAY"}),k.jsx("p",{className:"text-gray-400 tracking-wide",children:"Real people. Real experiences."})]}),k.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:U3.map((n,e)=>k.jsxs(ve.div,{className:"bg-zinc-900 p-8 border border-white/10 hover:border-white/30 transition-all duration-300",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:e*.1},whileHover:{y:-5},children:[k.jsx("div",{className:"flex gap-1 mb-6",children:[...Array(n.rating)].map((t,r)=>k.jsx(AP,{size:16,fill:"white",strokeWidth:0},r))}),k.jsxs("p",{className:"text-xl mb-6 italic leading-relaxed",children:['"',n.review,'"']}),k.jsx("p",{className:"text-sm text-gray-400 tracking-widest",children:n.name})]},n.id))}),k.jsx(ve.div,{className:"text-center mt-12",initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:.4},children:k.jsx("p",{className:"text-gray-400 text-sm",children:" 4.9/5 from 2,847 reviews"})})]})})}function $3(){return k.jsxs("section",{className:"relative py-32 bg-black overflow-hidden",children:[k.jsx("div",{className:"absolute inset-0 opacity-30",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E")`}}),k.jsx("div",{className:"relative container mx-auto px-6 lg:px-12 text-center",children:k.jsxs(ve.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.8},children:[k.jsxs("h2",{className:"text-5xl md:text-7xl lg:text-8xl mb-8 tracking-tight leading-tight",children:["READY TO OWN",k.jsx("br",{}),"THE STREET?"]}),k.jsx("p",{className:"text-xl text-gray-400 mb-12 max-w-2xl mx-auto",children:"Join thousands who've already made the switch to premium."}),k.jsx(ve.button,{className:"px-16 py-5 bg-white text-black tracking-widest text-sm hover:bg-transparent hover:text-white border-2 border-white transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:"SHOP NOW"})]})})]})}function B3(){const[n,e]=j.useState(""),t=r=>{r.preventDefault(),console.log("Newsletter signup:",n),e("")};return k.jsx("section",{className:"py-24 bg-zinc-950",children:k.jsx("div",{className:"container mx-auto px-6 lg:px-12",children:k.jsxs(ve.div,{className:"max-w-3xl mx-auto text-center",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[k.jsx("h2",{className:"text-4xl md:text-6xl mb-6 tracking-tight",children:"JOIN THE MOVEMENT."}),k.jsx("p",{className:"text-lg text-gray-400 mb-10",children:"Get exclusive drops before anyone else. Be the first to know about new collections, limited releases, and insider access."}),k.jsxs("form",{onSubmit:t,className:"flex flex-col sm:flex-row gap-4",children:[k.jsx("input",{type:"email",value:n,onChange:r=>e(r.target.value),placeholder:"Enter your email",className:"flex-1 px-6 py-4 bg-black border-2 border-white/20 focus:border-white text-white placeholder:text-gray-500 outline-none transition-all duration-300",required:!0}),k.jsxs(ve.button,{type:"submit",className:"px-10 py-4 bg-white text-black tracking-widest text-sm hover:bg-transparent hover:text-white border-2 border-white transition-all duration-300 flex items-center justify-center gap-2 whitespace-nowrap",whileHover:{scale:1.05},whileTap:{scale:.95},children:["GET EARLY ACCESS",k.jsx(dP,{size:18})]})]}),k.jsx("p",{className:"text-xs text-gray-500 mt-6",children:"We respect your privacy. Unsubscribe at any time."})]})})})}const z3=["https://images.unsplash.com/photo-1635650805015-2fa50682873a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx1cmJhbiUyMHN0cmVldHdlYXIlMjBzdHlsZXxlbnwxfHx8fDE3NzE5NTgwODV8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1645997098653-ed4519760b10?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb25vY2hyb21lJTIwZmFzaGlvbiUyMHBob3RvZ3JhcGh5fGVufDF8fHx8MTc3MTkxNjQ5N3ww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1759933318666-97a7e86c4d76?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxibGFjayUyMGNsb3RoaW5nJTIwYnJhbmQlMjBhZXN0aGV0aWN8ZW58MXx8fHwxNzcxOTk3MTg0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1641137806473-5fe07dd62d63?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx1cmJhbiUyMGZhc2hpb24lMjBlZGl0b3JpYWx8ZW58MXx8fHwxNzcxOTk3MTg0fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/flagged/photo-1553965860-a53f9a484a3b?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdHJlZXR3ZWFyJTIwaW5zdGFncmFtJTIwZmVlZHxlbnwxfHx8fDE3NzE5OTcxODR8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1601071824666-dc1fb5c6169d?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxsdXh1cnklMjBmYXNoaW9uJTIwcHJvZHVjdCUyMGJsYWNrfGVufDF8fHx8MTc3MTk5NzE3OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"];function H3(){return k.jsx("section",{className:"py-24 bg-black",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[k.jsxs(ve.div,{className:"text-center mb-12",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[k.jsx("h2",{className:"text-4xl md:text-6xl mb-6 tracking-tight",children:"#WEARINFINITYVIBE"}),k.jsxs("a",{href:"https://instagram.com/infinity_vibe.1",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[k.jsx(Jm,{size:24}),k.jsx("span",{className:"tracking-widest",children:"FOLLOW US @Infinity_vibe.1"})]})]}),k.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 md:gap-4",children:z3.map((n,e)=>k.jsxs(ve.a,{href:"https://instagram.com/infinity_vibe.1",target:"_blank",rel:"noopener noreferrer",className:"aspect-square overflow-hidden group cursor-pointer relative",initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.4,delay:e*.05},whileHover:{scale:.95},children:[k.jsx("img",{src:n,alt:`Instagram post ${e+1}`,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-500"}),k.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-all duration-300 flex items-center justify-center",children:k.jsx(Jm,{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",size:32})})]},e))})]})})}function W3(){return j.useEffect(()=>{document.documentElement.style.scrollBehavior="smooth"},[]),k.jsxs(k.Fragment,{children:[k.jsx(D2,{}),k.jsx(L3,{}),k.jsx(V3,{}),k.jsx(j3,{}),k.jsx(F3,{}),k.jsx($3,{}),k.jsx(B3,{}),k.jsx(H3,{})]})}function q3(){const[n,e]=j.useState([]),[t,r]=j.useState(null),[s,o]=j.useState(new Set),[l,c]=j.useState("All"),[h,p]=j.useState(!0),[m,y]=j.useState(null);j.useEffect(()=>{window.scrollTo(0,0)},[]),j.useEffect(()=>{(async()=>{p(!0),y(null);try{const D=(await _v(gv(Yd,"products"))).docs.map(U=>{const O=U.data();return{id:U.id,...O}});e(D)}catch(x){console.error(x),y("Failed to load products.")}finally{p(!1)}})()},[]);const w=["All",...Array.from(new Set(n.map(I=>I.category)))],E=l==="All"?n:n.filter(I=>I.category===l),b=I=>{const x=new Set(s);x.has(I)?x.delete(I):x.add(I),o(x)};return k.jsx("div",{className:"bg-black pt-32 pb-24",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[k.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6",children:[k.jsxs(ve.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6},children:[k.jsx("h1",{className:"text-5xl md:text-7xl mb-4 tracking-tighter",children:"ALL COLLECTIONS"}),k.jsx("p",{className:"text-gray-400 tracking-widest text-sm",children:"DISCOVER OUR COMPLETE ARCHIVE"})]}),k.jsx(ve.div,{className:"flex items-center gap-4 overflow-x-auto pb-2 no-scrollbar",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:w.map(I=>k.jsx("button",{onClick:()=>c(I),className:`px-6 py-2 text-xs tracking-widest border transition-all duration-300 whitespace-nowrap ${l===I?"bg-white text-black border-white":"bg-transparent text-white border-white/20 hover:border-white"}`,children:I.toUpperCase()},I))})]}),h?k.jsx("div",{className:"py-24 text-center",children:k.jsx("p",{className:"text-gray-500 tracking-widest",children:"LOADING PRODUCTS..."})}):m?k.jsx("div",{className:"py-24 text-center",children:k.jsx("p",{className:"text-red-400 tracking-widest",children:m})}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12",children:E.map((I,x)=>k.jsxs(ve.div,{className:"group relative overflow-hidden bg-zinc-900 cursor-pointer",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:x*.05},onMouseEnter:()=>r(I.id),onMouseLeave:()=>r(null),children:[I.badge&&k.jsx("div",{className:"absolute top-4 left-4 z-10 bg-white text-black px-3 py-1 text-[10px] tracking-widest font-bold",children:I.badge}),k.jsx(ve.button,{className:"absolute top-4 right-4 z-10 bg-black/50 backdrop-blur-md p-2 rounded-full border border-white/10",onClick:D=>{D.stopPropagation(),b(I.id)},whileHover:{scale:1.1},whileTap:{scale:.9},children:k.jsx(ly,{size:18,className:`transition-colors ${s.has(I.id)?"fill-white text-white":"text-white"}`})}),k.jsx("div",{className:"aspect-[3/4] overflow-hidden bg-zinc-800",children:k.jsx(ve.img,{src:I.image,alt:I.name,className:"w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700",animate:{scale:t===I.id?1.1:1},transition:{duration:.8,ease:"easeOut"}})}),k.jsx(ve.div,{className:"absolute bottom-0 left-0 right-0 p-6 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500",children:k.jsxs("div",{className:"flex flex-col gap-2",children:[k.jsx("div",{className:"flex items-center justify-between",children:k.jsx("span",{className:"text-[10px] tracking-[0.2em] text-gray-400 uppercase",children:I.category})}),k.jsx("h3",{className:"text-lg tracking-widest leading-tight",children:I.name}),k.jsx("p",{className:"text-2xl font-light",children:I.price})]})}),k.jsxs("div",{className:"p-4 bg-zinc-900 group-hover:opacity-0 transition-opacity duration-300",children:[k.jsxs("div",{className:"flex justify-between items-start mb-1",children:[k.jsx("h3",{className:"text-sm tracking-widest truncate mr-2",children:I.name}),k.jsx("span",{className:"text-sm",children:I.price})]}),k.jsx("p",{className:"text-[10px] tracking-widest text-gray-500 uppercase mb-3",children:I.category}),k.jsx("button",{onClick:D=>{D.stopPropagation(),b(I.id)},className:"mt-1 w-full border border-white/30 text-[10px] tracking-[0.2em] py-2 hover:bg-white hover:text-black transition-colors",children:s.has(I.id)?"REMOVE FROM WISHLIST":"ADD TO WISHLIST"})]})]},I.id))}),!h&&!m&&E.length===0&&k.jsx("div",{className:"py-24 text-center",children:k.jsx("p",{className:"text-gray-500 tracking-widest",children:"NO PRODUCTS FOUND IN THIS CATEGORY."})})]})})}function Rf(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function K3(n,e,t,r){function s(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function c(m){try{p(r.next(m))}catch(y){l(y)}}function h(m){try{p(r.throw(m))}catch(y){l(y)}}function p(m){m.done?o(m.value):s(m.value).then(c,h)}p((r=r.apply(n,e||[])).next())})}const G3=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Rv extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class J3 extends Rv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class JT extends Rv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class YT extends Rv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Wg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Wg||(Wg={}));class Y3{constructor(e,{headers:t={},customFetch:r,region:s=Wg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=G3(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return K3(this,arguments,void 0,function*(t,r={}){var s;let o,l;try{const{headers:c,method:h,body:p,signal:m,timeout:y}=r;let w={},{region:E}=r;E||(E=this.region);const b=new URL(`${this.url}/${t}`);E&&E!=="any"&&(w["x-region"]=E,b.searchParams.set("forceFunctionRegion",E));let I;p&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(w["Content-Type"]="application/octet-stream",I=p):typeof p=="string"?(w["Content-Type"]="text/plain",I=p):typeof FormData<"u"&&p instanceof FormData?I=p:(w["Content-Type"]="application/json",I=JSON.stringify(p)):p&&typeof p!="string"&&!(typeof Blob<"u"&&p instanceof Blob)&&!(p instanceof ArrayBuffer)&&!(typeof FormData<"u"&&p instanceof FormData)?I=JSON.stringify(p):I=p;let x=m;y&&(l=new AbortController,o=setTimeout(()=>l.abort(),y),m?(x=l.signal,m.addEventListener("abort",()=>l.abort())):x=l.signal);const D=yield this.fetch(b.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},w),this.headers),c),body:I,signal:x}).catch(Y=>{throw new J3(Y)}),U=D.headers.get("x-relay-error");if(U&&U==="true")throw new JT(D);if(!D.ok)throw new YT(D);let O=((s=D.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),K;return O==="application/json"?K=yield D.json():O==="application/octet-stream"||O==="application/pdf"?K=yield D.blob():O==="text/event-stream"?K=D:O==="multipart/form-data"?K=yield D.formData():K=yield D.text(),{data:K,error:null,response:D}}catch(c){return{data:null,error:c,response:c instanceof YT||c instanceof JT?c.context:void 0}}finally{o&&clearTimeout(o)}})}}var Q3=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},X3=class{constructor(n){var e,t,r;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(r=n.urlLengthLimit)!==null&&r!==void 0?r:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let l=null,c=null,h=null,p=o.status,m=o.statusText;if(o.ok){var y,w;if(t.method!=="HEAD"){var E;const D=await o.text();D===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((E=t.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?c=D:c=JSON.parse(D))}const I=(y=t.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),x=(w=o.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");I&&x&&x.length>1&&(h=parseInt(x[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(c)&&(c.length>1?(l={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,p=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var b;const I=await o.text();try{l=JSON.parse(I),Array.isArray(l)&&o.status===404&&(c=[],l=null,p=200,m="OK")}catch{o.status===404&&I===""?(p=204,m="No Content"):l={message:I}}if(l&&t.isMaybeSingle&&(!(l==null||(b=l.details)===null||b===void 0)&&b.includes("0 rows"))&&(l=null,p=200,m="OK"),l&&t.shouldThrowOnError)throw new Q3(l)}return{error:l,data:c,count:h,status:p,statusText:m}});return this.shouldThrowOnError||(s=s.catch(o=>{var l;let c="",h="",p="";const m=o==null?void 0:o.cause;if(m){var y,w,E,b;const D=(y=m==null?void 0:m.message)!==null&&y!==void 0?y:"",U=(w=m==null?void 0:m.code)!==null&&w!==void 0?w:"";c=`${(E=o==null?void 0:o.name)!==null&&E!==void 0?E:"FetchError"}: ${o==null?void 0:o.message}`,c+=`

Caused by: ${(b=m==null?void 0:m.name)!==null&&b!==void 0?b:"Error"}: ${D}`,U&&(c+=` (${U})`),m!=null&&m.stack&&(c+=`
${m.stack}`)}else{var I;c=(I=o==null?void 0:o.stack)!==null&&I!==void 0?I:""}const x=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(p="",h="Request was aborted (timeout or manual cancellation)",x>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${x} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((m==null?void 0:m.name)==="HeadersOverflowError"||(m==null?void 0:m.code)==="UND_ERR_HEADERS_OVERFLOW")&&(p="",h="HTTP headers exceeded server limits (typically 16KB)",x>this.urlLengthLimit&&(h+=`. Your request URL is ${x} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(l=o==null?void 0:o.name)!==null&&l!==void 0?l:"FetchError"}: ${o==null?void 0:o.message}`,details:c,hint:h,code:p},data:null,count:null,status:0,statusText:""}})),s.then(n,e)}returns(){return this}overrideTypes(){return this}},Z3=class extends X3{select(n){let e=!1;const t=(n??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${n}`),this.url.searchParams.set(o,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var l;const c=[n?"analyze":null,e?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const QT=new RegExp("[,()]");var Aa=class extends Z3{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&QT.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(r=>typeof r=="string"&&QT.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${s}fts${o}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},e6=class{constructor(n,{headers:e={},schema:t,fetch:r,urlLengthLimit:s=8e3}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:r}=e??{},s=t?"HEAD":"GET";let o=!1;const l=(n??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join(""),{url:c,headers:h}=this.cloneRequestState();return c.searchParams.set("select",l),r&&h.append("Prefer",`count=${r}`),new Aa({method:s,url:c,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:e,defaultToNull:t=!0}={}){var r;const s="POST",{url:o,headers:l}=this.cloneRequestState();if(e&&l.append("Prefer",`count=${e}`),t||l.append("Prefer","missing=default"),Array.isArray(n)){const c=n.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(c.length>0){const h=[...new Set(c)].map(p=>`"${p}"`);o.searchParams.set("columns",h.join(","))}}return new Aa({method:s,url:o,headers:l,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){var o;const l="POST",{url:c,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&c.searchParams.set("on_conflict",e),r&&h.append("Prefer",`count=${r}`),s||h.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((m,y)=>m.concat(Object.keys(y)),[]);if(p.length>0){const m=[...new Set(p)].map(y=>`"${y}"`);c.searchParams.set("columns",m.join(","))}}return new Aa({method:l,url:c,headers:h,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:e}={}){var t;const r="PATCH",{url:s,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Aa({method:r,url:s,headers:o,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var e;const t="DELETE",{url:r,headers:s}=this.cloneRequestState();return n&&s.append("Prefer",`count=${n}`),new Aa({method:t,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Gu(n){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gu(n)}function t6(n,e){if(Gu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function n6(n){var e=t6(n,"string");return Gu(e)=="symbol"?e:e+""}function r6(n,e,t){return(e=n6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XT(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Jh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XT(Object(t),!0).forEach(function(r){r6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XT(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var s6=class eA{constructor(e,{headers:t={},schema:r,fetch:s,timeout:o,urlLengthLimit:l=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.urlLengthLimit=l;const c=s??globalThis.fetch;o!==void 0&&o>0?this.fetch=(h,p)=>{const m=new AbortController,y=setTimeout(()=>m.abort(),o),w=p==null?void 0:p.signal;if(w){if(w.aborted)return clearTimeout(y),c(h,p);const E=()=>{clearTimeout(y),m.abort()};return w.addEventListener("abort",E,{once:!0}),c(h,Jh(Jh({},p),{},{signal:m.signal})).finally(()=>{clearTimeout(y),w.removeEventListener("abort",E)})}return c(h,Jh(Jh({},p),{},{signal:m.signal})).finally(()=>clearTimeout(y))}:this.fetch=c}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new e6(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new eA(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:r=!1,get:s=!1,count:o}={}){var l;let c;const h=new URL(`${this.url}/rpc/${e}`);let p;const m=E=>E!==null&&typeof E=="object"&&(!Array.isArray(E)||E.some(m)),y=r&&Object.values(t).some(m);y?(c="POST",p=t):r||s?(c=r?"HEAD":"GET",Object.entries(t).filter(([E,b])=>b!==void 0).map(([E,b])=>[E,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([E,b])=>{h.searchParams.append(E,b)})):(c="POST",p=t);const w=new Headers(this.headers);return y?w.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&w.set("Prefer",`count=${o}`),new Aa({method:c,url:h,headers:w,schema:this.schemaName,body:p,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}};class i6{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const r=t.versions;if(r&&r.node){const s=r.node,o=parseInt(s.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const o6="2.97.0",a6=`realtime-js/${o6}`,l6="1.0.0",tA="2.0.0",ZT=tA,qg=1e4,u6=1e3,c6=100;var ri;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ri||(ri={}));var Rt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Rt||(Rt={}));var ir;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ir||(ir={}));var Kg;(function(n){n.websocket="websocket"})(Kg||(Kg={}));var ao;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(ao||(ao={}));class h6{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,r;const s=(r=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&r!==void 0?r:{},l=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(e,t,r){var s,o;const l=e.topic,c=(s=e.ref)!==null&&s!==void 0?s:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",p=e.payload.event,m=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},y=Object.keys(m).length===0?"":JSON.stringify(m);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(y.length>255)throw new Error(`metadata length ${y.length} exceeds maximum of 255`);const w=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+c.length+l.length+p.length+y.length,E=new ArrayBuffer(this.HEADER_LENGTH+w);let b=new DataView(E),I=0;b.setUint8(I++,this.KINDS.userBroadcastPush),b.setUint8(I++,h.length),b.setUint8(I++,c.length),b.setUint8(I++,l.length),b.setUint8(I++,p.length),b.setUint8(I++,y.length),b.setUint8(I++,t),Array.from(h,D=>b.setUint8(I++,D.charCodeAt(0))),Array.from(c,D=>b.setUint8(I++,D.charCodeAt(0))),Array.from(l,D=>b.setUint8(I++,D.charCodeAt(0))),Array.from(p,D=>b.setUint8(I++,D.charCodeAt(0))),Array.from(y,D=>b.setUint8(I++,D.charCodeAt(0)));var x=new Uint8Array(E.byteLength+r.byteLength);return x.set(new Uint8Array(E),0),x.set(new Uint8Array(r),E.byteLength),x.buffer}decode(e,t){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return t(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,o,l,c,h]=r;return t({join_ref:s,ref:o,topic:l,event:c,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,r){const s=t.getUint8(1),o=t.getUint8(2),l=t.getUint8(3),c=t.getUint8(4);let h=this.HEADER_LENGTH+4;const p=r.decode(e.slice(h,h+s));h=h+s;const m=r.decode(e.slice(h,h+o));h=h+o;const y=r.decode(e.slice(h,h+l));h=h+l;const w=e.slice(h,e.byteLength),E=c===this.JSON_ENCODING?JSON.parse(r.decode(w)):w,b={type:this.BROADCAST_EVENT,event:m,payload:E};return l>0&&(b.meta=JSON.parse(y)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:b}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>t.includes(r)))}}class nA{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Xe||(Xe={}));const eS=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,l)=>(o[l]=d6(l,n,e,s),o),{}):{}},d6=(n,e,t,r)=>{const s=e.find(c=>c.name===n),o=s==null?void 0:s.type,l=t[n];return o&&!r.includes(o)?rA(o,l):Gg(l)},rA=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return g6(e,t)}switch(n){case Xe.bool:return f6(e);case Xe.float4:case Xe.float8:case Xe.int2:case Xe.int4:case Xe.int8:case Xe.numeric:case Xe.oid:return p6(e);case Xe.json:case Xe.jsonb:return m6(e);case Xe.timestamp:return y6(e);case Xe.abstime:case Xe.date:case Xe.daterange:case Xe.int4range:case Xe.int8range:case Xe.money:case Xe.reltime:case Xe.text:case Xe.time:case Xe.timestamptz:case Xe.timetz:case Xe.tsrange:case Xe.tstzrange:return Gg(e);default:return Gg(e)}},Gg=n=>n,f6=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},p6=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},m6=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},g6=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let o;const l=n.slice(1,t);try{o=JSON.parse("["+l+"]")}catch{o=l?l.split(","):[]}return o.map(c=>rA(e,c))}return n},y6=n=>typeof n=="string"?n.replace(" ","T"):n,sA=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Fm{constructor(e,t,r={},s=qg){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tS;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(tS||(tS={}));class Ru{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ru.syncState(this.state,s,o,l),this.pendingDiffs.forEach(h=>{this.state=Ru.syncDiff(this.state,h,o,l)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:l,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ru.syncDiff(this.state,s,o,l),c())}),this.onJoin((s,o,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:l})}),this.onLeave((s,o,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const o=this.cloneDeep(e),l=this.transformState(t),c={},h={};return this.map(o,(p,m)=>{l[p]||(h[p]=m)}),this.map(l,(p,m)=>{const y=o[p];if(y){const w=m.map(x=>x.presence_ref),E=y.map(x=>x.presence_ref),b=m.filter(x=>E.indexOf(x.presence_ref)<0),I=y.filter(x=>w.indexOf(x.presence_ref)<0);b.length>0&&(c[p]=b),I.length>0&&(h[p]=I)}else c[p]=m}),this.syncDiff(o,{joins:c,leaves:h},r,s)}static syncDiff(e,t,r,s){const{joins:o,leaves:l}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(c,h)=>{var p;const m=(p=e[c])!==null&&p!==void 0?p:[];if(e[c]=this.cloneDeep(h),m.length>0){const y=e[c].map(E=>E.presence_ref),w=m.filter(E=>y.indexOf(E.presence_ref)<0);e[c].unshift(...w)}r(c,m,h)}),this.map(l,(c,h)=>{let p=e[c];if(!p)return;const m=h.map(y=>y.presence_ref);p=p.filter(y=>m.indexOf(y.presence_ref)<0),e[c]=p,s(c,p,h),p.length===0&&delete e[c]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nS;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(nS||(nS={}));var Cu;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Cu||(Cu={}));var hs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(hs||(hs={}));class Ma{constructor(e,t={config:{}},r){var s,o;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Rt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Fm(this,ir.join,this.params,this.timeout),this.rejoinTimer=new nA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rt.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ir.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new Ru(this),this.broadcastEndpointURL=sA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Rt.closed){const{config:{broadcast:l,presence:c,private:h}}=this.params,p=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[Cu.PRESENCE]&&this.bindings[Cu.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,y={},w={broadcast:l,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(hs.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(hs.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:E})=>{var b;if(this.socket._isManualToken()||this.socket.setAuth(),E===void 0){e==null||e(hs.SUBSCRIBED);return}else{const I=this.bindings.postgres_changes,x=(b=I==null?void 0:I.length)!==null&&b!==void 0?b:0,D=[];for(let U=0;U<x;U++){const O=I[U],{filter:{event:K,schema:Y,table:X,filter:P}}=O,A=E&&E[U];if(A&&A.event===K&&Ma.isFilterValueEqual(A.schema,Y)&&Ma.isFilterValueEqual(A.table,X)&&Ma.isFilterValueEqual(A.filter,P))D.push(Object.assign(Object.assign({},O),{id:A.id}));else{this.unsubscribe(),this.state=Rt.errored,e==null||e(hs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,e&&e(hs.SUBSCRIBED);return}}).receive("error",E=>{this.state=Rt.errored,e==null||e(hs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===Rt.joined&&e===Cu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(c.status===202)return{success:!0};let h=c.statusText;try{const p=await c.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:l}=e,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var l,c,h;const p=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(c=(l=this.params)===null||l===void 0?void 0:l.config)===null||c===void 0?void 0:c.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),p.receive("ok",()=>o("ok")),p.receive("error",()=>o("error")),p.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Rt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ir.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Fm(this,ir.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rt.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(o),l}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fm(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>c6){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,o;const l=e.toLocaleLowerCase(),{close:c,error:h,leave:p,join:m}=ir;if(r&&[c,h,p,m].indexOf(l)>=0&&r!==this._joinRef())return;let w=this._onMessage(l,t,r);if(t&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(E=>{var b,I,x;return((b=E.filter)===null||b===void 0?void 0:b.event)==="*"||((x=(I=E.filter)===null||I===void 0?void 0:I.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===l}).map(E=>E.callback(w,r)):(o=this.bindings[l])===null||o===void 0||o.filter(E=>{var b,I,x,D,U,O;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in E){const K=E.id,Y=(b=E.filter)===null||b===void 0?void 0:b.event;return K&&((I=t.ids)===null||I===void 0?void 0:I.includes(K))&&(Y==="*"||(Y==null?void 0:Y.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const K=(U=(D=E==null?void 0:E.filter)===null||D===void 0?void 0:D.event)===null||U===void 0?void 0:U.toLocaleLowerCase();return K==="*"||K===((O=t==null?void 0:t.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===l}).map(E=>{if(typeof w=="object"&&"ids"in w){const b=w.data,{schema:I,table:x,commit_timestamp:D,type:U,errors:O}=b;w=Object.assign(Object.assign({},{schema:I,table:x,commit_timestamp:D,eventType:U,new:{},old:{},errors:O}),this._getPayloadRecords(b))}E.callback(w,r)})}_isClosed(){return this.state===Rt.closed}_isJoined(){return this.state===Rt.joined}_isJoining(){return this.state===Rt.joining}_isLeaving(){return this.state===Rt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),o={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ma.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ir.close,{},e)}_onError(e){this._on(ir.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=eS(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=eS(e.columns,e.old_record)),t}}const $m=()=>{},Yh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},v6=[1e3,2e3,5e3,1e4],_6=1e4,w6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E6{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qg,this.transport=null,this.heartbeatIntervalMs=Yh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$m,this.ref=0,this.reconnectTimer=null,this.vsn=ZT,this.logger=$m,this.conn=null,this.sendBuffer=[],this.serializer=new h6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Kg.websocket}`,this.httpEndpoint=sA(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ri.connecting:return ao.Connecting;case ri.open:return ao.Open;case ri.closing:return ao.Closing;default:return ao.Closed}}isConnected(){return this.connectionState()===ao.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Ma(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:r,payload:s,ref:o}=e,l=()=>{this.encode(e,c=>{var h;(h=this.conn)===null||h===void 0||h.send(c)})};this.log("push",`${t} ${r} (${o})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(u6,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Yh.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const p=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",p)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:o,ref:l}=t,c=l?`(${l})`:"",h=o.status||"";this.log("receive",`${h} ${r} ${s} ${c}`.trim(),o),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(s,o,l)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ri.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ri.open||this.conn.readyState===ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ir.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([w6],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,r=!1;if(e)t=e,r=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const o={access_token:t,version:a6};t&&s.updateJoinPayload(o),s.joinedOnce&&s._isJoined()&&s._push(ir.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new nA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Yh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,o,l,c,h,p,m,y,w,E;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:qg,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Yh.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(l=e==null?void 0:e.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(c=e==null?void 0:e.heartbeatCallback)!==null&&c!==void 0?c:$m,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:ZT,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=e==null?void 0:e.reconnectAfterMs)!==null&&p!==void 0?p:(b=>v6[b-1]||_6),this.vsn){case l6:this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:((b,I)=>I(JSON.stringify(b))),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:((b,I)=>I(JSON.parse(b)));break;case tA:this.encode=(w=e==null?void 0:e.encode)!==null&&w!==void 0?w:this.serializer.encode.bind(this.serializer),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ju=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function T6(n,e,t){const r=new URL(e,n);if(t)for(const[s,o]of Object.entries(t))o!==void 0&&r.searchParams.set(s,o);return r.toString()}async function S6(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function b6(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:r,query:s,body:o,headers:l}){const c=T6(n.baseUrl,r,s),h=await S6(n.auth),p=await e(c,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...h,...l},body:o?JSON.stringify(o):void 0}),m=await p.text(),y=(p.headers.get("content-type")||"").includes("application/json"),w=y&&m?JSON.parse(m):m;if(!p.ok){const E=y?w:void 0,b=E==null?void 0:E.error;throw new Ju((b==null?void 0:b.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:b==null?void 0:b.type,icebergCode:b==null?void 0:b.code,details:E})}return{status:p.status,headers:p.headers,data:w}}}}function Qh(n){return n.join("")}var I6=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:Qh(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qh(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qh(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qh(n.namespace)}`}),!0}catch(e){if(e instanceof Ju&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof Ju&&t.status===409)return;throw t}}};function ga(n){return n.join("")}var x6=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ga(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ga(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ga(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ga(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ga(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ga(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof Ju&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof Ju&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},k6=class{constructor(n){var r;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=b6({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new I6(this.client,e),this.tableOps=new x6(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},Cf=class extends Error{constructor(n,e="storage",t,r){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=r}};function Pf(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Xh=class extends Cf{constructor(n,e,t,r="storage"){super(n,r,e,t),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},iA=class extends Cf{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const A6=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),R6=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Jg=n=>{if(Array.isArray(n))return n.map(t=>Jg(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=Jg(r)}),e},C6=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Yu(n){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yu(n)}function P6(n,e){if(Yu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(Yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function N6(n){var e=P6(n,"string");return Yu(e)=="symbol"?e:e+""}function O6(n,e,t){return(e=N6(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function rS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Te(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rS(Object(t),!0).forEach(function(r){O6(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const sS=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},D6=async(n,e,t,r)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n,o=s.status||500;if(typeof s.json=="function")s.json().then(l=>{const c=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||o+"";e(new Xh(sS(l),o,c,r))}).catch(()=>{if(r==="vectors"){const l=o+"";e(new Xh(s.statusText||`HTTP ${o} error`,o,l,r))}else{const l=o+"";e(new Xh(s.statusText||`HTTP ${o} error`,o,l,r))}});else{const l=o+"";e(new Xh(s.statusText||`HTTP ${o} error`,o,l,r))}}else e(new iA(sS(n),n,r))},L6=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||n==="HEAD"||!r?Te(Te({},s),t):(R6(r)?(s.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Te(Te({},s),t))};async function hu(n,e,t,r,s,o,l){return new Promise((c,h)=>{n(t,L6(e,r,s,o)).then(p=>{if(!p.ok)throw p;if(r!=null&&r.noResolveJson)return p;if(l==="vectors"){const m=p.headers.get("content-type");if(p.headers.get("content-length")==="0"||p.status===204)return{};if(!m||!m.includes("application/json"))return{}}return p.json()}).then(p=>c(p)).catch(p=>D6(p,h,r,l))})}function oA(n="storage"){return{get:async(e,t,r,s)=>hu(e,"GET",t,r,s,void 0,n),post:async(e,t,r,s,o)=>hu(e,"POST",t,s,o,r,n),put:async(e,t,r,s,o)=>hu(e,"PUT",t,s,o,r,n),head:async(e,t,r,s)=>hu(e,"HEAD",t,Te(Te({},r),{},{noResolveJson:!0}),s,void 0,n),remove:async(e,t,r,s,o)=>hu(e,"DELETE",t,s,o,r,n)}}const V6=oA("storage"),{get:Qu,post:sr,put:Yg,head:M6,remove:Cv}=V6,Cn=oA("vectors");var dl=class{constructor(n,e={},t,r="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=A6(t),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=Te(Te({},this.headers),{},{[n]:e}),this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Pf(t))return{data:null,error:t};throw t}}},j6=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Pf(e))return{data:null,error:e};throw e}}};let aA;aA=Symbol.toStringTag;var U6=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[aA]="BlobDownloadBuilder",this.promise=null}asStream(){return new j6(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Pf(e))return{data:null,error:e};throw e}}};const F6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var $6=class extends dl{constructor(n,e={},t,r){super(n,e,r,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,r){var s=this;return s.handleOperation(async()=>{let o;const l=Te(Te({},iS),r);let c=Te(Te({},s.headers),n==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&t instanceof Blob?(o=new FormData,o.append("cacheControl",l.cacheControl),h&&o.append("metadata",s.encodeMetadata(h)),o.append("",t)):typeof FormData<"u"&&t instanceof FormData?(o=t,o.has("cacheControl")||o.append("cacheControl",l.cacheControl),h&&!o.has("metadata")&&o.append("metadata",s.encodeMetadata(h))):(o=t,c["cache-control"]=`max-age=${l.cacheControl}`,c["content-type"]=l.contentType,h&&(c["x-metadata"]=s.toBase64(s.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!l.duplex&&(l.duplex="half")),r!=null&&r.headers&&(c=Te(Te({},c),r.headers));const p=s._removeEmptyFolders(e),m=s._getFinalPath(p),y=await(n=="PUT"?Yg:sr)(s.fetch,`${s.url}/object/${m}`,o,Te({headers:c},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{path:p,id:y.Id,fullPath:y.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,r){var s=this;const o=s._removeEmptyFolders(n),l=s._getFinalPath(o),c=new URL(s.url+`/object/upload/sign/${l}`);return c.searchParams.set("token",e),s.handleOperation(async()=>{let h;const p=Te({upsert:iS.upsert},r),m=Te(Te({},s.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",p.cacheControl)):(h=t,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType),{path:o,fullPath:(await Yg(s.fetch,c.toString(),h,{headers:m})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let r=t._getFinalPath(n);const s=Te({},t.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const o=await sr(t.fetch,`${t.url}/object/upload/sign/${r}`,{},{headers:s}),l=new URL(t.url+o.url),c=l.searchParams.get("token");if(!c)throw new Cf("No token returned by API");return{signedUrl:l.toString(),path:n,token:c}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var r=this;return r.handleOperation(async()=>await sr(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers}))}async copy(n,e,t){var r=this;return r.handleOperation(async()=>({path:(await sr(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(n,e,t){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(n),o=await sr(r.fetch,`${r.url}/object/sign/${s}`,Te({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:r.headers});const l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${l}`)}})}async createSignedUrls(n,e,t){var r=this;return r.handleOperation(async()=>{const s=await sr(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:n},{headers:r.headers}),o=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return s.map(l=>Te(Te({},l),{},{signedUrl:l.signedURL?encodeURI(`${r.url}${l.signedURL}${o}`):null}))})}download(n,e,t){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=s?`?${s}`:"",l=this._getFinalPath(n),c=()=>Qu(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0},t);return new U6(c,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>Jg(await Qu(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await M6(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Pf(r)&&r instanceof iA){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,e){const t=this._getFinalPath(n),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${c}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await Cv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var r=this;return r.handleOperation(async()=>{const s=Te(Te(Te({},F6),e),{},{prefix:n||""});return await sr(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const r=Te({},n);return await sr(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,r,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const B6="2.97.0",vc={"X-Client-Info":`storage-js/${B6}`};var z6=class extends dl{constructor(n,e={},t,r){const s=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const o=s.href.replace(/\/$/,""),l=Te(Te({},vc),e);super(o,l,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await Qu(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Qu(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await sr(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await Yg(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await sr(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Cv(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},H6=class extends dl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},vc),e);super(r,s,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await sr(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const r=t.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await Qu(e.fetch,s,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Cv(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!C6(n))throw new Cf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new k6({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(t,{get(s,o){const l=s[o];return typeof l!="function"?l:async(...c)=>{try{return{data:await l.apply(s,c),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}},W6=class extends dl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},vc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await Cn.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await Cn.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},q6=class extends dl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},vc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},K6=class extends dl{constructor(n,e={},t){const r=n.replace(/\/$/,""),s=Te(Te({},vc),{},{"Content-Type":"application/json"},e);super(r,s,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await Cn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},G6=class extends K6{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new J6(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},J6=class extends W6{constructor(n,e,t,r){super(n,e,r),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new Y6(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},Y6=class extends q6{constructor(n,e,t,r,s){super(n,e,s),this.vectorBucketName=t,this.indexName=r}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,Te(Te({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},Q6=class extends z6{constructor(n,e={},t,r){super(n,e,t,r)}from(n){return new $6(this.url,this.headers,n,this.fetch)}get vectors(){return new G6(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new H6(this.url+"/iceberg",this.headers,this.fetch)}};const lA="2.97.0",Ra=30*1e3,Qg=3,Bm=Qg*Ra,X6="http://localhost:9999",Z6="supabase.auth.token",e$={"X-Client-Info":`gotrue-js/${lA}`},Xg="X-Supabase-Api-Version",uA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},t$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,n$=600*1e3;class Xu extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ge(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class r$ extends Xu{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function s$(n){return ge(n)&&n.name==="AuthApiError"}class lo extends Xu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ss extends Xu{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Rn extends Ss{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zm(n){return ge(n)&&n.name==="AuthSessionMissingError"}class ya extends Ss{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zh extends Ss{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ed extends Ss{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i$(n){return ge(n)&&n.name==="AuthImplicitGrantRedirectError"}class oS extends Ss{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class o$ extends Ss{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Zg extends Ss{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Hm(n){return ge(n)&&n.name==="AuthRetryableFetchError"}class aS extends Ss{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class ey extends Ss{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lS=` 	
\r=`.split(""),a$=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<lS.length;e+=1)n[lS[e].charCodeAt(0)]=-2;for(let e=0;e<Qd.length;e+=1)n[Qd[e].charCodeAt(0)]=e;return n})();function uS(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Qd[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Qd[r]),e.queuedBits-=6}}function cA(n,e,t){const r=a$[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function cS(n){const e=[],t=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=l=>{c$(l,r,t)};for(let l=0;l<n.length;l+=1)cA(n.charCodeAt(l),s,o);return e.join("")}function l$(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function u$(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}l$(r,e)}}function c$(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function qa(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)cA(n.charCodeAt(s),t,r);return new Uint8Array(e)}function h$(n){const e=[];return u$(n,t=>e.push(t)),new Uint8Array(e)}function fo(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>uS(s,t,r)),uS(null,t,r),e.join("")}function d$(n){return Math.round(Date.now()/1e3)+n}function f$(){return Symbol("auth-callback")}const zt=()=>typeof window<"u"&&typeof document<"u",no={tested:!1,writable:!1},hA=()=>{if(!zt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(no.tested)return no.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),no.tested=!0,no.writable=!0}catch{no.tested=!0,no.writable=!1}return no.writable};function p$(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const dA=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),m$=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ca=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ro=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Bt=async(n,e)=>{await n.removeItem(e)};class Nf{constructor(){this.promise=new Nf.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Nf.promiseConstructor=Promise;function td(n){const e=n.split(".");if(e.length!==3)throw new ey("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!t$.test(e[r]))throw new ey("JWT not in base64url format");return{header:JSON.parse(cS(e[0])),payload:JSON.parse(cS(e[1])),signature:qa(e[2]),raw:{header:e[0],payload:e[1]}}}async function g$(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function y$(n,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const l=await n(o);if(!e(o,null,l)){r(l);return}}catch(l){if(!e(o,l)){s(l);return}}})()})}function v$(n){return("0"+n.toString(16)).substr(-2)}function _$(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let o=0;o<56;o++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,v$).join("")}async function w$(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function E$(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await w$(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function va(n,e,t=!1){const r=_$();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await Ca(n,`${e}-code-verifier`,s);const o=await E$(r);return[o,r===o?"plain":"s256"]}const T$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function S$(n){const e=n.headers.get(Xg);if(!e||!e.match(T$))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function b$(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function I$(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const x$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _a(n){if(!x$.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Wm(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k$(n,e){return new Proxy(n,{get:(t,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,r,s)}})}function hS(n){return JSON.parse(JSON.stringify(n))}const oo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),A$=[502,503,504];async function dS(n){var e;if(!m$(n))throw new Zg(oo(n),0);if(A$.includes(n.status))throw new Zg(oo(n),n.status);let t;try{t=await n.json()}catch(o){throw new lo(oo(o),o)}let r;const s=S$(n);if(s&&s.getTime()>=uA["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new aS(oo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Rn}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,l)=>o&&typeof l=="string",!0))throw new aS(oo(t),n.status,t.weak_password.reasons);throw new r$(oo(t),n.status||500,r)}const R$=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function Se(n,e,t,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[Xg]||(o[Xg]=uA["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const l=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(l.redirect_to=r.redirectTo);const c=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await C$(n,e,t+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function C$(n,e,t,r,s,o){const l=R$(e,r,s,o);let c;try{c=await n(t,Object.assign({},l))}catch(h){throw console.error(h),new Zg(oo(h),0)}if(c.ok||await dS(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(h){await dS(h)}}function nr(n){var e;let t=null;O$(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=d$(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function fS(n){const e=nr(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function li(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function P$(n){return{data:n,error:null}}function N$(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o}=n,l=Rf(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:o},h=Object.assign({},l);return{data:{properties:c,user:h},error:null}}function pS(n){return n}function O$(n){return n.access_token&&n.refresh_token&&n.expires_in}const qm=["global","local","others"];class D${constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=dA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=qm[0]){if(qm.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${qm.join(", ")}`);try{return await Se(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:li})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Rf(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N$,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(ge(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:li})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,o,l,c,h;try{const p={nextPage:null,lastPage:0,total:0},m=await Se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:pS});if(m.error)throw m.error;const y=await m.json(),w=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,E=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return E.length>0&&(E.forEach(b=>{const I=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);p[`${x}Page`]=I}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ge(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){_a(e);try{return await Se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:li})}catch(t){if(ge(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){_a(e);try{return await Se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:li})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){_a(e);try{return await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:li})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){_a(e.userId);try{const{data:t,error:r}=await Se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _deleteFactor(e){_a(e.userId),_a(e.id);try{return{data:await Se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,s,o,l,c,h;try{const p={nextPage:null,lastPage:0,total:0},m=await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:pS});if(m.error)throw m.error;const y=await m.json(),w=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,E=(h=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&h!==void 0?h:[];return E.length>0&&(E.forEach(b=>{const I=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(b.split(";")[1].split("=")[1]);p[`${x}Page`]=I}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},y),p),error:null}}catch(p){if(ge(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ge(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(ge(t))return{data:null,error:t};throw t}}}function mS(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const wa={debug:!!(globalThis&&hA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class gS extends fA{}async function L$(n,e,t){wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;e>0&&setTimeout(()=>{r.abort(),wa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve();try{return await globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new gS(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(wa.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}})}catch(s){throw(s==null?void 0:s.name)==="AbortError"?new gS(`Acquiring an exclusive Navigator LockManager lock "${n}" timed out waiting ${e}ms`):s}}function V$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pA(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function M$(n){return parseInt(n,16)}function j$(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function U$(n){var e;const{chainId:t,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:l,notBefore:c,requestId:h,resources:p,scheme:m,uri:y,version:w}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!y)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const E=pA(n.address),b=m?`${m}://${r}`:r,I=n.statement?`${n.statement}
`:"",x=`${b} wants you to sign in with your Ethereum account:
${E}

${I}`;let D=`URI: ${y}
Version: ${w}
Chain ID: ${t}${l?`
Nonce: ${l}`:""}
Issued At: ${o.toISOString()}`;if(s&&(D+=`
Expiration Time: ${s.toISOString()}`),c&&(D+=`
Not Before: ${c.toISOString()}`),h&&(D+=`
Request ID: ${h}`),p){let U=`
Resources:`;for(const O of p){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);U+=`
- ${O}`}D+=U}return`${x}
${D}`}class bt extends Error{constructor({message:e,code:t,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Xd extends bt{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function F$({error:n,options:e}){var t,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new bt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return o.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const l=window.location.hostname;if(mA(l)){if(o.rp.id!==l)return new bt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function $$({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new bt({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(mA(r)){if(t.rpId!==r)return new bt({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class B${createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const z$=new B$;function H$(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:r}=n,s=Rf(n,["challenge","user","excludeCredentials"]),o=qa(e).buffer,l=Object.assign(Object.assign({},t),{id:qa(t.id).buffer}),c=Object.assign(Object.assign({},s),{challenge:o,user:l});if(r&&r.length>0){c.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];c.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:qa(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return c}function W$(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,r=Rf(n,["challenge","allowCredentials"]),s=qa(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let l=0;l<t.length;l++){const c=t[l];o.allowCredentials[l]=Object.assign(Object.assign({},c),{id:qa(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function q$(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:fo(new Uint8Array(n.response.attestationObject)),clientDataJSON:fo(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function K$(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,r=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:fo(new Uint8Array(s.authenticatorData)),clientDataJSON:fo(new Uint8Array(s.clientDataJSON)),signature:fo(new Uint8Array(s.signature)),userHandle:s.userHandle?fo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mA(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function yS(){var n,e;return!!(zt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function G$(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xd("Browser returned unexpected credential type",e)}:{data:null,error:new Xd("Empty credential response",e)}}catch(e){return{data:null,error:F$({error:e,options:n})}}}async function J$(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Xd("Browser returned unexpected credential type",e)}:{data:null,error:new Xd("Empty credential response",e)}}catch(e){return{data:null,error:$$({error:e,options:n})}}}const Y$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Q$={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zd(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of n)if(s)for(const o in s){const l=s[o];if(l!==void 0)if(Array.isArray(l))r[o]=l;else if(t(l))r[o]=l;else if(e(l)){const c=r[o];e(c)?r[o]=Zd(c,l):r[o]=Zd(l)}else r[o]=l}return r}function X$(n,e){return Zd(Y$,n,e||{})}function Z$(n,e){return Zd(Q$,n,e||{})}class e5{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:s},o){var l;try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:h};const p=s??z$.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;if(!m.name){const y=r;if(y)m.name=`${m.id}:${y}`;else{const E=(await this.client.getUser()).data.user,b=((l=E==null?void 0:E.user_metadata)===null||l===void 0?void 0:l.name)||(E==null?void 0:E.email)||(E==null?void 0:E.id)||"User";m.name=`${m.id}:${b}`}}m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=X$(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:y,error:w}=await G$({publicKey:m,signal:p});return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}case"request":{const m=Z$(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:y,error:w}=await J$(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:p}));return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}}}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new lo("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!t)return{data:null,error:new Xu("rpId is required for WebAuthn authentication")};try{if(!yS())return{data:null,error:new lo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:s},{request:o});if(!l)return{data:null,error:c};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return ge(l)?{data:null,error:l}:{data:null,error:new lo("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},o){if(!t)return{data:null,error:new Xu("rpId is required for WebAuthn registration")};try{if(!yS())return{data:null,error:new lo("Browser does not support WebAuthn",null)};const{data:l,error:c}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(m=>{var y;return(y=m.data)===null||y===void 0?void 0:y.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:c};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:s},{create:o});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return ge(l)?{data:null,error:l}:{data:null,error:new lo("Unexpected error in register",l)}}}}V$();const t5={url:X6,storageKey:Z6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:e$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function vS(n,e,t){return await t()}const Ea={};class Zu{get jwks(){var e,t;return(t=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ea[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ea[this.storageKey]=Object.assign(Object.assign({},Ea[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},t5),e);if(this.storageKey=o.storageKey,this.instanceID=(t=Zu.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Zu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&zt()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new D$({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=dA(o.fetch),this.lock=o.lock||vS,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&zt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=L$:this.lock=vS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new e5(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:hA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mS(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=mS(this.memoryStorage)),zt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l);try{await this._notifyAllSubscribers(l.data.event,l.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}o.skipAutoInitialize||this.initialize().catch(l=>{this._debug("#initialize()","error",l)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},r="none";if(zt()&&(t=p$(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),zt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(t,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),i$(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:l,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",c),await this._saveSession(l),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ge(t)?this._returnResult({error:t}):this._returnResult({error:new lo("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:nr}),{data:l,error:c}=o;if(c||!l)return this._returnResult({data:{user:null,session:null},error:c});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(ge(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,r,s;try{let o;if("email"in e){const{email:m,password:y,options:w}=e;let E=null,b=null;this.flowType==="pkce"&&([E,b]=await va(this.storage,this.storageKey)),o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w==null?void 0:w.emailRedirectTo,body:{email:m,password:y,data:(t=w==null?void 0:w.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken},code_challenge:E,code_challenge_method:b},xform:nr})}else if("phone"in e){const{phone:m,password:y,options:w}=e;o=await Se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:y,data:(r=w==null?void 0:w.data)!==null&&r!==void 0?r:{},channel:(s=w==null?void 0:w.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:w==null?void 0:w.captchaToken}},xform:nr})}else throw new Zh("You must provide either an email or phone number and a password");const{data:l,error:c}=o;if(c||!l)return await Bt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(o){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:l,options:c}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fS})}else if("phone"in e){const{phone:o,password:l,options:c}=e;t=await Se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:l,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:fS})}else throw new Zh("You must provide either an email or phone number and a password");const{data:r,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new ya;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,s,o,l,c,h,p,m,y,w;let E,b;if("message"in e)E=e.message,b=e.signature;else{const{chain:I,wallet:x,statement:D,options:U}=e;let O;if(zt())if(typeof x=="object")O=x;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")O=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=x}const K=new URL((t=U==null?void 0:U.url)!==null&&t!==void 0?t:window.location.href),Y=await O.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Y||Y.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const X=pA(Y[0]);let P=(r=U==null?void 0:U.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!P){const C=await O.request({method:"eth_chainId"});P=M$(C)}const A={domain:K.host,address:X,statement:D,uri:K.href,version:"1",chainId:P,nonce:(s=U==null?void 0:U.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(o=U==null?void 0:U.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(c=U==null?void 0:U.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(h=U==null?void 0:U.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=U==null?void 0:U.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=U==null?void 0:U.signInWithEthereum)===null||m===void 0?void 0:m.resources};E=U$(A),b=await O.request({method:"personal_sign",params:[j$(E),X]})}try{const{data:I,error:x}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:b},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:nr});if(x)throw x;if(!I||!I.session||!I.user){const D=new ya;return this._returnResult({data:{user:null,session:null},error:D})}return I.session&&(await this._saveSession(I.session),await this._notifyAllSubscribers("SIGNED_IN",I.session)),this._returnResult({data:Object.assign({},I),error:x})}catch(I){if(ge(I))return this._returnResult({data:{user:null,session:null},error:I});throw I}}async signInWithSolana(e){var t,r,s,o,l,c,h,p,m,y,w,E;let b,I;if("message"in e)b=e.message,I=e.signature;else{const{chain:x,wallet:D,statement:U,options:O}=e;let K;if(zt())if(typeof D=="object")K=D;else{const X=window;if("solana"in X&&typeof X.solana=="object"&&("signIn"in X.solana&&typeof X.solana.signIn=="function"||"signMessage"in X.solana&&typeof X.solana.signMessage=="function"))K=X.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");K=D}const Y=new URL((t=O==null?void 0:O.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in K&&K.signIn){const X=await K.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:Y.host,uri:Y.href}),U?{statement:U}:null));let P;if(Array.isArray(X)&&X[0]&&typeof X[0]=="object")P=X[0];else if(X&&typeof X=="object"&&"signedMessage"in X&&"signature"in X)P=X;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)b=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),I=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in K)||typeof K.signMessage!="function"||!("publicKey"in K)||typeof K!="object"||!K.publicKey||!("toBase58"in K.publicKey)||typeof K.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${Y.host} wants you to sign in with your Solana account:`,K.publicKey.toBase58(),...U?["",U,""]:[""],"Version: 1",`URI: ${Y.href}`,`Issued At: ${(s=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=O==null?void 0:O.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((l=O==null?void 0:O.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((y=(m=O==null?void 0:O.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||y===void 0)&&y.length?["Resources",...O.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const X=await K.signMessage(new TextEncoder().encode(b),"utf8");if(!X||!(X instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=X}}try{const{data:x,error:D}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:fo(I)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:nr});if(D)throw D;if(!x||!x.session||!x.user){const U=new ya;return this._returnResult({data:{user:null,session:null},error:U})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:D})}catch(x){if(ge(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const t=await ro(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{if(!r&&this.flowType==="pkce")throw new o$;const{data:o,error:l}=await Se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:nr});if(await Bt(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!o||!o.session||!o.user){const c=new ya;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:l})}catch(o){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:o,nonce:l}=e,c=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:l,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:nr}),{data:h,error:p}=c;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!h||!h.session||!h.user){const m=new ya;return this._returnResult({data:{user:null,session:null},error:m})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:p})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,s,o,l;try{if("email"in e){const{email:c,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await va(this.storage,this.storageKey));const{error:y}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:y})}if("phone"in e){const{phone:c,options:h}=e,{data:p,error:m}=await Se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(l=h==null?void 0:h.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:m})}throw new Zh("You must provide either an email or phone number.")}catch(c){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(e){var t,r;try{let s,o;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:c}=await Se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:nr});if(c)throw c;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:p,session:h},error:null})}catch(s){if(ge(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,r,s,o,l;try{let c=null,h=null;this.flowType==="pkce"&&([c,h]=await va(this.storage,this.storageKey));const p=await Se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:h}),headers:this.headers,xform:P$});return!((o=p.data)===null||o===void 0)&&o.url&&zt()&&!(!((l=e.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(c){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Rn;const{error:s}=await Se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(ge(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:l}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:l,error:c}=await Se(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:c})}throw new Zh("You must provide either an email or phone number and a type")}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ro(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Bm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await ro(this.userStorage,this.storageKey+"-user");l!=null&&l.user?e.user=l.user:e.user=Wm()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};e.user=k$(e.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:li}):await this._useSession(async t=>{var r,s,o;const{data:l,error:c}=t;if(c)throw c;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rn}:await Se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:li})})}catch(t){if(ge(t))return zm(t)&&(await this._removeSession(),await Bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Rn;const l=s.session;let c=null,h=null;this.flowType==="pkce"&&e.email!=null&&([c,h]=await va(this.storage,this.storageKey));const{data:p,error:m}=await Se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:h}),jwt:l.access_token,xform:li});if(m)throw m;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(r){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rn;const t=Date.now()/1e3;let r=t,s=!0,o=null;const{payload:l}=td(e.access_token);if(l.exp&&(r=l.exp,s=r<=t),s){const{data:c,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:h}=await this._getUser(e.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(ge(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:l,error:c}=t;if(c)throw c;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Rn;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ge(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!zt())throw new ed("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ed(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new oS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ed("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oS("No code detected.");const{data:U,error:O}=await this._exchangeCodeForSession(e.code);if(O)throw O;const K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:U.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:l,expires_in:c,expires_at:h,token_type:p}=e;if(!o||!c||!l||!p)throw new ed("No session defined in URL");const m=Math.round(Date.now()/1e3),y=parseInt(c);let w=m+y;h&&(w=parseInt(h));const E=w-m;E*1e3<=Ra&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${y}s`);const b=w-y;m-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,w,m):m-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,w,m);const{data:I,error:x}=await this._getUser(o);if(x)throw x;const D={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:y,expires_at:w,refresh_token:l,token_type:p,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:e.type},error:null})}catch(r){if(ge(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ro(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o&&!zm(o))return this._returnResult({error:o});const l=(r=s.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:c}=await this.admin.signOut(l,e);if(c&&!(s$(c)&&(c.status===404||c.status===401||c.status===403)||zm(c)))return this._returnResult({error:c})}return e!=="others"&&(await this._removeSession(),await Bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=f$(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:o},error:l}=t;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await va(this.storage,this.storageKey,!0));try{return await Se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:s}=await this._useSession(async o=>{var l,c,h,p,m;const{data:y,error:w}=o;if(w)throw w;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Se(this.fetch,"GET",E,{headers:this.headers,jwt:(m=(p=y.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return zt()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ge(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:s,data:{session:o}}=t;if(s)throw s;const{options:l,provider:c,token:h,access_token:p,nonce:m}=e,y=await Se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:c,id_token:h,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:nr}),{data:w,error:E}=y;return E?this._returnResult({data:{user:null,session:null},error:E}):!w||!w.session||!w.user?this._returnResult({data:{user:null,session:null},error:new ya}):(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),this._returnResult({data:w,error:E}))}catch(s){if(await Bt(this.storage,`${this.storageKey}-code-verifier`),ge(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)throw l;return await Se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await y$(async s=>(s>0&&await g$(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:nr})),(s,o)=>{const l=200*Math.pow(2,s);return o&&Hm(o)&&Date.now()+l-r<Ra})}catch(r){if(this._debug(t,"error",r),ge(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),zt()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await ro(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ro(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Ca(this.userStorage,this.storageKey+"-user",l)),s.user=(e=l==null?void 0:l.user)!==null&&e!==void 0?e:Wm()}else if(s&&!s.user&&!s.user){const l=await ro(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Bt(this.storage,this.storageKey+"-user"),await Ca(this.storage,this.storageKey,s)):s.user=Wm()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Bm;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Bm}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Hm(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:c}=await this._getUser(s.access_token);!c&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Nf;const{data:o,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!o.session)throw new Rn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),ge(o)){const l={data:null,error:o};return Hm(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],l=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(e,t)}catch(h){o.push(h)}});if(await Promise.all(l),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bt(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await Ca(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const o=hS(s);await Ca(this.storage,this.storageKey,o)}else{const s=hS(t);await Ca(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bt(this.storage,this.storageKey),await Bt(this.storage,this.storageKey+"-code-verifier"),await Bt(this.storage,this.storageKey+"-user"),this.userStorage&&await Bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ra);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ra);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ra}ms, refresh threshold is ${Qg} ticks`),s<=Qg&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,l]=await va(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;return o?this._returnResult({data:null,error:o}):await Se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:o,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await Se(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return p?this._returnResult({data:null,error:p}):(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?q$(e.webauthn.credential_response):K$(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:h}=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:h}))})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:o}=t;if(o)return this._returnResult({data:null,error:o});const l=await Se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:c}=l;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:H$(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:W$(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,r,s,o;if(e)try{const{payload:E}=td(e);let b=null;E.aal&&(b=E.aal);let I=b;const{data:{user:x},error:D}=await this.getUser(e);if(D)return this._returnResult({data:null,error:D});((r=(t=x==null?void 0:x.factors)===null||t===void 0?void 0:t.filter(K=>K.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(I="aal2");const O=E.amr||[];return{data:{currentLevel:b,nextLevel:I,currentAuthenticationMethods:O},error:null}}catch(E){if(ge(E))return this._returnResult({data:null,error:E});throw E}const{data:{session:l},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=td(l.access_token);let p=null;h.aal&&(p=h.aal);let m=p;((o=(s=l.user.factors)===null||s===void 0?void 0:s.filter(E=>E.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(m="aal2");const w=h.amr||[];return{data:{currentLevel:p,nextLevel:m,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await Se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Rn})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Rn});const l=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&zt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Rn});const l=await Se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return l.data&&l.data.redirect_url&&zt()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;return r?this._returnResult({data:null,error:r}):t?await Se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Rn})})}catch(e){if(ge(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?(await Se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rn})})}catch(t){if(ge(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(c=>c.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(c=>c.kid===e),r&&this.jwks_cached_at+n$>s)return r;const{data:o,error:l}=await Se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(c=>c.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:E,error:b}=await this.getSession();if(b||!E.session)return this._returnResult({data:null,error:b});r=E.session.access_token}const{header:s,payload:o,signature:l,raw:{header:c,payload:h}}=td(r);t!=null&&t.allowExpired||b$(o.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!p){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:o,header:s,signature:l},error:null}}const m=I$(s.alg),y=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,y,l,h$(`${c}.${h}`)))throw new ey("Invalid JWT signature");return{data:{claims:o,header:s,signature:l},error:null}}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}}Zu.nextInstanceID={};const n5=Zu,r5="2.97.0";let vu="";typeof Deno<"u"?vu="deno":typeof document<"u"?vu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vu="react-native":vu="node";const s5={"X-Client-Info":`supabase-js-${vu}/${r5}`},i5={headers:s5},o5={schema:"public"},a5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},l5={};function ec(n){"@babel/helpers - typeof";return ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ec(n)}function u5(n,e){if(ec(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function c5(n){var e=u5(n,"string");return ec(e)=="symbol"?e:e+""}function h5(n,e,t){return(e=c5(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _S(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ft(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_S(Object(t),!0).forEach(function(r){h5(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):_S(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}const d5=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),f5=()=>Headers,p5=(n,e,t)=>{const r=d5(t),s=f5();return async(o,l)=>{var c;const h=(c=await e())!==null&&c!==void 0?c:n;let p=new s(l==null?void 0:l.headers);return p.has("apikey")||p.set("apikey",n),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(o,ft(ft({},l),{},{headers:p}))}};function m5(n){return n.endsWith("/")?n:n+"/"}function g5(n,e){var t,r;const{db:s,auth:o,realtime:l,global:c}=n,{db:h,auth:p,realtime:m,global:y}=e,w={db:ft(ft({},h),s),auth:ft(ft({},p),o),realtime:ft(ft({},m),l),storage:{},global:ft(ft(ft({},y),c),{},{headers:ft(ft({},(t=y==null?void 0:y.headers)!==null&&t!==void 0?t:{}),(r=c==null?void 0:c.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?w.accessToken=n.accessToken:delete w.accessToken,w}function y5(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(m5(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var v5=class extends n5{constructor(n){super(n)}},_5=class{constructor(n,e,t){var r,s;this.supabaseUrl=n,this.supabaseKey=e;const o=y5(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const l=`sb-${o.hostname.split(".")[0]}-auth-token`,c={db:o5,realtime:l5,auth:ft(ft({},a5),{},{storageKey:l}),global:i5},h=g5(t??{},c);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=h.auth)!==null&&p!==void 0?p:{},this.headers,h.global.fetch)}this.fetch=p5(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(ft({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new s6(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new Q6(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Y3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,storageKey:o,flowType:l,lock:c,debug:h,throwOnError:p},m,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new v5({url:this.authUrl.href,headers:ft(ft({},w),m),storageKey:o,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:r,userStorage:s,flowType:l,lock:c,debug:h,throwOnError:p,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(E=>E.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new E6(this.realtimeUrl.href,ft(ft({},n),{},{params:ft(ft({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const w5=(n,e,t)=>new _5(n,e,t);function E5(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}E5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const T5="https://nllxvstsyasnuoxzotfy.supabase.co",S5="sb_publishable_059xq8K8zTvm9Mmmukzf3A_NMYTcWMS",wS=w5(T5,S5);function b5(){const n=nl(),e=Ts(),[t,r]=j.useState([]),[s,o]=j.useState({name:"",price:"",image:"",badge:"",category:""}),[l,c]=j.useState(null),[h,p]=j.useState(!0),[m,y]=j.useState(!1),[w,E]=j.useState(null),[b,I]=j.useState(!0),[x,D]=j.useState(null),U=gv(Yd,"products");j.useEffect(()=>{const C=WU(Hg,V=>{V?(D(V),I(!1)):(D(null),I(!1),n("/login",{replace:!0,state:{from:e.pathname}}))});return()=>C()},[n,e.pathname]);const O=async()=>{p(!0),E(null);try{const V=(await _v(U)).docs.map(M=>{const B=M.data();return{id:M.id,...B}});r(V)}catch(C){console.error(C),E("Failed to load products from Firebase.")}finally{p(!1)}},K=async C=>{const V="product-images",M=C.name.split(".").pop()||"jpg",B=`products/${Date.now()}-${Math.random().toString(36).slice(2)}.${M}`,{error:L}=await wS.storage.from(V).upload(B,C,{cacheControl:"3600",upsert:!1});if(L)throw console.error(L),new Error("Image upload to Supabase failed.");const{data:Fe}=wS.storage.from(V).getPublicUrl(B);if(!(Fe!=null&&Fe.publicUrl))throw new Error("Could not get public URL from Supabase.");return Fe.publicUrl};j.useEffect(()=>{!b&&x&&O()},[b,x]);const Y=(C,V)=>{o(M=>({...M,[C]:V}))},X=async C=>{if(C.preventDefault(),!s.name||!s.price||!s.category){E("Please fill in all required fields.");return}if(!l){E("Please upload a product image.");return}y(!0),E(null);try{const V=s.price.startsWith("")?s.price:`${s.price.replace(/^[^0-9]*/,"")}`,M=await K(l);await B4(U,{name:s.name,price:V,image:M,badge:s.badge||void 0,category:s.category}),o({name:"",price:"",image:"",badge:"",category:""}),c(null),await O()}catch(V){console.error(V),E("Failed to save product to Firebase.")}finally{y(!1)}},P=async()=>{await qU(Hg)},A=async C=>{try{await $4(ok(Yd,"products",C)),r(V=>V.filter(M=>M.id!==C))}catch(V){console.error(V),E("Failed to delete product.")}};return b?k.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:k.jsx("p",{className:"text-gray-400 tracking-widest text-sm",children:"CHECKING ADMIN SESSION..."})}):x?k.jsx("div",{className:"bg-black text-white pt-32 pb-24 min-h-screen",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12 space-y-12",children:[k.jsxs("div",{className:"flex items-start justify-between gap-4",children:[k.jsxs("div",{children:[k.jsx("h1",{className:"text-4xl md:text-5xl font-semibold tracking-tight",children:"Admin Panel"}),k.jsx("p",{className:"text-gray-400 mt-2 tracking-widest text-xs",children:"MANAGE PRODUCTS FROM FIREBASE"})]}),k.jsxs("div",{className:"text-right space-y-2",children:[k.jsx("p",{className:"text-[11px] text-gray-500 tracking-widest",children:x.email}),k.jsx("button",{onClick:P,className:"text-xs tracking-widest border border-white/30 px-4 py-1 hover:bg-white hover:text-black transition-colors",children:"LOG OUT"})]})]}),k.jsxs(ve.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-zinc-900 border border-white/10 p-6 md:p-8",children:[k.jsx("h2",{className:"text-xl font-semibold mb-4 tracking-wide",children:"Add / Edit Product"}),w&&k.jsx("div",{className:"mb-4 text-sm text-red-400 bg-red-950/40 border border-red-500/40 px-4 py-2",children:w}),k.jsxs("form",{onSubmit:X,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Name *"}),k.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.name,onChange:C=>Y("name",C.target.value),placeholder:"Infinity Vibe Essential Hoodie"})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Price ( INR) *"}),k.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.price,onChange:C=>Y("price",C.target.value),placeholder:"189"})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Product Image *"}),k.jsx("input",{type:"file",accept:"image/*",className:"w-full text-sm text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-none file:border-0 file:text-xs file:tracking-widest file:bg-white file:text-black hover:file:bg-gray-200",onChange:C=>{var M;const V=((M=C.target.files)==null?void 0:M[0])||null;c(V)}}),l&&k.jsxs("p",{className:"text-[11px] text-gray-500 tracking-widest",children:["Selected: ",l.name]})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Category *"}),k.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.category,onChange:C=>Y("category",C.target.value),placeholder:"Hoodies"})]}),k.jsxs("div",{className:"space-y-2 md:col-span-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Badge (optional)"}),k.jsx("input",{className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s.badge,onChange:C=>Y("badge",C.target.value),placeholder:"NEW DROP / LIMITED / BESTSELLER"})]}),k.jsx("div",{className:"md:col-span-2 flex justify-end",children:k.jsx("button",{type:"submit",disabled:m,className:"px-6 py-2 bg-white text-black text-xs tracking-widest font-semibold hover:bg-gray-200 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:m?"SAVING...":"SAVE PRODUCT"})})]})]}),k.jsxs(ve.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"bg-zinc-900 border border-white/10 p-6 md:p-8",children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsx("h2",{className:"text-xl font-semibold tracking-wide",children:"Products"}),k.jsx("button",{onClick:O,className:"text-xs tracking-widest border border-white/30 px-4 py-1 hover:bg-white hover:text-black transition-colors",children:"REFRESH"})]}),h?k.jsx("p",{className:"text-gray-400 text-sm",children:"Loading products from Firebase..."}):t.length===0?k.jsx("p",{className:"text-gray-500 text-sm",children:"No products found. Add your first one above."}):k.jsx("div",{className:"overflow-x-auto",children:k.jsxs("table",{className:"w-full text-left text-sm border-collapse",children:[k.jsx("thead",{className:"border-b border-white/20 text-xs uppercase tracking-widest text-gray-400",children:k.jsxs("tr",{children:[k.jsx("th",{className:"py-2 pr-4",children:"Name"}),k.jsx("th",{className:"py-2 pr-4",children:"Price"}),k.jsx("th",{className:"py-2 pr-4",children:"Category"}),k.jsx("th",{className:"py-2 pr-4",children:"Badge"}),k.jsx("th",{className:"py-2 text-right",children:"Actions"})]})}),k.jsx("tbody",{children:t.map(C=>k.jsxs("tr",{className:"border-b border-white/5",children:[k.jsx("td",{className:"py-2 pr-4",children:C.name}),k.jsx("td",{className:"py-2 pr-4",children:C.price}),k.jsx("td",{className:"py-2 pr-4",children:C.category}),k.jsx("td",{className:"py-2 pr-4",children:C.badge||"-"}),k.jsx("td",{className:"py-2 text-right",children:k.jsx("button",{onClick:()=>A(C.id),className:"text-xs tracking-widest text-red-400 hover:text-red-300",children:"DELETE"})})]},C.id))})]})})]})]})}):null}function I5(){var w;const n=nl(),e=Ts(),[t,r]=j.useState(""),[s,o]=j.useState(""),[l,c]=j.useState(!1),[h,p]=j.useState(null),m=((w=e.state)==null?void 0:w.from)||"/admin",y=async E=>{E.preventDefault(),p(null),c(!0);try{await BU(Hg,t,s),n(m,{replace:!0})}catch(b){console.error(b),p("Invalid email or password.")}finally{c(!1)}};return k.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center px-6",children:k.jsxs("div",{className:"w-full max-w-md bg-zinc-900 border border-white/10 p-8",children:[k.jsx("h1",{className:"text-3xl font-semibold mb-2 tracking-tight",children:"Admin Login"}),k.jsx("p",{className:"text-xs text-gray-400 tracking-widest mb-6",children:"SIGN IN TO MANAGE PRODUCTS"}),h&&k.jsx("div",{className:"mb-4 text-sm text-red-400 bg-red-950/40 border border-red-500/40 px-4 py-2",children:h}),k.jsxs("form",{onSubmit:y,className:"space-y-4",children:[k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Email"}),k.jsx("input",{type:"email",className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:t,onChange:E=>r(E.target.value),placeholder:"admin@example.com"})]}),k.jsxs("div",{className:"space-y-2",children:[k.jsx("label",{className:"text-xs tracking-widest text-gray-400 uppercase",children:"Password"}),k.jsx("input",{type:"password",className:"w-full bg-black border border-white/20 px-3 py-2 text-sm focus:outline-none focus:border-white",value:s,onChange:E=>o(E.target.value),placeholder:""})]}),k.jsx("button",{type:"submit",disabled:l,className:"w-full mt-4 px-6 py-2 bg-white text-black text-xs tracking-widest font-semibold hover:bg-gray-200 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:l?"SIGNING IN...":"SIGN IN"})]}),k.jsx("p",{className:"mt-4 text-[11px] text-gray-500 tracking-widest",children:"Use the admin email/password you created in the Firebase console (Email/Password auth)."})]})})}const x5="@infinity_vibe.1",ES="+91 6304-776448",k5="https://maps.app.goo.gl/WrcUHpUHRtxuVjUd8";function A5(){return k.jsx("div",{className:"bg-black text-white pt-32 pb-24 min-h-screen",children:k.jsxs("div",{className:"container mx-auto px-6 lg:px-12",children:[k.jsxs(ve.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",children:[k.jsx("p",{className:"text-xs tracking-[0.3em] text-gray-500 mb-3",children:"GET IN TOUCH"}),k.jsxs("h1",{className:"text-4xl md:text-6xl tracking-tight",children:["Contact ",k.jsx("span",{className:"font-light",children:"Infinity Vibe"})]}),k.jsx("p",{className:"mt-4 text-gray-400 max-w-xl",children:"Questions, collaborations, or custom pieces? Reach out directly via phone or Instagram, or find us via the map below."})]}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12 items-start",children:[k.jsxs(ve.div,{className:"space-y-8",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:[k.jsxs("div",{children:[k.jsx("h2",{className:"text-sm tracking-[0.3em] text-gray-500 mb-2",children:"PHONE"}),k.jsx("a",{href:`tel:${ES.replace(/[^+\d]/g,"")}`,className:"text-xl tracking-wide hover:underline",children:ES})]}),k.jsxs("div",{children:[k.jsx("h2",{className:"text-sm tracking-[0.3em] text-gray-500 mb-2",children:"INSTAGRAM"}),k.jsx("a",{href:"https://instagram.com/infinity_vibe.1",target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 text-xl tracking-wide hover:underline",children:x5})]}),k.jsxs("div",{children:[k.jsx("h2",{className:"text-sm tracking-[0.3em] text-gray-500 mb-2",children:"LOCATION"}),k.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Tap below to open the exact Infinity Vibe location in Google Maps."}),k.jsx("a",{href:k5,target:"_blank",rel:"noreferrer",className:"inline-block px-6 py-2 border border-white text-xs tracking-[0.3em] hover:bg-white hover:text-black transition-colors",children:"OPEN IN MAPS"})]})]}),k.jsx(ve.div,{className:"lg:col-span-2",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.15},children:k.jsx("div",{className:"aspect-[16/9] w-full overflow-hidden border border-white/10 bg-zinc-900",children:k.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d3794.3128973411585!2d79.5623948!3d18.0106768!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a3345005bfc560f%3A0xcb3acd157904184f!2sInfinity%20Vibe!5e0!3m2!1sen!2sin!4v1772003821021!5m2!1sen!2sin",title:"Infinity Vibe Location",className:"w-full h-full border-0",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})})})]})]})})}function R5(){return j.useEffect(()=>{document.documentElement.style.scrollBehavior="smooth"},[]),k.jsxs("div",{className:"min-h-screen bg-black text-white antialiased flex flex-col",children:[k.jsx(N2,{}),k.jsx("main",{className:"flex-grow",children:k.jsxs(kC,{children:[k.jsx(Ta,{path:"/",element:k.jsx(W3,{})}),k.jsx(Ta,{path:"/products",element:k.jsx(q3,{})}),k.jsx(Ta,{path:"/login",element:k.jsx(I5,{})}),k.jsx(Ta,{path:"/admin",element:k.jsx(b5,{})}),k.jsx(Ta,{path:"/contact",element:k.jsx(A5,{})})]})}),k.jsx(O2,{})]})}CR.createRoot(document.getElementById("root")).render(k.jsx(QC,{children:k.jsx(R5,{})}));
